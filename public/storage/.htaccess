# Разрешаем доступ к файлам в папке storage
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Разрешаем доступ к файлам изображений, видео и документов
    <FilesMatch "\.(jpg|jpeg|png|gif|webp|svg|ico|mp4|avi|mov|wmv|flv|webm|ogg|pdf|doc|docx|xls|xlsx|ppt|pptx|txt)$">
        Order Allow,Deny
        Allow from all
    </FilesMatch>
    
    # Устанавливаем правильные заголовки для изображений
    <FilesMatch "\.(jpg|jpeg|png|gif|webp|svg|ico)$">
        Header set Cache-Control "public, max-age=31536000"
        Header set Access-Control-Allow-Origin "*"
    </FilesMatch>
    
    # Устанавливаем правильные заголовки для видео
    <FilesMatch "\.(mp4|avi|mov|wmv|flv|webm|ogg)$">
        Header set Cache-Control "public, max-age=31536000"
        Header set Access-Control-Allow-Origin "*"
        Header set Accept-Ranges "bytes"
    </FilesMatch>
    
    # Устанавливаем правильные заголовки для документов
    <FilesMatch "\.(pdf|doc|docx|xls|xlsx|ppt|pptx|txt)$">
        Header set Cache-Control "private, max-age=0, must-revalidate"
        Header set Content-Disposition "inline"
    </FilesMatch>
</IfModule>

# Альтернативная конфигурация для Apache 2.4+
<IfModule mod_authz_core.c>
    <FilesMatch "\.(jpg|jpeg|png|gif|webp|svg|ico|mp4|avi|mov|wmv|flv|webm|ogg|pdf|doc|docx|xls|xlsx|ppt|pptx|txt)$">
        Require all granted
    </FilesMatch>
</IfModule>

# Для старых версий Apache
<IfModule !mod_authz_core.c>
    <FilesMatch "\.(jpg|jpeg|png|gif|webp|svg|ico|mp4|avi|mov|wmv|flv|webm|ogg|pdf|doc|docx|xls|xlsx|ppt|pptx|txt)$">
        Order Allow,Deny
        Allow from all
    </FilesMatch>
</IfModule>
