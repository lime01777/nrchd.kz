import{r as o,j as e,a as t,y as d}from"./app-DrLP75hb.js";import{A as S}from"./AdminLayout-CeOFLcA_.js";import{S as k}from"./StatusBadge-B_0hE7M1.js";import{F as p,a as _,b as R,c as j,d as C,e as A}from"./TagIcon-24nA2lqo.js";import{F as $,a as D,b as E}from"./TrashIcon-CAHxh7Ls.js";import"./transition-CQeU3BNt.js";import"./use-is-mounted-DAmcw5_7.js";function z({news:a,filters:r}){const[c,l]=o.useState((r==null?void 0:r.search)||""),[i,m]=o.useState((r==null?void 0:r.status)||""),[x,u]=o.useState((r==null?void 0:r.category)||""),[h,y]=o.useState(!1),f=s=>{s.preventDefault(),d.get(route("admin.news"),{search:c,status:i,category:x},{preserveState:!0,replace:!0})},v=()=>{l(""),m(""),u(""),d.get(route("admin.news"),{},{preserveState:!0,replace:!0})},N=s=>{confirm("Вы уверены, что хотите удалить эту новость?")&&d.delete(route("admin.news.destroy",s))},g=s=>s?new Date(s).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",w=()=>{const s=new Set;return a.data.forEach(n=>{Array.isArray(n.category)?n.category.forEach(F=>s.add(F)):n.category&&s.add(n.category)}),Array.from(s).sort()},b=s=>Array.isArray(s.images)?s.images.length:0;return e.jsx(S,{children:e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Новости"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Управление новостями и публикациями"})]}),e.jsxs(t,{href:route("admin.news.create"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Создать новость"]})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:c,onChange:s=>l(s.target.value),placeholder:"Поиск по заголовку или содержимому...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})}),e.jsxs("button",{type:"button",onClick:()=>y(!h),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Фильтры"]}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Найти"})]}),h&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Статус"}),e.jsxs("select",{value:i,onChange:s=>m(s.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"Все статусы"}),e.jsx("option",{value:"Черновик",children:"Черновик"}),e.jsx("option",{value:"Опубликовано",children:"Опубликовано"}),e.jsx("option",{value:"Запланировано",children:"Запланировано"}),e.jsx("option",{value:"Архив",children:"Архив"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Категория"}),e.jsxs("select",{value:x,onChange:s=>u(s.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"Все категории"}),w().map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",onClick:v,className:"w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Сбросить"})})]})]})}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:a.data.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400",children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Новости не найдены"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r!=null&&r.search||r!=null&&r.status||r!=null&&r.category?"Попробуйте изменить фильтры.":"Начните с создания первой новости."}),!(r!=null&&r.search)&&!(r!=null&&r.status)&&!(r!=null&&r.category)&&e.jsx("div",{className:"mt-6",children:e.jsxs(t,{href:route("admin.news.create"),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Создать новость"]})})]}):e.jsx("ul",{className:"divide-y divide-gray-200",children:a.data.map(s=>e.jsx("li",{className:"hover:bg-gray-50 transition-colors",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 truncate",children:s.title}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:e.jsx(k,{status:s.status})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.content?s.content.replace(/<[^>]*>/g,"").substring(0,150)+"...":"Нет содержимого"}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:g(s.created_at)})]}),s.publish_date&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:["Публикация: ",g(s.publish_date)]})]}),b(s)>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[b(s)," медиа"]})]}),Array.isArray(s.category)&&s.category.length>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:s.category.join(", ")})]})]})]}),e.jsxs("div",{className:"ml-4 flex items-center space-x-2",children:[e.jsx(t,{href:`/news/${s.slug}`,target:"_blank",className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",title:"Просмотреть",children:e.jsx($,{className:"w-4 h-4"})}),e.jsx(t,{href:route("admin.news.edit",s.id),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",title:"Редактировать",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>N(s.id),className:"inline-flex items-center px-3 py-1 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50",title:"Удалить",children:e.jsx(E,{className:"w-4 h-4"})})]})]})})},s.id))})}),a.data.length>0&&a.last_page>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Показано ",a.from," - ",a.to," из ",a.total," результатов"]}),e.jsxs("div",{className:"flex space-x-2",children:[a.prev_page_url&&e.jsx(t,{href:a.prev_page_url,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Назад"}),a.next_page_url&&e.jsx(t,{href:a.next_page_url,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Вперед"})]})]})]})})})}export{z as default};
