import{r as i,b as E,j as a}from"./app-BFkpbt5u.js";import{F,a as j}from"./FileAccordTitle-DVjFieaK.js";function y({sections:r,bgColor:v="bg-green-100",folder:n="",title:o="",name:b="",onVideoClick:m,defaultOpen:d=!1}){const[f,h]=i.useState([]),[w,c]=i.useState(!1),[x,N]=i.useState(null),[u,g]=i.useState({});i.useEffect(()=>{if(r&&r.length>0){h(r);const e={};r.forEach((t,s)=>{e[s]=s===0?d:!1}),g(e),c(!1)}else{c(!0);const e=window.location.origin,t=new URLSearchParams;if(n){const s=n.replace(/\\/g,"/");t.append("folder",s)}o&&t.append("title",o),E.get(`${e}/api/files?${t.toString()}`).then(s=>{h(s.data);const l={};s.data.forEach((A,p)=>{l[p]=p===0?d:!1}),g(l),c(!1)}).catch(s=>{console.error("Ошибка при загрузке файлов:",s),N("Не удалось загрузить файлы. Пожалуйста, попробуйте позже."),c(!1)})}},[r,n,o,d]);const S=e=>{g(t=>({...t,[e]:!t[e]}))};return w?a.jsx("div",{className:"text-center py-4",children:"Загрузка файлов..."}):x?a.jsx("div",{className:"text-center py-4 text-red-500",children:x}):f.length===0?null:a.jsx("div",{className:"flex flex-wrap -mx-4",children:a.jsx("div",{className:"w-full px-4",children:a.jsx("div",{className:`rounded-lg overflow-hidden ${v}`,children:f.map((e,t)=>a.jsxs("div",{children:[a.jsx(F,{title:e.title,isOpen:u[t],toggleOpen:()=>S(t)}),u[t]&&a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.documents&&e.documents.map((s,l)=>a.jsx("div",{className:"bg-white rounded-lg shadow p-3",children:a.jsx(j,{...s,onVideoClick:m})},l)),e.files&&e.files.map((s,l)=>a.jsx("div",{className:"bg-white rounded-lg shadow p-3",children:a.jsx(j,{file:s,onVideoClick:m})},l))]})})]},t))})})})}export{y as F};
