import{W as b,r as v,j as e,Y as k,a as y}from"./app-CnVl_z9i.js";import{A as N}from"./AdminLayout-B9z4fXrg.js";import{T as g,I as o}from"./TextInput-Cedg6Vng.js";import{I as i}from"./InputLabel-CztxQMyQ.js";import{T as u}from"./Textarea-Bvfi2fLk.js";import{G as w}from"./iconBase-DJYZ1rEU.js";import"./transition-wBG5tHZ_.js";import"./use-is-mounted-CZpqAyfQ.js";function h(r){return w({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286zm1.634-.736L5.5 3.956h-.049l-.679 2.022z"},child:[]},{tag:"path",attr:{d:"M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm7.138 9.995q.289.451.63.846c-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6 6 0 0 1-.415-.492 2 2 0 0 1-.94.31"},child:[]}]})(r)}function A({translation:r,groups:p}){const{data:a,setData:n,put:f,processing:c,errors:l}=b({key:r.key,group:r.group,ru:r.ru,en:r.en||"",kk:r.kk||""}),[d,m]=v.useState(!1),j=s=>{s.preventDefault(),f(route("admin.translations.update",r.id))},x=s=>{confirm(`Автоматически перевести на ${s==="en"?"английский":"казахский"} с русского?`)&&(m(!0),fetch(route("admin.translations.auto-translate-key",{id:r.id,target_locale:s})).then(t=>t.json()).then(t=>{t.success?(n(s,t.translation),alert(`Перевод на ${s==="en"?"английский":"казахский"} успешно обновлен`)):alert("Ошибка при автоматическом переводе: "+t.message)}).catch(t=>{console.error("Error:",t),alert("Произошла ошибка при запросе перевода")}).finally(()=>{m(!1)}))};return e.jsxs(N,{children:[e.jsx(k,{title:"Редактирование перевода"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Редактирование перевода"}),e.jsx(y,{href:route("admin.translations.index"),className:"inline-flex items-center px-4 py-2 bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition ease-in-out duration-150",children:"Назад к списку"})]}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"key",value:"Ключ *"}),e.jsx(g,{id:"key",type:"text",name:"key",value:a.key,className:"mt-1 block w-full",onChange:s=>n("key",s.target.value),required:!0}),e.jsx(o,{message:l.key,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"group",value:"Группа *"}),e.jsx("div",{className:"mt-1",children:e.jsxs("select",{id:"group",name:"group",value:a.group,onChange:s=>n("group",s.target.value),className:"w-full border-gray-300 focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 rounded-md shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"Выберите группу"}),p.map((s,t)=>e.jsx("option",{value:s,children:s},t)),e.jsx("option",{value:"new_group",children:"+ Создать новую группу"})]})}),a.group==="new_group"&&e.jsx(g,{type:"text",className:"mt-2 block w-full",placeholder:"Введите название новой группы",onChange:s=>n("group",s.target.value),value:"",autoFocus:!0}),e.jsx(o,{message:l.group,className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(i,{htmlFor:"ru",value:"Русский текст *"}),e.jsx(u,{id:"ru",name:"ru",value:a.ru,className:"mt-1 block w-full",onChange:s=>n("ru",s.target.value),required:!0,rows:3}),e.jsx(o,{message:l.ru,className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(i,{htmlFor:"en",value:"Английский текст"}),e.jsxs("button",{type:"button",className:"inline-flex items-center text-sm px-3 py-1 bg-green-600 border border-transparent rounded-md text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition ease-in-out duration-150",onClick:()=>x("en"),disabled:d||!a.ru,children:[e.jsx(h,{className:"mr-1"}),"Автоперевод"]})]}),e.jsx(u,{id:"en",name:"en",value:a.en,className:"mt-1 block w-full",onChange:s=>n("en",s.target.value),rows:3}),e.jsx(o,{message:l.en,className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(i,{htmlFor:"kk",value:"Казахский текст"}),e.jsxs("button",{type:"button",className:"inline-flex items-center text-sm px-3 py-1 bg-green-600 border border-transparent rounded-md text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition ease-in-out duration-150",onClick:()=>x("kk"),disabled:d||!a.ru,children:[e.jsx(h,{className:"mr-1"}),"Автоперевод"]})]}),e.jsx(u,{id:"kk",name:"kk",value:a.kk,className:"mt-1 block w-full",onChange:s=>n("kk",s.target.value),rows:3}),e.jsx(o,{message:l.kk,className:"mt-2"})]})]}),e.jsx("div",{className:"flex items-center justify-end mt-6",children:e.jsx("button",{type:"submit",disabled:c,className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150",children:c?"Сохранение...":"Сохранить изменения"})})]})]})})})})]})}export{A as default};
