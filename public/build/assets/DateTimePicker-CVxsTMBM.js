import{r as h,j as e}from"./app-DrLP75hb.js";import{I as b}from"./InputLabel-C6KQ6J0F.js";import{I as f}from"./TextInput-DF9cy_aJ.js";function N({existingMedia:r=[],onMediaUploaded:l,onMediaRemoved:c,maxFiles:i=20,className:x=""}){const[p,n]=h.useState(!1),d=h.useCallback(s=>{const u=Array.from(s.target.files);if(u.length===0)return;n(!0);const m=u.map((t,o)=>({id:`temp-${Date.now()}-${o}`,path:URL.createObjectURL(t),type:t.type.startsWith("video/")?"video":"image",name:t.name,size:t.size,isUploading:!0}));setTimeout(()=>{const t=m.map(o=>({...o,isUploading:!1}));l&&l(t),n(!1)},2e3)},[l]),a=s=>{c&&c(s)};return e.jsxs("div",{className:x,children:[e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer border-gray-300 hover:border-gray-400",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:d,className:"hidden",id:"media-upload"}),e.jsxs("label",{htmlFor:"media-upload",className:"cursor-pointer",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Нажмите для выбора файлов"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Поддерживаются изображения и видео до 50MB"})]})]})]}),r.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Загруженные файлы:"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:r.map(s=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:s.type==="video"?e.jsx("video",{src:s.path,className:"w-full h-full object-cover",muted:!0}):e.jsx("img",{src:s.path,alt:s.name,className:"w-full h-full object-cover"})}),s.isUploading&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsx("div",{className:"text-white text-sm",children:"Загрузка..."})}),e.jsx("button",{type:"button",onClick:()=>a(s.id),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"×"}),e.jsx("div",{className:"mt-1 text-xs text-gray-600 truncate",children:s.name})]},s.id))})]})]})}function w({selectedTags:r=[],onTagsChange:l,availableTags:c=[],maxTags:i=10,placeholder:x="Добавить теги...",className:p=""}){const[n,d]=h.useState(""),a=t=>{if(r.length>=i){alert(`Максимальное количество тегов: ${i}`);return}r.includes(t)||l([...r,t]),d("")},s=t=>{l(r.filter(o=>o!==t))},u=t=>{if(t.key==="Enter"){t.preventDefault();const o=n.trim();o&&a(o)}},m=c.filter(t=>t.toLowerCase().includes(n.toLowerCase())&&!r.includes(t));return e.jsxs("div",{className:p,children:[e.jsx(b,{value:"Теги"}),r.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.map(t=>e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[t,e.jsx("button",{type:"button",onClick:()=>s(t),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},t))}),e.jsx("input",{type:"text",value:n,onChange:t=>d(t.target.value),onKeyPress:u,placeholder:x,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),n&&m.length>0&&e.jsx("div",{className:"mt-2 border border-gray-200 rounded-md bg-white shadow-lg max-h-32 overflow-y-auto",children:m.slice(0,5).map(t=>e.jsx("button",{type:"button",onClick:()=>a(t),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100",children:t},t))}),e.jsx(f,{message:null,className:"mt-2"})]})}function k({selectedCategories:r=[],onCategoriesChange:l,availableCategories:c=[],maxCategories:i=5,placeholder:x="Выберите категории...",className:p=""}){const[n,d]=h.useState(""),a=t=>{if(r.includes(t))l(r.filter(o=>o!==t));else{if(r.length>=i){alert(`Максимальное количество категорий: ${i}`);return}l([...r,t])}},s=()=>{const t=c.slice(0,i);l(t)},u=()=>{l([])},m=c.filter(t=>t.toLowerCase().includes(n.toLowerCase()));return e.jsxs("div",{className:p,children:[e.jsx(b,{value:"Категории"}),e.jsx("input",{type:"text",value:n,onChange:t=>d(t.target.value),placeholder:"Поиск категорий...",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:s,className:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Выбрать все"}),e.jsx("button",{type:"button",onClick:u,className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Очистить"})]}),e.jsx("div",{className:"mt-3 max-h-40 overflow-y-auto border border-gray-200 rounded-md",children:m.map(t=>e.jsxs("label",{className:"flex items-center px-3 py-2 hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:r.includes(t),onChange:()=>a(t),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:t})]},t))}),r.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Выбрано: ",r.length,"/",i]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(t=>e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[t,e.jsx("button",{type:"button",onClick:()=>a(t),className:"ml-1 text-green-600 hover:text-green-800",children:"×"})]},t))})]}),e.jsx(f,{message:null,className:"mt-2"})]})}function S({value:r,onChange:l,minDate:c,error:i,className:x=""}){const p=a=>{l(a.target.value)},n=a=>{if(!a)return"";const s=new Date(a),u=s.getFullYear(),m=String(s.getMonth()+1).padStart(2,"0"),t=String(s.getDate()).padStart(2,"0"),o=String(s.getHours()).padStart(2,"0"),g=String(s.getMinutes()).padStart(2,"0");return`${u}-${m}-${t}T${o}:${g}`},d=()=>c?n(c):"";return e.jsxs("div",{className:x,children:[e.jsx(b,{value:"Дата и время публикации"}),e.jsx("input",{type:"datetime-local",value:n(r),onChange:p,min:d(),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),e.jsx(f,{message:i,className:"mt-2"})]})}export{k as C,S as D,N as M,w as T};
