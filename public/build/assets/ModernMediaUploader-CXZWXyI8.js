import{r as d,j as e}from"./app-Cple6JDE.js";function v({existingMedia:o=[],onMediaUploaded:a,onMediaRemoved:c,maxFiles:g=20,className:m=""}){const[f,i]=d.useState(!1),u=d.useCallback(async t=>{const r=Array.from(t.target.files);if(r.length!==0){i(!0);try{const s=new FormData;r.forEach((x,p)=>{s.append(`media_files[${p}]`,x)});const n=await fetch("/admin/news/upload-media",{method:"POST",body:s,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}});if(!n.ok)throw new Error("Ошибка загрузки файлов");const l=await n.json();a&&l.success&&l.media&&a(l.media)}catch(s){console.error("Ошибка загрузки медиа:",s),alert("Ошибка загрузки файлов: "+s.message)}finally{i(!1)}}},[a]),h=t=>{c&&c(t)};return e.jsxs("div",{className:m,children:[e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer border-gray-300 hover:border-gray-400",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:u,className:"hidden",id:"media-upload"}),e.jsxs("label",{htmlFor:"media-upload",className:"cursor-pointer",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Нажмите для выбора файлов"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Поддерживаются изображения и видео до 50MB"})]})]})]}),o.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Загруженные файлы:"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:o.map((t,r)=>{const s=t.url||t.path;return e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:t.type==="video"?e.jsx("video",{src:s,className:"w-full h-full object-cover",muted:!0,controls:!0}):e.jsx("img",{src:s,alt:t.name,className:"w-full h-full object-cover"})}),t.isUploading&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsx("div",{className:"text-white text-sm",children:"Загрузка..."})}),e.jsx("button",{type:"button",onClick:()=>h(t.id),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"×"}),e.jsx("div",{className:"mt-1 text-xs text-gray-600 truncate",children:t.name})]},t.id||`media-${r}`)})})]})]})}export{v as M};
