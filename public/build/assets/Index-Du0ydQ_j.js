import{q as v,W as N,r as k,j as e,Y as S,a as b}from"./app-td2XQ0C5.js";import{L}from"./LayoutNews-DWXq9JYi.js";import{N as C}from"./NewsImageSlider-DXpnMw8i.js";import{i as E}from"./mediaUtils-oRnee45q.js";import{t as I}from"./TranslationService-BIPkk7bE.js";import"./Footer-Dz_Lunnp.js";const l=(r,i="")=>{try{return I.t(r,i||r)}catch(x){return console.warn("[News/Index] Ошибка получения перевода:",x),i||r}};function B(){var g;const{news:r,filters:i={}}=v().props,{data:x,setData:u,get:p,processing:m}=N({search:i.search??""}),h=k.useMemo(()=>{if(!(r!=null&&r.data))return[];const s=t=>!t||typeof t!="string"?"":t.replace(/<[^>]+>/g,"").replace(/\s+/g," ").trim();return r.data.map(t=>{const o=(Array.isArray(t.images)?t.images:[]).map(a=>a?typeof a=="string"?a:typeof a=="object"&&(a.url||a.path)||null:null).filter(a=>!!a&&!E(a)),c=Array.from(new Set(o)),n=t.excerpt&&t.excerpt.trim().length>0?t.excerpt:s(t.body||"").slice(0,220),d=n?`${n}${n.length>=220?"…":""}`:"";return{...t,galleryImages:c,preparedExcerpt:d}})},[r]),w=s=>{s.preventDefault(),p(route("news.index"),{preserveScroll:!0,preserveState:!0})},j=()=>{u("search",""),p(route("news.index"),{preserveScroll:!0,preserveState:!0,onFinish:()=>{var s;return(s=window==null?void 0:window.scrollTo)==null?void 0:s.call(window,{top:0,behavior:"smooth"})}})},y=((g=r==null?void 0:r.meta)==null?void 0:g.total)??(r==null?void 0:r.total)??h.length;return e.jsxs(L,{h1:l("news.title","Новости"),img:"news",children:[e.jsx(S,{title:l("news.meta.title","Новости"),meta:[{name:"description",content:l("news.meta.description","Последние новости Национального научного центра развития здравоохранения.")}]}),e.jsxs("div",{className:"mb-8 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-wide text-blue-600",children:l("news.total.label","Всего публикаций")}),e.jsx("h2",{className:"text-3xl font-semibold text-gray-900",children:y})]}),e.jsx("div",{className:"rounded-2xl bg-blue-50 px-6 py-4 text-sm text-blue-700",children:l("news.total.hint","Следите за обновлениями — мы публикуем свежие новости каждую неделю.")})]}),e.jsxs("form",{className:"mb-10 rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",onSubmit:w,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:l("news.filters.search.label","Поиск по ключевому слову")}),e.jsxs("div",{className:"mt-3 flex flex-col gap-3 sm:flex-row",children:[e.jsx("input",{type:"text",value:x.search,onChange:s=>u("search",s.target.value),placeholder:l("news.filters.search.placeholder","Например: медицина будущего"),className:"w-full rounded-xl border border-gray-200 px-4 py-3 text-base shadow-sm transition focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"}),e.jsxs("div",{className:"flex flex-row gap-2 sm:flex-shrink-0",children:[e.jsx("button",{type:"submit",disabled:m,className:"flex h-12 flex-1 items-center justify-center rounded-xl bg-blue-600 px-6 text-sm font-semibold text-white shadow-sm transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-60",children:m?l("news.filters.search.processing","Поиск..."):l("news.filters.search.cta","Найти")}),e.jsx("button",{type:"button",onClick:j,className:"flex h-12 flex-1 items-center justify-center rounded-xl border border-gray-200 px-6 text-sm font-semibold text-gray-600 transition hover:border-gray-300 hover:bg-gray-50",children:l("news.filters.search.reset","Сбросить")})]})]})]}),h.length===0?e.jsxs("div",{className:"rounded-2xl border border-dashed border-gray-200 bg-white py-16 text-center shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:l("news.empty.title","Новости не найдены")}),e.jsx("p",{className:"mt-2 text-gray-600",children:l("news.empty.description","Попробуйте изменить поисковый запрос или зайдите позже — мы уже готовим новые публикации.")})]}):e.jsx("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 xl:grid-cols-3",children:h.map(s=>e.jsx("article",{className:"group flex h-full flex-col overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm transition hover:-translate-y-1 hover:shadow-lg",children:e.jsxs(b,{href:route("news.show",s.slug),className:"block",children:[e.jsxs("div",{className:"relative h-56 overflow-hidden bg-gray-100",children:[e.jsx(C,{images:s.galleryImages,className:"h-56",height:"224px",showDots:s.galleryImages.length>1,showCounter:!1,autoPlay:s.galleryImages.length>1,interval:4e3}),e.jsx("div",{className:"absolute left-4 top-4 rounded-full bg-white/95 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-gray-700 shadow-sm",children:s.published_at_formatted||"—"})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 transition group-hover:text-blue-600",children:s.title}),s.preparedExcerpt&&e.jsx("p",{className:"flex-1 text-sm leading-relaxed text-gray-600 line-clamp-4",children:s.preparedExcerpt}),e.jsxs("span",{className:"inline-flex items-center text-sm font-semibold text-blue-600",children:[l("news.card.read_more","Читать далее"),e.jsx("svg",{className:"ml-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})},s.id))}),Array.isArray(r==null?void 0:r.links)&&r.links.length>1&&e.jsx("div",{className:"mt-12 flex justify-center",children:e.jsx("nav",{className:"flex flex-wrap items-center gap-2",children:r.links.map((s,t)=>{const f=s.url===null,o=String(s.label||"").replace(/<[^>]+>/g,"").replace(/&laquo;|&raquo;/g,"").trim(),c=o.toLowerCase(),n=["previous","предыдущая","pagination.previous"].includes(c),d=["next","следующая","pagination.next"].includes(c),a=["...","…"].includes(o);return e.jsxs(b,{href:s.url||"#",className:`rounded-full px-4 py-2 text-sm font-medium transition ${s.active?"bg-blue-600 text-white shadow":f?"bg-gray-100 text-gray-400":"bg-white text-gray-700 hover:bg-blue-50"}`,preserveScroll:!0,preserveState:!0,children:[n&&e.jsx("span",{className:"flex items-center justify-center",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),d&&e.jsx("span",{className:"flex items-center justify-center",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),!n&&!d&&!a&&e.jsx("span",{className:"flex items-center justify-center",children:o}),a&&e.jsx("span",{className:"flex items-center justify-center",children:"…"})]},`${s.label}-${t}`)})})})]})}export{B as default};
