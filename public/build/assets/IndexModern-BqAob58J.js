import{r as a,j as e,a as l,y as c}from"./app-CQ3L2mPH.js";import{A as E}from"./AdminLayout-D5Z_4Lfl.js";import{S as L}from"./StatusBadge-B7NgGldw.js";import{F as A,a as F,b as C}from"./TrashIcon-B1ZCL1Oh.js";import"./transition-yVwsaqne.js";import"./use-is-mounted-DvvISwzN.js";function R({title:s,titleId:r,...n},o){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const p=a.forwardRef(R);function S({title:s,titleId:r,...n},o){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const _=a.forwardRef(S);function M({title:s,titleId:r,...n},o){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const $=a.forwardRef(M);function B({title:s,titleId:r,...n},o){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const V=a.forwardRef(B);function W({title:s,titleId:r,...n},o){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const f=a.forwardRef(W);function Z({title:s,titleId:r,...n},o){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":r},n),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const O=a.forwardRef(Z);function z({news:s,filters:r}){const[n,o]=a.useState((r==null?void 0:r.search)||""),[i,m]=a.useState((r==null?void 0:r.status)||""),[u,x]=a.useState((r==null?void 0:r.category)||""),[h,j]=a.useState(!1),v=t=>{t.preventDefault(),c.get(route("admin.news.index"),{search:n,status:i,category:u},{preserveState:!0,replace:!0})},y=()=>{o(""),m(""),x(""),c.get(route("admin.news.index"),{},{preserveState:!0,replace:!0})},w=t=>{confirm("Вы уверены, что хотите удалить эту новость?")&&c.delete(route("admin.news.destroy",t))},g=t=>t?new Date(t).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",N=()=>{const t=new Set;return s.data.forEach(d=>{Array.isArray(d.category)?d.category.forEach(k=>t.add(k)):d.category&&t.add(d.category)}),Array.from(t).sort()},b=t=>Array.isArray(t.images)?t.images.length:0;return e.jsx(E,{children:e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Новости"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Управление новостями и публикациями"})]}),e.jsxs(l,{href:route("admin.news.create"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Создать новость"]})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:n,onChange:t=>o(t.target.value),placeholder:"Поиск по заголовку или содержимому...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})}),e.jsxs("button",{type:"button",onClick:()=>j(!h),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Фильтры"]}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Найти"})]}),h&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Статус"}),e.jsxs("select",{value:i,onChange:t=>m(t.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"Все статусы"}),e.jsx("option",{value:"Черновик",children:"Черновик"}),e.jsx("option",{value:"Опубликовано",children:"Опубликовано"}),e.jsx("option",{value:"Запланировано",children:"Запланировано"}),e.jsx("option",{value:"Архив",children:"Архив"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Категория"}),e.jsxs("select",{value:u,onChange:t=>x(t.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"Все категории"}),N().map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",onClick:y,className:"w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Сбросить"})})]})]})}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s.data.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400",children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Новости не найдены"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r!=null&&r.search||r!=null&&r.status||r!=null&&r.category?"Попробуйте изменить фильтры.":"Начните с создания первой новости."}),!(r!=null&&r.search)&&!(r!=null&&r.status)&&!(r!=null&&r.category)&&e.jsx("div",{className:"mt-6",children:e.jsxs(l,{href:route("admin.news.create"),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Создать новость"]})})]}):e.jsx("ul",{className:"divide-y divide-gray-200",children:s.data.map(t=>e.jsx("li",{className:"hover:bg-gray-50 transition-colors",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 truncate",children:t.title}),e.jsx("div",{className:"flex items-center space-x-2 ml-4",children:e.jsx(L,{status:t.status})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.content?t.content.replace(/<[^>]*>/g,"").substring(0,150)+"...":"Нет содержимого"}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:g(t.created_at)})]}),t.publish_date&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:["Публикация: ",g(t.publish_date)]})]}),b(t)>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[b(t)," медиа"]})]}),Array.isArray(t.category)&&t.category.length>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:t.category.join(", ")})]})]})]}),e.jsxs("div",{className:"ml-4 flex items-center space-x-2",children:[e.jsx(l,{href:`/news/${t.slug}`,target:"_blank",className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",title:"Просмотреть",children:e.jsx(A,{className:"w-4 h-4"})}),e.jsx(l,{href:route("admin.news.edit",t.id),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",title:"Редактировать",children:e.jsx(F,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(t.id),className:"inline-flex items-center px-3 py-1 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50",title:"Удалить",children:e.jsx(C,{className:"w-4 h-4"})})]})]})})},t.id))})}),s.data.length>0&&s.last_page>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Показано ",s.from," - ",s.to," из ",s.total," результатов"]}),e.jsxs("div",{className:"flex space-x-2",children:[s.prev_page_url&&e.jsx(l,{href:s.prev_page_url,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Назад"}),s.next_page_url&&e.jsx(l,{href:s.next_page_url,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Вперед"})]})]})]})})})}export{z as default};
