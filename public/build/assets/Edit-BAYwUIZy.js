import{W as b,r as v,j as e,Y as k,a as y}from"./app-CgHP3yWp.js";import{A as N}from"./AdminLayout-DX9nb-5k.js";import{T as g,I as l}from"./TextInput-DyEJ6QY_.js";import{I as i}from"./InputLabel-BkOwnBun.js";import{T as u}from"./Textarea-BpamVz0k.js";import{B as p}from"./index-CqXhS9G-.js";import"./transition-5RI6Uazs.js";import"./iconBase-DmYIIyz5.js";function S({translation:a,groups:f}){const{data:t,setData:n,put:h,processing:c,errors:o}=b({key:a.key,group:a.group,ru:a.ru,en:a.en||"",kk:a.kk||""}),[d,m]=v.useState(!1),j=s=>{s.preventDefault(),h(route("admin.translations.update",a.id))},x=s=>{confirm(`Автоматически перевести на ${s==="en"?"английский":"казахский"} с русского?`)&&(m(!0),fetch(route("admin.translations.auto-translate-key",{id:a.id,target_locale:s})).then(r=>r.json()).then(r=>{r.success?(n(s,r.translation),alert(`Перевод на ${s==="en"?"английский":"казахский"} успешно обновлен`)):alert("Ошибка при автоматическом переводе: "+r.message)}).catch(r=>{console.error("Error:",r),alert("Произошла ошибка при запросе перевода")}).finally(()=>{m(!1)}))};return e.jsxs(N,{children:[e.jsx(k,{title:"Редактирование перевода"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Редактирование перевода"}),e.jsx(y,{href:route("admin.translations.index"),className:"inline-flex items-center px-4 py-2 bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition ease-in-out duration-150",children:"Назад к списку"})]}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"key",value:"Ключ *"}),e.jsx(g,{id:"key",type:"text",name:"key",value:t.key,className:"mt-1 block w-full",onChange:s=>n("key",s.target.value),required:!0}),e.jsx(l,{message:o.key,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"group",value:"Группа *"}),e.jsx("div",{className:"mt-1",children:e.jsxs("select",{id:"group",name:"group",value:t.group,onChange:s=>n("group",s.target.value),className:"w-full border-gray-300 focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 rounded-md shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"Выберите группу"}),f.map((s,r)=>e.jsx("option",{value:s,children:s},r)),e.jsx("option",{value:"new_group",children:"+ Создать новую группу"})]})}),t.group==="new_group"&&e.jsx(g,{type:"text",className:"mt-2 block w-full",placeholder:"Введите название новой группы",onChange:s=>n("group",s.target.value),value:"",autoFocus:!0}),e.jsx(l,{message:o.group,className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(i,{htmlFor:"ru",value:"Русский текст *"}),e.jsx(u,{id:"ru",name:"ru",value:t.ru,className:"mt-1 block w-full",onChange:s=>n("ru",s.target.value),required:!0,rows:3}),e.jsx(l,{message:o.ru,className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(i,{htmlFor:"en",value:"Английский текст"}),e.jsxs("button",{type:"button",className:"inline-flex items-center text-sm px-3 py-1 bg-green-600 border border-transparent rounded-md text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition ease-in-out duration-150",onClick:()=>x("en"),disabled:d||!t.ru,children:[e.jsx(p,{className:"mr-1"}),"Автоперевод"]})]}),e.jsx(u,{id:"en",name:"en",value:t.en,className:"mt-1 block w-full",onChange:s=>n("en",s.target.value),rows:3}),e.jsx(l,{message:o.en,className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(i,{htmlFor:"kk",value:"Казахский текст"}),e.jsxs("button",{type:"button",className:"inline-flex items-center text-sm px-3 py-1 bg-green-600 border border-transparent rounded-md text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition ease-in-out duration-150",onClick:()=>x("kk"),disabled:d||!t.ru,children:[e.jsx(p,{className:"mr-1"}),"Автоперевод"]})]}),e.jsx(u,{id:"kk",name:"kk",value:t.kk,className:"mt-1 block w-full",onChange:s=>n("kk",s.target.value),rows:3}),e.jsx(l,{message:o.kk,className:"mt-2"})]})]}),e.jsx("div",{className:"flex items-center justify-end mt-6",children:e.jsx("button",{type:"submit",disabled:c,className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150",children:c?"Сохранение...":"Сохранить изменения"})})]})]})})})})]})}export{S as default};
