import{W as h,r as o,j as e,a as g}from"./app-hCV1kqB1.js";import{A as b}from"./AdminLayout-BunsJ4uB.js";import"./transition-CtZS4T_l.js";function p({news:t=null}){const i=!!t,{data:l,setData:r,post:n,put:u,processing:c,errors:a}=h({title:(t==null?void 0:t.title)||"",slug:(t==null?void 0:t.slug)||"",category:(t==null?void 0:t.category)||"",content:(t==null?void 0:t.content)||"",image:null,status:(t==null?void 0:t.status)||"Черновик",publishDate:(t==null?void 0:t.publishDate)||new Date().toISOString().substr(0,10)}),[d,m]=o.useState(null);o.useEffect(()=>{if(l.image&&typeof l.image!="string"){const s=URL.createObjectURL(l.image);return m(s),()=>URL.revokeObjectURL(s)}else m(null)},[l.image]),o.useEffect(()=>{if(!i&&l.title){const s=l.title.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");r("slug",s)}},[l.title,i]);const x=s=>{s.preventDefault(),i?u(route("admin.news.update",t.id)):n(route("admin.news.store"))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:i?"Редактирование новости":"Создание новости"}),e.jsxs(g,{href:route("admin.news"),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{className:"h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Назад к списку"]})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:e.jsxs("form",{onSubmit:x,children:[e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Заголовок"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"text",name:"title",id:"title",value:l.title,onChange:s=>r("title",s.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0})}),a.title&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.title})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700",children:"Slug"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"text",name:"slug",id:"slug",value:l.slug,onChange:s=>r("slug",s.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0})}),a.slug&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.slug})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Категория"}),e.jsx("div",{className:"mt-1",children:e.jsxs("select",{id:"category",name:"category",value:l.category,onChange:s=>r("category",s.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0,children:[e.jsx("option",{value:"",children:"Выберите категорию"}),e.jsx("option",{value:"Общие",children:"Общие"}),e.jsx("option",{value:"Аккредитация",children:"Аккредитация"}),e.jsx("option",{value:"Обучение",children:"Обучение"}),e.jsx("option",{value:"Конференции",children:"Конференции"}),e.jsx("option",{value:"Методические материалы",children:"Методические материалы"}),e.jsx("option",{value:"Исследования",children:"Исследования"}),e.jsx("option",{value:"Анонсы",children:"Анонсы"})]})}),a.category&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.category})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Статус"}),e.jsx("div",{className:"mt-1",children:e.jsxs("select",{id:"status",name:"status",value:l.status,onChange:s=>r("status",s.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0,children:[e.jsx("option",{value:"Черновик",children:"Черновик"}),e.jsx("option",{value:"Опубликовано",children:"Опубликовано"}),e.jsx("option",{value:"Запланировано",children:"Запланировано"})]})}),a.status&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.status})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"publishDate",className:"block text-sm font-medium text-gray-700",children:"Дата публикации"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"date",name:"publishDate",id:"publishDate",value:l.publishDate,onChange:s=>r("publishDate",s.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0})}),a.publishDate&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.publishDate})]}),e.jsxs("div",{className:"sm:col-span-6",children:[e.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700",children:"Изображение"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[(d||i&&t.image)&&e.jsx("div",{className:"mr-4",children:e.jsx("img",{src:d||t.image,alt:l.title||(t==null?void 0:t.title)||"Превью",className:"h-32 w-auto object-cover rounded-md border"})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"max-w-lg flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[e.jsx("span",{children:"Загрузить файл"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:"image/*",onChange:s=>{s.target.files&&s.target.files[0]&&r("image",s.target.files[0])}})]}),e.jsx("p",{className:"pl-1",children:"или перетащите сюда"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF до 10MB"})]})})})]}),a.image&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.image})]}),e.jsxs("div",{className:"sm:col-span-6",children:[e.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Содержание"}),e.jsx("div",{className:"mt-1",children:e.jsx("textarea",{id:"content",name:"content",rows:15,value:l.content,onChange:s=>r("content",s.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0})}),a.content&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:a.content})]})]})}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6",children:e.jsx("button",{type:"submit",disabled:c,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:c?"Сохранение...":i?"Сохранить изменения":"Создать новость"})})]})})]})}p.layout=t=>e.jsx(b,{title:t.props.news?"Редактирование новости":"Создание новости",children:t});export{p as default};
