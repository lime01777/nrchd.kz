import{q as v,r as x,j as e,Y as w,a as d,y as n}from"./app-Bg9C1goP.js";import{A as S}from"./AdminLayout-Bp0n_aO7.js";import"./transition-CraIadh-.js";import"./use-is-mounted-QLScEYSL.js";function k({centers:s,regions:b,filters:h}){const{flash:i={}}=v().props,[o,m]=x.useState(h.search||""),[c,u]=x.useState(h.region||""),[r,a]=x.useState([]),p=()=>{n.get(route("admin.youth-health-centers.index"),{search:o,region:c},{preserveState:!0,preserveScroll:!0})},g=()=>{m(""),u(""),n.get(route("admin.youth-health-centers.index"))},y=t=>{t.target.checked?a(s.data.map(l=>l.id)):a([])},j=t=>{r.includes(t)?a(r.filter(l=>l!==t)):a([...r,t])},f=()=>{if(r.length===0){alert("Выберите центры для удаления");return}confirm(`Вы уверены, что хотите удалить ${r.length} центров?`)&&n.post(route("admin.youth-health-centers.bulk-destroy"),{ids:r},{preserveScroll:!0,onSuccess:()=>a([])})},N=t=>{n.post(route("admin.youth-health-centers.toggle-active",t.id),{},{preserveScroll:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Управление МЦЗ"}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 bg-white border-b border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Молодежные центры здоровья"}),e.jsx(d,{href:route("admin.youth-health-centers.create"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:"+ Добавить МЦЗ"})]}),i&&i.success&&e.jsx("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4 rounded",children:i.success}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Поиск по названию, организации, адресу...",className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:o,onChange:t=>m(t.target.value),onKeyPress:t=>t.key==="Enter"&&p()})}),e.jsx("div",{children:e.jsxs("select",{className:"w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:c,onChange:t=>u(t.target.value),children:[e.jsx("option",{value:"",children:"Все регионы"}),b.map(t=>e.jsx("option",{value:t,children:t},t))]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:p,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition",children:"Применить"}),e.jsx("button",{onClick:g,className:"px-4 py-2 bg-gray-400 text-white rounded-md hover:bg-gray-500 transition",children:"Сбросить"})]})]}),r.length>0&&e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-md flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:["Выбрано центров: ",e.jsx("strong",{children:r.length})]}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition text-sm",children:"Удалить выбранные"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 border-b text-left",children:e.jsx("input",{type:"checkbox",onChange:y,checked:r.length===s.data.length&&s.data.length>0,className:"rounded"})}),e.jsx("th",{className:"py-3 px-4 border-b text-left",children:"ID"}),e.jsx("th",{className:"py-3 px-4 border-b text-left",children:"Название"}),e.jsx("th",{className:"py-3 px-4 border-b text-left",children:"Организация"}),e.jsx("th",{className:"py-3 px-4 border-b text-left",children:"Регион"}),e.jsx("th",{className:"py-3 px-4 border-b text-left",children:"Адрес"}),e.jsx("th",{className:"py-3 px-4 border-b text-left",children:"Координаты"}),e.jsx("th",{className:"py-3 px-4 border-b text-left",children:"Статус"}),e.jsx("th",{className:"py-3 px-4 border-b text-left",children:"Действия"})]})}),e.jsx("tbody",{children:s.data.length>0?s.data.map(t=>e.jsxs("tr",{className:r.includes(t.id)?"bg-blue-50":"",children:[e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsx("input",{type:"checkbox",checked:r.includes(t.id),onChange:()=>j(t.id),className:"rounded"})}),e.jsx("td",{className:"py-3 px-4 border-b",children:t.id}),e.jsx("td",{className:"py-3 px-4 border-b font-medium",children:t.name}),e.jsx("td",{className:"py-3 px-4 border-b text-sm",children:t.organization}),e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:t.region})}),e.jsx("td",{className:"py-3 px-4 border-b text-sm text-gray-600 max-w-xs truncate",children:t.address}),e.jsxs("td",{className:"py-3 px-4 border-b text-xs text-gray-500",children:[t.latitude,", ",t.longitude]}),e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsx("button",{onClick:()=>N(t),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"} transition cursor-pointer`,children:t.is_active?"Активен":"Неактивен"})}),e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(d,{href:route("admin.youth-health-centers.edit",t.id),className:"text-indigo-600 hover:text-indigo-900 transition",children:"Редактировать"}),e.jsx(d,{href:route("admin.youth-health-centers.destroy",t.id),method:"delete",as:"button",type:"button",className:"text-red-600 hover:text-red-900 transition",onClick:l=>{confirm("Вы уверены, что хотите удалить этот центр?")||l.preventDefault()},children:"Удалить"})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"py-8 px-4 border-b text-center text-gray-500",children:o||c?"Центры не найдены":"Нет доступных центров здоровья"})})})]})}),s.links&&s.links.length>3&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("nav",{className:"flex space-x-2",children:s.links.map((t,l)=>e.jsx(d,{href:t.url||"#",className:`px-3 py-2 rounded-md text-sm ${t.active?"bg-blue-600 text-white":t.url?"bg-gray-200 hover:bg-gray-300 text-gray-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label},preserveScroll:!0,preserveState:!0},l))})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600 text-center",children:["Показано ",s.from||0," - ",s.to||0," из ",s.total||0," центров"]})]})})})})]})}k.layout=s=>e.jsx(S,{title:"Управление МЦЗ",children:s});export{k as default};
