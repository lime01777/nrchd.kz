import{r as j,j as e,W as U,a as _}from"./app-JJnr8YSF.js";import{A as O}from"./AdminLayout-CuZZIOFa.js";import{M as P}from"./ModernContentEditor-D-TgEmMb.js";import"./transition-CDEwSAK-.js";import"./use-is-mounted-ADJvFua_.js";function K({media:r=[],setMedia:m,maxFiles:n=10,className:c=""}){const[d,N]=j.useState(null),[h,p]=j.useState(!1),E=t=>{const a=r.filter((o,u)=>u!==t);m(a)},f=t=>{N(t),p(!0)},g=t=>{var a,o;if(typeof t=="string"){const u=(a=t.split(".").pop())==null?void 0:a.toLowerCase();return["mp4","avi","mov","wmv","flv","webm"].includes(u)?"video":"image"}if(t.type)return t.type;if(t.path){const u=(o=t.path.split(".").pop())==null?void 0:o.toLowerCase();return["mp4","avi","mov","wmv","flv","webm"].includes(u)?"video":"image"}return"image"},b=t=>typeof t=="string"?t:t.path||t,y=t=>{var a;return typeof t=="string"?t.split("/").pop():t.name||((a=t.path)==null?void 0:a.split("/").pop())||"Медиа файл"},w=t=>typeof t=="string"?"":t.size||"",M=t=>typeof t=="string"?"":t.duration||"",L=t=>typeof t=="string"?t:t.thumbnail||t.path||t;return r.length===0?e.jsxs("div",{className:`text-center py-8 text-gray-500 ${c}`,children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),e.jsx("p",{className:"mt-2",children:"Медиа файлы не выбраны"}),e.jsx("p",{className:"text-sm",children:"Добавьте изображения или видео для отображения в новости"})]}):e.jsxs("div",{className:c,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700",children:["Выбранные медиа файлы (",r.length,"/",n,")"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r.length===1&&g(r[0])==="image"&&"Будет отображаться одно изображение",r.length>1&&r.every(t=>g(t)==="image")&&"Будет отображаться слайдер изображений",r.some(t=>g(t)==="video")&&"Будет отображаться видео"]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:r.map((t,a)=>{const o=g(t),u=b(t),k=y(t),z=w(t),S=M(t),F=L(t);return e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden cursor-pointer border-2 border-gray-200 hover:border-blue-300 transition-all duration-200",onClick:()=>f(a),children:[o==="video"?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:F,alt:k,className:"w-full h-full object-cover",onError:C=>{C.target.style.display="none",C.target.nextSibling.style.display="flex"}}),e.jsx("div",{className:"hidden w-full h-full items-center justify-center text-gray-400",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"bg-black bg-opacity-50 rounded-full p-2",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})})}),S&&e.jsx("div",{className:"absolute top-2 right-2 bg-black bg-opacity-75 text-white text-xs px-1 py-0.5 rounded",children:S})]}):e.jsx("img",{src:u,alt:k,className:"w-full h-full object-cover",onError:C=>{C.target.style.display="none",C.target.nextSibling.style.display="flex"}}),e.jsx("div",{className:"hidden w-full h-full items-center justify-center text-gray-400",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 text-white p-2 rounded-b-lg",children:e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium truncate",children:k}),e.jsxs("div",{className:"text-gray-300",children:[z&&`${z}`,z&&S&&" • ",S&&`${S}`]})]})}),e.jsx("button",{onClick:C=>{C.stopPropagation(),E(a)},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-red-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),e.jsx("div",{className:"absolute top-2 left-2",children:o==="video"?e.jsxs("div",{className:"bg-blue-500 text-white text-xs px-1 py-0.5 rounded",children:[e.jsx("svg",{className:"w-3 h-3 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"ВИДЕО"]}):e.jsxs("div",{className:"bg-green-500 text-white text-xs px-1 py-0.5 rounded",children:[e.jsx("svg",{className:"w-3 h-3 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),"ФОТО"]})})]},a)})}),h&&d!==null&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:y(r[d])}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mb-4",children:g(r[d])==="video"?e.jsx("video",{controls:!0,className:"w-full max-h-96 object-contain",src:b(r[d]),children:"Ваш браузер не поддерживает видео."}):e.jsx("img",{src:b(r[d]),alt:y(r[d]),className:"w-full max-h-96 object-contain"})}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Имя файла:"})," ",y(r[d])]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Тип:"})," ",g(r[d])==="video"?"Видео":"Изображение"]}),w(r[d])&&e.jsxs("p",{children:[e.jsx("strong",{children:"Размер:"})," ",w(r[d])]}),M(r[d])&&e.jsxs("p",{children:[e.jsx("strong",{children:"Длительность:"})," ",M(r[d])]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Закрыть"})})]})})]})}function $({onSelect:r,selectedMedia:m=[],className:n="",maxFiles:c=10}){const[d,N]=j.useState(!1),[h,p]=j.useState("images"),E=j.useRef(null),f=[{name:"placeholder.jpg",path:"/storage/news/placeholder.jpg",size:"305 байт",type:"image"},{name:"1700550154_pictures-pibig-info-p-gerb-kazakhstana-risunok-krasivo-67.jpg",path:"/storage/news/1700550154_pictures-pibig-info-p-gerb-kazakhstana-risunok-krasivo-67.jpg",size:"269 KB",type:"image"},{name:"3HKPGskY-wallha.com.png",path:"/storage/news/3HKPGskY-wallha.com.png",size:"8.4 MB",type:"image"},{name:"mlPAlHD6wpdfvaksa4KgiaqUnrfz6Uez0kTC4IZS.jpg",path:"/storage/news/mlPAlHD6wpdfvaksa4KgiaqUnrfz6Uez0kTC4IZS.jpg",size:"443 KB",type:"image"}],g=[{name:"presentation.mp4",path:"/videos/news/presentation.mp4",size:"15.2 MB",type:"video",duration:"2:34",thumbnail:"/storage/news/video-thumbnail-1.jpg"},{name:"interview.mp4",path:"/videos/news/interview.mp4",size:"8.7 MB",type:"video",duration:"1:45",thumbnail:"/storage/news/video-thumbnail-2.jpg"}],b=t=>{r&&r(t),N(!1)},y=t=>m.some(a=>a.path===t.path||a===t.path),w=t=>{Array.from(t.target.files).forEach(o=>{const u=o.type.startsWith("video/"),k=o.type.startsWith("image/");if(u||k){const z={name:o.name,path:URL.createObjectURL(o),size:M(o.size),type:u?"video":"image",file:o,duration:u?"0:00":null,thumbnail:u?"/storage/news/video-thumbnail-default.jpg":null};b(z)}}),t.target.value=""},M=t=>{if(t===0)return"0 Bytes";const a=1024,o=["Bytes","KB","MB","GB"],u=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,u)).toFixed(2))+" "+o[u]},L=()=>h==="images"?f:g;return e.jsxs("div",{className:n,children:[e.jsxs("button",{type:"button",onClick:()=>N(!d),className:"mb-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Выбрать медиа из библиотеки"]}),e.jsxs("button",{type:"button",onClick:()=>{var t;return(t=E.current)==null?void 0:t.click()},className:"mb-4 ml-2 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Загрузить файлы"]}),e.jsx("input",{ref:E,type:"file",multiple:!0,accept:"image/*,video/*",onChange:w,className:"hidden"}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-6xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Выберите медиа"}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex border-b border-gray-200 mb-4",children:[e.jsxs("button",{onClick:()=>p("images"),className:`px-4 py-2 font-medium text-sm ${h==="images"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx("svg",{className:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Изображения"]}),e.jsxs("button",{onClick:()=>p("videos"),className:`px-4 py-2 font-medium text-sm ${h==="videos"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx("svg",{className:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Видео"]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:L().map((t,a)=>e.jsxs("div",{onClick:()=>b(t),className:`
                    relative cursor-pointer rounded-lg overflow-hidden border-2 transition-all duration-200
                    ${y(t)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:shadow-md"}
                  `,children:[e.jsx("div",{className:"aspect-square bg-gray-100",children:t.type==="video"?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t.thumbnail||"/storage/news/video-thumbnail-default.jpg",alt:t.name,className:"w-full h-full object-cover",onError:o=>{o.target.style.display="none",o.target.nextSibling.style.display="flex"}}),e.jsx("div",{className:"hidden w-full h-full items-center justify-center text-gray-400",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"bg-black bg-opacity-50 rounded-full p-2",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})})}),t.duration&&e.jsx("div",{className:"absolute top-2 right-2 bg-black bg-opacity-75 text-white text-xs px-1 py-0.5 rounded",children:t.duration})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t.path,alt:t.name,className:"w-full h-full object-cover",onError:o=>{o.target.style.display="none",o.target.nextSibling.style.display="flex"}}),e.jsx("div",{className:"hidden w-full h-full items-center justify-center text-gray-400",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 text-white p-2",children:e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-medium truncate",children:t.name}),e.jsx("div",{className:"text-gray-300",children:t.size})]})}),y(t)&&e.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},a))}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Закрыть"})})]})})]})}const q=["Общие","Аккредитация","Обучение","Конференции","Методические материалы","Исследования","Анонсы"];function G(){const[r,m]=j.useState(!1),{data:n,setData:c,post:d,processing:N,errors:h}=U({title:"",category:[],content:"",images:[],status:"Черновик",publishDate:new Date().toISOString().substr(0,10)}),[p,E]=j.useState(q),[f,g]=j.useState([]),[b,y]=j.useState(""),[w,M]=j.useState(!1),[L,t]=j.useState([]),a=s=>{console.log("Create - изменение медиа:",s),t(s);const i=[],v=[];s.forEach(x=>{x instanceof File||x&&x.file?i.push(x.file||x):typeof x=="string"?v.push(x):x&&x.path&&v.push(x.path)}),c("images",v),c("image_files",i)},o=p.map(s=>({value:s,label:s})),u=(s,i)=>{let v;i?v=[...f,s]:v=f.filter(x=>x!==s),g(v),c("category",v)},k=()=>{const s=p.map(i=>i);g(s),c("category",s)},z=()=>{g([]),c("category",[])},S=()=>{const s=p.filter(i=>!f.includes(i));g(s),c("category",s)},F=()=>{if(b&&!p.includes(b)){E([...p,b]);const s=[...f,b];g(s),c("category",s),y("")}};j.useEffect(()=>{const s=i=>{w&&!i.target.closest(".category-dropdown")&&M(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[w]);const C=s=>{s.preventDefault(),m(!0);try{const i=n.category||[];if(!n.title||n.title.trim().length===0){alert("Заполните заголовок"),m(!1);return}typeof n.content!="string"&&c("content",String(n.content||"")),["Черновик","Опубликовано","Запланировано"].includes(n.status)||c("status","Черновик");const v=L.filter(l=>typeof l=="string"?l:l instanceof File?l.size>0:l&&l.file?l.file.size>0:l&&l.path?l.path:!1);if(c("images",v),!n.content||n.content.replace(/<[^>]*?>/g,"").trim().length<10){alert("Содержимое должно содержать минимум 10 символов"),m(!1);return}if(i.length===0){alert("Выберите хотя бы одну категорию"),m(!1);return}const x=[],A=[],R=[],W=[];v.forEach(l=>{var D;if(l instanceof File||l&&l.file){const B=l.file||l;B.type.startsWith("video/")?A.push(B):x.push(B)}else if(typeof l=="string"||l&&l.path){const B=l.path||l,T=(D=B.split(".").pop())==null?void 0:D.toLowerCase();["mp4","avi","mov","wmv","flv","webm"].includes(T)?W.push(B):R.push(B)}});const V={title:n.title,content:n.content,status:n.status,publishDate:n.publishDate||"",category:i,images:[...R,...W],image_files:x,video_files:A};console.log("Отправка формы с данными:",{title:n.title,content_length:n.content?n.content.length:0,categories:i,media_count:v.length,status:n.status}),d(route("admin.news.store"),V,{preserveScroll:!0,timeout:6e4,onStart:()=>{console.log("Начинаем отправку формы...")},onProgress:l=>{console.log("Прогресс загрузки:",l)},onSuccess:l=>{console.log("Успешная отправка:",l),m(!1)},onError:l=>{if(console.error("Ошибки валидации:",l),m(!1),l.error)alert("Ошибка сохранения: "+l.error);else{const D=Object.values(l).flat();D.length>0&&alert(`Ошибки валидации:
`+D.join(`
`))}},onFinish:()=>{console.log("Завершение отправки формы"),m(!1)}})}catch(i){console.error("Ошибка при отправке формы:",i),m(!1)}},H=s=>{c("content",s)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Создание новости"}),e.jsxs(_,{href:route("admin.news"),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{className:"h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Назад к списку"]})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:e.jsxs("form",{onSubmit:C,className:"min-h-full",children:[e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-6",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Заголовок *"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"text",name:"title",id:"title",value:n.title,onChange:s=>c("title",s.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0,placeholder:"Введите заголовок новости"})}),h.title&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:h.title})]}),e.jsxs("div",{className:"sm:col-span-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Категории *"}),e.jsxs("div",{className:"relative category-dropdown",children:[e.jsxs("button",{type:"button",onClick:()=>M(!w),className:"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-md bg-white text-left text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("span",{className:f.length>0?"text-gray-900":"text-gray-500",children:f.length>0?`Выбрано: ${f.length} категорий`:"Выберите категории..."}),e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),w&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex gap-2 mb-3 pb-2 border-b border-gray-200",children:[e.jsx("button",{type:"button",onClick:k,className:"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:"Выбрать все"}),e.jsx("button",{type:"button",onClick:z,className:"px-2 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-700",children:"Снять выбор"}),e.jsx("button",{type:"button",onClick:S,className:"px-2 py-1 text-xs bg-purple-500 text-white rounded hover:bg-purple-600",children:"Инвертировать"})]}),e.jsx("div",{className:"space-y-1",children:o.map(s=>e.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.includes(s.value),onChange:i=>u(s.value,i.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:s.label})]},s.value))}),e.jsx("div",{className:"mt-3 pt-2 border-t border-gray-200",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:b,onChange:s=>y(s.target.value),placeholder:"Новая категория",className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("button",{type:"button",onClick:F,className:"px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600",children:"Добавить"})]})})]})})]}),h.category&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:h.category})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Статус *"}),e.jsx("div",{className:"mt-1",children:e.jsxs("select",{id:"status",name:"status",value:n.status,onChange:s=>c("status",s.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0,children:[e.jsx("option",{value:"Черновик",children:"Черновик"}),e.jsx("option",{value:"Опубликовано",children:"Опубликовано"}),e.jsx("option",{value:"Запланировано",children:"Запланировано"})]})}),h.status&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:h.status})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"publishDate",className:"block text-sm font-medium text-gray-700",children:"Дата публикации"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"date",name:"publishDate",id:"publishDate",value:n.publishDate,onChange:s=>c("publishDate",s.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"})}),h.publishDate&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:h.publishDate})]}),e.jsxs("div",{className:"sm:col-span-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["🎥 Медиа галерея (НОВАЯ ВЕРСИЯ)",e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"- Добавьте изображения или видео (до 10 файлов)"})]}),e.jsx($,{onSelect:s=>{const i=[...L,s];a(i)},selectedMedia:L,maxFiles:10}),e.jsx(K,{media:L,setMedia:a,maxFiles:10})]}),e.jsxs("div",{className:"sm:col-span-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Содержимое *"}),e.jsx(P,{value:n.content,onChange:H,placeholder:"Начните писать содержимое новости...",minHeight:"320px"}),h.content&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:h.content}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Минимум 10 символов"})]})]})}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6",children:e.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:N||r,children:N||r?"Создание...":"Создать новость"})})]})})]})}G.layout=r=>e.jsx(O,{title:"Создание новости",children:r});export{G as default};
