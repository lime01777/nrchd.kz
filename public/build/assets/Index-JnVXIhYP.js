import{r as f,j as e,a as o,y as c}from"./app-Dx0pQLKn.js";import{A as L}from"./AdminLayout-Dtb4iCn7.js";import{N as C}from"./NewsImageSlider-CyTEO87m.js";import"./transition-Dabao_dA.js";import"./use-is-mounted-DzbNDF9D.js";function B({news:l,filters:r,section:v="news",sectionMeta:y=null}){const[u,h]=f.useState((r==null?void 0:r.search)||""),[m,g]=f.useState((r==null?void 0:r.status)||""),x=v||"news",t=y||{},p=x==="news"?route("admin.news.index"):route("admin.news.index",x),N=route("admin.news.create",x),b=()=>{c.get(p,{search:u,status:m,published_from:r==null?void 0:r.published_from,published_to:r==null?void 0:r.published_to},{preserveState:!0,replace:!0})},w=()=>{h(""),g(""),c.get(p,{},{preserveState:!0,replace:!0})},k=s=>{confirm(`Вы уверены, что хотите удалить новость "${s.title}"?`)&&c.delete(route("admin.news.destroy",{news:s.id}),{preserveScroll:!0})},_=s=>{c.patch(route("admin.news.toggle",{news:s.id}),{},{preserveScroll:!0})};return e.jsx(L,{title:t==null?void 0:t.title,children:e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:(t==null?void 0:t.title)||"Новости"}),(t==null?void 0:t.subtitle)&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t.subtitle})]}),e.jsx(o,{href:N,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:(t==null?void 0:t.createLabel)||"Создать новость"})]}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Поиск"}),e.jsx("input",{type:"text",value:u,onChange:s=>h(s.target.value),onKeyPress:s=>s.key==="Enter"&&b(),placeholder:"Поиск по заголовку...",className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Статус"}),e.jsxs("select",{value:m,onChange:s=>g(s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Все"}),e.jsx("option",{value:"draft",children:"Черновик"}),e.jsx("option",{value:"published",children:"Опубликовано"})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:b,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Применить"}),e.jsx("button",{onClick:w,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"Сбросить"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3",children:l.data.map(s=>{const i=Array.isArray(s.media)?s.media:[],d=i.filter(n=>(n==null?void 0:n.type)==="image").map(n=>n.url||n.path).filter(Boolean),j=i.filter(n=>(n==null?void 0:n.type)==="video"),a=j.length>0?j[0]:null,S=d.length>0;return e.jsxs("article",{className:"flex h-full flex-col overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm transition hover:-translate-y-1 hover:shadow-lg",children:[e.jsxs("div",{className:"relative h-44 w-full overflow-hidden bg-gray-100",children:[a?a.is_external&&a.is_embed&&(a.embed_url||a.url||a.path)?e.jsx("iframe",{src:a.embed_url||a.url||a.path,title:s.title,className:"h-full w-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):e.jsx("video",{src:a.url||a.path,poster:a.thumbnail||void 0,controls:!0,muted:!0,className:"h-full w-full object-cover",children:"Ваш браузер не поддерживает воспроизведение видео."}):S?d.length>1?e.jsx(C,{images:d,className:"h-44",height:"176px",showDots:!1,showCounter:!0}):e.jsx("img",{src:d[0],alt:s.title,className:"h-full w-full object-cover"}):s.cover_thumb_url?e.jsx("img",{src:s.cover_thumb_url,alt:s.cover_image_alt||s.title,className:"h-full w-full object-cover"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center text-gray-300",children:e.jsx("svg",{className:"h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("span",{className:`absolute left-4 top-4 rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide ${s.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-700"}`,children:s.status==="published"?"Опубликовано":"Черновик"})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-5",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:s.title}),e.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-gray-400",children:s.slug})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"})}),s.published_at_formatted||"—"]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[e.jsxs("svg",{className:"h-4 w-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsx("span",{className:"font-semibold text-gray-800",children:s.views??0})]})]}),e.jsxs("div",{className:"mt-auto flex flex-wrap gap-2",children:[e.jsx(o,{href:route("admin.news.edit",{news:s.id}),className:"inline-flex items-center rounded-lg bg-blue-50 px-3 py-2 text-sm font-semibold text-blue-600 transition hover:bg-blue-100",children:"Редактировать"}),e.jsx("button",{type:"button",onClick:()=>_(s),className:"inline-flex items-center rounded-lg bg-yellow-50 px-3 py-2 text-sm font-semibold text-yellow-700 transition hover:bg-yellow-100",children:s.status==="published"?"В черновик":"Опубликовать"}),e.jsx("button",{type:"button",onClick:()=>k(s),className:"inline-flex items-center rounded-lg bg-red-50 px-3 py-2 text-sm font-semibold text-red-600 transition hover:bg-red-100",children:"Удалить"})]})]})]},s.id)})}),l.links&&l.links.length>3&&e.jsx("div",{className:"mt-8 rounded-2xl border border-gray-200 bg-white px-4 py-3 shadow-sm sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[l.links[0].url&&e.jsx(o,{href:l.links[0].url,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Предыдущая"}),l.links[l.links.length-1].url&&e.jsx(o,{href:l.links[l.links.length-1].url,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Следующая"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Показано ",e.jsx("span",{className:"font-medium",children:l.from})," до"," ",e.jsx("span",{className:"font-medium",children:l.to})," из"," ",e.jsx("span",{className:"font-medium",children:l.total})," результатов"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:l.links.map((s,i)=>e.jsx(o,{href:s.url||"#",className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${s.active?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"} ${s.url?"":"cursor-not-allowed opacity-50"}`,dangerouslySetInnerHTML:{__html:s.label}},i))})})]})]})})]})})})}export{B as default};
