import{c as Me,r as De,b as Lc,g as Bc,W as Pc,j as Q,a as Mc}from"./app-PA0ZTPqP.js";import{A as Nc}from"./AdminLayout-C5vOnNAG.js";import{S as Ic}from"./react-select.esm-CeRxWwZT.js";import{E as jc}from"./Editor-eg61GYoN.js";import"./transition-C59dnKcY.js";function Rc(){this.__data__=[],this.size=0}var Dc=Rc;function $c(n,e){return n===e||n!==n&&e!==e}var la=$c,Fc=la;function Hc(n,e){for(var t=n.length;t--;)if(Fc(n[t][0],e))return t;return-1}var An=Hc,qc=An,Uc=Array.prototype,zc=Uc.splice;function Wc(n){var e=this.__data__,t=qc(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():zc.call(e,t,1),--this.size,!0}var Kc=Wc,Vc=An;function Gc(n){var e=this.__data__,t=Vc(e,n);return t<0?void 0:e[t][1]}var Yc=Gc,Xc=An;function Zc(n){return Xc(this.__data__,n)>-1}var Jc=Zc,Qc=An;function eu(n,e){var t=this.__data__,r=Qc(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var tu=eu,nu=Dc,ru=Kc,ou=Yc,iu=Jc,su=tu;function Ct(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ct.prototype.clear=nu;Ct.prototype.delete=ru;Ct.prototype.get=ou;Ct.prototype.has=iu;Ct.prototype.set=su;var Ln=Ct,au=Ln;function lu(){this.__data__=new au,this.size=0}var cu=lu;function uu(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var du=uu;function hu(n){return this.__data__.get(n)}var fu=hu;function pu(n){return this.__data__.has(n)}var gu=pu,vu=typeof Me=="object"&&Me&&Me.Object===Object&&Me,ca=vu,mu=ca,yu=typeof self=="object"&&self&&self.Object===Object&&self,bu=mu||yu||Function("return this")(),Xe=bu,wu=Xe,ku=wu.Symbol,Rr=ku,as=Rr,ua=Object.prototype,xu=ua.hasOwnProperty,Eu=ua.toString,It=as?as.toStringTag:void 0;function _u(n){var e=xu.call(n,It),t=n[It];try{n[It]=void 0;var r=!0}catch{}var o=Eu.call(n);return r&&(e?n[It]=t:delete n[It]),o}var Ou=_u,Tu=Object.prototype,Cu=Tu.toString;function Su(n){return Cu.call(n)}var Au=Su,ls=Rr,Lu=Ou,Bu=Au,Pu="[object Null]",Mu="[object Undefined]",cs=ls?ls.toStringTag:void 0;function Nu(n){return n==null?n===void 0?Mu:Pu:cs&&cs in Object(n)?Lu(n):Bu(n)}var Bn=Nu;function Iu(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var da=Iu,ju=Bn,Ru=da,Du="[object AsyncFunction]",$u="[object Function]",Fu="[object GeneratorFunction]",Hu="[object Proxy]";function qu(n){if(!Ru(n))return!1;var e=ju(n);return e==$u||e==Fu||e==Du||e==Hu}var ha=qu,Uu=Xe,zu=Uu["__core-js_shared__"],Wu=zu,rr=Wu,us=function(){var n=/[^.]+$/.exec(rr&&rr.keys&&rr.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Ku(n){return!!us&&us in n}var Vu=Ku,Gu=Function.prototype,Yu=Gu.toString;function Xu(n){if(n!=null){try{return Yu.call(n)}catch{}try{return n+""}catch{}}return""}var fa=Xu,Zu=ha,Ju=Vu,Qu=da,ed=fa,td=/[\\^$.*+?()[\]{}|]/g,nd=/^\[object .+?Constructor\]$/,rd=Function.prototype,od=Object.prototype,id=rd.toString,sd=od.hasOwnProperty,ad=RegExp("^"+id.call(sd).replace(td,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ld(n){if(!Qu(n)||Ju(n))return!1;var e=Zu(n)?ad:nd;return e.test(ed(n))}var cd=ld;function ud(n,e){return n==null?void 0:n[e]}var dd=ud,hd=cd,fd=dd;function pd(n,e){var t=fd(n,e);return hd(t)?t:void 0}var St=pd,gd=St,vd=Xe,md=gd(vd,"Map"),Dr=md,yd=St,bd=yd(Object,"create"),Pn=bd,ds=Pn;function wd(){this.__data__=ds?ds(null):{},this.size=0}var kd=wd;function xd(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Ed=xd,_d=Pn,Od="__lodash_hash_undefined__",Td=Object.prototype,Cd=Td.hasOwnProperty;function Sd(n){var e=this.__data__;if(_d){var t=e[n];return t===Od?void 0:t}return Cd.call(e,n)?e[n]:void 0}var Ad=Sd,Ld=Pn,Bd=Object.prototype,Pd=Bd.hasOwnProperty;function Md(n){var e=this.__data__;return Ld?e[n]!==void 0:Pd.call(e,n)}var Nd=Md,Id=Pn,jd="__lodash_hash_undefined__";function Rd(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Id&&e===void 0?jd:e,this}var Dd=Rd,$d=kd,Fd=Ed,Hd=Ad,qd=Nd,Ud=Dd;function At(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}At.prototype.clear=$d;At.prototype.delete=Fd;At.prototype.get=Hd;At.prototype.has=qd;At.prototype.set=Ud;var zd=At,hs=zd,Wd=Ln,Kd=Dr;function Vd(){this.size=0,this.__data__={hash:new hs,map:new(Kd||Wd),string:new hs}}var Gd=Vd;function Yd(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var Xd=Yd,Zd=Xd;function Jd(n,e){var t=n.__data__;return Zd(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Mn=Jd,Qd=Mn;function eh(n){var e=Qd(this,n).delete(n);return this.size-=e?1:0,e}var th=eh,nh=Mn;function rh(n){return nh(this,n).get(n)}var oh=rh,ih=Mn;function sh(n){return ih(this,n).has(n)}var ah=sh,lh=Mn;function ch(n,e){var t=lh(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var uh=ch,dh=Gd,hh=th,fh=oh,ph=ah,gh=uh;function Lt(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Lt.prototype.clear=dh;Lt.prototype.delete=hh;Lt.prototype.get=fh;Lt.prototype.has=ph;Lt.prototype.set=gh;var pa=Lt,vh=Ln,mh=Dr,yh=pa,bh=200;function wh(n,e){var t=this.__data__;if(t instanceof vh){var r=t.__data__;if(!mh||r.length<bh-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new yh(r)}return t.set(n,e),this.size=t.size,this}var kh=wh,xh=Ln,Eh=cu,_h=du,Oh=fu,Th=gu,Ch=kh;function Bt(n){var e=this.__data__=new xh(n);this.size=e.size}Bt.prototype.clear=Eh;Bt.prototype.delete=_h;Bt.prototype.get=Oh;Bt.prototype.has=Th;Bt.prototype.set=Ch;var Sh=Bt,Ah="__lodash_hash_undefined__";function Lh(n){return this.__data__.set(n,Ah),this}var Bh=Lh;function Ph(n){return this.__data__.has(n)}var Mh=Ph,Nh=pa,Ih=Bh,jh=Mh;function gn(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Nh;++e<t;)this.add(n[e])}gn.prototype.add=gn.prototype.push=Ih;gn.prototype.has=jh;var Rh=gn;function Dh(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}var $h=Dh;function Fh(n,e){return n.has(e)}var Hh=Fh,qh=Rh,Uh=$h,zh=Hh,Wh=1,Kh=2;function Vh(n,e,t,r,o,i){var s=t&Wh,c=n.length,f=e.length;if(c!=f&&!(s&&f>c))return!1;var d=i.get(n),g=i.get(e);if(d&&g)return d==e&&g==n;var l=-1,a=!0,u=t&Kh?new qh:void 0;for(i.set(n,e),i.set(e,n);++l<c;){var p=n[l],b=e[l];if(r)var v=s?r(b,p,l,e,n,i):r(p,b,l,n,e,i);if(v!==void 0){if(v)continue;a=!1;break}if(u){if(!Uh(e,function(y,h){if(!zh(u,h)&&(p===y||o(p,y,t,r,i)))return u.push(h)})){a=!1;break}}else if(!(p===b||o(p,b,t,r,i))){a=!1;break}}return i.delete(n),i.delete(e),a}var ga=Vh,Gh=Xe,Yh=Gh.Uint8Array,Xh=Yh;function Zh(n){var e=-1,t=Array(n.size);return n.forEach(function(r,o){t[++e]=[o,r]}),t}var Jh=Zh;function Qh(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var ef=Qh,fs=Rr,ps=Xh,tf=la,nf=ga,rf=Jh,of=ef,sf=1,af=2,lf="[object Boolean]",cf="[object Date]",uf="[object Error]",df="[object Map]",hf="[object Number]",ff="[object RegExp]",pf="[object Set]",gf="[object String]",vf="[object Symbol]",mf="[object ArrayBuffer]",yf="[object DataView]",gs=fs?fs.prototype:void 0,or=gs?gs.valueOf:void 0;function bf(n,e,t,r,o,i,s){switch(t){case yf:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case mf:return!(n.byteLength!=e.byteLength||!i(new ps(n),new ps(e)));case lf:case cf:case hf:return tf(+n,+e);case uf:return n.name==e.name&&n.message==e.message;case ff:case gf:return n==e+"";case df:var c=rf;case pf:var f=r&sf;if(c||(c=of),n.size!=e.size&&!f)return!1;var d=s.get(n);if(d)return d==e;r|=af,s.set(n,e);var g=nf(c(n),c(e),r,o,i,s);return s.delete(n),g;case vf:if(or)return or.call(n)==or.call(e)}return!1}var wf=bf;function kf(n,e){for(var t=-1,r=e.length,o=n.length;++t<r;)n[o+t]=e[t];return n}var xf=kf,Ef=Array.isArray,$r=Ef,_f=xf,Of=$r;function Tf(n,e,t){var r=e(n);return Of(n)?r:_f(r,t(n))}var Cf=Tf;function Sf(n,e){for(var t=-1,r=n==null?0:n.length,o=0,i=[];++t<r;){var s=n[t];e(s,t,n)&&(i[o++]=s)}return i}var Af=Sf;function Lf(){return[]}var Bf=Lf,Pf=Af,Mf=Bf,Nf=Object.prototype,If=Nf.propertyIsEnumerable,vs=Object.getOwnPropertySymbols,jf=vs?function(n){return n==null?[]:(n=Object(n),Pf(vs(n),function(e){return If.call(n,e)}))}:Mf,Rf=jf;function Df(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var $f=Df;function Ff(n){return n!=null&&typeof n=="object"}var Nn=Ff,Hf=Bn,qf=Nn,Uf="[object Arguments]";function zf(n){return qf(n)&&Hf(n)==Uf}var Wf=zf,ms=Wf,Kf=Nn,va=Object.prototype,Vf=va.hasOwnProperty,Gf=va.propertyIsEnumerable,Yf=ms(function(){return arguments}())?ms:function(n){return Kf(n)&&Vf.call(n,"callee")&&!Gf.call(n,"callee")},Xf=Yf,vn={exports:{}};function Zf(){return!1}var Jf=Zf;vn.exports;(function(n,e){var t=Xe,r=Jf,o=e&&!e.nodeType&&e,i=o&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===o,c=s?t.Buffer:void 0,f=c?c.isBuffer:void 0,d=f||r;n.exports=d})(vn,vn.exports);var ma=vn.exports,Qf=9007199254740991,ep=/^(?:0|[1-9]\d*)$/;function tp(n,e){var t=typeof n;return e=e??Qf,!!e&&(t=="number"||t!="symbol"&&ep.test(n))&&n>-1&&n%1==0&&n<e}var np=tp,rp=9007199254740991;function op(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=rp}var ya=op,ip=Bn,sp=ya,ap=Nn,lp="[object Arguments]",cp="[object Array]",up="[object Boolean]",dp="[object Date]",hp="[object Error]",fp="[object Function]",pp="[object Map]",gp="[object Number]",vp="[object Object]",mp="[object RegExp]",yp="[object Set]",bp="[object String]",wp="[object WeakMap]",kp="[object ArrayBuffer]",xp="[object DataView]",Ep="[object Float32Array]",_p="[object Float64Array]",Op="[object Int8Array]",Tp="[object Int16Array]",Cp="[object Int32Array]",Sp="[object Uint8Array]",Ap="[object Uint8ClampedArray]",Lp="[object Uint16Array]",Bp="[object Uint32Array]",pe={};pe[Ep]=pe[_p]=pe[Op]=pe[Tp]=pe[Cp]=pe[Sp]=pe[Ap]=pe[Lp]=pe[Bp]=!0;pe[lp]=pe[cp]=pe[kp]=pe[up]=pe[xp]=pe[dp]=pe[hp]=pe[fp]=pe[pp]=pe[gp]=pe[vp]=pe[mp]=pe[yp]=pe[bp]=pe[wp]=!1;function Pp(n){return ap(n)&&sp(n.length)&&!!pe[ip(n)]}var Mp=Pp;function Np(n){return function(e){return n(e)}}var Ip=Np,mn={exports:{}};mn.exports;(function(n,e){var t=ca,r=e&&!e.nodeType&&e,o=r&&!0&&n&&!n.nodeType&&n,i=o&&o.exports===r,s=i&&t.process,c=function(){try{var f=o&&o.require&&o.require("util").types;return f||s&&s.binding&&s.binding("util")}catch{}}();n.exports=c})(mn,mn.exports);var jp=mn.exports,Rp=Mp,Dp=Ip,ys=jp,bs=ys&&ys.isTypedArray,$p=bs?Dp(bs):Rp,ba=$p,Fp=$f,Hp=Xf,qp=$r,Up=ma,zp=np,Wp=ba,Kp=Object.prototype,Vp=Kp.hasOwnProperty;function Gp(n,e){var t=qp(n),r=!t&&Hp(n),o=!t&&!r&&Up(n),i=!t&&!r&&!o&&Wp(n),s=t||r||o||i,c=s?Fp(n.length,String):[],f=c.length;for(var d in n)(e||Vp.call(n,d))&&!(s&&(d=="length"||o&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||zp(d,f)))&&c.push(d);return c}var Yp=Gp,Xp=Object.prototype;function Zp(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Xp;return n===t}var Jp=Zp;function Qp(n,e){return function(t){return n(e(t))}}var eg=Qp,tg=eg,ng=tg(Object.keys,Object),rg=ng,og=Jp,ig=rg,sg=Object.prototype,ag=sg.hasOwnProperty;function lg(n){if(!og(n))return ig(n);var e=[];for(var t in Object(n))ag.call(n,t)&&t!="constructor"&&e.push(t);return e}var cg=lg,ug=ha,dg=ya;function hg(n){return n!=null&&dg(n.length)&&!ug(n)}var fg=hg,pg=Yp,gg=cg,vg=fg;function mg(n){return vg(n)?pg(n):gg(n)}var yg=mg,bg=Cf,wg=Rf,kg=yg;function xg(n){return bg(n,kg,wg)}var Eg=xg,ws=Eg,_g=1,Og=Object.prototype,Tg=Og.hasOwnProperty;function Cg(n,e,t,r,o,i){var s=t&_g,c=ws(n),f=c.length,d=ws(e),g=d.length;if(f!=g&&!s)return!1;for(var l=f;l--;){var a=c[l];if(!(s?a in e:Tg.call(e,a)))return!1}var u=i.get(n),p=i.get(e);if(u&&p)return u==e&&p==n;var b=!0;i.set(n,e),i.set(e,n);for(var v=s;++l<f;){a=c[l];var y=n[a],h=e[a];if(r)var w=s?r(h,y,a,e,n,i):r(y,h,a,n,e,i);if(!(w===void 0?y===h||o(y,h,t,r,i):w)){b=!1;break}v||(v=a=="constructor")}if(b&&!v){var m=n.constructor,k=e.constructor;m!=k&&"constructor"in n&&"constructor"in e&&!(typeof m=="function"&&m instanceof m&&typeof k=="function"&&k instanceof k)&&(b=!1)}return i.delete(n),i.delete(e),b}var Sg=Cg,Ag=St,Lg=Xe,Bg=Ag(Lg,"DataView"),Pg=Bg,Mg=St,Ng=Xe,Ig=Mg(Ng,"Promise"),jg=Ig,Rg=St,Dg=Xe,$g=Rg(Dg,"Set"),Fg=$g,Hg=St,qg=Xe,Ug=Hg(qg,"WeakMap"),zg=Ug,yr=Pg,br=Dr,wr=jg,kr=Fg,xr=zg,wa=Bn,Pt=fa,ks="[object Map]",Wg="[object Object]",xs="[object Promise]",Es="[object Set]",_s="[object WeakMap]",Os="[object DataView]",Kg=Pt(yr),Vg=Pt(br),Gg=Pt(wr),Yg=Pt(kr),Xg=Pt(xr),lt=wa;(yr&&lt(new yr(new ArrayBuffer(1)))!=Os||br&&lt(new br)!=ks||wr&&lt(wr.resolve())!=xs||kr&&lt(new kr)!=Es||xr&&lt(new xr)!=_s)&&(lt=function(n){var e=wa(n),t=e==Wg?n.constructor:void 0,r=t?Pt(t):"";if(r)switch(r){case Kg:return Os;case Vg:return ks;case Gg:return xs;case Yg:return Es;case Xg:return _s}return e});var Zg=lt,ir=Sh,Jg=ga,Qg=wf,ev=Sg,Ts=Zg,Cs=$r,Ss=ma,tv=ba,nv=1,As="[object Arguments]",Ls="[object Array]",Zt="[object Object]",rv=Object.prototype,Bs=rv.hasOwnProperty;function ov(n,e,t,r,o,i){var s=Cs(n),c=Cs(e),f=s?Ls:Ts(n),d=c?Ls:Ts(e);f=f==As?Zt:f,d=d==As?Zt:d;var g=f==Zt,l=d==Zt,a=f==d;if(a&&Ss(n)){if(!Ss(e))return!1;s=!0,g=!1}if(a&&!g)return i||(i=new ir),s||tv(n)?Jg(n,e,t,r,o,i):Qg(n,e,f,t,r,o,i);if(!(t&nv)){var u=g&&Bs.call(n,"__wrapped__"),p=l&&Bs.call(e,"__wrapped__");if(u||p){var b=u?n.value():n,v=p?e.value():e;return i||(i=new ir),o(b,v,t,r,i)}}return a?(i||(i=new ir),ev(n,e,t,r,o,i)):!1}var iv=ov,sv=iv,Ps=Nn;function ka(n,e,t,r,o){return n===e?!0:n==null||e==null||!Ps(n)&&!Ps(e)?n!==n&&e!==e:sv(n,e,t,r,ka,o)}var av=ka,lv=av;function cv(n,e){return lv(n,e)}var uv=cv,xa={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(n,e){(function(r,o){n.exports=o()})(typeof self<"u"?self:Me,function(){return function(t){var r={};function o(i){if(r[i])return r[i].exports;var s=r[i]={i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=t,o.c=r,o.d=function(i,s,c){o.o(i,s)||Object.defineProperty(i,s,{configurable:!1,enumerable:!0,get:c})},o.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(s,"a",s),s},o.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},o.p="",o(o.s=109)}([function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=o(17),s=o(18),c=o(19),f=o(45),d=o(46),g=o(47),l=o(48),a=o(49),u=o(12),p=o(32),b=o(33),v=o(31),y=o(1),h={Scope:y.Scope,create:y.create,find:y.find,query:y.query,register:y.register,Container:i.default,Format:s.default,Leaf:c.default,Embed:l.default,Scroll:f.default,Block:g.default,Inline:d.default,Text:a.default,Attributor:{Attribute:u.default,Class:p.default,Style:b.default,Store:v.default}};r.default=h},function(t,r,o){var i=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,h){y.__proto__=h}||function(y,h){for(var w in h)h.hasOwnProperty(w)&&(y[w]=h[w])};return function(y,h){v(y,h);function w(){this.constructor=y}y.prototype=h===null?Object.create(h):(w.prototype=h.prototype,new w)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=function(v){i(y,v);function y(h){var w=this;return h="[Parchment] "+h,w=v.call(this,h)||this,w.message=h,w.name=w.constructor.name,w}return y}(Error);r.ParchmentError=s;var c={},f={},d={},g={};r.DATA_KEY="__blot";var l;(function(v){v[v.TYPE=3]="TYPE",v[v.LEVEL=12]="LEVEL",v[v.ATTRIBUTE=13]="ATTRIBUTE",v[v.BLOT=14]="BLOT",v[v.INLINE=7]="INLINE",v[v.BLOCK=11]="BLOCK",v[v.BLOCK_BLOT=10]="BLOCK_BLOT",v[v.INLINE_BLOT=6]="INLINE_BLOT",v[v.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",v[v.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",v[v.ANY=15]="ANY"})(l=r.Scope||(r.Scope={}));function a(v,y){var h=p(v);if(h==null)throw new s("Unable to create "+v+" blot");var w=h,m=v instanceof Node||v.nodeType===Node.TEXT_NODE?v:w.create(y);return new w(m,y)}r.create=a;function u(v,y){return y===void 0&&(y=!1),v==null?null:v[r.DATA_KEY]!=null?v[r.DATA_KEY].blot:y?u(v.parentNode,y):null}r.find=u;function p(v,y){y===void 0&&(y=l.ANY);var h;if(typeof v=="string")h=g[v]||c[v];else if(v instanceof Text||v.nodeType===Node.TEXT_NODE)h=g.text;else if(typeof v=="number")v&l.LEVEL&l.BLOCK?h=g.block:v&l.LEVEL&l.INLINE&&(h=g.inline);else if(v instanceof HTMLElement){var w=(v.getAttribute("class")||"").split(/\s+/);for(var m in w)if(h=f[w[m]],h)break;h=h||d[v.tagName]}return h==null?null:y&l.LEVEL&h.scope&&y&l.TYPE&h.scope?h:null}r.query=p;function b(){for(var v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];if(v.length>1)return v.map(function(m){return b(m)});var h=v[0];if(typeof h.blotName!="string"&&typeof h.attrName!="string")throw new s("Invalid definition");if(h.blotName==="abstract")throw new s("Cannot register abstract class");if(g[h.blotName||h.attrName]=h,typeof h.keyName=="string")c[h.keyName]=h;else if(h.className!=null&&(f[h.className]=h),h.tagName!=null){Array.isArray(h.tagName)?h.tagName=h.tagName.map(function(m){return m.toUpperCase()}):h.tagName=h.tagName.toUpperCase();var w=Array.isArray(h.tagName)?h.tagName:[h.tagName];w.forEach(function(m){(d[m]==null||h.className==null)&&(d[m]=h)})}return h}r.register=b},function(t,r,o){var i=o(51),s=o(11),c=o(3),f=o(20),d="\0",g=function(l){Array.isArray(l)?this.ops=l:l!=null&&Array.isArray(l.ops)?this.ops=l.ops:this.ops=[]};g.prototype.insert=function(l,a){var u={};return l.length===0?this:(u.insert=l,a!=null&&typeof a=="object"&&Object.keys(a).length>0&&(u.attributes=a),this.push(u))},g.prototype.delete=function(l){return l<=0?this:this.push({delete:l})},g.prototype.retain=function(l,a){if(l<=0)return this;var u={retain:l};return a!=null&&typeof a=="object"&&Object.keys(a).length>0&&(u.attributes=a),this.push(u)},g.prototype.push=function(l){var a=this.ops.length,u=this.ops[a-1];if(l=c(!0,{},l),typeof u=="object"){if(typeof l.delete=="number"&&typeof u.delete=="number")return this.ops[a-1]={delete:u.delete+l.delete},this;if(typeof u.delete=="number"&&l.insert!=null&&(a-=1,u=this.ops[a-1],typeof u!="object"))return this.ops.unshift(l),this;if(s(l.attributes,u.attributes)){if(typeof l.insert=="string"&&typeof u.insert=="string")return this.ops[a-1]={insert:u.insert+l.insert},typeof l.attributes=="object"&&(this.ops[a-1].attributes=l.attributes),this;if(typeof l.retain=="number"&&typeof u.retain=="number")return this.ops[a-1]={retain:u.retain+l.retain},typeof l.attributes=="object"&&(this.ops[a-1].attributes=l.attributes),this}}return a===this.ops.length?this.ops.push(l):this.ops.splice(a,0,l),this},g.prototype.chop=function(){var l=this.ops[this.ops.length-1];return l&&l.retain&&!l.attributes&&this.ops.pop(),this},g.prototype.filter=function(l){return this.ops.filter(l)},g.prototype.forEach=function(l){this.ops.forEach(l)},g.prototype.map=function(l){return this.ops.map(l)},g.prototype.partition=function(l){var a=[],u=[];return this.forEach(function(p){var b=l(p)?a:u;b.push(p)}),[a,u]},g.prototype.reduce=function(l,a){return this.ops.reduce(l,a)},g.prototype.changeLength=function(){return this.reduce(function(l,a){return a.insert?l+f.length(a):a.delete?l-a.delete:l},0)},g.prototype.length=function(){return this.reduce(function(l,a){return l+f.length(a)},0)},g.prototype.slice=function(l,a){l=l||0,typeof a!="number"&&(a=1/0);for(var u=[],p=f.iterator(this.ops),b=0;b<a&&p.hasNext();){var v;b<l?v=p.next(l-b):(v=p.next(a-b),u.push(v)),b+=f.length(v)}return new g(u)},g.prototype.compose=function(l){var a=f.iterator(this.ops),u=f.iterator(l.ops),p=[],b=u.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){for(var v=b.retain;a.peekType()==="insert"&&a.peekLength()<=v;)v-=a.peekLength(),p.push(a.next());b.retain-v>0&&u.next(b.retain-v)}for(var y=new g(p);a.hasNext()||u.hasNext();)if(u.peekType()==="insert")y.push(u.next());else if(a.peekType()==="delete")y.push(a.next());else{var h=Math.min(a.peekLength(),u.peekLength()),w=a.next(h),m=u.next(h);if(typeof m.retain=="number"){var k={};typeof w.retain=="number"?k.retain=h:k.insert=w.insert;var S=f.attributes.compose(w.attributes,m.attributes,typeof w.retain=="number");if(S&&(k.attributes=S),y.push(k),!u.hasNext()&&s(y.ops[y.ops.length-1],k)){var T=new g(a.rest());return y.concat(T).chop()}}else typeof m.delete=="number"&&typeof w.retain=="number"&&y.push(m)}return y.chop()},g.prototype.concat=function(l){var a=new g(this.ops.slice());return l.ops.length>0&&(a.push(l.ops[0]),a.ops=a.ops.concat(l.ops.slice(1))),a},g.prototype.diff=function(l,a){if(this.ops===l.ops)return new g;var u=[this,l].map(function(h){return h.map(function(w){if(w.insert!=null)return typeof w.insert=="string"?w.insert:d;var m=h===l?"on":"with";throw new Error("diff() called "+m+" non-document")}).join("")}),p=new g,b=i(u[0],u[1],a),v=f.iterator(this.ops),y=f.iterator(l.ops);return b.forEach(function(h){for(var w=h[1].length;w>0;){var m=0;switch(h[0]){case i.INSERT:m=Math.min(y.peekLength(),w),p.push(y.next(m));break;case i.DELETE:m=Math.min(w,v.peekLength()),v.next(m),p.delete(m);break;case i.EQUAL:m=Math.min(v.peekLength(),y.peekLength(),w);var k=v.next(m),S=y.next(m);s(k.insert,S.insert)?p.retain(m,f.attributes.diff(k.attributes,S.attributes)):p.push(S).delete(m);break}w-=m}}),p.chop()},g.prototype.eachLine=function(l,a){a=a||`
`;for(var u=f.iterator(this.ops),p=new g,b=0;u.hasNext();){if(u.peekType()!=="insert")return;var v=u.peek(),y=f.length(v)-u.peekLength(),h=typeof v.insert=="string"?v.insert.indexOf(a,y)-y:-1;if(h<0)p.push(u.next());else if(h>0)p.push(u.next(h));else{if(l(p,u.next(1).attributes||{},b)===!1)return;b+=1,p=new g}}p.length()>0&&l(p,{},b)},g.prototype.transform=function(l,a){if(a=!!a,typeof l=="number")return this.transformPosition(l,a);for(var u=f.iterator(this.ops),p=f.iterator(l.ops),b=new g;u.hasNext()||p.hasNext();)if(u.peekType()==="insert"&&(a||p.peekType()!=="insert"))b.retain(f.length(u.next()));else if(p.peekType()==="insert")b.push(p.next());else{var v=Math.min(u.peekLength(),p.peekLength()),y=u.next(v),h=p.next(v);if(y.delete)continue;h.delete?b.push(h):b.retain(v,f.attributes.transform(y.attributes,h.attributes,a))}return b.chop()},g.prototype.transformPosition=function(l,a){a=!!a;for(var u=f.iterator(this.ops),p=0;u.hasNext()&&p<=l;){var b=u.peekLength(),v=u.peekType();if(u.next(),v==="delete"){l-=Math.min(b,l-p);continue}else v==="insert"&&(p<l||!a)&&(l+=b);p+=b}return l},t.exports=g},function(t,r){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,f=function(u){return typeof Array.isArray=="function"?Array.isArray(u):i.call(u)==="[object Array]"},d=function(u){if(!u||i.call(u)!=="[object Object]")return!1;var p=o.call(u,"constructor"),b=u.constructor&&u.constructor.prototype&&o.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!p&&!b)return!1;var v;for(v in u);return typeof v>"u"||o.call(u,v)},g=function(u,p){s&&p.name==="__proto__"?s(u,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):u[p.name]=p.newValue},l=function(u,p){if(p==="__proto__")if(o.call(u,p)){if(c)return c(u,p).value}else return;return u[p]};t.exports=function a(){var u,p,b,v,y,h,w=arguments[0],m=1,k=arguments.length,S=!1;for(typeof w=="boolean"&&(S=w,w=arguments[1]||{},m=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});m<k;++m)if(u=arguments[m],u!=null)for(p in u)b=l(w,p),v=l(u,p),w!==v&&(S&&v&&(d(v)||(y=f(v)))?(y?(y=!1,h=b&&f(b)?b:[]):h=b&&d(b)?b:{},g(w,{name:p,newValue:a(S,h,v)})):typeof v<"u"&&g(w,{name:p,newValue:v}));return w}},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var i=function(){function x(_,A){for(var L=0;L<A.length;L++){var P=A[L];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(_,P.key,P)}}return function(_,A,L){return A&&x(_.prototype,A),L&&x(_,L),_}}(),s=function x(_,A,L){_===null&&(_=Function.prototype);var P=Object.getOwnPropertyDescriptor(_,A);if(P===void 0){var R=Object.getPrototypeOf(_);return R===null?void 0:x(R,A,L)}else{if("value"in P)return P.value;var F=P.get;return F===void 0?void 0:F.call(L)}},c=o(3),f=w(c),d=o(2),g=w(d),l=o(0),a=w(l),u=o(16),p=w(u),b=o(6),v=w(b),y=o(7),h=w(y);function w(x){return x&&x.__esModule?x:{default:x}}function m(x,_){if(!(x instanceof _))throw new TypeError("Cannot call a class as a function")}function k(x,_){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:x}function S(x,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(x,_):x.__proto__=_)}var T=1,E=function(x){S(_,x);function _(){return m(this,_),k(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return i(_,[{key:"attach",value:function(){s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"attach",this).call(this),this.attributes=new a.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new g.default().insert(this.value(),(0,f.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(L,P){var R=a.default.query(L,a.default.Scope.BLOCK_ATTRIBUTE);R!=null&&this.attributes.attribute(R,P)}},{key:"formatAt",value:function(L,P,R,F){this.format(R,F)}},{key:"insertAt",value:function(L,P,R){if(typeof P=="string"&&P.endsWith(`
`)){var F=a.default.create(O.blotName);this.parent.insertBefore(F,L===0?this:this.next),F.insertAt(0,P.slice(0,-1))}else s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertAt",this).call(this,L,P,R)}}]),_}(a.default.Embed);E.scope=a.default.Scope.BLOCK_BLOT;var O=function(x){S(_,x);function _(A){m(this,_);var L=k(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A));return L.cache={},L}return i(_,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(a.default.Leaf).reduce(function(L,P){return P.length()===0?L:L.insert(P.value(),C(P))},new g.default).insert(`
`,C(this))),this.cache.delta}},{key:"deleteAt",value:function(L,P){s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"deleteAt",this).call(this,L,P),this.cache={}}},{key:"formatAt",value:function(L,P,R,F){P<=0||(a.default.query(R,a.default.Scope.BLOCK)?L+P===this.length()&&this.format(R,F):s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"formatAt",this).call(this,L,Math.min(P,this.length()-L-1),R,F),this.cache={})}},{key:"insertAt",value:function(L,P,R){if(R!=null)return s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertAt",this).call(this,L,P,R);if(P.length!==0){var F=P.split(`
`),W=F.shift();W.length>0&&(L<this.length()-1||this.children.tail==null?s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertAt",this).call(this,Math.min(L,this.length()-1),W):this.children.tail.insertAt(this.children.tail.length(),W),this.cache={});var $=this;F.reduce(function(I,B){return $=$.split(I,!0),$.insertAt(0,B),B.length},L+W.length)}}},{key:"insertBefore",value:function(L,P){var R=this.children.head;s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertBefore",this).call(this,L,P),R instanceof p.default&&R.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"length",this).call(this)+T),this.cache.length}},{key:"moveChildren",value:function(L,P){s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"moveChildren",this).call(this,L,P),this.cache={}}},{key:"optimize",value:function(L){s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,L),this.cache={}}},{key:"path",value:function(L){return s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"path",this).call(this,L,!0)}},{key:"removeChild",value:function(L){s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"removeChild",this).call(this,L),this.cache={}}},{key:"split",value:function(L){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(P&&(L===0||L>=this.length()-T)){var R=this.clone();return L===0?(this.parent.insertBefore(R,this),this):(this.parent.insertBefore(R,this.next),R)}else{var F=s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"split",this).call(this,L,P);return this.cache={},F}}}]),_}(a.default.Block);O.blotName="block",O.tagName="P",O.defaultChild="break",O.allowedChildren=[v.default,a.default.Embed,h.default];function C(x){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return x==null||(typeof x.formats=="function"&&(_=(0,f.default)(_,x.formats())),x.parent==null||x.parent.blotName=="scroll"||x.parent.statics.scope!==x.statics.scope)?_:C(x.parent,_)}r.bubbleFormats=C,r.BlockEmbed=E,r.default=O},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},s=function(){function $(I,B){var N=[],j=!0,q=!1,H=void 0;try{for(var M=I[Symbol.iterator](),D;!(j=(D=M.next()).done)&&(N.push(D.value),!(B&&N.length===B));j=!0);}catch(U){q=!0,H=U}finally{try{!j&&M.return&&M.return()}finally{if(q)throw H}}return N}return function(I,B){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return $(I,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function $(I,B){for(var N=0;N<B.length;N++){var j=B[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(I,j.key,j)}}return function(I,B,N){return B&&$(I.prototype,B),N&&$(I,N),I}}();o(50);var f=o(2),d=C(f),g=o(14),l=C(g),a=o(8),u=C(a),p=o(9),b=C(p),v=o(0),y=C(v),h=o(15),w=C(h),m=o(3),k=C(m),S=o(10),T=C(S),E=o(34),O=C(E);function C($){return $&&$.__esModule?$:{default:$}}function x($,I,B){return I in $?Object.defineProperty($,I,{value:B,enumerable:!0,configurable:!0,writable:!0}):$[I]=B,$}function _($,I){if(!($ instanceof I))throw new TypeError("Cannot call a class as a function")}var A=(0,T.default)("quill"),L=function(){c($,null,[{key:"debug",value:function(B){B===!0&&(B="log"),T.default.level(B)}},{key:"find",value:function(B){return B.__quill||y.default.find(B)}},{key:"import",value:function(B){return this.imports[B]==null&&A.error("Cannot import "+B+". Are you sure it was registered?"),this.imports[B]}},{key:"register",value:function(B,N){var j=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof B!="string"){var H=B.attrName||B.blotName;typeof H=="string"?this.register("formats/"+H,B,N):Object.keys(B).forEach(function(M){j.register(M,B[M],N)})}else this.imports[B]!=null&&!q&&A.warn("Overwriting "+B+" with",N),this.imports[B]=N,(B.startsWith("blots/")||B.startsWith("formats/"))&&N.blotName!=="abstract"?y.default.register(N):B.startsWith("modules")&&typeof N.register=="function"&&N.register()}}]);function $(I){var B=this,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_(this,$),this.options=P(I,N),this.container=this.options.container,this.container==null)return A.error("Invalid Quill container",I);this.options.debug&&$.debug(this.options.debug);var j=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new u.default,this.scroll=y.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new l.default(this.scroll),this.selection=new w.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(u.default.events.EDITOR_CHANGE,function(H){H===u.default.events.TEXT_CHANGE&&B.root.classList.toggle("ql-blank",B.editor.isBlank())}),this.emitter.on(u.default.events.SCROLL_UPDATE,function(H,M){var D=B.selection.lastRange,U=D&&D.length===0?D.index:void 0;R.call(B,function(){return B.editor.update(null,M,U)},H)});var q=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+j+"<p><br></p></div>");this.setContents(q),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return c($,[{key:"addContainer",value:function(B){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof B=="string"){var j=B;B=document.createElement("div"),B.classList.add(j)}return this.container.insertBefore(B,N),B}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(B,N,j){var q=this,H=F(B,N,j),M=s(H,4);return B=M[0],N=M[1],j=M[3],R.call(this,function(){return q.editor.deleteText(B,N)},j,B,-1*N)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(B),this.container.classList.toggle("ql-disabled",!B)}},{key:"focus",value:function(){var B=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=B,this.scrollIntoView()}},{key:"format",value:function(B,N){var j=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u.default.sources.API;return R.call(this,function(){var H=j.getSelection(!0),M=new d.default;if(H==null)return M;if(y.default.query(B,y.default.Scope.BLOCK))M=j.editor.formatLine(H.index,H.length,x({},B,N));else{if(H.length===0)return j.selection.format(B,N),M;M=j.editor.formatText(H.index,H.length,x({},B,N))}return j.setSelection(H,u.default.sources.SILENT),M},q)}},{key:"formatLine",value:function(B,N,j,q,H){var M=this,D=void 0,U=F(B,N,j,q,H),z=s(U,4);return B=z[0],N=z[1],D=z[2],H=z[3],R.call(this,function(){return M.editor.formatLine(B,N,D)},H,B,0)}},{key:"formatText",value:function(B,N,j,q,H){var M=this,D=void 0,U=F(B,N,j,q,H),z=s(U,4);return B=z[0],N=z[1],D=z[2],H=z[3],R.call(this,function(){return M.editor.formatText(B,N,D)},H,B,0)}},{key:"getBounds",value:function(B){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,j=void 0;typeof B=="number"?j=this.selection.getBounds(B,N):j=this.selection.getBounds(B.index,B.length);var q=this.container.getBoundingClientRect();return{bottom:j.bottom-q.top,height:j.height,left:j.left-q.left,right:j.right-q.left,top:j.top-q.top,width:j.width}}},{key:"getContents",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-B,j=F(B,N),q=s(j,2);return B=q[0],N=q[1],this.editor.getContents(B,N)}},{key:"getFormat",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof B=="number"?this.editor.getFormat(B,N):this.editor.getFormat(B.index,B.length)}},{key:"getIndex",value:function(B){return B.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(B){return this.scroll.leaf(B)}},{key:"getLine",value:function(B){return this.scroll.line(B)}},{key:"getLines",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof B!="number"?this.scroll.lines(B.index,B.length):this.scroll.lines(B,N)}},{key:"getModule",value:function(B){return this.theme.modules[B]}},{key:"getSelection",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return B&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-B,j=F(B,N),q=s(j,2);return B=q[0],N=q[1],this.editor.getText(B,N)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(B,N,j){var q=this,H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:$.sources.API;return R.call(this,function(){return q.editor.insertEmbed(B,N,j)},H,B)}},{key:"insertText",value:function(B,N,j,q,H){var M=this,D=void 0,U=F(B,0,j,q,H),z=s(U,4);return B=z[0],D=z[2],H=z[3],R.call(this,function(){return M.editor.insertText(B,N,D)},H,B,N.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(B,N,j){this.clipboard.dangerouslyPasteHTML(B,N,j)}},{key:"removeFormat",value:function(B,N,j){var q=this,H=F(B,N,j),M=s(H,4);return B=M[0],N=M[1],j=M[3],R.call(this,function(){return q.editor.removeFormat(B,N)},j,B)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(B){var N=this,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.default.sources.API;return R.call(this,function(){B=new d.default(B);var q=N.getLength(),H=N.editor.deleteText(0,q),M=N.editor.applyDelta(B),D=M.ops[M.ops.length-1];D!=null&&typeof D.insert=="string"&&D.insert[D.insert.length-1]===`
`&&(N.editor.deleteText(N.getLength()-1,1),M.delete(1));var U=H.compose(M);return U},j)}},{key:"setSelection",value:function(B,N,j){if(B==null)this.selection.setRange(null,N||$.sources.API);else{var q=F(B,N,j),H=s(q,4);B=H[0],N=H[1],j=H[3],this.selection.setRange(new h.Range(B,N),j),j!==u.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(B){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.default.sources.API,j=new d.default().insert(B);return this.setContents(j,N)}},{key:"update",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u.default.sources.USER,N=this.scroll.update(B);return this.selection.update(B),N}},{key:"updateContents",value:function(B){var N=this,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u.default.sources.API;return R.call(this,function(){return B=new d.default(B),N.editor.applyDelta(B,j)},j,!0)}}]),$}();L.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},L.events=u.default.events,L.sources=u.default.sources,L.version="1.3.7",L.imports={delta:d.default,parchment:y.default,"core/module":b.default,"core/theme":O.default};function P($,I){if(I=(0,k.default)(!0,{container:$,modules:{clipboard:!0,keyboard:!0,history:!0}},I),!I.theme||I.theme===L.DEFAULTS.theme)I.theme=O.default;else if(I.theme=L.import("themes/"+I.theme),I.theme==null)throw new Error("Invalid theme "+I.theme+". Did you register it?");var B=(0,k.default)(!0,{},I.theme.DEFAULTS);[B,I].forEach(function(q){q.modules=q.modules||{},Object.keys(q.modules).forEach(function(H){q.modules[H]===!0&&(q.modules[H]={})})});var N=Object.keys(B.modules).concat(Object.keys(I.modules)),j=N.reduce(function(q,H){var M=L.import("modules/"+H);return M==null?A.error("Cannot load "+H+" module. Are you sure you registered it?"):q[H]=M.DEFAULTS||{},q},{});return I.modules!=null&&I.modules.toolbar&&I.modules.toolbar.constructor!==Object&&(I.modules.toolbar={container:I.modules.toolbar}),I=(0,k.default)(!0,{},L.DEFAULTS,{modules:j},B,I),["bounds","container","scrollingContainer"].forEach(function(q){typeof I[q]=="string"&&(I[q]=document.querySelector(I[q]))}),I.modules=Object.keys(I.modules).reduce(function(q,H){return I.modules[H]&&(q[H]=I.modules[H]),q},{}),I}function R($,I,B,N){if(this.options.strict&&!this.isEnabled()&&I===u.default.sources.USER)return new d.default;var j=B==null?null:this.getSelection(),q=this.editor.delta,H=$();if(j!=null&&(B===!0&&(B=j.index),N==null?j=W(j,H,I):N!==0&&(j=W(j,B,N,I)),this.setSelection(j,u.default.sources.SILENT)),H.length()>0){var M,D=[u.default.events.TEXT_CHANGE,H,q,I];if((M=this.emitter).emit.apply(M,[u.default.events.EDITOR_CHANGE].concat(D)),I!==u.default.sources.SILENT){var U;(U=this.emitter).emit.apply(U,D)}}return H}function F($,I,B,N,j){var q={};return typeof $.index=="number"&&typeof $.length=="number"?typeof I!="number"?(j=N,N=B,B=I,I=$.length,$=$.index):(I=$.length,$=$.index):typeof I!="number"&&(j=N,N=B,B=I,I=0),(typeof B>"u"?"undefined":i(B))==="object"?(q=B,j=N):typeof B=="string"&&(N!=null?q[B]=N:j=B),j=j||u.default.sources.API,[$,I,q,j]}function W($,I,B,N){if($==null)return null;var j=void 0,q=void 0;if(I instanceof d.default){var H=[$.index,$.index+$.length].map(function(z){return I.transformPosition(z,N!==u.default.sources.USER)}),M=s(H,2);j=M[0],q=M[1]}else{var D=[$.index,$.index+$.length].map(function(z){return z<I||z===I&&N===u.default.sources.USER?z:B>=0?z+B:Math.max(I,z+B)}),U=s(D,2);j=U[0],q=U[1]}return new h.Range(j,q-j)}r.expandConfig=P,r.overload=F,r.default=L},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function v(y,h){for(var w=0;w<h.length;w++){var m=h[w];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}return function(y,h,w){return h&&v(y.prototype,h),w&&v(y,w),y}}(),s=function v(y,h,w){y===null&&(y=Function.prototype);var m=Object.getOwnPropertyDescriptor(y,h);if(m===void 0){var k=Object.getPrototypeOf(y);return k===null?void 0:v(k,h,w)}else{if("value"in m)return m.value;var S=m.get;return S===void 0?void 0:S.call(w)}},c=o(7),f=l(c),d=o(0),g=l(d);function l(v){return v&&v.__esModule?v:{default:v}}function a(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function u(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function p(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var b=function(v){p(y,v);function y(){return a(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"formatAt",value:function(w,m,k,S){if(y.compare(this.statics.blotName,k)<0&&g.default.query(k,g.default.Scope.BLOT)){var T=this.isolate(w,m);S&&T.wrap(k,S)}else s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"formatAt",this).call(this,w,m,k,S)}},{key:"optimize",value:function(w){if(s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,w),this.parent instanceof y&&y.compare(this.statics.blotName,this.parent.statics.blotName)>0){var m=this.parent.isolate(this.offset(),this.length());this.moveChildren(m),m.wrap(this)}}}],[{key:"compare",value:function(w,m){var k=y.order.indexOf(w),S=y.order.indexOf(m);return k>=0||S>=0?k-S:w===m?0:w<m?-1:1}}]),y}(g.default.Inline);b.allowedChildren=[b,g.default.Embed,f.default],b.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=b},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=o(0),s=c(i);function c(a){return a&&a.__esModule?a:{default:a}}function f(a,u){if(!(a instanceof u))throw new TypeError("Cannot call a class as a function")}function d(a,u){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:a}function g(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);a.prototype=Object.create(u&&u.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(a,u):a.__proto__=u)}var l=function(a){g(u,a);function u(){return f(this,u),d(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return u}(s.default.Text);r.default=l},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function h(w,m){for(var k=0;k<m.length;k++){var S=m[k];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,m,k){return m&&h(w.prototype,m),k&&h(w,k),w}}(),s=function h(w,m,k){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,m);if(S===void 0){var T=Object.getPrototypeOf(w);return T===null?void 0:h(T,m,k)}else{if("value"in S)return S.value;var E=S.get;return E===void 0?void 0:E.call(k)}},c=o(54),f=l(c),d=o(10),g=l(d);function l(h){return h&&h.__esModule?h:{default:h}}function a(h,w){if(!(h instanceof w))throw new TypeError("Cannot call a class as a function")}function u(h,w){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:h}function p(h,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);h.prototype=Object.create(w&&w.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(h,w):h.__proto__=w)}var b=(0,g.default)("quill:events"),v=["selectionchange","mousedown","mouseup","click"];v.forEach(function(h){document.addEventListener(h,function(){for(var w=arguments.length,m=Array(w),k=0;k<w;k++)m[k]=arguments[k];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(S){if(S.__quill&&S.__quill.emitter){var T;(T=S.__quill.emitter).handleDOM.apply(T,m)}})})});var y=function(h){p(w,h);function w(){a(this,w);var m=u(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));return m.listeners={},m.on("error",b.error),m}return i(w,[{key:"emit",value:function(){b.log.apply(b,arguments),s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(k){for(var S=arguments.length,T=Array(S>1?S-1:0),E=1;E<S;E++)T[E-1]=arguments[E];(this.listeners[k.type]||[]).forEach(function(O){var C=O.node,x=O.handler;(k.target===C||C.contains(k.target))&&x.apply(void 0,[k].concat(T))})}},{key:"listenDOM",value:function(k,S,T){this.listeners[k]||(this.listeners[k]=[]),this.listeners[k].push({node:S,handler:T})}}]),w}(f.default);y.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},y.sources={API:"api",SILENT:"silent",USER:"user"},r.default=y},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});function i(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")}var s=function c(f){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,c),this.quill=f,this.options=d};s.DEFAULTS={},r.default=s},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=["error","warn","log","info"],s="warn";function c(d){if(i.indexOf(d)<=i.indexOf(s)){for(var g,l=arguments.length,a=Array(l>1?l-1:0),u=1;u<l;u++)a[u-1]=arguments[u];(g=console)[d].apply(g,a)}}function f(d){return i.reduce(function(g,l){return g[l]=c.bind(console,l,d),g},{})}c.level=f.level=function(d){s=d},r.default=f},function(t,r,o){var i=Array.prototype.slice,s=o(52),c=o(53),f=t.exports=function(a,u,p){return p||(p={}),a===u?!0:a instanceof Date&&u instanceof Date?a.getTime()===u.getTime():!a||!u||typeof a!="object"&&typeof u!="object"?p.strict?a===u:a==u:l(a,u,p)};function d(a){return a==null}function g(a){return!(!a||typeof a!="object"||typeof a.length!="number"||typeof a.copy!="function"||typeof a.slice!="function"||a.length>0&&typeof a[0]!="number")}function l(a,u,p){var b,v;if(d(a)||d(u)||a.prototype!==u.prototype)return!1;if(c(a))return c(u)?(a=i.call(a),u=i.call(u),f(a,u,p)):!1;if(g(a)){if(!g(u)||a.length!==u.length)return!1;for(b=0;b<a.length;b++)if(a[b]!==u[b])return!1;return!0}try{var y=s(a),h=s(u)}catch{return!1}if(y.length!=h.length)return!1;for(y.sort(),h.sort(),b=y.length-1;b>=0;b--)if(y[b]!=h[b])return!1;for(b=y.length-1;b>=0;b--)if(v=y[b],!f(a[v],u[v],p))return!1;return typeof a==typeof u}},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=o(1),s=function(){function c(f,d,g){g===void 0&&(g={}),this.attrName=f,this.keyName=d;var l=i.Scope.TYPE&i.Scope.ATTRIBUTE;g.scope!=null?this.scope=g.scope&i.Scope.LEVEL|l:this.scope=i.Scope.ATTRIBUTE,g.whitelist!=null&&(this.whitelist=g.whitelist)}return c.keys=function(f){return[].map.call(f.attributes,function(d){return d.name})},c.prototype.add=function(f,d){return this.canAdd(f,d)?(f.setAttribute(this.keyName,d),!0):!1},c.prototype.canAdd=function(f,d){var g=i.query(f,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return g==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},c.prototype.remove=function(f){f.removeAttribute(this.keyName)},c.prototype.value=function(f){var d=f.getAttribute(this.keyName);return this.canAdd(f,d)&&d?d:""},c}();r.default=s},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var i=function(){function E(O,C){var x=[],_=!0,A=!1,L=void 0;try{for(var P=O[Symbol.iterator](),R;!(_=(R=P.next()).done)&&(x.push(R.value),!(C&&x.length===C));_=!0);}catch(F){A=!0,L=F}finally{try{!_&&P.return&&P.return()}finally{if(A)throw L}}return x}return function(O,C){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return E(O,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function E(O,C){for(var x=0;x<C.length;x++){var _=C[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(O,_.key,_)}}return function(O,C,x){return C&&E(O.prototype,C),x&&E(O,x),O}}(),c=function E(O,C,x){O===null&&(O=Function.prototype);var _=Object.getOwnPropertyDescriptor(O,C);if(_===void 0){var A=Object.getPrototypeOf(O);return A===null?void 0:E(A,C,x)}else{if("value"in _)return _.value;var L=_.get;return L===void 0?void 0:L.call(x)}},f=o(2),d=h(f),g=o(0),l=h(g),a=o(4),u=h(a),p=o(6),b=h(p),v=o(7),y=h(v);function h(E){return E&&E.__esModule?E:{default:E}}function w(E,O){if(!(E instanceof O))throw new TypeError("Cannot call a class as a function")}function m(E,O){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:E}function k(E,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);E.prototype=Object.create(O&&O.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(E,O):E.__proto__=O)}var S=function(E){k(O,E);function O(){return w(this,O),m(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return O}(b.default);S.blotName="code",S.tagName="CODE";var T=function(E){k(O,E);function O(){return w(this,O),m(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return s(O,[{key:"delta",value:function(){var x=this,_=this.domNode.textContent;return _.endsWith(`
`)&&(_=_.slice(0,-1)),_.split(`
`).reduce(function(A,L){return A.insert(L).insert(`
`,x.formats())},new d.default)}},{key:"format",value:function(x,_){if(!(x===this.statics.blotName&&_)){var A=this.descendant(y.default,this.length()-1),L=i(A,1),P=L[0];P!=null&&P.deleteAt(P.length()-1,1),c(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"format",this).call(this,x,_)}}},{key:"formatAt",value:function(x,_,A,L){if(_!==0&&!(l.default.query(A,l.default.Scope.BLOCK)==null||A===this.statics.blotName&&L===this.statics.formats(this.domNode))){var P=this.newlineIndex(x);if(!(P<0||P>=x+_)){var R=this.newlineIndex(x,!0)+1,F=P-R+1,W=this.isolate(R,F),$=W.next;W.format(A,L),$ instanceof O&&$.formatAt(0,x-R+_-F,A,L)}}}},{key:"insertAt",value:function(x,_,A){if(A==null){var L=this.descendant(y.default,x),P=i(L,2),R=P[0],F=P[1];R.insertAt(F,_)}}},{key:"length",value:function(){var x=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?x:x+1}},{key:"newlineIndex",value:function(x){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(_)return this.domNode.textContent.slice(0,x).lastIndexOf(`
`);var A=this.domNode.textContent.slice(x).indexOf(`
`);return A>-1?x+A:-1}},{key:"optimize",value:function(x){this.domNode.textContent.endsWith(`
`)||this.appendChild(l.default.create("text",`
`)),c(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,x);var _=this.next;_!=null&&_.prev===this&&_.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===_.statics.formats(_.domNode)&&(_.optimize(x),_.moveChildren(this),_.remove())}},{key:"replace",value:function(x){c(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replace",this).call(this,x),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(_){var A=l.default.find(_);A==null?_.parentNode.removeChild(_):A instanceof l.default.Embed?A.remove():A.unwrap()})}}],[{key:"create",value:function(x){var _=c(O.__proto__||Object.getPrototypeOf(O),"create",this).call(this,x);return _.setAttribute("spellcheck",!1),_}},{key:"formats",value:function(){return!0}}]),O}(u.default);T.blotName="code-block",T.tagName="PRE",T.TAB="  ",r.Code=S,r.default=T},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},s=function(){function $(I,B){var N=[],j=!0,q=!1,H=void 0;try{for(var M=I[Symbol.iterator](),D;!(j=(D=M.next()).done)&&(N.push(D.value),!(B&&N.length===B));j=!0);}catch(U){q=!0,H=U}finally{try{!j&&M.return&&M.return()}finally{if(q)throw H}}return N}return function(I,B){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return $(I,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function $(I,B){for(var N=0;N<B.length;N++){var j=B[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(I,j.key,j)}}return function(I,B,N){return B&&$(I.prototype,B),N&&$(I,N),I}}(),f=o(2),d=_(f),g=o(20),l=_(g),a=o(0),u=_(a),p=o(13),b=_(p),v=o(24),y=_(v),h=o(4),w=_(h),m=o(16),k=_(m),S=o(21),T=_(S),E=o(11),O=_(E),C=o(3),x=_(C);function _($){return $&&$.__esModule?$:{default:$}}function A($,I,B){return I in $?Object.defineProperty($,I,{value:B,enumerable:!0,configurable:!0,writable:!0}):$[I]=B,$}function L($,I){if(!($ instanceof I))throw new TypeError("Cannot call a class as a function")}var P=/^[ -~]*$/,R=function(){function $(I){L(this,$),this.scroll=I,this.delta=this.getDelta()}return c($,[{key:"applyDelta",value:function(B){var N=this,j=!1;this.scroll.update();var q=this.scroll.length();return this.scroll.batchStart(),B=W(B),B.reduce(function(H,M){var D=M.retain||M.delete||M.insert.length||1,U=M.attributes||{};if(M.insert!=null){if(typeof M.insert=="string"){var z=M.insert;z.endsWith(`
`)&&j&&(j=!1,z=z.slice(0,-1)),H>=q&&!z.endsWith(`
`)&&(j=!0),N.scroll.insertAt(H,z);var Y=N.scroll.line(H),ee=s(Y,2),ne=ee[0],oe=ee[1],ce=(0,x.default)({},(0,h.bubbleFormats)(ne));if(ne instanceof w.default){var he=ne.descendant(u.default.Leaf,oe),Se=s(he,1),ke=Se[0];ce=(0,x.default)(ce,(0,h.bubbleFormats)(ke))}U=l.default.attributes.diff(ce,U)||{}}else if(i(M.insert)==="object"){var K=Object.keys(M.insert)[0];if(K==null)return H;N.scroll.insertAt(H,K,M.insert[K])}q+=D}return Object.keys(U).forEach(function(G){N.scroll.formatAt(H,D,G,U[G])}),H+D},0),B.reduce(function(H,M){return typeof M.delete=="number"?(N.scroll.deleteAt(H,M.delete),H):H+(M.retain||M.insert.length||1)},0),this.scroll.batchEnd(),this.update(B)}},{key:"deleteText",value:function(B,N){return this.scroll.deleteAt(B,N),this.update(new d.default().retain(B).delete(N))}},{key:"formatLine",value:function(B,N){var j=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(q).forEach(function(H){if(!(j.scroll.whitelist!=null&&!j.scroll.whitelist[H])){var M=j.scroll.lines(B,Math.max(N,1)),D=N;M.forEach(function(U){var z=U.length();if(!(U instanceof b.default))U.format(H,q[H]);else{var Y=B-U.offset(j.scroll),ee=U.newlineIndex(Y+D)-Y+1;U.formatAt(Y,ee,H,q[H])}D-=z})}}),this.scroll.optimize(),this.update(new d.default().retain(B).retain(N,(0,T.default)(q)))}},{key:"formatText",value:function(B,N){var j=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(q).forEach(function(H){j.scroll.formatAt(B,N,H,q[H])}),this.update(new d.default().retain(B).retain(N,(0,T.default)(q)))}},{key:"getContents",value:function(B,N){return this.delta.slice(B,B+N)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(B,N){return B.concat(N.delta())},new d.default)}},{key:"getFormat",value:function(B){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,j=[],q=[];N===0?this.scroll.path(B).forEach(function(M){var D=s(M,1),U=D[0];U instanceof w.default?j.push(U):U instanceof u.default.Leaf&&q.push(U)}):(j=this.scroll.lines(B,N),q=this.scroll.descendants(u.default.Leaf,B,N));var H=[j,q].map(function(M){if(M.length===0)return{};for(var D=(0,h.bubbleFormats)(M.shift());Object.keys(D).length>0;){var U=M.shift();if(U==null)return D;D=F((0,h.bubbleFormats)(U),D)}return D});return x.default.apply(x.default,H)}},{key:"getText",value:function(B,N){return this.getContents(B,N).filter(function(j){return typeof j.insert=="string"}).map(function(j){return j.insert}).join("")}},{key:"insertEmbed",value:function(B,N,j){return this.scroll.insertAt(B,N,j),this.update(new d.default().retain(B).insert(A({},N,j)))}},{key:"insertText",value:function(B,N){var j=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return N=N.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(B,N),Object.keys(q).forEach(function(H){j.scroll.formatAt(B,N.length,H,q[H])}),this.update(new d.default().retain(B).insert(N,(0,T.default)(q)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var B=this.scroll.children.head;return B.statics.blotName!==w.default.blotName||B.children.length>1?!1:B.children.head instanceof k.default}},{key:"removeFormat",value:function(B,N){var j=this.getText(B,N),q=this.scroll.line(B+N),H=s(q,2),M=H[0],D=H[1],U=0,z=new d.default;M!=null&&(M instanceof b.default?U=M.newlineIndex(D)-D+1:U=M.length()-D,z=M.delta().slice(D,D+U-1).insert(`
`));var Y=this.getContents(B,N+U),ee=Y.diff(new d.default().insert(j).concat(z)),ne=new d.default().retain(B).concat(ee);return this.applyDelta(ne)}},{key:"update",value:function(B){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,q=this.delta;if(N.length===1&&N[0].type==="characterData"&&N[0].target.data.match(P)&&u.default.find(N[0].target)){var H=u.default.find(N[0].target),M=(0,h.bubbleFormats)(H),D=H.offset(this.scroll),U=N[0].oldValue.replace(y.default.CONTENTS,""),z=new d.default().insert(U),Y=new d.default().insert(H.value()),ee=new d.default().retain(D).concat(z.diff(Y,j));B=ee.reduce(function(ne,oe){return oe.insert?ne.insert(oe.insert,M):ne.push(oe)},new d.default),this.delta=q.compose(B)}else this.delta=this.getDelta(),(!B||!(0,O.default)(q.compose(B),this.delta))&&(B=q.diff(this.delta,j));return B}}]),$}();function F($,I){return Object.keys(I).reduce(function(B,N){return $[N]==null||(I[N]===$[N]?B[N]=I[N]:Array.isArray(I[N])?I[N].indexOf($[N])<0&&(B[N]=I[N].concat([$[N]])):B[N]=[I[N],$[N]]),B},{})}function W($){return $.reduce(function(I,B){if(B.insert===1){var N=(0,T.default)(B.attributes);return delete N.image,I.insert({image:B.attributes.image},N)}if(B.attributes!=null&&(B.attributes.list===!0||B.attributes.bullet===!0)&&(B=(0,T.default)(B),B.attributes.list?B.attributes.list="ordered":(B.attributes.list="bullet",delete B.attributes.bullet)),typeof B.insert=="string"){var j=B.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return I.insert(j,B.attributes)}return I.push(B)},new d.default)}r.default=R},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var i=function(){function E(O,C){var x=[],_=!0,A=!1,L=void 0;try{for(var P=O[Symbol.iterator](),R;!(_=(R=P.next()).done)&&(x.push(R.value),!(C&&x.length===C));_=!0);}catch(F){A=!0,L=F}finally{try{!_&&P.return&&P.return()}finally{if(A)throw L}}return x}return function(O,C){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return E(O,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function E(O,C){for(var x=0;x<C.length;x++){var _=C[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(O,_.key,_)}}return function(O,C,x){return C&&E(O.prototype,C),x&&E(O,x),O}}(),c=o(0),f=y(c),d=o(21),g=y(d),l=o(11),a=y(l),u=o(8),p=y(u),b=o(10),v=y(b);function y(E){return E&&E.__esModule?E:{default:E}}function h(E){if(Array.isArray(E)){for(var O=0,C=Array(E.length);O<E.length;O++)C[O]=E[O];return C}else return Array.from(E)}function w(E,O){if(!(E instanceof O))throw new TypeError("Cannot call a class as a function")}var m=(0,v.default)("quill:selection"),k=function E(O){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;w(this,E),this.index=O,this.length=C},S=function(){function E(O,C){var x=this;w(this,E),this.emitter=C,this.scroll=O,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=f.default.create("cursor",this),this.lastRange=this.savedRange=new k(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){x.mouseDown||setTimeout(x.update.bind(x,p.default.sources.USER),1)}),this.emitter.on(p.default.events.EDITOR_CHANGE,function(_,A){_===p.default.events.TEXT_CHANGE&&A.length()>0&&x.update(p.default.sources.SILENT)}),this.emitter.on(p.default.events.SCROLL_BEFORE_UPDATE,function(){if(x.hasFocus()){var _=x.getNativeRange();_!=null&&_.start.node!==x.cursor.textNode&&x.emitter.once(p.default.events.SCROLL_UPDATE,function(){try{x.setNativeRange(_.start.node,_.start.offset,_.end.node,_.end.offset)}catch{}})}}),this.emitter.on(p.default.events.SCROLL_OPTIMIZE,function(_,A){if(A.range){var L=A.range,P=L.startNode,R=L.startOffset,F=L.endNode,W=L.endOffset;x.setNativeRange(P,R,F,W)}}),this.update(p.default.sources.SILENT)}return s(E,[{key:"handleComposition",value:function(){var C=this;this.root.addEventListener("compositionstart",function(){C.composing=!0}),this.root.addEventListener("compositionend",function(){if(C.composing=!1,C.cursor.parent){var x=C.cursor.restore();if(!x)return;setTimeout(function(){C.setNativeRange(x.startNode,x.startOffset,x.endNode,x.endOffset)},1)}})}},{key:"handleDragging",value:function(){var C=this;this.emitter.listenDOM("mousedown",document.body,function(){C.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){C.mouseDown=!1,C.update(p.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(C,x){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[C])){this.scroll.update();var _=this.getNativeRange();if(!(_==null||!_.native.collapsed||f.default.query(C,f.default.Scope.BLOCK))){if(_.start.node!==this.cursor.textNode){var A=f.default.find(_.start.node,!1);if(A==null)return;if(A instanceof f.default.Leaf){var L=A.split(_.start.offset);A.parent.insertBefore(this.cursor,L)}else A.insertBefore(this.cursor,_.start.node);this.cursor.attach()}this.cursor.format(C,x),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(C){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,_=this.scroll.length();C=Math.min(C,_-1),x=Math.min(C+x,_-1)-C;var A=void 0,L=this.scroll.leaf(C),P=i(L,2),R=P[0],F=P[1];if(R==null)return null;var W=R.position(F,!0),$=i(W,2);A=$[0],F=$[1];var I=document.createRange();if(x>0){I.setStart(A,F);var B=this.scroll.leaf(C+x),N=i(B,2);if(R=N[0],F=N[1],R==null)return null;var j=R.position(F,!0),q=i(j,2);return A=q[0],F=q[1],I.setEnd(A,F),I.getBoundingClientRect()}else{var H="left",M=void 0;return A instanceof Text?(F<A.data.length?(I.setStart(A,F),I.setEnd(A,F+1)):(I.setStart(A,F-1),I.setEnd(A,F),H="right"),M=I.getBoundingClientRect()):(M=R.domNode.getBoundingClientRect(),F>0&&(H="right")),{bottom:M.top+M.height,height:M.height,left:M[H],right:M[H],top:M.top,width:0}}}},{key:"getNativeRange",value:function(){var C=document.getSelection();if(C==null||C.rangeCount<=0)return null;var x=C.getRangeAt(0);if(x==null)return null;var _=this.normalizeNative(x);return m.info("getNativeRange",_),_}},{key:"getRange",value:function(){var C=this.getNativeRange();if(C==null)return[null,null];var x=this.normalizedToRange(C);return[x,C]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(C){var x=this,_=[[C.start.node,C.start.offset]];C.native.collapsed||_.push([C.end.node,C.end.offset]);var A=_.map(function(R){var F=i(R,2),W=F[0],$=F[1],I=f.default.find(W,!0),B=I.offset(x.scroll);return $===0?B:I instanceof f.default.Container?B+I.length():B+I.index(W,$)}),L=Math.min(Math.max.apply(Math,h(A)),this.scroll.length()-1),P=Math.min.apply(Math,[L].concat(h(A)));return new k(P,L-P)}},{key:"normalizeNative",value:function(C){if(!T(this.root,C.startContainer)||!C.collapsed&&!T(this.root,C.endContainer))return null;var x={start:{node:C.startContainer,offset:C.startOffset},end:{node:C.endContainer,offset:C.endOffset},native:C};return[x.start,x.end].forEach(function(_){for(var A=_.node,L=_.offset;!(A instanceof Text)&&A.childNodes.length>0;)if(A.childNodes.length>L)A=A.childNodes[L],L=0;else if(A.childNodes.length===L)A=A.lastChild,L=A instanceof Text?A.data.length:A.childNodes.length+1;else break;_.node=A,_.offset=L}),x}},{key:"rangeToNative",value:function(C){var x=this,_=C.collapsed?[C.index]:[C.index,C.index+C.length],A=[],L=this.scroll.length();return _.forEach(function(P,R){P=Math.min(L-1,P);var F=void 0,W=x.scroll.leaf(P),$=i(W,2),I=$[0],B=$[1],N=I.position(B,R!==0),j=i(N,2);F=j[0],B=j[1],A.push(F,B)}),A.length<2&&(A=A.concat(A)),A}},{key:"scrollIntoView",value:function(C){var x=this.lastRange;if(x!=null){var _=this.getBounds(x.index,x.length);if(_!=null){var A=this.scroll.length()-1,L=this.scroll.line(Math.min(x.index,A)),P=i(L,1),R=P[0],F=R;if(x.length>0){var W=this.scroll.line(Math.min(x.index+x.length,A)),$=i(W,1);F=$[0]}if(!(R==null||F==null)){var I=C.getBoundingClientRect();_.top<I.top?C.scrollTop-=I.top-_.top:_.bottom>I.bottom&&(C.scrollTop+=_.bottom-I.bottom)}}}}},{key:"setNativeRange",value:function(C,x){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:C,A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:x,L=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(m.info("setNativeRange",C,x,_,A),!(C!=null&&(this.root.parentNode==null||C.parentNode==null||_.parentNode==null))){var P=document.getSelection();if(P!=null)if(C!=null){this.hasFocus()||this.root.focus();var R=(this.getNativeRange()||{}).native;if(R==null||L||C!==R.startContainer||x!==R.startOffset||_!==R.endContainer||A!==R.endOffset){C.tagName=="BR"&&(x=[].indexOf.call(C.parentNode.childNodes,C),C=C.parentNode),_.tagName=="BR"&&(A=[].indexOf.call(_.parentNode.childNodes,_),_=_.parentNode);var F=document.createRange();F.setStart(C,x),F.setEnd(_,A),P.removeAllRanges(),P.addRange(F)}}else P.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(C){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;if(typeof x=="string"&&(_=x,x=!1),m.info("setRange",C),C!=null){var A=this.rangeToNative(C);this.setNativeRange.apply(this,h(A).concat([x]))}else this.setNativeRange(null);this.update(_)}},{key:"update",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,x=this.lastRange,_=this.getRange(),A=i(_,2),L=A[0],P=A[1];if(this.lastRange=L,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,a.default)(x,this.lastRange)){var R;!this.composing&&P!=null&&P.native.collapsed&&P.start.node!==this.cursor.textNode&&this.cursor.restore();var F=[p.default.events.SELECTION_CHANGE,(0,g.default)(this.lastRange),(0,g.default)(x),C];if((R=this.emitter).emit.apply(R,[p.default.events.EDITOR_CHANGE].concat(F)),C!==p.default.sources.SILENT){var W;(W=this.emitter).emit.apply(W,F)}}}}]),E}();function T(E,O){try{O.parentNode}catch{return!1}return O instanceof Text&&(O=O.parentNode),E.contains(O)}r.Range=k,r.default=S},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function p(b,v){for(var y=0;y<v.length;y++){var h=v[y];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(b,h.key,h)}}return function(b,v,y){return v&&p(b.prototype,v),y&&p(b,y),b}}(),s=function p(b,v,y){b===null&&(b=Function.prototype);var h=Object.getOwnPropertyDescriptor(b,v);if(h===void 0){var w=Object.getPrototypeOf(b);return w===null?void 0:p(w,v,y)}else{if("value"in h)return h.value;var m=h.get;return m===void 0?void 0:m.call(y)}},c=o(0),f=d(c);function d(p){return p&&p.__esModule?p:{default:p}}function g(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function l(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function a(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var u=function(p){a(b,p);function b(){return g(this,b),l(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"insertInto",value:function(y,h){y.children.length===0?s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertInto",this).call(this,y,h):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),b}(f.default.Embed);u.blotName="break",u.tagName="BR",r.default=u},function(t,r,o){var i=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var p in u)u.hasOwnProperty(p)&&(a[p]=u[p])};return function(a,u){l(a,u);function p(){this.constructor=a}a.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=o(44),c=o(30),f=o(1),d=function(l){i(a,l);function a(u){var p=l.call(this,u)||this;return p.build(),p}return a.prototype.appendChild=function(u){this.insertBefore(u)},a.prototype.attach=function(){l.prototype.attach.call(this),this.children.forEach(function(u){u.attach()})},a.prototype.build=function(){var u=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(p){try{var b=g(p);u.insertBefore(b,u.children.head||void 0)}catch(v){if(v instanceof f.ParchmentError)return;throw v}})},a.prototype.deleteAt=function(u,p){if(u===0&&p===this.length())return this.remove();this.children.forEachAt(u,p,function(b,v,y){b.deleteAt(v,y)})},a.prototype.descendant=function(u,p){var b=this.children.find(p),v=b[0],y=b[1];return u.blotName==null&&u(v)||u.blotName!=null&&v instanceof u?[v,y]:v instanceof a?v.descendant(u,y):[null,-1]},a.prototype.descendants=function(u,p,b){p===void 0&&(p=0),b===void 0&&(b=Number.MAX_VALUE);var v=[],y=b;return this.children.forEachAt(p,b,function(h,w,m){(u.blotName==null&&u(h)||u.blotName!=null&&h instanceof u)&&v.push(h),h instanceof a&&(v=v.concat(h.descendants(u,w,y))),y-=m}),v},a.prototype.detach=function(){this.children.forEach(function(u){u.detach()}),l.prototype.detach.call(this)},a.prototype.formatAt=function(u,p,b,v){this.children.forEachAt(u,p,function(y,h,w){y.formatAt(h,w,b,v)})},a.prototype.insertAt=function(u,p,b){var v=this.children.find(u),y=v[0],h=v[1];if(y)y.insertAt(h,p,b);else{var w=b==null?f.create("text",p):f.create(p,b);this.appendChild(w)}},a.prototype.insertBefore=function(u,p){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(b){return u instanceof b}))throw new f.ParchmentError("Cannot insert "+u.statics.blotName+" into "+this.statics.blotName);u.insertInto(this,p)},a.prototype.length=function(){return this.children.reduce(function(u,p){return u+p.length()},0)},a.prototype.moveChildren=function(u,p){this.children.forEach(function(b){u.insertBefore(b,p)})},a.prototype.optimize=function(u){if(l.prototype.optimize.call(this,u),this.children.length===0)if(this.statics.defaultChild!=null){var p=f.create(this.statics.defaultChild);this.appendChild(p),p.optimize(u)}else this.remove()},a.prototype.path=function(u,p){p===void 0&&(p=!1);var b=this.children.find(u,p),v=b[0],y=b[1],h=[[this,u]];return v instanceof a?h.concat(v.path(y,p)):(v!=null&&h.push([v,y]),h)},a.prototype.removeChild=function(u){this.children.remove(u)},a.prototype.replace=function(u){u instanceof a&&u.moveChildren(this),l.prototype.replace.call(this,u)},a.prototype.split=function(u,p){if(p===void 0&&(p=!1),!p){if(u===0)return this;if(u===this.length())return this.next}var b=this.clone();return this.parent.insertBefore(b,this.next),this.children.forEachAt(u,this.length(),function(v,y,h){v=v.split(y,p),b.appendChild(v)}),b},a.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},a.prototype.update=function(u,p){var b=this,v=[],y=[];u.forEach(function(h){h.target===b.domNode&&h.type==="childList"&&(v.push.apply(v,h.addedNodes),y.push.apply(y,h.removedNodes))}),y.forEach(function(h){if(!(h.parentNode!=null&&h.tagName!=="IFRAME"&&document.body.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var w=f.find(h);w!=null&&(w.domNode.parentNode==null||w.domNode.parentNode===b.domNode)&&w.detach()}}),v.filter(function(h){return h.parentNode==b.domNode}).sort(function(h,w){return h===w?0:h.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(h){var w=null;h.nextSibling!=null&&(w=f.find(h.nextSibling));var m=g(h);(m.next!=w||m.next==null)&&(m.parent!=null&&m.parent.removeChild(b),b.insertBefore(m,w||void 0))})},a}(c.default);function g(l){var a=f.find(l);if(a==null)try{a=f.create(l)}catch{a=f.create(f.Scope.INLINE),[].slice.call(l.childNodes).forEach(function(p){a.domNode.appendChild(p)}),l.parentNode&&l.parentNode.replaceChild(a.domNode,l),a.attach()}return a}r.default=d},function(t,r,o){var i=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var p in u)u.hasOwnProperty(p)&&(a[p]=u[p])};return function(a,u){l(a,u);function p(){this.constructor=a}a.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=o(12),c=o(31),f=o(17),d=o(1),g=function(l){i(a,l);function a(u){var p=l.call(this,u)||this;return p.attributes=new c.default(p.domNode),p}return a.formats=function(u){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return u.tagName.toLowerCase()},a.prototype.format=function(u,p){var b=d.query(u);b instanceof s.default?this.attributes.attribute(b,p):p&&b!=null&&(u!==this.statics.blotName||this.formats()[u]!==p)&&this.replaceWith(u,p)},a.prototype.formats=function(){var u=this.attributes.values(),p=this.statics.formats(this.domNode);return p!=null&&(u[this.statics.blotName]=p),u},a.prototype.replaceWith=function(u,p){var b=l.prototype.replaceWith.call(this,u,p);return this.attributes.copy(b),b},a.prototype.update=function(u,p){var b=this;l.prototype.update.call(this,u,p),u.some(function(v){return v.target===b.domNode&&v.type==="attributes"})&&this.attributes.build()},a.prototype.wrap=function(u,p){var b=l.prototype.wrap.call(this,u,p);return b instanceof a&&b.statics.scope===this.statics.scope&&this.attributes.move(b),b},a}(f.default);r.default=g},function(t,r,o){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,l){g.__proto__=l}||function(g,l){for(var a in l)l.hasOwnProperty(a)&&(g[a]=l[a])};return function(g,l){d(g,l);function a(){this.constructor=g}g.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=o(30),c=o(1),f=function(d){i(g,d);function g(){return d!==null&&d.apply(this,arguments)||this}return g.value=function(l){return!0},g.prototype.index=function(l,a){return this.domNode===l||this.domNode.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(a,1):-1},g.prototype.position=function(l,a){var u=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return l>0&&(u+=1),[this.parent.domNode,u]},g.prototype.value=function(){var l;return l={},l[this.statics.blotName]=this.statics.value(this.domNode)||!0,l},g.scope=c.Scope.INLINE_BLOT,g}(s.default);r.default=f},function(t,r,o){var i=o(11),s=o(3),c={attributes:{compose:function(d,g,l){typeof d!="object"&&(d={}),typeof g!="object"&&(g={});var a=s(!0,{},g);l||(a=Object.keys(a).reduce(function(p,b){return a[b]!=null&&(p[b]=a[b]),p},{}));for(var u in d)d[u]!==void 0&&g[u]===void 0&&(a[u]=d[u]);return Object.keys(a).length>0?a:void 0},diff:function(d,g){typeof d!="object"&&(d={}),typeof g!="object"&&(g={});var l=Object.keys(d).concat(Object.keys(g)).reduce(function(a,u){return i(d[u],g[u])||(a[u]=g[u]===void 0?null:g[u]),a},{});return Object.keys(l).length>0?l:void 0},transform:function(d,g,l){if(typeof d!="object")return g;if(typeof g=="object"){if(!l)return g;var a=Object.keys(g).reduce(function(u,p){return d[p]===void 0&&(u[p]=g[p]),u},{});return Object.keys(a).length>0?a:void 0}}},iterator:function(d){return new f(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function f(d){this.ops=d,this.index=0,this.offset=0}f.prototype.hasNext=function(){return this.peekLength()<1/0},f.prototype.next=function(d){d||(d=1/0);var g=this.ops[this.index];if(g){var l=this.offset,a=c.length(g);if(d>=a-l?(d=a-l,this.index+=1,this.offset=0):this.offset+=d,typeof g.delete=="number")return{delete:d};var u={};return g.attributes&&(u.attributes=g.attributes),typeof g.retain=="number"?u.retain=d:typeof g.insert=="string"?u.insert=g.insert.substr(l,d):u.insert=g.insert,u}else return{retain:1/0}},f.prototype.peek=function(){return this.ops[this.index]},f.prototype.peekLength=function(){return this.ops[this.index]?c.length(this.ops[this.index])-this.offset:1/0},f.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},f.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,g=this.index,l=this.next(),a=this.ops.slice(this.index);return this.offset=d,this.index=g,[l].concat(a)}else return[]},t.exports=c},function(t,r){var o=function(){function i(b,v){return v!=null&&b instanceof v}var s;try{s=Map}catch{s=function(){}}var c;try{c=Set}catch{c=function(){}}var f;try{f=Promise}catch{f=function(){}}function d(b,v,y,h,w){typeof v=="object"&&(y=v.depth,h=v.prototype,w=v.includeNonEnumerable,v=v.circular);var m=[],k=[],S=typeof Buffer<"u";typeof v>"u"&&(v=!0),typeof y>"u"&&(y=1/0);function T(E,O){if(E===null)return null;if(O===0)return E;var C,x;if(typeof E!="object")return E;if(i(E,s))C=new s;else if(i(E,c))C=new c;else if(i(E,f))C=new f(function(I,B){E.then(function(N){I(T(N,O-1))},function(N){B(T(N,O-1))})});else if(d.__isArray(E))C=[];else if(d.__isRegExp(E))C=new RegExp(E.source,p(E)),E.lastIndex&&(C.lastIndex=E.lastIndex);else if(d.__isDate(E))C=new Date(E.getTime());else{if(S&&Buffer.isBuffer(E))return Buffer.allocUnsafe?C=Buffer.allocUnsafe(E.length):C=new Buffer(E.length),E.copy(C),C;i(E,Error)?C=Object.create(E):typeof h>"u"?(x=Object.getPrototypeOf(E),C=Object.create(x)):(C=Object.create(h),x=h)}if(v){var _=m.indexOf(E);if(_!=-1)return k[_];m.push(E),k.push(C)}i(E,s)&&E.forEach(function(I,B){var N=T(B,O-1),j=T(I,O-1);C.set(N,j)}),i(E,c)&&E.forEach(function(I){var B=T(I,O-1);C.add(B)});for(var A in E){var L;x&&(L=Object.getOwnPropertyDescriptor(x,A)),!(L&&L.set==null)&&(C[A]=T(E[A],O-1))}if(Object.getOwnPropertySymbols)for(var P=Object.getOwnPropertySymbols(E),A=0;A<P.length;A++){var R=P[A],F=Object.getOwnPropertyDescriptor(E,R);F&&!F.enumerable&&!w||(C[R]=T(E[R],O-1),F.enumerable||Object.defineProperty(C,R,{enumerable:!1}))}if(w)for(var W=Object.getOwnPropertyNames(E),A=0;A<W.length;A++){var $=W[A],F=Object.getOwnPropertyDescriptor(E,$);F&&F.enumerable||(C[$]=T(E[$],O-1),Object.defineProperty(C,$,{enumerable:!1}))}return C}return T(b,y)}d.clonePrototype=function(v){if(v===null)return null;var y=function(){};return y.prototype=v,new y};function g(b){return Object.prototype.toString.call(b)}d.__objToStr=g;function l(b){return typeof b=="object"&&g(b)==="[object Date]"}d.__isDate=l;function a(b){return typeof b=="object"&&g(b)==="[object Array]"}d.__isArray=a;function u(b){return typeof b=="object"&&g(b)==="[object RegExp]"}d.__isRegExp=u;function p(b){var v="";return b.global&&(v+="g"),b.ignoreCase&&(v+="i"),b.multiline&&(v+="m"),v}return d.__getRegExpFlags=p,d}();typeof t=="object"&&t.exports&&(t.exports=o)},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function C(x,_){var A=[],L=!0,P=!1,R=void 0;try{for(var F=x[Symbol.iterator](),W;!(L=(W=F.next()).done)&&(A.push(W.value),!(_&&A.length===_));L=!0);}catch($){P=!0,R=$}finally{try{!L&&F.return&&F.return()}finally{if(P)throw R}}return A}return function(x,_){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return C(x,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function C(x,_){for(var A=0;A<_.length;A++){var L=_[A];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(x,L.key,L)}}return function(x,_,A){return _&&C(x.prototype,_),A&&C(x,A),x}}(),c=function C(x,_,A){x===null&&(x=Function.prototype);var L=Object.getOwnPropertyDescriptor(x,_);if(L===void 0){var P=Object.getPrototypeOf(x);return P===null?void 0:C(P,_,A)}else{if("value"in L)return L.value;var R=L.get;return R===void 0?void 0:R.call(A)}},f=o(0),d=m(f),g=o(8),l=m(g),a=o(4),u=m(a),p=o(16),b=m(p),v=o(13),y=m(v),h=o(25),w=m(h);function m(C){return C&&C.__esModule?C:{default:C}}function k(C,x){if(!(C instanceof x))throw new TypeError("Cannot call a class as a function")}function S(C,x){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:C}function T(C,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);C.prototype=Object.create(x&&x.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(C,x):C.__proto__=x)}function E(C){return C instanceof u.default||C instanceof a.BlockEmbed}var O=function(C){T(x,C);function x(_,A){k(this,x);var L=S(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,_));return L.emitter=A.emitter,Array.isArray(A.whitelist)&&(L.whitelist=A.whitelist.reduce(function(P,R){return P[R]=!0,P},{})),L.domNode.addEventListener("DOMNodeInserted",function(){}),L.optimize(),L.enable(),L}return s(x,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(A,L){var P=this.line(A),R=i(P,2),F=R[0],W=R[1],$=this.line(A+L),I=i($,1),B=I[0];if(c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"deleteAt",this).call(this,A,L),B!=null&&F!==B&&W>0){if(F instanceof a.BlockEmbed||B instanceof a.BlockEmbed){this.optimize();return}if(F instanceof y.default){var N=F.newlineIndex(F.length(),!0);if(N>-1&&(F=F.split(N+1),F===B)){this.optimize();return}}else if(B instanceof y.default){var j=B.newlineIndex(0);j>-1&&B.split(j+1)}var q=B.children.head instanceof b.default?null:B.children.head;F.moveChildren(B,q),F.remove()}this.optimize()}},{key:"enable",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",A)}},{key:"formatAt",value:function(A,L,P,R){this.whitelist!=null&&!this.whitelist[P]||(c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"formatAt",this).call(this,A,L,P,R),this.optimize())}},{key:"insertAt",value:function(A,L,P){if(!(P!=null&&this.whitelist!=null&&!this.whitelist[L])){if(A>=this.length())if(P==null||d.default.query(L,d.default.Scope.BLOCK)==null){var R=d.default.create(this.statics.defaultChild);this.appendChild(R),P==null&&L.endsWith(`
`)&&(L=L.slice(0,-1)),R.insertAt(0,L,P)}else{var F=d.default.create(L,P);this.appendChild(F)}else c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,A,L,P);this.optimize()}}},{key:"insertBefore",value:function(A,L){if(A.statics.scope===d.default.Scope.INLINE_BLOT){var P=d.default.create(this.statics.defaultChild);P.appendChild(A),A=P}c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertBefore",this).call(this,A,L)}},{key:"leaf",value:function(A){return this.path(A).pop()||[null,-1]}},{key:"line",value:function(A){return A===this.length()?this.line(A-1):this.descendant(E,A)}},{key:"lines",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,P=function R(F,W,$){var I=[],B=$;return F.children.forEachAt(W,$,function(N,j,q){E(N)?I.push(N):N instanceof d.default.Container&&(I=I.concat(R(N,j,B))),B-=q}),I};return P(this,A,L)}},{key:"optimize",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,A,L),A.length>0&&this.emitter.emit(l.default.events.SCROLL_OPTIMIZE,A,L))}},{key:"path",value:function(A){return c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"path",this).call(this,A).slice(1)}},{key:"update",value:function(A){if(this.batch!==!0){var L=l.default.sources.USER;typeof A=="string"&&(L=A),Array.isArray(A)||(A=this.observer.takeRecords()),A.length>0&&this.emitter.emit(l.default.events.SCROLL_BEFORE_UPDATE,L,A),c(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"update",this).call(this,A.concat([])),A.length>0&&this.emitter.emit(l.default.events.SCROLL_UPDATE,L,A)}}}]),x}(d.default.Scroll);O.blotName="scroll",O.className="ql-editor",O.tagName="DIV",O.defaultChild="block",O.allowedChildren=[u.default,a.BlockEmbed,w.default],r.default=O},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},s=function(){function M(D,U){var z=[],Y=!0,ee=!1,ne=void 0;try{for(var oe=D[Symbol.iterator](),ce;!(Y=(ce=oe.next()).done)&&(z.push(ce.value),!(U&&z.length===U));Y=!0);}catch(he){ee=!0,ne=he}finally{try{!Y&&oe.return&&oe.return()}finally{if(ee)throw ne}}return z}return function(D,U){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return M(D,U);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function M(D,U){for(var z=0;z<U.length;z++){var Y=U[z];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(D,Y.key,Y)}}return function(D,U,z){return U&&M(D.prototype,U),z&&M(D,z),D}}(),f=o(21),d=C(f),g=o(11),l=C(g),a=o(3),u=C(a),p=o(2),b=C(p),v=o(20),y=C(v),h=o(0),w=C(h),m=o(5),k=C(m),S=o(10),T=C(S),E=o(9),O=C(E);function C(M){return M&&M.__esModule?M:{default:M}}function x(M,D,U){return D in M?Object.defineProperty(M,D,{value:U,enumerable:!0,configurable:!0,writable:!0}):M[D]=U,M}function _(M,D){if(!(M instanceof D))throw new TypeError("Cannot call a class as a function")}function A(M,D){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:M}function L(M,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(M,D):M.__proto__=D)}var P=(0,T.default)("quill:keyboard"),R=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",F=function(M){L(D,M),c(D,null,[{key:"match",value:function(z,Y){return Y=H(Y),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ee){return!!Y[ee]!==z[ee]&&Y[ee]!==null})?!1:Y.key===(z.which||z.keyCode)}}]);function D(U,z){_(this,D);var Y=A(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,U,z));return Y.bindings={},Object.keys(Y.options.bindings).forEach(function(ee){ee==="list autofill"&&U.scroll.whitelist!=null&&!U.scroll.whitelist.list||Y.options.bindings[ee]&&Y.addBinding(Y.options.bindings[ee])}),Y.addBinding({key:D.keys.ENTER,shiftKey:null},N),Y.addBinding({key:D.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(Y.addBinding({key:D.keys.BACKSPACE},{collapsed:!0},$),Y.addBinding({key:D.keys.DELETE},{collapsed:!0},I)):(Y.addBinding({key:D.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},$),Y.addBinding({key:D.keys.DELETE},{collapsed:!0,suffix:/^.?$/},I)),Y.addBinding({key:D.keys.BACKSPACE},{collapsed:!1},B),Y.addBinding({key:D.keys.DELETE},{collapsed:!1},B),Y.addBinding({key:D.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},$),Y.listen(),Y}return c(D,[{key:"addBinding",value:function(z){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ne=H(z);if(ne==null||ne.key==null)return P.warn("Attempted to add invalid keyboard binding",ne);typeof Y=="function"&&(Y={handler:Y}),typeof ee=="function"&&(ee={handler:ee}),ne=(0,u.default)(ne,Y,ee),this.bindings[ne.key]=this.bindings[ne.key]||[],this.bindings[ne.key].push(ne)}},{key:"listen",value:function(){var z=this;this.quill.root.addEventListener("keydown",function(Y){if(!Y.defaultPrevented){var ee=Y.which||Y.keyCode,ne=(z.bindings[ee]||[]).filter(function(we){return D.match(Y,we)});if(ne.length!==0){var oe=z.quill.getSelection();if(!(oe==null||!z.quill.hasFocus())){var ce=z.quill.getLine(oe.index),he=s(ce,2),Se=he[0],ke=he[1],K=z.quill.getLeaf(oe.index),G=s(K,2),Z=G[0],J=G[1],X=oe.length===0?[Z,J]:z.quill.getLeaf(oe.index+oe.length),ie=s(X,2),se=ie[0],ae=ie[1],Ie=Z instanceof w.default.Text?Z.value().slice(0,J):"",ze=se instanceof w.default.Text?se.value().slice(ae):"",ve={collapsed:oe.length===0,empty:oe.length===0&&Se.length()<=1,format:z.quill.getFormat(oe),offset:ke,prefix:Ie,suffix:ze},Ac=ne.some(function(we){if(we.collapsed!=null&&we.collapsed!==ve.collapsed||we.empty!=null&&we.empty!==ve.empty||we.offset!=null&&we.offset!==ve.offset)return!1;if(Array.isArray(we.format)){if(we.format.every(function(Ze){return ve.format[Ze]==null}))return!1}else if(i(we.format)==="object"&&!Object.keys(we.format).every(function(Ze){return we.format[Ze]===!0?ve.format[Ze]!=null:we.format[Ze]===!1?ve.format[Ze]==null:(0,l.default)(we.format[Ze],ve.format[Ze])}))return!1;return we.prefix!=null&&!we.prefix.test(ve.prefix)||we.suffix!=null&&!we.suffix.test(ve.suffix)?!1:we.handler.call(z,oe,ve)!==!0});Ac&&Y.preventDefault()}}}})}}]),D}(O.default);F.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},F.DEFAULTS={bindings:{bold:q("bold"),italic:q("italic"),underline:q("underline"),indent:{key:F.keys.TAB,format:["blockquote","indent","list"],handler:function(D,U){if(U.collapsed&&U.offset!==0)return!0;this.quill.format("indent","+1",k.default.sources.USER)}},outdent:{key:F.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(D,U){if(U.collapsed&&U.offset!==0)return!0;this.quill.format("indent","-1",k.default.sources.USER)}},"outdent backspace":{key:F.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(D,U){U.format.indent!=null?this.quill.format("indent","-1",k.default.sources.USER):U.format.list!=null&&this.quill.format("list",!1,k.default.sources.USER)}},"indent code-block":j(!0),"outdent code-block":j(!1),"remove tab":{key:F.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(D){this.quill.deleteText(D.index-1,1,k.default.sources.USER)}},tab:{key:F.keys.TAB,handler:function(D){this.quill.history.cutoff();var U=new b.default().retain(D.index).delete(D.length).insert("	");this.quill.updateContents(U,k.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(D.index+1,k.default.sources.SILENT)}},"list empty enter":{key:F.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(D,U){this.quill.format("list",!1,k.default.sources.USER),U.format.indent&&this.quill.format("indent",!1,k.default.sources.USER)}},"checklist enter":{key:F.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(D){var U=this.quill.getLine(D.index),z=s(U,2),Y=z[0],ee=z[1],ne=(0,u.default)({},Y.formats(),{list:"checked"}),oe=new b.default().retain(D.index).insert(`
`,ne).retain(Y.length()-ee-1).retain(1,{list:"unchecked"});this.quill.updateContents(oe,k.default.sources.USER),this.quill.setSelection(D.index+1,k.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:F.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(D,U){var z=this.quill.getLine(D.index),Y=s(z,2),ee=Y[0],ne=Y[1],oe=new b.default().retain(D.index).insert(`
`,U.format).retain(ee.length()-ne-1).retain(1,{header:null});this.quill.updateContents(oe,k.default.sources.USER),this.quill.setSelection(D.index+1,k.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(D,U){var z=U.prefix.length,Y=this.quill.getLine(D.index),ee=s(Y,2),ne=ee[0],oe=ee[1];if(oe>z)return!0;var ce=void 0;switch(U.prefix.trim()){case"[]":case"[ ]":ce="unchecked";break;case"[x]":ce="checked";break;case"-":case"*":ce="bullet";break;default:ce="ordered"}this.quill.insertText(D.index," ",k.default.sources.USER),this.quill.history.cutoff();var he=new b.default().retain(D.index-oe).delete(z+1).retain(ne.length()-2-oe).retain(1,{list:ce});this.quill.updateContents(he,k.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(D.index-z,k.default.sources.SILENT)}},"code exit":{key:F.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(D){var U=this.quill.getLine(D.index),z=s(U,2),Y=z[0],ee=z[1],ne=new b.default().retain(D.index+Y.length()-ee-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ne,k.default.sources.USER)}},"embed left":W(F.keys.LEFT,!1),"embed left shift":W(F.keys.LEFT,!0),"embed right":W(F.keys.RIGHT,!1),"embed right shift":W(F.keys.RIGHT,!0)}};function W(M,D){var U,z=M===F.keys.LEFT?"prefix":"suffix";return U={key:M,shiftKey:D,altKey:null},x(U,z,/^$/),x(U,"handler",function(ee){var ne=ee.index;M===F.keys.RIGHT&&(ne+=ee.length+1);var oe=this.quill.getLeaf(ne),ce=s(oe,1),he=ce[0];return he instanceof w.default.Embed?(M===F.keys.LEFT?D?this.quill.setSelection(ee.index-1,ee.length+1,k.default.sources.USER):this.quill.setSelection(ee.index-1,k.default.sources.USER):D?this.quill.setSelection(ee.index,ee.length+1,k.default.sources.USER):this.quill.setSelection(ee.index+ee.length+1,k.default.sources.USER),!1):!0}),U}function $(M,D){if(!(M.index===0||this.quill.getLength()<=1)){var U=this.quill.getLine(M.index),z=s(U,1),Y=z[0],ee={};if(D.offset===0){var ne=this.quill.getLine(M.index-1),oe=s(ne,1),ce=oe[0];if(ce!=null&&ce.length()>1){var he=Y.formats(),Se=this.quill.getFormat(M.index-1,1);ee=y.default.attributes.diff(he,Se)||{}}}var ke=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(D.prefix)?2:1;this.quill.deleteText(M.index-ke,ke,k.default.sources.USER),Object.keys(ee).length>0&&this.quill.formatLine(M.index-ke,ke,ee,k.default.sources.USER),this.quill.focus()}}function I(M,D){var U=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(D.suffix)?2:1;if(!(M.index>=this.quill.getLength()-U)){var z={},Y=0,ee=this.quill.getLine(M.index),ne=s(ee,1),oe=ne[0];if(D.offset>=oe.length()-1){var ce=this.quill.getLine(M.index+1),he=s(ce,1),Se=he[0];if(Se){var ke=oe.formats(),K=this.quill.getFormat(M.index,1);z=y.default.attributes.diff(ke,K)||{},Y=Se.length()}}this.quill.deleteText(M.index,U,k.default.sources.USER),Object.keys(z).length>0&&this.quill.formatLine(M.index+Y-1,U,z,k.default.sources.USER)}}function B(M){var D=this.quill.getLines(M),U={};if(D.length>1){var z=D[0].formats(),Y=D[D.length-1].formats();U=y.default.attributes.diff(Y,z)||{}}this.quill.deleteText(M,k.default.sources.USER),Object.keys(U).length>0&&this.quill.formatLine(M.index,1,U,k.default.sources.USER),this.quill.setSelection(M.index,k.default.sources.SILENT),this.quill.focus()}function N(M,D){var U=this;M.length>0&&this.quill.scroll.deleteAt(M.index,M.length);var z=Object.keys(D.format).reduce(function(Y,ee){return w.default.query(ee,w.default.Scope.BLOCK)&&!Array.isArray(D.format[ee])&&(Y[ee]=D.format[ee]),Y},{});this.quill.insertText(M.index,`
`,z,k.default.sources.USER),this.quill.setSelection(M.index+1,k.default.sources.SILENT),this.quill.focus(),Object.keys(D.format).forEach(function(Y){z[Y]==null&&(Array.isArray(D.format[Y])||Y!=="link"&&U.quill.format(Y,D.format[Y],k.default.sources.USER))})}function j(M){return{key:F.keys.TAB,shiftKey:!M,format:{"code-block":!0},handler:function(U){var z=w.default.query("code-block"),Y=U.index,ee=U.length,ne=this.quill.scroll.descendant(z,Y),oe=s(ne,2),ce=oe[0],he=oe[1];if(ce!=null){var Se=this.quill.getIndex(ce),ke=ce.newlineIndex(he,!0)+1,K=ce.newlineIndex(Se+he+ee),G=ce.domNode.textContent.slice(ke,K).split(`
`);he=0,G.forEach(function(Z,J){M?(ce.insertAt(ke+he,z.TAB),he+=z.TAB.length,J===0?Y+=z.TAB.length:ee+=z.TAB.length):Z.startsWith(z.TAB)&&(ce.deleteAt(ke+he,z.TAB.length),he-=z.TAB.length,J===0?Y-=z.TAB.length:ee-=z.TAB.length),he+=Z.length+1}),this.quill.update(k.default.sources.USER),this.quill.setSelection(Y,ee,k.default.sources.SILENT)}}}}function q(M){return{key:M[0].toUpperCase(),shortKey:!0,handler:function(U,z){this.quill.format(M,!z.format[M],k.default.sources.USER)}}}function H(M){if(typeof M=="string"||typeof M=="number")return H({key:M});if((typeof M>"u"?"undefined":i(M))==="object"&&(M=(0,d.default)(M,!1)),typeof M.key=="string")if(F.keys[M.key.toUpperCase()]!=null)M.key=F.keys[M.key.toUpperCase()];else if(M.key.length===1)M.key=M.key.toUpperCase().charCodeAt(0);else return null;return M.shortKey&&(M[R]=M.shortKey,delete M.shortKey),M}r.default=F,r.SHORTKEY=R},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function y(h,w){var m=[],k=!0,S=!1,T=void 0;try{for(var E=h[Symbol.iterator](),O;!(k=(O=E.next()).done)&&(m.push(O.value),!(w&&m.length===w));k=!0);}catch(C){S=!0,T=C}finally{try{!k&&E.return&&E.return()}finally{if(S)throw T}}return m}return function(h,w){if(Array.isArray(h))return h;if(Symbol.iterator in Object(h))return y(h,w);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function y(h,w,m){h===null&&(h=Function.prototype);var k=Object.getOwnPropertyDescriptor(h,w);if(k===void 0){var S=Object.getPrototypeOf(h);return S===null?void 0:y(S,w,m)}else{if("value"in k)return k.value;var T=k.get;return T===void 0?void 0:T.call(m)}},c=function(){function y(h,w){for(var m=0;m<w.length;m++){var k=w[m];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(h,k.key,k)}}return function(h,w,m){return w&&y(h.prototype,w),m&&y(h,m),h}}(),f=o(0),d=a(f),g=o(7),l=a(g);function a(y){return y&&y.__esModule?y:{default:y}}function u(y,h){if(!(y instanceof h))throw new TypeError("Cannot call a class as a function")}function p(y,h){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:y}function b(y,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);y.prototype=Object.create(h&&h.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(y,h):y.__proto__=h)}var v=function(y){b(h,y),c(h,null,[{key:"value",value:function(){}}]);function h(w,m){u(this,h);var k=p(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,w));return k.selection=m,k.textNode=document.createTextNode(h.CONTENTS),k.domNode.appendChild(k.textNode),k._length=0,k}return c(h,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(m,k){if(this._length!==0)return s(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"format",this).call(this,m,k);for(var S=this,T=0;S!=null&&S.statics.scope!==d.default.Scope.BLOCK_BLOT;)T+=S.offset(S.parent),S=S.parent;S!=null&&(this._length=h.CONTENTS.length,S.optimize(),S.formatAt(T,h.CONTENTS.length,m,k),this._length=0)}},{key:"index",value:function(m,k){return m===this.textNode?0:s(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"index",this).call(this,m,k)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var m=this.textNode,k=this.selection.getNativeRange(),S=void 0,T=void 0,E=void 0;if(k!=null&&k.start.node===m&&k.end.node===m){var O=[m,k.start.offset,k.end.offset];S=O[0],T=O[1],E=O[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==h.CONTENTS){var C=this.textNode.data.split(h.CONTENTS).join("");this.next instanceof l.default?(S=this.next.domNode,this.next.insertAt(0,C),this.textNode.data=h.CONTENTS):(this.textNode.data=C,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(h.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),T!=null){var x=[T,E].map(function(A){return Math.max(0,Math.min(S.data.length,A-1))}),_=i(x,2);return T=_[0],E=_[1],{startNode:S,startOffset:T,endNode:S,endOffset:E}}}}},{key:"update",value:function(m,k){var S=this;if(m.some(function(E){return E.type==="characterData"&&E.target===S.textNode})){var T=this.restore();T&&(k.range=T)}}},{key:"value",value:function(){return""}}]),h}(d.default.Embed);v.blotName="cursor",v.className="ql-cursor",v.tagName="span",v.CONTENTS="\uFEFF",r.default=v},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=o(0),s=d(i),c=o(4),f=d(c);function d(p){return p&&p.__esModule?p:{default:p}}function g(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function l(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function a(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var u=function(p){a(b,p);function b(){return g(this,b),l(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return b}(s.default.Container);u.allowedChildren=[f.default,c.BlockEmbed,u],r.default=u},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var i=function(){function v(y,h){for(var w=0;w<h.length;w++){var m=h[w];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}return function(y,h,w){return h&&v(y.prototype,h),w&&v(y,w),y}}(),s=function v(y,h,w){y===null&&(y=Function.prototype);var m=Object.getOwnPropertyDescriptor(y,h);if(m===void 0){var k=Object.getPrototypeOf(y);return k===null?void 0:v(k,h,w)}else{if("value"in m)return m.value;var S=m.get;return S===void 0?void 0:S.call(w)}},c=o(0),f=d(c);function d(v){return v&&v.__esModule?v:{default:v}}function g(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function l(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function a(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var u=function(v){a(y,v);function y(){return g(this,y),l(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"value",value:function(w){var m=s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,w);return m.startsWith("rgb(")?(m=m.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+m.split(",").map(function(k){return("00"+parseInt(k).toString(16)).slice(-2)}).join("")):m}}]),y}(f.default.Attributor.Style),p=new f.default.Attributor.Class("color","ql-color",{scope:f.default.Scope.INLINE}),b=new u("color","color",{scope:f.default.Scope.INLINE});r.ColorAttributor=u,r.ColorClass=p,r.ColorStyle=b},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var i=function(){function b(v,y){for(var h=0;h<y.length;h++){var w=y[h];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,y,h){return y&&b(v.prototype,y),h&&b(v,h),v}}(),s=function b(v,y,h){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,y);if(w===void 0){var m=Object.getPrototypeOf(v);return m===null?void 0:b(m,y,h)}else{if("value"in w)return w.value;var k=w.get;return k===void 0?void 0:k.call(h)}},c=o(6),f=d(c);function d(b){return b&&b.__esModule?b:{default:b}}function g(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function l(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function a(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var u=function(b){a(v,b);function v(){return g(this,v),l(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"format",value:function(h,w){if(h!==this.statics.blotName||!w)return s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,h,w);w=this.constructor.sanitize(w),this.domNode.setAttribute("href",w)}}],[{key:"create",value:function(h){var w=s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,h);return h=this.sanitize(h),w.setAttribute("href",h),w.setAttribute("rel","noopener noreferrer"),w.setAttribute("target","_blank"),w}},{key:"formats",value:function(h){return h.getAttribute("href")}},{key:"sanitize",value:function(h){return p(h,this.PROTOCOL_WHITELIST)?h:this.SANITIZED_URL}}]),v}(f.default);u.blotName="link",u.tagName="A",u.SANITIZED_URL="about:blank",u.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function p(b,v){var y=document.createElement("a");y.href=b;var h=y.href.slice(0,y.href.indexOf(":"));return v.indexOf(h)>-1}r.default=u,r.sanitize=p},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},s=function(){function v(y,h){for(var w=0;w<h.length;w++){var m=h[w];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}return function(y,h,w){return h&&v(y.prototype,h),w&&v(y,w),y}}(),c=o(23),f=l(c),d=o(107),g=l(d);function l(v){return v&&v.__esModule?v:{default:v}}function a(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}var u=0;function p(v,y){v.setAttribute(y,v.getAttribute(y)!=="true")}var b=function(){function v(y){var h=this;a(this,v),this.select=y,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){h.togglePicker()}),this.label.addEventListener("keydown",function(w){switch(w.keyCode){case f.default.keys.ENTER:h.togglePicker();break;case f.default.keys.ESCAPE:h.escape(),w.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return s(v,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),p(this.label,"aria-expanded"),p(this.options,"aria-hidden")}},{key:"buildItem",value:function(h){var w=this,m=document.createElement("span");return m.tabIndex="0",m.setAttribute("role","button"),m.classList.add("ql-picker-item"),h.hasAttribute("value")&&m.setAttribute("data-value",h.getAttribute("value")),h.textContent&&m.setAttribute("data-label",h.textContent),m.addEventListener("click",function(){w.selectItem(m,!0)}),m.addEventListener("keydown",function(k){switch(k.keyCode){case f.default.keys.ENTER:w.selectItem(m,!0),k.preventDefault();break;case f.default.keys.ESCAPE:w.escape(),k.preventDefault();break}}),m}},{key:"buildLabel",value:function(){var h=document.createElement("span");return h.classList.add("ql-picker-label"),h.innerHTML=g.default,h.tabIndex="0",h.setAttribute("role","button"),h.setAttribute("aria-expanded","false"),this.container.appendChild(h),h}},{key:"buildOptions",value:function(){var h=this,w=document.createElement("span");w.classList.add("ql-picker-options"),w.setAttribute("aria-hidden","true"),w.tabIndex="-1",w.id="ql-picker-options-"+u,u+=1,this.label.setAttribute("aria-controls",w.id),this.options=w,[].slice.call(this.select.options).forEach(function(m){var k=h.buildItem(m);w.appendChild(k),m.selected===!0&&h.selectItem(k)}),this.container.appendChild(w)}},{key:"buildPicker",value:function(){var h=this;[].slice.call(this.select.attributes).forEach(function(w){h.container.setAttribute(w.name,w.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var h=this;this.close(),setTimeout(function(){return h.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(h){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,m=this.container.querySelector(".ql-selected");if(h!==m&&(m!=null&&m.classList.remove("ql-selected"),h!=null&&(h.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(h.parentNode.children,h),h.hasAttribute("data-value")?this.label.setAttribute("data-value",h.getAttribute("data-value")):this.label.removeAttribute("data-value"),h.hasAttribute("data-label")?this.label.setAttribute("data-label",h.getAttribute("data-label")):this.label.removeAttribute("data-label"),w))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var k=document.createEvent("Event");k.initEvent("change",!0,!0),this.select.dispatchEvent(k)}this.close()}}},{key:"update",value:function(){var h=void 0;if(this.select.selectedIndex>-1){var w=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];h=this.select.options[this.select.selectedIndex],this.selectItem(w)}else this.selectItem(null);var m=h!=null&&h!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",m)}}]),v}();r.default=b},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=o(0),s=P(i),c=o(5),f=P(c),d=o(4),g=P(d),l=o(16),a=P(l),u=o(25),p=P(u),b=o(24),v=P(b),y=o(35),h=P(y),w=o(6),m=P(w),k=o(22),S=P(k),T=o(7),E=P(T),O=o(55),C=P(O),x=o(42),_=P(x),A=o(23),L=P(A);function P(R){return R&&R.__esModule?R:{default:R}}f.default.register({"blots/block":g.default,"blots/block/embed":d.BlockEmbed,"blots/break":a.default,"blots/container":p.default,"blots/cursor":v.default,"blots/embed":h.default,"blots/inline":m.default,"blots/scroll":S.default,"blots/text":E.default,"modules/clipboard":C.default,"modules/history":_.default,"modules/keyboard":L.default}),s.default.register(g.default,a.default,v.default,m.default,S.default,E.default),r.default=f.default},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=o(1),s=function(){function c(f){this.domNode=f,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(c.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),c.create=function(f){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof f=="string"&&(f=f.toUpperCase(),parseInt(f).toString()===f&&(f=parseInt(f))),typeof f=="number"?d=document.createElement(this.tagName[f-1]):this.tagName.indexOf(f)>-1?d=document.createElement(f):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},c.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},c.prototype.clone=function(){var f=this.domNode.cloneNode(!1);return i.create(f)},c.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},c.prototype.deleteAt=function(f,d){var g=this.isolate(f,d);g.remove()},c.prototype.formatAt=function(f,d,g,l){var a=this.isolate(f,d);if(i.query(g,i.Scope.BLOT)!=null&&l)a.wrap(g,l);else if(i.query(g,i.Scope.ATTRIBUTE)!=null){var u=i.create(this.statics.scope);a.wrap(u),u.format(g,l)}},c.prototype.insertAt=function(f,d,g){var l=g==null?i.create("text",d):i.create(d,g),a=this.split(f);this.parent.insertBefore(l,a)},c.prototype.insertInto=function(f,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var g=null;f.children.insertBefore(this,d),d!=null&&(g=d.domNode),(this.domNode.parentNode!=f.domNode||this.domNode.nextSibling!=g)&&f.domNode.insertBefore(this.domNode,g),this.parent=f,this.attach()},c.prototype.isolate=function(f,d){var g=this.split(f);return g.split(d),g},c.prototype.length=function(){return 1},c.prototype.offset=function(f){return f===void 0&&(f=this.parent),this.parent==null||this==f?0:this.parent.children.offset(this)+this.parent.offset(f)},c.prototype.optimize=function(f){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},c.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},c.prototype.replace=function(f){f.parent!=null&&(f.parent.insertBefore(this,f.next),f.remove())},c.prototype.replaceWith=function(f,d){var g=typeof f=="string"?i.create(f,d):f;return g.replace(this),g},c.prototype.split=function(f,d){return f===0?this:this.next},c.prototype.update=function(f,d){},c.prototype.wrap=function(f,d){var g=typeof f=="string"?i.create(f,d):f;return this.parent!=null&&this.parent.insertBefore(g,this.next),g.appendChild(this),g},c.blotName="abstract",c}();r.default=s},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=o(12),s=o(32),c=o(33),f=o(1),d=function(){function g(l){this.attributes={},this.domNode=l,this.build()}return g.prototype.attribute=function(l,a){a?l.add(this.domNode,a)&&(l.value(this.domNode)!=null?this.attributes[l.attrName]=l:delete this.attributes[l.attrName]):(l.remove(this.domNode),delete this.attributes[l.attrName])},g.prototype.build=function(){var l=this;this.attributes={};var a=i.default.keys(this.domNode),u=s.default.keys(this.domNode),p=c.default.keys(this.domNode);a.concat(u).concat(p).forEach(function(b){var v=f.query(b,f.Scope.ATTRIBUTE);v instanceof i.default&&(l.attributes[v.attrName]=v)})},g.prototype.copy=function(l){var a=this;Object.keys(this.attributes).forEach(function(u){var p=a.attributes[u].value(a.domNode);l.format(u,p)})},g.prototype.move=function(l){var a=this;this.copy(l),Object.keys(this.attributes).forEach(function(u){a.attributes[u].remove(a.domNode)}),this.attributes={}},g.prototype.values=function(){var l=this;return Object.keys(this.attributes).reduce(function(a,u){return a[u]=l.attributes[u].value(l.domNode),a},{})},g}();r.default=d},function(t,r,o){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,l){g.__proto__=l}||function(g,l){for(var a in l)l.hasOwnProperty(a)&&(g[a]=l[a])};return function(g,l){d(g,l);function a(){this.constructor=g}g.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=o(12);function c(d,g){var l=d.getAttribute("class")||"";return l.split(/\s+/).filter(function(a){return a.indexOf(g+"-")===0})}var f=function(d){i(g,d);function g(){return d!==null&&d.apply(this,arguments)||this}return g.keys=function(l){return(l.getAttribute("class")||"").split(/\s+/).map(function(a){return a.split("-").slice(0,-1).join("-")})},g.prototype.add=function(l,a){return this.canAdd(l,a)?(this.remove(l),l.classList.add(this.keyName+"-"+a),!0):!1},g.prototype.remove=function(l){var a=c(l,this.keyName);a.forEach(function(u){l.classList.remove(u)}),l.classList.length===0&&l.removeAttribute("class")},g.prototype.value=function(l){var a=c(l,this.keyName)[0]||"",u=a.slice(this.keyName.length+1);return this.canAdd(l,u)?u:""},g}(s.default);r.default=f},function(t,r,o){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,l){g.__proto__=l}||function(g,l){for(var a in l)l.hasOwnProperty(a)&&(g[a]=l[a])};return function(g,l){d(g,l);function a(){this.constructor=g}g.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=o(12);function c(d){var g=d.split("-"),l=g.slice(1).map(function(a){return a[0].toUpperCase()+a.slice(1)}).join("");return g[0]+l}var f=function(d){i(g,d);function g(){return d!==null&&d.apply(this,arguments)||this}return g.keys=function(l){return(l.getAttribute("style")||"").split(";").map(function(a){var u=a.split(":");return u[0].trim()})},g.prototype.add=function(l,a){return this.canAdd(l,a)?(l.style[c(this.keyName)]=a,!0):!1},g.prototype.remove=function(l){l.style[c(this.keyName)]="",l.getAttribute("style")||l.removeAttribute("style")},g.prototype.value=function(l){var a=l.style[c(this.keyName)];return this.canAdd(l,a)?a:""},g}(s.default);r.default=f},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function f(d,g){for(var l=0;l<g.length;l++){var a=g[l];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(d,g,l){return g&&f(d.prototype,g),l&&f(d,l),d}}();function s(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}var c=function(){function f(d,g){s(this,f),this.quill=d,this.options=g,this.modules={}}return i(f,[{key:"init",value:function(){var g=this;Object.keys(this.options.modules).forEach(function(l){g.modules[l]==null&&g.addModule(l)})}},{key:"addModule",value:function(g){var l=this.quill.constructor.import("modules/"+g);return this.modules[g]=new l(this.quill,this.options.modules[g]||{}),this.modules[g]}}]),f}();c.DEFAULTS={modules:{}},c.themes={default:c},r.default=c},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function y(h,w){for(var m=0;m<w.length;m++){var k=w[m];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(h,k.key,k)}}return function(h,w,m){return w&&y(h.prototype,w),m&&y(h,m),h}}(),s=function y(h,w,m){h===null&&(h=Function.prototype);var k=Object.getOwnPropertyDescriptor(h,w);if(k===void 0){var S=Object.getPrototypeOf(h);return S===null?void 0:y(S,w,m)}else{if("value"in k)return k.value;var T=k.get;return T===void 0?void 0:T.call(m)}},c=o(0),f=l(c),d=o(7),g=l(d);function l(y){return y&&y.__esModule?y:{default:y}}function a(y,h){if(!(y instanceof h))throw new TypeError("Cannot call a class as a function")}function u(y,h){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:y}function p(y,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);y.prototype=Object.create(h&&h.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(y,h):y.__proto__=h)}var b="\uFEFF",v=function(y){p(h,y);function h(w){a(this,h);var m=u(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,w));return m.contentNode=document.createElement("span"),m.contentNode.setAttribute("contenteditable",!1),[].slice.call(m.domNode.childNodes).forEach(function(k){m.contentNode.appendChild(k)}),m.leftGuard=document.createTextNode(b),m.rightGuard=document.createTextNode(b),m.domNode.appendChild(m.leftGuard),m.domNode.appendChild(m.contentNode),m.domNode.appendChild(m.rightGuard),m}return i(h,[{key:"index",value:function(m,k){return m===this.leftGuard?0:m===this.rightGuard?1:s(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"index",this).call(this,m,k)}},{key:"restore",value:function(m){var k=void 0,S=void 0,T=m.data.split(b).join("");if(m===this.leftGuard)if(this.prev instanceof g.default){var E=this.prev.length();this.prev.insertAt(E,T),k={startNode:this.prev.domNode,startOffset:E+T.length}}else S=document.createTextNode(T),this.parent.insertBefore(f.default.create(S),this),k={startNode:S,startOffset:T.length};else m===this.rightGuard&&(this.next instanceof g.default?(this.next.insertAt(0,T),k={startNode:this.next.domNode,startOffset:T.length}):(S=document.createTextNode(T),this.parent.insertBefore(f.default.create(S),this.next),k={startNode:S,startOffset:T.length}));return m.data=b,k}},{key:"update",value:function(m,k){var S=this;m.forEach(function(T){if(T.type==="characterData"&&(T.target===S.leftGuard||T.target===S.rightGuard)){var E=S.restore(T.target);E&&(k.range=E)}})}}]),h}(f.default.Embed);r.default=v},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var i=o(0),s=c(i);function c(a){return a&&a.__esModule?a:{default:a}}var f={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new s.default.Attributor.Attribute("align","align",f),g=new s.default.Attributor.Class("align","ql-align",f),l=new s.default.Attributor.Style("align","text-align",f);r.AlignAttribute=d,r.AlignClass=g,r.AlignStyle=l},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var i=o(0),s=f(i),c=o(26);function f(l){return l&&l.__esModule?l:{default:l}}var d=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),g=new c.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});r.BackgroundClass=d,r.BackgroundStyle=g},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var i=o(0),s=c(i);function c(a){return a&&a.__esModule?a:{default:a}}var f={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},d=new s.default.Attributor.Attribute("direction","dir",f),g=new s.default.Attributor.Class("direction","ql-direction",f),l=new s.default.Attributor.Style("direction","direction",f);r.DirectionAttribute=d,r.DirectionClass=g,r.DirectionStyle=l},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var i=function(){function y(h,w){for(var m=0;m<w.length;m++){var k=w[m];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(h,k.key,k)}}return function(h,w,m){return w&&y(h.prototype,w),m&&y(h,m),h}}(),s=function y(h,w,m){h===null&&(h=Function.prototype);var k=Object.getOwnPropertyDescriptor(h,w);if(k===void 0){var S=Object.getPrototypeOf(h);return S===null?void 0:y(S,w,m)}else{if("value"in k)return k.value;var T=k.get;return T===void 0?void 0:T.call(m)}},c=o(0),f=d(c);function d(y){return y&&y.__esModule?y:{default:y}}function g(y,h){if(!(y instanceof h))throw new TypeError("Cannot call a class as a function")}function l(y,h){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:y}function a(y,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);y.prototype=Object.create(h&&h.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(y,h):y.__proto__=h)}var u={scope:f.default.Scope.INLINE,whitelist:["serif","monospace"]},p=new f.default.Attributor.Class("font","ql-font",u),b=function(y){a(h,y);function h(){return g(this,h),l(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return i(h,[{key:"value",value:function(m){return s(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"value",this).call(this,m).replace(/["']/g,"")}}]),h}(f.default.Attributor.Style),v=new b("font","font-family",u);r.FontStyle=v,r.FontClass=p},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var i=o(0),s=c(i);function c(g){return g&&g.__esModule?g:{default:g}}var f=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=f,r.SizeStyle=d},function(t,r,o){t.exports={align:{"":o(76),center:o(77),right:o(78),justify:o(79)},background:o(80),blockquote:o(81),bold:o(82),clean:o(83),code:o(58),"code-block":o(58),color:o(84),direction:{"":o(85),rtl:o(86)},float:{center:o(87),full:o(88),left:o(89),right:o(90)},formula:o(91),header:{1:o(92),2:o(93)},italic:o(94),image:o(95),indent:{"+1":o(96),"-1":o(97)},link:o(98),list:{ordered:o(99),bullet:o(100),check:o(101)},script:{sub:o(102),super:o(103)},strike:o(104),underline:o(105),video:o(106)}},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var i=function(){function w(m,k){for(var S=0;S<k.length;S++){var T=k[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}return function(m,k,S){return k&&w(m.prototype,k),S&&w(m,S),m}}(),s=o(0),c=a(s),f=o(5),d=a(f),g=o(9),l=a(g);function a(w){return w&&w.__esModule?w:{default:w}}function u(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function p(w,m){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:w}function b(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);w.prototype=Object.create(m&&m.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(w,m):w.__proto__=m)}var v=function(w){b(m,w);function m(k,S){u(this,m);var T=p(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,k,S));return T.lastRecorded=0,T.ignoreChange=!1,T.clear(),T.quill.on(d.default.events.EDITOR_CHANGE,function(E,O,C,x){E!==d.default.events.TEXT_CHANGE||T.ignoreChange||(!T.options.userOnly||x===d.default.sources.USER?T.record(O,C):T.transform(O))}),T.quill.keyboard.addBinding({key:"Z",shortKey:!0},T.undo.bind(T)),T.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},T.redo.bind(T)),/Win/i.test(navigator.platform)&&T.quill.keyboard.addBinding({key:"Y",shortKey:!0},T.redo.bind(T)),T}return i(m,[{key:"change",value:function(S,T){if(this.stack[S].length!==0){var E=this.stack[S].pop();this.stack[T].push(E),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(E[S],d.default.sources.USER),this.ignoreChange=!1;var O=h(E[S]);this.quill.setSelection(O)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(S,T){if(S.ops.length!==0){this.stack.redo=[];var E=this.quill.getContents().diff(T),O=Date.now();if(this.lastRecorded+this.options.delay>O&&this.stack.undo.length>0){var C=this.stack.undo.pop();E=E.compose(C.undo),S=C.redo.compose(S)}else this.lastRecorded=O;this.stack.undo.push({redo:S,undo:E}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(S){this.stack.undo.forEach(function(T){T.undo=S.transform(T.undo,!0),T.redo=S.transform(T.redo,!0)}),this.stack.redo.forEach(function(T){T.undo=S.transform(T.undo,!0),T.redo=S.transform(T.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),m}(l.default);v.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function y(w){var m=w.ops[w.ops.length-1];return m==null?!1:m.insert!=null?typeof m.insert=="string"&&m.insert.endsWith(`
`):m.attributes!=null?Object.keys(m.attributes).some(function(k){return c.default.query(k,c.default.Scope.BLOCK)!=null}):!1}function h(w){var m=w.reduce(function(S,T){return S+=T.delete||0,S},0),k=w.length()-m;return y(w)&&(k-=1),k}r.default=v,r.getLastChangeIndex=h},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var i=function(){function N(j,q){for(var H=0;H<q.length;H++){var M=q[H];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(j,M.key,M)}}return function(j,q,H){return q&&N(j.prototype,q),H&&N(j,H),j}}(),s=function N(j,q,H){j===null&&(j=Function.prototype);var M=Object.getOwnPropertyDescriptor(j,q);if(M===void 0){var D=Object.getPrototypeOf(j);return D===null?void 0:N(D,q,H)}else{if("value"in M)return M.value;var U=M.get;return U===void 0?void 0:U.call(H)}},c=o(3),f=O(c),d=o(2),g=O(d),l=o(8),a=O(l),u=o(23),p=O(u),b=o(34),v=O(b),y=o(59),h=O(y),w=o(60),m=O(w),k=o(28),S=O(k),T=o(61),E=O(T);function O(N){return N&&N.__esModule?N:{default:N}}function C(N,j){if(!(N instanceof j))throw new TypeError("Cannot call a class as a function")}function x(N,j){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:N}function _(N,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);N.prototype=Object.create(j&&j.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(N,j):N.__proto__=j)}var A=[!1,"center","right","justify"],L=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],P=[!1,"serif","monospace"],R=["1","2","3",!1],F=["small",!1,"large","huge"],W=function(N){_(j,N);function j(q,H){C(this,j);var M=x(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,q,H)),D=function U(z){if(!document.body.contains(q.root))return document.body.removeEventListener("click",U);M.tooltip!=null&&!M.tooltip.root.contains(z.target)&&document.activeElement!==M.tooltip.textbox&&!M.quill.hasFocus()&&M.tooltip.hide(),M.pickers!=null&&M.pickers.forEach(function(Y){Y.container.contains(z.target)||Y.close()})};return q.emitter.listenDOM("click",document.body,D),M}return i(j,[{key:"addModule",value:function(H){var M=s(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"addModule",this).call(this,H);return H==="toolbar"&&this.extendToolbar(M),M}},{key:"buildButtons",value:function(H,M){H.forEach(function(D){var U=D.getAttribute("class")||"";U.split(/\s+/).forEach(function(z){if(z.startsWith("ql-")&&(z=z.slice(3),M[z]!=null))if(z==="direction")D.innerHTML=M[z][""]+M[z].rtl;else if(typeof M[z]=="string")D.innerHTML=M[z];else{var Y=D.value||"";Y!=null&&M[z][Y]&&(D.innerHTML=M[z][Y])}})})}},{key:"buildPickers",value:function(H,M){var D=this;this.pickers=H.map(function(z){if(z.classList.contains("ql-align"))return z.querySelector("option")==null&&B(z,A),new m.default(z,M.align);if(z.classList.contains("ql-background")||z.classList.contains("ql-color")){var Y=z.classList.contains("ql-background")?"background":"color";return z.querySelector("option")==null&&B(z,L,Y==="background"?"#ffffff":"#000000"),new h.default(z,M[Y])}else return z.querySelector("option")==null&&(z.classList.contains("ql-font")?B(z,P):z.classList.contains("ql-header")?B(z,R):z.classList.contains("ql-size")&&B(z,F)),new S.default(z)});var U=function(){D.pickers.forEach(function(Y){Y.update()})};this.quill.on(a.default.events.EDITOR_CHANGE,U)}}]),j}(v.default);W.DEFAULTS=(0,f.default)(!0,{},v.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var j=this,q=this.container.querySelector("input.ql-image[type=file]");q==null&&(q=document.createElement("input"),q.setAttribute("type","file"),q.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),q.classList.add("ql-image"),q.addEventListener("change",function(){if(q.files!=null&&q.files[0]!=null){var H=new FileReader;H.onload=function(M){var D=j.quill.getSelection(!0);j.quill.updateContents(new g.default().retain(D.index).delete(D.length).insert({image:M.target.result}),a.default.sources.USER),j.quill.setSelection(D.index+1,a.default.sources.SILENT),q.value=""},H.readAsDataURL(q.files[0])}}),this.container.appendChild(q)),q.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var $=function(N){_(j,N);function j(q,H){C(this,j);var M=x(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,q,H));return M.textbox=M.root.querySelector('input[type="text"]'),M.listen(),M}return i(j,[{key:"listen",value:function(){var H=this;this.textbox.addEventListener("keydown",function(M){p.default.match(M,"enter")?(H.save(),M.preventDefault()):p.default.match(M,"escape")&&(H.cancel(),M.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),M!=null?this.textbox.value=M:H!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+H)||""),this.root.setAttribute("data-mode",H)}},{key:"restoreFocus",value:function(){var H=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=H}},{key:"save",value:function(){var H=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var M=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",H,a.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",H,a.default.sources.USER)),this.quill.root.scrollTop=M;break}case"video":H=I(H);case"formula":{if(!H)break;var D=this.quill.getSelection(!0);if(D!=null){var U=D.index+D.length;this.quill.insertEmbed(U,this.root.getAttribute("data-mode"),H,a.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(U+1," ",a.default.sources.USER),this.quill.setSelection(U+2,a.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),j}(E.default);function I(N){var j=N.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||N.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return j?(j[1]||"https")+"://www.youtube.com/embed/"+j[2]+"?showinfo=0":(j=N.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(j[1]||"https")+"://player.vimeo.com/video/"+j[2]+"/":N}function B(N,j){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;j.forEach(function(H){var M=document.createElement("option");H===q?M.setAttribute("selected","selected"):M.setAttribute("value",H),N.appendChild(M)})}r.BaseTooltip=$,r.default=W},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];this.insertBefore(c[0],null),c.length>1&&this.append.apply(this,c.slice(1))},s.prototype.contains=function(c){for(var f,d=this.iterator();f=d();)if(f===c)return!0;return!1},s.prototype.insertBefore=function(c,f){c&&(c.next=f,f!=null?(c.prev=f.prev,f.prev!=null&&(f.prev.next=c),f.prev=c,f===this.head&&(this.head=c)):this.tail!=null?(this.tail.next=c,c.prev=this.tail,this.tail=c):(c.prev=null,this.head=this.tail=c),this.length+=1)},s.prototype.offset=function(c){for(var f=0,d=this.head;d!=null;){if(d===c)return f;f+=d.length(),d=d.next}return-1},s.prototype.remove=function(c){this.contains(c)&&(c.prev!=null&&(c.prev.next=c.next),c.next!=null&&(c.next.prev=c.prev),c===this.head&&(this.head=c.next),c===this.tail&&(this.tail=c.prev),this.length-=1)},s.prototype.iterator=function(c){return c===void 0&&(c=this.head),function(){var f=c;return c!=null&&(c=c.next),f}},s.prototype.find=function(c,f){f===void 0&&(f=!1);for(var d,g=this.iterator();d=g();){var l=d.length();if(c<l||f&&c===l&&(d.next==null||d.next.length()!==0))return[d,c];c-=l}return[null,0]},s.prototype.forEach=function(c){for(var f,d=this.iterator();f=d();)c(f)},s.prototype.forEachAt=function(c,f,d){if(!(f<=0))for(var g=this.find(c),l=g[0],a=g[1],u,p=c-a,b=this.iterator(l);(u=b())&&p<c+f;){var v=u.length();c>p?d(u,c-p,Math.min(f,p+v-c)):d(u,0,Math.min(v,c+f-p)),p+=v}},s.prototype.map=function(c){return this.reduce(function(f,d){return f.push(c(d)),f},[])},s.prototype.reduce=function(c,f){for(var d,g=this.iterator();d=g();)f=c(f,d);return f},s}();r.default=i},function(t,r,o){var i=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var p in u)u.hasOwnProperty(p)&&(a[p]=u[p])};return function(a,u){l(a,u);function p(){this.constructor=a}a.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=o(17),c=o(1),f={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,g=function(l){i(a,l);function a(u){var p=l.call(this,u)||this;return p.scroll=p,p.observer=new MutationObserver(function(b){p.update(b)}),p.observer.observe(p.domNode,f),p.attach(),p}return a.prototype.detach=function(){l.prototype.detach.call(this),this.observer.disconnect()},a.prototype.deleteAt=function(u,p){this.update(),u===0&&p===this.length()?this.children.forEach(function(b){b.remove()}):l.prototype.deleteAt.call(this,u,p)},a.prototype.formatAt=function(u,p,b,v){this.update(),l.prototype.formatAt.call(this,u,p,b,v)},a.prototype.insertAt=function(u,p,b){this.update(),l.prototype.insertAt.call(this,u,p,b)},a.prototype.optimize=function(u,p){var b=this;u===void 0&&(u=[]),p===void 0&&(p={}),l.prototype.optimize.call(this,p);for(var v=[].slice.call(this.observer.takeRecords());v.length>0;)u.push(v.pop());for(var y=function(k,S){S===void 0&&(S=!0),!(k==null||k===b)&&k.domNode.parentNode!=null&&(k.domNode[c.DATA_KEY].mutations==null&&(k.domNode[c.DATA_KEY].mutations=[]),S&&y(k.parent))},h=function(k){k.domNode[c.DATA_KEY]==null||k.domNode[c.DATA_KEY].mutations==null||(k instanceof s.default&&k.children.forEach(h),k.optimize(p))},w=u,m=0;w.length>0;m+=1){if(m>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(w.forEach(function(k){var S=c.find(k.target,!0);S!=null&&(S.domNode===k.target&&(k.type==="childList"?(y(c.find(k.previousSibling,!1)),[].forEach.call(k.addedNodes,function(T){var E=c.find(T,!1);y(E,!1),E instanceof s.default&&E.children.forEach(function(O){y(O,!1)})})):k.type==="attributes"&&y(S.prev)),y(S))}),this.children.forEach(h),w=[].slice.call(this.observer.takeRecords()),v=w.slice();v.length>0;)u.push(v.pop())}},a.prototype.update=function(u,p){var b=this;p===void 0&&(p={}),u=u||this.observer.takeRecords(),u.map(function(v){var y=c.find(v.target,!0);return y==null?null:y.domNode[c.DATA_KEY].mutations==null?(y.domNode[c.DATA_KEY].mutations=[v],y):(y.domNode[c.DATA_KEY].mutations.push(v),null)}).forEach(function(v){v==null||v===b||v.domNode[c.DATA_KEY]==null||v.update(v.domNode[c.DATA_KEY].mutations||[],p)}),this.domNode[c.DATA_KEY].mutations!=null&&l.prototype.update.call(this,this.domNode[c.DATA_KEY].mutations,p),this.optimize(u,p)},a.blotName="scroll",a.defaultChild="block",a.scope=c.Scope.BLOCK_BLOT,a.tagName="DIV",a}(s.default);r.default=g},function(t,r,o){var i=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,a){l.__proto__=a}||function(l,a){for(var u in a)a.hasOwnProperty(u)&&(l[u]=a[u])};return function(l,a){g(l,a);function u(){this.constructor=l}l.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=o(18),c=o(1);function f(g,l){if(Object.keys(g).length!==Object.keys(l).length)return!1;for(var a in g)if(g[a]!==l[a])return!1;return!0}var d=function(g){i(l,g);function l(){return g!==null&&g.apply(this,arguments)||this}return l.formats=function(a){if(a.tagName!==l.tagName)return g.formats.call(this,a)},l.prototype.format=function(a,u){var p=this;a===this.statics.blotName&&!u?(this.children.forEach(function(b){b instanceof s.default||(b=b.wrap(l.blotName,!0)),p.attributes.copy(b)}),this.unwrap()):g.prototype.format.call(this,a,u)},l.prototype.formatAt=function(a,u,p,b){if(this.formats()[p]!=null||c.query(p,c.Scope.ATTRIBUTE)){var v=this.isolate(a,u);v.format(p,b)}else g.prototype.formatAt.call(this,a,u,p,b)},l.prototype.optimize=function(a){g.prototype.optimize.call(this,a);var u=this.formats();if(Object.keys(u).length===0)return this.unwrap();var p=this.next;p instanceof l&&p.prev===this&&f(u,p.formats())&&(p.moveChildren(this),p.remove())},l.blotName="inline",l.scope=c.Scope.INLINE_BLOT,l.tagName="SPAN",l}(s.default);r.default=d},function(t,r,o){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,l){g.__proto__=l}||function(g,l){for(var a in l)l.hasOwnProperty(a)&&(g[a]=l[a])};return function(g,l){d(g,l);function a(){this.constructor=g}g.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=o(18),c=o(1),f=function(d){i(g,d);function g(){return d!==null&&d.apply(this,arguments)||this}return g.formats=function(l){var a=c.query(g.blotName).tagName;if(l.tagName!==a)return d.formats.call(this,l)},g.prototype.format=function(l,a){c.query(l,c.Scope.BLOCK)!=null&&(l===this.statics.blotName&&!a?this.replaceWith(g.blotName):d.prototype.format.call(this,l,a))},g.prototype.formatAt=function(l,a,u,p){c.query(u,c.Scope.BLOCK)!=null?this.format(u,p):d.prototype.formatAt.call(this,l,a,u,p)},g.prototype.insertAt=function(l,a,u){if(u==null||c.query(a,c.Scope.INLINE)!=null)d.prototype.insertAt.call(this,l,a,u);else{var p=this.split(l),b=c.create(a,u);p.parent.insertBefore(b,p)}},g.prototype.update=function(l,a){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,l,a)},g.blotName="block",g.scope=c.Scope.BLOCK_BLOT,g.tagName="P",g}(s.default);r.default=f},function(t,r,o){var i=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=g}||function(d,g){for(var l in g)g.hasOwnProperty(l)&&(d[l]=g[l])};return function(d,g){f(d,g);function l(){this.constructor=d}d.prototype=g===null?Object.create(g):(l.prototype=g.prototype,new l)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=o(19),c=function(f){i(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return d.formats=function(g){},d.prototype.format=function(g,l){f.prototype.formatAt.call(this,0,this.length(),g,l)},d.prototype.formatAt=function(g,l,a,u){g===0&&l===this.length()?this.format(a,u):f.prototype.formatAt.call(this,g,l,a,u)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d}(s.default);r.default=c},function(t,r,o){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,l){g.__proto__=l}||function(g,l){for(var a in l)l.hasOwnProperty(a)&&(g[a]=l[a])};return function(g,l){d(g,l);function a(){this.constructor=g}g.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=o(19),c=o(1),f=function(d){i(g,d);function g(l){var a=d.call(this,l)||this;return a.text=a.statics.value(a.domNode),a}return g.create=function(l){return document.createTextNode(l)},g.value=function(l){var a=l.data;return a.normalize&&(a=a.normalize()),a},g.prototype.deleteAt=function(l,a){this.domNode.data=this.text=this.text.slice(0,l)+this.text.slice(l+a)},g.prototype.index=function(l,a){return this.domNode===l?a:-1},g.prototype.insertAt=function(l,a,u){u==null?(this.text=this.text.slice(0,l)+a+this.text.slice(l),this.domNode.data=this.text):d.prototype.insertAt.call(this,l,a,u)},g.prototype.length=function(){return this.text.length},g.prototype.optimize=function(l){d.prototype.optimize.call(this,l),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof g&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},g.prototype.position=function(l,a){return[this.domNode,l]},g.prototype.split=function(l,a){if(a===void 0&&(a=!1),!a){if(l===0)return this;if(l===this.length())return this.next}var u=c.create(this.domNode.splitText(l));return this.parent.insertBefore(u,this.next),this.text=this.statics.value(this.domNode),u},g.prototype.update=function(l,a){var u=this;l.some(function(p){return p.type==="characterData"&&p.target===u.domNode})&&(this.text=this.statics.value(this.domNode))},g.prototype.value=function(){return this.text},g.blotName="text",g.scope=c.Scope.INLINE_BLOT,g}(s.default);r.default=f},function(t,r,o){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,f){return arguments.length>1&&!this.contains(c)==!f?f:s.call(this,c)}}String.prototype.startsWith||(String.prototype.startsWith=function(c,f){return f=f||0,this.substr(f,c.length)===c}),String.prototype.endsWith||(String.prototype.endsWith=function(c,f){var d=this.toString();(typeof f!="number"||!isFinite(f)||Math.floor(f)!==f||f>d.length)&&(f=d.length),f-=c.length;var g=d.indexOf(c,f);return g!==-1&&g===f}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(f){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof f!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),g=d.length>>>0,l=arguments[1],a,u=0;u<g;u++)if(a=d[u],f.call(l,a,u,d))return a}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,r){var o=-1,i=1,s=0;function c(m,k,S){if(m==k)return m?[[s,m]]:[];(S<0||m.length<S)&&(S=null);var T=l(m,k),E=m.substring(0,T);m=m.substring(T),k=k.substring(T),T=a(m,k);var O=m.substring(m.length-T);m=m.substring(0,m.length-T),k=k.substring(0,k.length-T);var C=f(m,k);return E&&C.unshift([s,E]),O&&C.push([s,O]),p(C),S!=null&&(C=y(C,S)),C=h(C),C}function f(m,k){var S;if(!m)return[[i,k]];if(!k)return[[o,m]];var T=m.length>k.length?m:k,E=m.length>k.length?k:m,O=T.indexOf(E);if(O!=-1)return S=[[i,T.substring(0,O)],[s,E],[i,T.substring(O+E.length)]],m.length>k.length&&(S[0][0]=S[2][0]=o),S;if(E.length==1)return[[o,m],[i,k]];var C=u(m,k);if(C){var x=C[0],_=C[1],A=C[2],L=C[3],P=C[4],R=c(x,A),F=c(_,L);return R.concat([[s,P]],F)}return d(m,k)}function d(m,k){for(var S=m.length,T=k.length,E=Math.ceil((S+T)/2),O=E,C=2*E,x=new Array(C),_=new Array(C),A=0;A<C;A++)x[A]=-1,_[A]=-1;x[O+1]=0,_[O+1]=0;for(var L=S-T,P=L%2!=0,R=0,F=0,W=0,$=0,I=0;I<E;I++){for(var B=-I+R;B<=I-F;B+=2){var N=O+B,j;B==-I||B!=I&&x[N-1]<x[N+1]?j=x[N+1]:j=x[N-1]+1;for(var q=j-B;j<S&&q<T&&m.charAt(j)==k.charAt(q);)j++,q++;if(x[N]=j,j>S)F+=2;else if(q>T)R+=2;else if(P){var H=O+L-B;if(H>=0&&H<C&&_[H]!=-1){var M=S-_[H];if(j>=M)return g(m,k,j,q)}}}for(var D=-I+W;D<=I-$;D+=2){var H=O+D,M;D==-I||D!=I&&_[H-1]<_[H+1]?M=_[H+1]:M=_[H-1]+1;for(var U=M-D;M<S&&U<T&&m.charAt(S-M-1)==k.charAt(T-U-1);)M++,U++;if(_[H]=M,M>S)$+=2;else if(U>T)W+=2;else if(!P){var N=O+L-D;if(N>=0&&N<C&&x[N]!=-1){var j=x[N],q=O+j-N;if(M=S-M,j>=M)return g(m,k,j,q)}}}}return[[o,m],[i,k]]}function g(m,k,S,T){var E=m.substring(0,S),O=k.substring(0,T),C=m.substring(S),x=k.substring(T),_=c(E,O),A=c(C,x);return _.concat(A)}function l(m,k){if(!m||!k||m.charAt(0)!=k.charAt(0))return 0;for(var S=0,T=Math.min(m.length,k.length),E=T,O=0;S<E;)m.substring(O,E)==k.substring(O,E)?(S=E,O=S):T=E,E=Math.floor((T-S)/2+S);return E}function a(m,k){if(!m||!k||m.charAt(m.length-1)!=k.charAt(k.length-1))return 0;for(var S=0,T=Math.min(m.length,k.length),E=T,O=0;S<E;)m.substring(m.length-E,m.length-O)==k.substring(k.length-E,k.length-O)?(S=E,O=S):T=E,E=Math.floor((T-S)/2+S);return E}function u(m,k){var S=m.length>k.length?m:k,T=m.length>k.length?k:m;if(S.length<4||T.length*2<S.length)return null;function E(F,W,$){for(var I=F.substring($,$+Math.floor(F.length/4)),B=-1,N="",j,q,H,M;(B=W.indexOf(I,B+1))!=-1;){var D=l(F.substring($),W.substring(B)),U=a(F.substring(0,$),W.substring(0,B));N.length<U+D&&(N=W.substring(B-U,B)+W.substring(B,B+D),j=F.substring(0,$-U),q=F.substring($+D),H=W.substring(0,B-U),M=W.substring(B+D))}return N.length*2>=F.length?[j,q,H,M,N]:null}var O=E(S,T,Math.ceil(S.length/4)),C=E(S,T,Math.ceil(S.length/2)),x;if(!O&&!C)return null;C?O?x=O[4].length>C[4].length?O:C:x=C:x=O;var _,A,L,P;m.length>k.length?(_=x[0],A=x[1],L=x[2],P=x[3]):(L=x[0],P=x[1],_=x[2],A=x[3]);var R=x[4];return[_,A,L,P,R]}function p(m){m.push([s,""]);for(var k=0,S=0,T=0,E="",O="",C;k<m.length;)switch(m[k][0]){case i:T++,O+=m[k][1],k++;break;case o:S++,E+=m[k][1],k++;break;case s:S+T>1?(S!==0&&T!==0&&(C=l(O,E),C!==0&&(k-S-T>0&&m[k-S-T-1][0]==s?m[k-S-T-1][1]+=O.substring(0,C):(m.splice(0,0,[s,O.substring(0,C)]),k++),O=O.substring(C),E=E.substring(C)),C=a(O,E),C!==0&&(m[k][1]=O.substring(O.length-C)+m[k][1],O=O.substring(0,O.length-C),E=E.substring(0,E.length-C))),S===0?m.splice(k-T,S+T,[i,O]):T===0?m.splice(k-S,S+T,[o,E]):m.splice(k-S-T,S+T,[o,E],[i,O]),k=k-S-T+(S?1:0)+(T?1:0)+1):k!==0&&m[k-1][0]==s?(m[k-1][1]+=m[k][1],m.splice(k,1)):k++,T=0,S=0,E="",O="";break}m[m.length-1][1]===""&&m.pop();var x=!1;for(k=1;k<m.length-1;)m[k-1][0]==s&&m[k+1][0]==s&&(m[k][1].substring(m[k][1].length-m[k-1][1].length)==m[k-1][1]?(m[k][1]=m[k-1][1]+m[k][1].substring(0,m[k][1].length-m[k-1][1].length),m[k+1][1]=m[k-1][1]+m[k+1][1],m.splice(k-1,1),x=!0):m[k][1].substring(0,m[k+1][1].length)==m[k+1][1]&&(m[k-1][1]+=m[k+1][1],m[k][1]=m[k][1].substring(m[k+1][1].length)+m[k+1][1],m.splice(k+1,1),x=!0)),k++;x&&p(m)}var b=c;b.INSERT=i,b.DELETE=o,b.EQUAL=s,t.exports=b;function v(m,k){if(k===0)return[s,m];for(var S=0,T=0;T<m.length;T++){var E=m[T];if(E[0]===o||E[0]===s){var O=S+E[1].length;if(k===O)return[T+1,m];if(k<O){m=m.slice();var C=k-S,x=[E[0],E[1].slice(0,C)],_=[E[0],E[1].slice(C)];return m.splice(T,1,x,_),[T+1,m]}else S=O}}throw new Error("cursor_pos is out of bounds!")}function y(m,k){var S=v(m,k),T=S[1],E=S[0],O=T[E],C=T[E+1];if(O==null)return m;if(O[0]!==s)return m;if(C!=null&&O[1]+C[1]===C[1]+O[1])return T.splice(E,2,C,O),w(T,E,2);if(C!=null&&C[1].indexOf(O[1])===0){T.splice(E,2,[C[0],O[1]],[0,O[1]]);var x=C[1].slice(O[1].length);return x.length>0&&T.splice(E+2,0,[C[0],x]),w(T,E,3)}else return m}function h(m){for(var k=!1,S=function(C){return C.charCodeAt(0)>=56320&&C.charCodeAt(0)<=57343},T=function(C){return C.charCodeAt(C.length-1)>=55296&&C.charCodeAt(C.length-1)<=56319},E=2;E<m.length;E+=1)m[E-2][0]===s&&T(m[E-2][1])&&m[E-1][0]===o&&S(m[E-1][1])&&m[E][0]===i&&S(m[E][1])&&(k=!0,m[E-1][1]=m[E-2][1].slice(-1)+m[E-1][1],m[E][1]=m[E-2][1].slice(-1)+m[E][1],m[E-2][1]=m[E-2][1].slice(0,-1));if(!k)return m;for(var O=[],E=0;E<m.length;E+=1)m[E][1].length>0&&O.push(m[E]);return O}function w(m,k,S){for(var T=k+S-1;T>=0&&T>=k-1;T--)if(T+1<m.length){var E=m[T],O=m[T+1];E[0]===O[1]&&m.splice(T,2,[E[0],E[1]+O[1]])}return m}},function(t,r){r=t.exports=typeof Object.keys=="function"?Object.keys:o,r.shim=o;function o(i){var s=[];for(var c in i)s.push(c);return s}},function(t,r){var o=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=t.exports=o?i:s,r.supported=i;function i(c){return Object.prototype.toString.call(c)=="[object Arguments]"}r.unsupported=s;function s(c){return c&&typeof c=="object"&&typeof c.length=="number"&&Object.prototype.hasOwnProperty.call(c,"callee")&&!Object.prototype.propertyIsEnumerable.call(c,"callee")||!1}},function(t,r){var o=Object.prototype.hasOwnProperty,i="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(i=!1));function c(d,g,l){this.fn=d,this.context=g,this.once=l||!1}function f(){this._events=new s,this._eventsCount=0}f.prototype.eventNames=function(){var g=[],l,a;if(this._eventsCount===0)return g;for(a in l=this._events)o.call(l,a)&&g.push(i?a.slice(1):a);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(l)):g},f.prototype.listeners=function(g,l){var a=i?i+g:g,u=this._events[a];if(l)return!!u;if(!u)return[];if(u.fn)return[u.fn];for(var p=0,b=u.length,v=new Array(b);p<b;p++)v[p]=u[p].fn;return v},f.prototype.emit=function(g,l,a,u,p,b){var v=i?i+g:g;if(!this._events[v])return!1;var y=this._events[v],h=arguments.length,w,m;if(y.fn){switch(y.once&&this.removeListener(g,y.fn,void 0,!0),h){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,l),!0;case 3:return y.fn.call(y.context,l,a),!0;case 4:return y.fn.call(y.context,l,a,u),!0;case 5:return y.fn.call(y.context,l,a,u,p),!0;case 6:return y.fn.call(y.context,l,a,u,p,b),!0}for(m=1,w=new Array(h-1);m<h;m++)w[m-1]=arguments[m];y.fn.apply(y.context,w)}else{var k=y.length,S;for(m=0;m<k;m++)switch(y[m].once&&this.removeListener(g,y[m].fn,void 0,!0),h){case 1:y[m].fn.call(y[m].context);break;case 2:y[m].fn.call(y[m].context,l);break;case 3:y[m].fn.call(y[m].context,l,a);break;case 4:y[m].fn.call(y[m].context,l,a,u);break;default:if(!w)for(S=1,w=new Array(h-1);S<h;S++)w[S-1]=arguments[S];y[m].fn.apply(y[m].context,w)}}return!0},f.prototype.on=function(g,l,a){var u=new c(l,a||this),p=i?i+g:g;return this._events[p]?this._events[p].fn?this._events[p]=[this._events[p],u]:this._events[p].push(u):(this._events[p]=u,this._eventsCount++),this},f.prototype.once=function(g,l,a){var u=new c(l,a||this,!0),p=i?i+g:g;return this._events[p]?this._events[p].fn?this._events[p]=[this._events[p],u]:this._events[p].push(u):(this._events[p]=u,this._eventsCount++),this},f.prototype.removeListener=function(g,l,a,u){var p=i?i+g:g;if(!this._events[p])return this;if(!l)return--this._eventsCount===0?this._events=new s:delete this._events[p],this;var b=this._events[p];if(b.fn)b.fn===l&&(!u||b.once)&&(!a||b.context===a)&&(--this._eventsCount===0?this._events=new s:delete this._events[p]);else{for(var v=0,y=[],h=b.length;v<h;v++)(b[v].fn!==l||u&&!b[v].once||a&&b[v].context!==a)&&y.push(b[v]);y.length?this._events[p]=y.length===1?y[0]:y:--this._eventsCount===0?this._events=new s:delete this._events[p]}return this},f.prototype.removeAllListeners=function(g){var l;return g?(l=i?i+g:g,this._events[l]&&(--this._eventsCount===0?this._events=new s:delete this._events[l])):(this._events=new s,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prototype.setMaxListeners=function(){return this},f.prefixed=i,f.EventEmitter=f,typeof t<"u"&&(t.exports=f)},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},s=function(){function K(G,Z){var J=[],X=!0,ie=!1,se=void 0;try{for(var ae=G[Symbol.iterator](),Ie;!(X=(Ie=ae.next()).done)&&(J.push(Ie.value),!(Z&&J.length===Z));X=!0);}catch(ze){ie=!0,se=ze}finally{try{!X&&ae.return&&ae.return()}finally{if(ie)throw se}}return J}return function(G,Z){if(Array.isArray(G))return G;if(Symbol.iterator in Object(G))return K(G,Z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function K(G,Z){for(var J=0;J<Z.length;J++){var X=Z[J];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(G,X.key,X)}}return function(G,Z,J){return Z&&K(G.prototype,Z),J&&K(G,J),G}}(),f=o(3),d=_(f),g=o(2),l=_(g),a=o(0),u=_(a),p=o(5),b=_(p),v=o(10),y=_(v),h=o(9),w=_(h),m=o(36),k=o(37),S=o(13),T=_(S),E=o(26),O=o(38),C=o(39),x=o(40);function _(K){return K&&K.__esModule?K:{default:K}}function A(K,G,Z){return G in K?Object.defineProperty(K,G,{value:Z,enumerable:!0,configurable:!0,writable:!0}):K[G]=Z,K}function L(K,G){if(!(K instanceof G))throw new TypeError("Cannot call a class as a function")}function P(K,G){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G&&(typeof G=="object"||typeof G=="function")?G:K}function R(K,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);K.prototype=Object.create(G&&G.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(K,G):K.__proto__=G)}var F=(0,y.default)("quill:clipboard"),W="__ql-matcher",$=[[Node.TEXT_NODE,ke],[Node.TEXT_NODE,ce],["br",ee],[Node.ELEMENT_NODE,ce],[Node.ELEMENT_NODE,Y],[Node.ELEMENT_NODE,he],[Node.ELEMENT_NODE,z],[Node.ELEMENT_NODE,Se],["li",oe],["b",U.bind(U,"bold")],["i",U.bind(U,"italic")],["style",ne]],I=[m.AlignAttribute,O.DirectionAttribute].reduce(function(K,G){return K[G.keyName]=G,K},{}),B=[m.AlignStyle,k.BackgroundStyle,E.ColorStyle,O.DirectionStyle,C.FontStyle,x.SizeStyle].reduce(function(K,G){return K[G.keyName]=G,K},{}),N=function(K){R(G,K);function G(Z,J){L(this,G);var X=P(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,Z,J));return X.quill.root.addEventListener("paste",X.onPaste.bind(X)),X.container=X.quill.addContainer("ql-clipboard"),X.container.setAttribute("contenteditable",!0),X.container.setAttribute("tabindex",-1),X.matchers=[],$.concat(X.options.matchers).forEach(function(ie){var se=s(ie,2),ae=se[0],Ie=se[1];!J.matchVisual&&Ie===he||X.addMatcher(ae,Ie)}),X}return c(G,[{key:"addMatcher",value:function(J,X){this.matchers.push([J,X])}},{key:"convert",value:function(J){if(typeof J=="string")return this.container.innerHTML=J.replace(/\>\r?\n +\</g,"><"),this.convert();var X=this.quill.getFormat(this.quill.selection.savedRange.index);if(X[T.default.blotName]){var ie=this.container.innerText;return this.container.innerHTML="",new l.default().insert(ie,A({},T.default.blotName,X[T.default.blotName]))}var se=this.prepareMatching(),ae=s(se,2),Ie=ae[0],ze=ae[1],ve=D(this.container,Ie,ze);return H(ve,`
`)&&ve.ops[ve.ops.length-1].attributes==null&&(ve=ve.compose(new l.default().retain(ve.length()-1).delete(1))),F.log("convert",this.container.innerHTML,ve),this.container.innerHTML="",ve}},{key:"dangerouslyPasteHTML",value:function(J,X){var ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof J=="string")this.quill.setContents(this.convert(J),X),this.quill.setSelection(0,b.default.sources.SILENT);else{var se=this.convert(X);this.quill.updateContents(new l.default().retain(J).concat(se),ie),this.quill.setSelection(J+se.length(),b.default.sources.SILENT)}}},{key:"onPaste",value:function(J){var X=this;if(!(J.defaultPrevented||!this.quill.isEnabled())){var ie=this.quill.getSelection(),se=new l.default().retain(ie.index),ae=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(b.default.sources.SILENT),setTimeout(function(){se=se.concat(X.convert()).delete(ie.length),X.quill.updateContents(se,b.default.sources.USER),X.quill.setSelection(se.length()-ie.length,b.default.sources.SILENT),X.quill.scrollingContainer.scrollTop=ae,X.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var J=this,X=[],ie=[];return this.matchers.forEach(function(se){var ae=s(se,2),Ie=ae[0],ze=ae[1];switch(Ie){case Node.TEXT_NODE:ie.push(ze);break;case Node.ELEMENT_NODE:X.push(ze);break;default:[].forEach.call(J.container.querySelectorAll(Ie),function(ve){ve[W]=ve[W]||[],ve[W].push(ze)});break}}),[X,ie]}}]),G}(w.default);N.DEFAULTS={matchers:[],matchVisual:!0};function j(K,G,Z){return(typeof G>"u"?"undefined":i(G))==="object"?Object.keys(G).reduce(function(J,X){return j(J,X,G[X])},K):K.reduce(function(J,X){return X.attributes&&X.attributes[G]?J.push(X):J.insert(X.insert,(0,d.default)({},A({},G,Z),X.attributes))},new l.default)}function q(K){if(K.nodeType!==Node.ELEMENT_NODE)return{};var G="__ql-computed-style";return K[G]||(K[G]=window.getComputedStyle(K))}function H(K,G){for(var Z="",J=K.ops.length-1;J>=0&&Z.length<G.length;--J){var X=K.ops[J];if(typeof X.insert!="string")break;Z=X.insert+Z}return Z.slice(-1*G.length)===G}function M(K){if(K.childNodes.length===0)return!1;var G=q(K);return["block","list-item"].indexOf(G.display)>-1}function D(K,G,Z){return K.nodeType===K.TEXT_NODE?Z.reduce(function(J,X){return X(K,J)},new l.default):K.nodeType===K.ELEMENT_NODE?[].reduce.call(K.childNodes||[],function(J,X){var ie=D(X,G,Z);return X.nodeType===K.ELEMENT_NODE&&(ie=G.reduce(function(se,ae){return ae(X,se)},ie),ie=(X[W]||[]).reduce(function(se,ae){return ae(X,se)},ie)),J.concat(ie)},new l.default):new l.default}function U(K,G,Z){return j(Z,K,!0)}function z(K,G){var Z=u.default.Attributor.Attribute.keys(K),J=u.default.Attributor.Class.keys(K),X=u.default.Attributor.Style.keys(K),ie={};return Z.concat(J).concat(X).forEach(function(se){var ae=u.default.query(se,u.default.Scope.ATTRIBUTE);ae!=null&&(ie[ae.attrName]=ae.value(K),ie[ae.attrName])||(ae=I[se],ae!=null&&(ae.attrName===se||ae.keyName===se)&&(ie[ae.attrName]=ae.value(K)||void 0),ae=B[se],ae!=null&&(ae.attrName===se||ae.keyName===se)&&(ae=B[se],ie[ae.attrName]=ae.value(K)||void 0))}),Object.keys(ie).length>0&&(G=j(G,ie)),G}function Y(K,G){var Z=u.default.query(K);if(Z==null)return G;if(Z.prototype instanceof u.default.Embed){var J={},X=Z.value(K);X!=null&&(J[Z.blotName]=X,G=new l.default().insert(J,Z.formats(K)))}else typeof Z.formats=="function"&&(G=j(G,Z.blotName,Z.formats(K)));return G}function ee(K,G){return H(G,`
`)||G.insert(`
`),G}function ne(){return new l.default}function oe(K,G){var Z=u.default.query(K);if(Z==null||Z.blotName!=="list-item"||!H(G,`
`))return G;for(var J=-1,X=K.parentNode;!X.classList.contains("ql-clipboard");)(u.default.query(X)||{}).blotName==="list"&&(J+=1),X=X.parentNode;return J<=0?G:G.compose(new l.default().retain(G.length()-1).retain(1,{indent:J}))}function ce(K,G){return H(G,`
`)||(M(K)||G.length()>0&&K.nextSibling&&M(K.nextSibling))&&G.insert(`
`),G}function he(K,G){if(M(K)&&K.nextElementSibling!=null&&!H(G,`

`)){var Z=K.offsetHeight+parseFloat(q(K).marginTop)+parseFloat(q(K).marginBottom);K.nextElementSibling.offsetTop>K.offsetTop+Z*1.5&&G.insert(`
`)}return G}function Se(K,G){var Z={},J=K.style||{};return J.fontStyle&&q(K).fontStyle==="italic"&&(Z.italic=!0),J.fontWeight&&(q(K).fontWeight.startsWith("bold")||parseInt(q(K).fontWeight)>=700)&&(Z.bold=!0),Object.keys(Z).length>0&&(G=j(G,Z)),parseFloat(J.textIndent||0)>0&&(G=new l.default().insert("	").concat(G)),G}function ke(K,G){var Z=K.data;if(K.parentNode.tagName==="O:P")return G.insert(Z.trim());if(Z.trim().length===0&&K.parentNode.classList.contains("ql-clipboard"))return G;if(!q(K.parentNode).whiteSpace.startsWith("pre")){var J=function(ie,se){return se=se.replace(/[^\u00a0]/g,""),se.length<1&&ie?" ":se};Z=Z.replace(/\r\n/g," ").replace(/\n/g," "),Z=Z.replace(/\s\s+/g,J.bind(J,!0)),(K.previousSibling==null&&M(K.parentNode)||K.previousSibling!=null&&M(K.previousSibling))&&(Z=Z.replace(/^\s+/,J.bind(J,!1))),(K.nextSibling==null&&M(K.parentNode)||K.nextSibling!=null&&M(K.nextSibling))&&(Z=Z.replace(/\s+$/,J.bind(J,!1)))}return G.insert(Z)}r.default=N,r.matchAttributor=z,r.matchBlot=Y,r.matchNewline=ce,r.matchSpacing=he,r.matchText=ke},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function p(b,v){for(var y=0;y<v.length;y++){var h=v[y];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(b,h.key,h)}}return function(b,v,y){return v&&p(b.prototype,v),y&&p(b,y),b}}(),s=function p(b,v,y){b===null&&(b=Function.prototype);var h=Object.getOwnPropertyDescriptor(b,v);if(h===void 0){var w=Object.getPrototypeOf(b);return w===null?void 0:p(w,v,y)}else{if("value"in h)return h.value;var m=h.get;return m===void 0?void 0:m.call(y)}},c=o(6),f=d(c);function d(p){return p&&p.__esModule?p:{default:p}}function g(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function l(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function a(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var u=function(p){a(b,p);function b(){return g(this,b),l(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"optimize",value:function(y){s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,y),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),b}(f.default);u.blotName="bold",u.tagName=["STRONG","B"],r.default=u},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var i=function(){function x(_,A){var L=[],P=!0,R=!1,F=void 0;try{for(var W=_[Symbol.iterator](),$;!(P=($=W.next()).done)&&(L.push($.value),!(A&&L.length===A));P=!0);}catch(I){R=!0,F=I}finally{try{!P&&W.return&&W.return()}finally{if(R)throw F}}return L}return function(_,A){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return x(_,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function x(_,A){for(var L=0;L<A.length;L++){var P=A[L];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(_,P.key,P)}}return function(_,A,L){return A&&x(_.prototype,A),L&&x(_,L),_}}(),c=o(2),f=y(c),d=o(0),g=y(d),l=o(5),a=y(l),u=o(10),p=y(u),b=o(9),v=y(b);function y(x){return x&&x.__esModule?x:{default:x}}function h(x,_,A){return _ in x?Object.defineProperty(x,_,{value:A,enumerable:!0,configurable:!0,writable:!0}):x[_]=A,x}function w(x,_){if(!(x instanceof _))throw new TypeError("Cannot call a class as a function")}function m(x,_){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:x}function k(x,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(x,_):x.__proto__=_)}var S=(0,p.default)("quill:toolbar"),T=function(x){k(_,x);function _(A,L){w(this,_);var P=m(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A,L));if(Array.isArray(P.options.container)){var R=document.createElement("div");O(R,P.options.container),A.container.parentNode.insertBefore(R,A.container),P.container=R}else typeof P.options.container=="string"?P.container=document.querySelector(P.options.container):P.container=P.options.container;if(!(P.container instanceof HTMLElement)){var F;return F=S.error("Container required for toolbar",P.options),m(P,F)}return P.container.classList.add("ql-toolbar"),P.controls=[],P.handlers={},Object.keys(P.options.handlers).forEach(function(W){P.addHandler(W,P.options.handlers[W])}),[].forEach.call(P.container.querySelectorAll("button, select"),function(W){P.attach(W)}),P.quill.on(a.default.events.EDITOR_CHANGE,function(W,$){W===a.default.events.SELECTION_CHANGE&&P.update($)}),P.quill.on(a.default.events.SCROLL_OPTIMIZE,function(){var W=P.quill.selection.getRange(),$=i(W,1),I=$[0];P.update(I)}),P}return s(_,[{key:"addHandler",value:function(L,P){this.handlers[L]=P}},{key:"attach",value:function(L){var P=this,R=[].find.call(L.classList,function(W){return W.indexOf("ql-")===0});if(R){if(R=R.slice(3),L.tagName==="BUTTON"&&L.setAttribute("type","button"),this.handlers[R]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[R]==null){S.warn("ignoring attaching to disabled format",R,L);return}if(g.default.query(R)==null){S.warn("ignoring attaching to nonexistent format",R,L);return}}var F=L.tagName==="SELECT"?"change":"click";L.addEventListener(F,function(W){var $=void 0;if(L.tagName==="SELECT"){if(L.selectedIndex<0)return;var I=L.options[L.selectedIndex];I.hasAttribute("selected")?$=!1:$=I.value||!1}else L.classList.contains("ql-active")?$=!1:$=L.value||!L.hasAttribute("value"),W.preventDefault();P.quill.focus();var B=P.quill.selection.getRange(),N=i(B,1),j=N[0];if(P.handlers[R]!=null)P.handlers[R].call(P,$);else if(g.default.query(R).prototype instanceof g.default.Embed){if($=prompt("Enter "+R),!$)return;P.quill.updateContents(new f.default().retain(j.index).delete(j.length).insert(h({},R,$)),a.default.sources.USER)}else P.quill.format(R,$,a.default.sources.USER);P.update(j)}),this.controls.push([R,L])}}},{key:"update",value:function(L){var P=L==null?{}:this.quill.getFormat(L);this.controls.forEach(function(R){var F=i(R,2),W=F[0],$=F[1];if($.tagName==="SELECT"){var I=void 0;if(L==null)I=null;else if(P[W]==null)I=$.querySelector("option[selected]");else if(!Array.isArray(P[W])){var B=P[W];typeof B=="string"&&(B=B.replace(/\"/g,'\\"')),I=$.querySelector('option[value="'+B+'"]')}I==null?($.value="",$.selectedIndex=-1):I.selected=!0}else if(L==null)$.classList.remove("ql-active");else if($.hasAttribute("value")){var N=P[W]===$.getAttribute("value")||P[W]!=null&&P[W].toString()===$.getAttribute("value")||P[W]==null&&!$.getAttribute("value");$.classList.toggle("ql-active",N)}else $.classList.toggle("ql-active",P[W]!=null)})}}]),_}(v.default);T.DEFAULTS={};function E(x,_,A){var L=document.createElement("button");L.setAttribute("type","button"),L.classList.add("ql-"+_),A!=null&&(L.value=A),x.appendChild(L)}function O(x,_){Array.isArray(_[0])||(_=[_]),_.forEach(function(A){var L=document.createElement("span");L.classList.add("ql-formats"),A.forEach(function(P){if(typeof P=="string")E(L,P);else{var R=Object.keys(P)[0],F=P[R];Array.isArray(F)?C(L,R,F):E(L,R,F)}}),x.appendChild(L)})}function C(x,_,A){var L=document.createElement("select");L.classList.add("ql-"+_),A.forEach(function(P){var R=document.createElement("option");P!==!1?R.setAttribute("value",P):R.setAttribute("selected","selected"),L.appendChild(R)}),x.appendChild(L)}T.DEFAULTS={container:null,handlers:{clean:function(){var _=this,A=this.quill.getSelection();if(A!=null)if(A.length==0){var L=this.quill.getFormat();Object.keys(L).forEach(function(P){g.default.query(P,g.default.Scope.INLINE)!=null&&_.quill.format(P,!1)})}else this.quill.removeFormat(A,a.default.sources.USER)},direction:function(_){var A=this.quill.getFormat().align;_==="rtl"&&A==null?this.quill.format("align","right",a.default.sources.USER):!_&&A==="right"&&this.quill.format("align",!1,a.default.sources.USER),this.quill.format("direction",_,a.default.sources.USER)},indent:function(_){var A=this.quill.getSelection(),L=this.quill.getFormat(A),P=parseInt(L.indent||0);if(_==="+1"||_==="-1"){var R=_==="+1"?1:-1;L.direction==="rtl"&&(R*=-1),this.quill.format("indent",P+R,a.default.sources.USER)}},link:function(_){_===!0&&(_=prompt("Enter link URL:")),this.quill.format("link",_,a.default.sources.USER)},list:function(_){var A=this.quill.getSelection(),L=this.quill.getFormat(A);_==="check"?L.list==="checked"||L.list==="unchecked"?this.quill.format("list",!1,a.default.sources.USER):this.quill.format("list","unchecked",a.default.sources.USER):this.quill.format("list",_,a.default.sources.USER)}}},r.default=T,r.addControls=O},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function p(b,v){for(var y=0;y<v.length;y++){var h=v[y];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(b,h.key,h)}}return function(b,v,y){return v&&p(b.prototype,v),y&&p(b,y),b}}(),s=function p(b,v,y){b===null&&(b=Function.prototype);var h=Object.getOwnPropertyDescriptor(b,v);if(h===void 0){var w=Object.getPrototypeOf(b);return w===null?void 0:p(w,v,y)}else{if("value"in h)return h.value;var m=h.get;return m===void 0?void 0:m.call(y)}},c=o(28),f=d(c);function d(p){return p&&p.__esModule?p:{default:p}}function g(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function l(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function a(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var u=function(p){a(b,p);function b(v,y){g(this,b);var h=l(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,v));return h.label.innerHTML=y,h.container.classList.add("ql-color-picker"),[].slice.call(h.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(w){w.classList.add("ql-primary")}),h}return i(b,[{key:"buildItem",value:function(y){var h=s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"buildItem",this).call(this,y);return h.style.backgroundColor=y.getAttribute("value")||"",h}},{key:"selectItem",value:function(y,h){s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,y,h);var w=this.label.querySelector(".ql-color-label"),m=y&&y.getAttribute("data-value")||"";w&&(w.tagName==="line"?w.style.stroke=m:w.style.fill=m)}}]),b}(f.default);r.default=u},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function p(b,v){for(var y=0;y<v.length;y++){var h=v[y];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(b,h.key,h)}}return function(b,v,y){return v&&p(b.prototype,v),y&&p(b,y),b}}(),s=function p(b,v,y){b===null&&(b=Function.prototype);var h=Object.getOwnPropertyDescriptor(b,v);if(h===void 0){var w=Object.getPrototypeOf(b);return w===null?void 0:p(w,v,y)}else{if("value"in h)return h.value;var m=h.get;return m===void 0?void 0:m.call(y)}},c=o(28),f=d(c);function d(p){return p&&p.__esModule?p:{default:p}}function g(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function l(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function a(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var u=function(p){a(b,p);function b(v,y){g(this,b);var h=l(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,v));return h.container.classList.add("ql-icon-picker"),[].forEach.call(h.container.querySelectorAll(".ql-picker-item"),function(w){w.innerHTML=y[w.getAttribute("data-value")||""]}),h.defaultItem=h.container.querySelector(".ql-selected"),h.selectItem(h.defaultItem),h}return i(b,[{key:"selectItem",value:function(y,h){s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,y,h),y=y||this.defaultItem,this.label.innerHTML=y.innerHTML}}]),b}(f.default);r.default=u},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function f(d,g){for(var l=0;l<g.length;l++){var a=g[l];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(d,g,l){return g&&f(d.prototype,g),l&&f(d,l),d}}();function s(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}var c=function(){function f(d,g){var l=this;s(this,f),this.quill=d,this.boundsContainer=g||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){l.root.style.marginTop=-1*l.quill.root.scrollTop+"px"}),this.hide()}return i(f,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(g){var l=g.left+g.width/2-this.root.offsetWidth/2,a=g.bottom+this.quill.root.scrollTop;this.root.style.left=l+"px",this.root.style.top=a+"px",this.root.classList.remove("ql-flip");var u=this.boundsContainer.getBoundingClientRect(),p=this.root.getBoundingClientRect(),b=0;if(p.right>u.right&&(b=u.right-p.right,this.root.style.left=l+b+"px"),p.left<u.left&&(b=u.left-p.left,this.root.style.left=l+b+"px"),p.bottom>u.bottom){var v=p.bottom-p.top,y=g.bottom-g.top+v;this.root.style.top=a-y+"px",this.root.classList.add("ql-flip")}return b}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),f}();r.default=c},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function C(x,_){var A=[],L=!0,P=!1,R=void 0;try{for(var F=x[Symbol.iterator](),W;!(L=(W=F.next()).done)&&(A.push(W.value),!(_&&A.length===_));L=!0);}catch($){P=!0,R=$}finally{try{!L&&F.return&&F.return()}finally{if(P)throw R}}return A}return function(x,_){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return C(x,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function C(x,_,A){x===null&&(x=Function.prototype);var L=Object.getOwnPropertyDescriptor(x,_);if(L===void 0){var P=Object.getPrototypeOf(x);return P===null?void 0:C(P,_,A)}else{if("value"in L)return L.value;var R=L.get;return R===void 0?void 0:R.call(A)}},c=function(){function C(x,_){for(var A=0;A<_.length;A++){var L=_[A];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(x,L.key,L)}}return function(x,_,A){return _&&C(x.prototype,_),A&&C(x,A),x}}(),f=o(3),d=w(f),g=o(8),l=w(g),a=o(43),u=w(a),p=o(27),b=w(p),v=o(15),y=o(41),h=w(y);function w(C){return C&&C.__esModule?C:{default:C}}function m(C,x){if(!(C instanceof x))throw new TypeError("Cannot call a class as a function")}function k(C,x){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:C}function S(C,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);C.prototype=Object.create(x&&x.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(C,x):C.__proto__=x)}var T=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],E=function(C){S(x,C);function x(_,A){m(this,x),A.modules.toolbar!=null&&A.modules.toolbar.container==null&&(A.modules.toolbar.container=T);var L=k(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,_,A));return L.quill.container.classList.add("ql-snow"),L}return c(x,[{key:"extendToolbar",value:function(A){A.container.classList.add("ql-snow"),this.buildButtons([].slice.call(A.container.querySelectorAll("button")),h.default),this.buildPickers([].slice.call(A.container.querySelectorAll("select")),h.default),this.tooltip=new O(this.quill,this.options.bounds),A.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(L,P){A.handlers.link.call(A,!P.format.link)})}}]),x}(u.default);E.DEFAULTS=(0,d.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(x){if(x){var _=this.quill.getSelection();if(_==null||_.length==0)return;var A=this.quill.getText(_);/^\S+@\S+\.\S+$/.test(A)&&A.indexOf("mailto:")!==0&&(A="mailto:"+A);var L=this.quill.theme.tooltip;L.edit("link",A)}else this.quill.format("link",!1)}}}}});var O=function(C){S(x,C);function x(_,A){m(this,x);var L=k(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,_,A));return L.preview=L.root.querySelector("a.ql-preview"),L}return c(x,[{key:"listen",value:function(){var A=this;s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(L){A.root.classList.contains("ql-editing")?A.save():A.edit("link",A.preview.textContent),L.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(L){if(A.linkRange!=null){var P=A.linkRange;A.restoreFocus(),A.quill.formatText(P,"link",!1,l.default.sources.USER),delete A.linkRange}L.preventDefault(),A.hide()}),this.quill.on(l.default.events.SELECTION_CHANGE,function(L,P,R){if(L!=null){if(L.length===0&&R===l.default.sources.USER){var F=A.quill.scroll.descendant(b.default,L.index),W=i(F,2),$=W[0],I=W[1];if($!=null){A.linkRange=new v.Range(L.index-I,$.length());var B=b.default.formats($.domNode);A.preview.textContent=B,A.preview.setAttribute("href",B),A.show(),A.position(A.quill.getBounds(A.linkRange));return}}else delete A.linkRange;A.hide()}})}},{key:"show",value:function(){s(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),x}(a.BaseTooltip);O.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=E},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=o(29),s=X(i),c=o(36),f=o(38),d=o(64),g=o(65),l=X(g),a=o(66),u=X(a),p=o(67),b=X(p),v=o(37),y=o(26),h=o(39),w=o(40),m=o(56),k=X(m),S=o(68),T=X(S),E=o(27),O=X(E),C=o(69),x=X(C),_=o(70),A=X(_),L=o(71),P=X(L),R=o(72),F=X(R),W=o(73),$=X(W),I=o(13),B=X(I),N=o(74),j=X(N),q=o(75),H=X(q),M=o(57),D=X(M),U=o(41),z=X(U),Y=o(28),ee=X(Y),ne=o(59),oe=X(ne),ce=o(60),he=X(ce),Se=o(61),ke=X(Se),K=o(108),G=X(K),Z=o(62),J=X(Z);function X(ie){return ie&&ie.__esModule?ie:{default:ie}}s.default.register({"attributors/attribute/direction":f.DirectionAttribute,"attributors/class/align":c.AlignClass,"attributors/class/background":v.BackgroundClass,"attributors/class/color":y.ColorClass,"attributors/class/direction":f.DirectionClass,"attributors/class/font":h.FontClass,"attributors/class/size":w.SizeClass,"attributors/style/align":c.AlignStyle,"attributors/style/background":v.BackgroundStyle,"attributors/style/color":y.ColorStyle,"attributors/style/direction":f.DirectionStyle,"attributors/style/font":h.FontStyle,"attributors/style/size":w.SizeStyle},!0),s.default.register({"formats/align":c.AlignClass,"formats/direction":f.DirectionClass,"formats/indent":d.IndentClass,"formats/background":v.BackgroundStyle,"formats/color":y.ColorStyle,"formats/font":h.FontClass,"formats/size":w.SizeClass,"formats/blockquote":l.default,"formats/code-block":B.default,"formats/header":u.default,"formats/list":b.default,"formats/bold":k.default,"formats/code":I.Code,"formats/italic":T.default,"formats/link":O.default,"formats/script":x.default,"formats/strike":A.default,"formats/underline":P.default,"formats/image":F.default,"formats/video":$.default,"formats/list/item":p.ListItem,"modules/formula":j.default,"modules/syntax":H.default,"modules/toolbar":D.default,"themes/bubble":G.default,"themes/snow":J.default,"ui/icons":z.default,"ui/picker":ee.default,"ui/icon-picker":he.default,"ui/color-picker":oe.default,"ui/tooltip":ke.default},!0),r.default=s.default},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var i=function(){function b(v,y){for(var h=0;h<y.length;h++){var w=y[h];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,y,h){return y&&b(v.prototype,y),h&&b(v,h),v}}(),s=function b(v,y,h){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,y);if(w===void 0){var m=Object.getPrototypeOf(v);return m===null?void 0:b(m,y,h)}else{if("value"in w)return w.value;var k=w.get;return k===void 0?void 0:k.call(h)}},c=o(0),f=d(c);function d(b){return b&&b.__esModule?b:{default:b}}function g(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function l(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function a(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var u=function(b){a(v,b);function v(){return g(this,v),l(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"add",value:function(h,w){if(w==="+1"||w==="-1"){var m=this.value(h)||0;w=w==="+1"?m+1:m-1}return w===0?(this.remove(h),!0):s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"add",this).call(this,h,w)}},{key:"canAdd",value:function(h,w){return s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,h,w)||s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,h,parseInt(w))}},{key:"value",value:function(h){return parseInt(s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,h))||void 0}}]),v}(f.default.Attributor.Class),p=new u("indent","ql-indent",{scope:f.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=p},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=o(4),s=c(i);function c(a){return a&&a.__esModule?a:{default:a}}function f(a,u){if(!(a instanceof u))throw new TypeError("Cannot call a class as a function")}function d(a,u){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:a}function g(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);a.prototype=Object.create(u&&u.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(a,u):a.__proto__=u)}var l=function(a){g(u,a);function u(){return f(this,u),d(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return u}(s.default);l.blotName="blockquote",l.tagName="blockquote",r.default=l},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function u(p,b){for(var v=0;v<b.length;v++){var y=b[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(p,y.key,y)}}return function(p,b,v){return b&&u(p.prototype,b),v&&u(p,v),p}}(),s=o(4),c=f(s);function f(u){return u&&u.__esModule?u:{default:u}}function d(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}function g(u,p){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:u}function l(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}var a=function(u){l(p,u);function p(){return d(this,p),g(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return i(p,null,[{key:"formats",value:function(v){return this.tagName.indexOf(v.tagName)+1}}]),p}(c.default);a.blotName="header",a.tagName=["H1","H2","H3","H4","H5","H6"],r.default=a},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var i=function(){function m(k,S){for(var T=0;T<S.length;T++){var E=S[T];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(k,E.key,E)}}return function(k,S,T){return S&&m(k.prototype,S),T&&m(k,T),k}}(),s=function m(k,S,T){k===null&&(k=Function.prototype);var E=Object.getOwnPropertyDescriptor(k,S);if(E===void 0){var O=Object.getPrototypeOf(k);return O===null?void 0:m(O,S,T)}else{if("value"in E)return E.value;var C=E.get;return C===void 0?void 0:C.call(T)}},c=o(0),f=u(c),d=o(4),g=u(d),l=o(25),a=u(l);function u(m){return m&&m.__esModule?m:{default:m}}function p(m,k,S){return k in m?Object.defineProperty(m,k,{value:S,enumerable:!0,configurable:!0,writable:!0}):m[k]=S,m}function b(m,k){if(!(m instanceof k))throw new TypeError("Cannot call a class as a function")}function v(m,k){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:m}function y(m,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);m.prototype=Object.create(k&&k.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(m,k):m.__proto__=k)}var h=function(m){y(k,m);function k(){return b(this,k),v(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return i(k,[{key:"format",value:function(T,E){T===w.blotName&&!E?this.replaceWith(f.default.create(this.statics.scope)):s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,T,E)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(T,E){return this.parent.isolate(this.offset(this.parent),this.length()),T===this.parent.statics.blotName?(this.parent.replaceWith(T,E),this):(this.parent.unwrap(),s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replaceWith",this).call(this,T,E))}}],[{key:"formats",value:function(T){return T.tagName===this.tagName?void 0:s(k.__proto__||Object.getPrototypeOf(k),"formats",this).call(this,T)}}]),k}(g.default);h.blotName="list-item",h.tagName="LI";var w=function(m){y(k,m),i(k,null,[{key:"create",value:function(T){var E=T==="ordered"?"OL":"UL",O=s(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,E);return(T==="checked"||T==="unchecked")&&O.setAttribute("data-checked",T==="checked"),O}},{key:"formats",value:function(T){if(T.tagName==="OL")return"ordered";if(T.tagName==="UL")return T.hasAttribute("data-checked")?T.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function k(S){b(this,k);var T=v(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,S)),E=function(C){if(C.target.parentNode===S){var x=T.statics.formats(S),_=f.default.find(C.target);x==="checked"?_.format("list","unchecked"):x==="unchecked"&&_.format("list","checked")}};return S.addEventListener("touchstart",E),S.addEventListener("mousedown",E),T}return i(k,[{key:"format",value:function(T,E){this.children.length>0&&this.children.tail.format(T,E)}},{key:"formats",value:function(){return p({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(T,E){if(T instanceof h)s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,T,E);else{var O=E==null?this.length():E.offset(this),C=this.split(O);C.parent.insertBefore(T,C)}}},{key:"optimize",value:function(T){s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,T);var E=this.next;E!=null&&E.prev===this&&E.statics.blotName===this.statics.blotName&&E.domNode.tagName===this.domNode.tagName&&E.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(E.moveChildren(this),E.remove())}},{key:"replace",value:function(T){if(T.statics.blotName!==this.statics.blotName){var E=f.default.create(this.statics.defaultChild);T.moveChildren(E),this.appendChild(E)}s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replace",this).call(this,T)}}]),k}(a.default);w.blotName="list",w.scope=f.default.Scope.BLOCK_BLOT,w.tagName=["OL","UL"],w.defaultChild="list-item",w.allowedChildren=[h],r.ListItem=h,r.default=w},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=o(56),s=c(i);function c(a){return a&&a.__esModule?a:{default:a}}function f(a,u){if(!(a instanceof u))throw new TypeError("Cannot call a class as a function")}function d(a,u){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:a}function g(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);a.prototype=Object.create(u&&u.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(a,u):a.__proto__=u)}var l=function(a){g(u,a);function u(){return f(this,u),d(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return u}(s.default);l.blotName="italic",l.tagName=["EM","I"],r.default=l},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function p(b,v){for(var y=0;y<v.length;y++){var h=v[y];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(b,h.key,h)}}return function(b,v,y){return v&&p(b.prototype,v),y&&p(b,y),b}}(),s=function p(b,v,y){b===null&&(b=Function.prototype);var h=Object.getOwnPropertyDescriptor(b,v);if(h===void 0){var w=Object.getPrototypeOf(b);return w===null?void 0:p(w,v,y)}else{if("value"in h)return h.value;var m=h.get;return m===void 0?void 0:m.call(y)}},c=o(6),f=d(c);function d(p){return p&&p.__esModule?p:{default:p}}function g(p,b){if(!(p instanceof b))throw new TypeError("Cannot call a class as a function")}function l(p,b){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:p}function a(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(p,b):p.__proto__=b)}var u=function(p){a(b,p);function b(){return g(this,b),l(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,null,[{key:"create",value:function(y){return y==="super"?document.createElement("sup"):y==="sub"?document.createElement("sub"):s(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,y)}},{key:"formats",value:function(y){if(y.tagName==="SUB")return"sub";if(y.tagName==="SUP")return"super"}}]),b}(f.default);u.blotName="script",u.tagName=["SUB","SUP"],r.default=u},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=o(6),s=c(i);function c(a){return a&&a.__esModule?a:{default:a}}function f(a,u){if(!(a instanceof u))throw new TypeError("Cannot call a class as a function")}function d(a,u){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:a}function g(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);a.prototype=Object.create(u&&u.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(a,u):a.__proto__=u)}var l=function(a){g(u,a);function u(){return f(this,u),d(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return u}(s.default);l.blotName="strike",l.tagName="S",r.default=l},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=o(6),s=c(i);function c(a){return a&&a.__esModule?a:{default:a}}function f(a,u){if(!(a instanceof u))throw new TypeError("Cannot call a class as a function")}function d(a,u){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:a}function g(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);a.prototype=Object.create(u&&u.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(a,u):a.__proto__=u)}var l=function(a){g(u,a);function u(){return f(this,u),d(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return u}(s.default);l.blotName="underline",l.tagName="U",r.default=l},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function v(y,h){for(var w=0;w<h.length;w++){var m=h[w];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}return function(y,h,w){return h&&v(y.prototype,h),w&&v(y,w),y}}(),s=function v(y,h,w){y===null&&(y=Function.prototype);var m=Object.getOwnPropertyDescriptor(y,h);if(m===void 0){var k=Object.getPrototypeOf(y);return k===null?void 0:v(k,h,w)}else{if("value"in m)return m.value;var S=m.get;return S===void 0?void 0:S.call(w)}},c=o(0),f=g(c),d=o(27);function g(v){return v&&v.__esModule?v:{default:v}}function l(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function a(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function u(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var p=["alt","height","width"],b=function(v){u(y,v);function y(){return l(this,y),a(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"format",value:function(w,m){p.indexOf(w)>-1?m?this.domNode.setAttribute(w,m):this.domNode.removeAttribute(w):s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,w,m)}}],[{key:"create",value:function(w){var m=s(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,w);return typeof w=="string"&&m.setAttribute("src",this.sanitize(w)),m}},{key:"formats",value:function(w){return p.reduce(function(m,k){return w.hasAttribute(k)&&(m[k]=w.getAttribute(k)),m},{})}},{key:"match",value:function(w){return/\.(jpe?g|gif|png)$/.test(w)||/^data:image\/.+;base64/.test(w)}},{key:"sanitize",value:function(w){return(0,d.sanitize)(w,["http","https","data"])?w:"//:0"}},{key:"value",value:function(w){return w.getAttribute("src")}}]),y}(f.default.Embed);b.blotName="image",b.tagName="IMG",r.default=b},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function v(y,h){for(var w=0;w<h.length;w++){var m=h[w];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(y,m.key,m)}}return function(y,h,w){return h&&v(y.prototype,h),w&&v(y,w),y}}(),s=function v(y,h,w){y===null&&(y=Function.prototype);var m=Object.getOwnPropertyDescriptor(y,h);if(m===void 0){var k=Object.getPrototypeOf(y);return k===null?void 0:v(k,h,w)}else{if("value"in m)return m.value;var S=m.get;return S===void 0?void 0:S.call(w)}},c=o(4),f=o(27),d=g(f);function g(v){return v&&v.__esModule?v:{default:v}}function l(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function a(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function u(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var p=["height","width"],b=function(v){u(y,v);function y(){return l(this,y),a(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"format",value:function(w,m){p.indexOf(w)>-1?m?this.domNode.setAttribute(w,m):this.domNode.removeAttribute(w):s(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,w,m)}}],[{key:"create",value:function(w){var m=s(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,w);return m.setAttribute("frameborder","0"),m.setAttribute("allowfullscreen",!0),m.setAttribute("src",this.sanitize(w)),m}},{key:"formats",value:function(w){return p.reduce(function(m,k){return w.hasAttribute(k)&&(m[k]=w.getAttribute(k)),m},{})}},{key:"sanitize",value:function(w){return d.default.sanitize(w)}},{key:"value",value:function(w){return w.getAttribute("src")}}]),y}(c.BlockEmbed);b.blotName="video",b.className="ql-video",b.tagName="IFRAME",r.default=b},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var i=function(){function w(m,k){for(var S=0;S<k.length;S++){var T=k[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(m,T.key,T)}}return function(m,k,S){return k&&w(m.prototype,k),S&&w(m,S),m}}(),s=function w(m,k,S){m===null&&(m=Function.prototype);var T=Object.getOwnPropertyDescriptor(m,k);if(T===void 0){var E=Object.getPrototypeOf(m);return E===null?void 0:w(E,k,S)}else{if("value"in T)return T.value;var O=T.get;return O===void 0?void 0:O.call(S)}},c=o(35),f=u(c),d=o(5),g=u(d),l=o(9),a=u(l);function u(w){return w&&w.__esModule?w:{default:w}}function p(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function b(w,m){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:w}function v(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);w.prototype=Object.create(m&&m.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(w,m):w.__proto__=m)}var y=function(w){v(m,w);function m(){return p(this,m),b(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return i(m,null,[{key:"create",value:function(S){var T=s(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,S);return typeof S=="string"&&(window.katex.render(S,T,{throwOnError:!1,errorColor:"#f00"}),T.setAttribute("data-value",S)),T}},{key:"value",value:function(S){return S.getAttribute("data-value")}}]),m}(f.default);y.blotName="formula",y.className="ql-formula",y.tagName="SPAN";var h=function(w){v(m,w),i(m,null,[{key:"register",value:function(){g.default.register(y,!0)}}]);function m(){p(this,m);var k=b(this,(m.__proto__||Object.getPrototypeOf(m)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return k}return m}(a.default);r.FormulaBlot=y,r.default=h},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var i=function(){function S(T,E){for(var O=0;O<E.length;O++){var C=E[O];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(T,C.key,C)}}return function(T,E,O){return E&&S(T.prototype,E),O&&S(T,O),T}}(),s=function S(T,E,O){T===null&&(T=Function.prototype);var C=Object.getOwnPropertyDescriptor(T,E);if(C===void 0){var x=Object.getPrototypeOf(T);return x===null?void 0:S(x,E,O)}else{if("value"in C)return C.value;var _=C.get;return _===void 0?void 0:_.call(O)}},c=o(0),f=b(c),d=o(5),g=b(d),l=o(9),a=b(l),u=o(13),p=b(u);function b(S){return S&&S.__esModule?S:{default:S}}function v(S,T){if(!(S instanceof T))throw new TypeError("Cannot call a class as a function")}function y(S,T){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:S}function h(S,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);S.prototype=Object.create(T&&T.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(S,T):S.__proto__=T)}var w=function(S){h(T,S);function T(){return v(this,T),y(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return i(T,[{key:"replaceWith",value:function(O){this.domNode.textContent=this.domNode.textContent,this.attach(),s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replaceWith",this).call(this,O)}},{key:"highlight",value:function(O){var C=this.domNode.textContent;this.cachedText!==C&&((C.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=O(C),this.domNode.normalize(),this.attach()),this.cachedText=C)}}]),T}(p.default);w.className="ql-syntax";var m=new f.default.Attributor.Class("token","hljs",{scope:f.default.Scope.INLINE}),k=function(S){h(T,S),i(T,null,[{key:"register",value:function(){g.default.register(m,!0),g.default.register(w,!0)}}]);function T(E,O){v(this,T);var C=y(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,E,O));if(typeof C.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var x=null;return C.quill.on(g.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(x),x=setTimeout(function(){C.highlight(),x=null},C.options.interval)}),C.highlight(),C}return i(T,[{key:"highlight",value:function(){var O=this;if(!this.quill.selection.composing){this.quill.update(g.default.sources.USER);var C=this.quill.getSelection();this.quill.scroll.descendants(w).forEach(function(x){x.highlight(O.options.highlight)}),this.quill.update(g.default.sources.SILENT),C!=null&&this.quill.setSelection(C,g.default.sources.SILENT)}}}]),T}(a.default);k.DEFAULTS={highlight:function(){return window.hljs==null?null:function(S){var T=window.hljs.highlightAuto(S);return T.value}}(),interval:1e3},r.CodeBlock=w,r.CodeToken=m,r.default=k},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var i=function T(E,O,C){E===null&&(E=Function.prototype);var x=Object.getOwnPropertyDescriptor(E,O);if(x===void 0){var _=Object.getPrototypeOf(E);return _===null?void 0:T(_,O,C)}else{if("value"in x)return x.value;var A=x.get;return A===void 0?void 0:A.call(C)}},s=function(){function T(E,O){for(var C=0;C<O.length;C++){var x=O[C];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(E,x.key,x)}}return function(E,O,C){return O&&T(E.prototype,O),C&&T(E,C),E}}(),c=o(3),f=v(c),d=o(8),g=v(d),l=o(43),a=v(l),u=o(15),p=o(41),b=v(p);function v(T){return T&&T.__esModule?T:{default:T}}function y(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}function h(T,E){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:T}function w(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(T,E):T.__proto__=E)}var m=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],k=function(T){w(E,T);function E(O,C){y(this,E),C.modules.toolbar!=null&&C.modules.toolbar.container==null&&(C.modules.toolbar.container=m);var x=h(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,O,C));return x.quill.container.classList.add("ql-bubble"),x}return s(E,[{key:"extendToolbar",value:function(C){this.tooltip=new S(this.quill,this.options.bounds),this.tooltip.root.appendChild(C.container),this.buildButtons([].slice.call(C.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(C.container.querySelectorAll("select")),b.default)}}]),E}(a.default);k.DEFAULTS=(0,f.default)(!0,{},a.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){E?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var S=function(T){w(E,T);function E(O,C){y(this,E);var x=h(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,O,C));return x.quill.on(g.default.events.EDITOR_CHANGE,function(_,A,L,P){if(_===g.default.events.SELECTION_CHANGE)if(A!=null&&A.length>0&&P===g.default.sources.USER){x.show(),x.root.style.left="0px",x.root.style.width="",x.root.style.width=x.root.offsetWidth+"px";var R=x.quill.getLines(A.index,A.length);if(R.length===1)x.position(x.quill.getBounds(A));else{var F=R[R.length-1],W=x.quill.getIndex(F),$=Math.min(F.length()-1,A.index+A.length-W),I=x.quill.getBounds(new u.Range(W,$));x.position(I)}}else document.activeElement!==x.textbox&&x.quill.hasFocus()&&x.hide()}),x}return s(E,[{key:"listen",value:function(){var C=this;i(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){C.root.classList.remove("ql-editing")}),this.quill.on(g.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!C.root.classList.contains("ql-hidden")){var x=C.quill.getSelection();x!=null&&C.position(C.quill.getBounds(x))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(C){var x=i(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"position",this).call(this,C),_=this.root.querySelector(".ql-tooltip-arrow");if(_.style.marginLeft="",x===0)return x;_.style.marginLeft=-1*x-_.offsetWidth/2+"px"}}]),E}(l.BaseTooltip);S.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=S,r.default=k},function(t,r,o){t.exports=o(63)}]).default})})(xa);var dv=xa.exports,hv=Me&&Me.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yn=Me&&Me.__assign||function(){return yn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},yn.apply(this,arguments)},fv=Me&&Me.__spreadArrays||function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),o=0,e=0;e<t;e++)for(var i=arguments[e],s=0,c=i.length;s<c;s++,o++)r[o]=i[s];return r},In=Me&&Me.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},Fe=In(De),pv=In(Lc),jt=In(uv),Ms=In(dv);(function(n){hv(e,n);function e(t){var r=n.call(this,t)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(i,s,c,f){var d,g,l,a;i==="text-change"?(g=(d=r).onEditorChangeText)===null||g===void 0||g.call(d,r.editor.root.innerHTML,s,f,r.unprivilegedEditor):i==="selection-change"&&((a=(l=r).onEditorChangeSelection)===null||a===void 0||a.call(l,s,f,r.unprivilegedEditor))};var o=r.isControlled()?t.value:t.defaultValue;return r.value=o??"",r}return e.prototype.validateProps=function(t){var r;if(Fe.default.Children.count(t.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Fe.default.Children.count(t.children)){var o=Fe.default.Children.only(t.children);if(((r=o)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&t.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(t,r){var o=this,i;if(this.validateProps(t),!this.editor||this.state.generation!==r.generation)return!0;if("value"in t){var s=this.getEditorContents(),c=(i=t.value,i??"");this.isEqualValue(c,s)||this.setEditorContents(this.editor,c)}return t.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,t.readOnly),fv(this.cleanProps,this.dirtyProps).some(function(f){return!jt.default(t[f],o.props[f])})},e.prototype.shouldComponentRegenerate=function(t){var r=this;return this.dirtyProps.some(function(o){return!jt.default(t[o],r.props[o])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(t,r){var o=this;if(this.editor&&this.shouldComponentRegenerate(t)){var i=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:i,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var c=this.regenerationSnapshot,i=c.delta,f=c.selection;delete this.regenerationSnapshot,this.instantiateEditor();var d=this.editor;d.setContents(i),Ns(function(){return o.setEditorSelection(d,f)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(t,r){var o=new Ms.default(t,r);return r.tabIndex!=null&&this.setEditorTabIndex(o,r.tabIndex),this.hookEditor(o),o},e.prototype.hookEditor=function(t){this.unprivilegedEditor=this.makeUnprivilegedEditor(t),t.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(t){t.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(t){return t&&t.ops},e.prototype.isEqualValue=function(t,r){return this.isDelta(t)&&this.isDelta(r)?jt.default(t.ops,r.ops):jt.default(t,r)},e.prototype.setEditorContents=function(t,r){var o=this;this.value=r;var i=this.getEditorSelection();typeof r=="string"?t.setContents(t.clipboard.convert(r)):t.setContents(r),Ns(function(){return o.setEditorSelection(t,i)})},e.prototype.setEditorSelection=function(t,r){if(this.selection=r,r){var o=t.getLength();r.index=Math.max(0,Math.min(r.index,o-1)),r.length=Math.max(0,Math.min(r.length,o-1-r.index)),t.setSelection(r)}},e.prototype.setEditorTabIndex=function(t,r){var o,i;!((i=(o=t)===null||o===void 0?void 0:o.scroll)===null||i===void 0)&&i.domNode&&(t.scroll.domNode.tabIndex=r)},e.prototype.setEditorReadOnly=function(t,r){r?t.disable():t.enable()},e.prototype.makeUnprivilegedEditor=function(t){var r=t;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var t=pv.default.findDOMNode(this.editingArea);if(!t)throw new Error("Cannot find element for editing area");if(t.nodeType===3)throw new Error("Editing area cannot be a text node");return t},e.prototype.renderEditingArea=function(){var t=this,r=this.props,o=r.children,i=r.preserveWhitespace,s=this.state.generation,c={key:s,ref:function(f){t.editingArea=f}};return Fe.default.Children.count(o)?Fe.default.cloneElement(Fe.default.Children.only(o),c):i?Fe.default.createElement("pre",yn({},c)):Fe.default.createElement("div",yn({},c))},e.prototype.render=function(){var t;return Fe.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(t=this.props.className,t??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(t,r,o,i){var s,c;if(this.editor){var f=this.isDelta(this.value)?i.getContents():i.getHTML();f!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=f,(c=(s=this.props).onChange)===null||c===void 0||c.call(s,t,r,o,i))}},e.prototype.onEditorChangeSelection=function(t,r,o){var i,s,c,f,d,g;if(this.editor){var l=this.getEditorSelection(),a=!l&&t,u=l&&!t;jt.default(t,l)||(this.selection=t,(s=(i=this.props).onChangeSelection)===null||s===void 0||s.call(i,t,r,o),a?(f=(c=this.props).onFocus)===null||f===void 0||f.call(c,t,r,o):u&&((g=(d=this.props).onBlur)===null||g===void 0||g.call(d,l,r,o)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=Ms.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e})(Fe.default.Component);function Ns(n){Promise.resolve().then(n)}(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".ce-hint--align-start{text-align:left}.ce-hint--align-center{text-align:center}.ce-hint__description{opacity:.6;margin-top:3px}")),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();var Wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function gv(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}),t}function sr(){}Object.assign(sr,{default:sr,register:sr,revert:function(){},__esModule:!0});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(n){const e=(this.document||this.ownerDocument).querySelectorAll(n);let t=e.length;for(;--t>=0&&e.item(t)!==this;);return t>-1});Element.prototype.closest||(Element.prototype.closest=function(n){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(n))return e;e=e.parentElement||e.parentNode}while(e!==null);return null});Element.prototype.prepend||(Element.prototype.prepend=function(n){const e=document.createDocumentFragment();Array.isArray(n)||(n=[n]),n.forEach(t=>{const r=t instanceof Node;e.appendChild(r?t:document.createTextNode(t))}),this.insertBefore(e,this.firstChild)});Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(n){n=arguments.length===0?!0:!!n;const e=this.parentNode,t=window.getComputedStyle(e,null),r=parseInt(t.getPropertyValue("border-top-width")),o=parseInt(t.getPropertyValue("border-left-width")),i=this.offsetTop-e.offsetTop<e.scrollTop,s=this.offsetTop-e.offsetTop+this.clientHeight-r>e.scrollTop+e.clientHeight,c=this.offsetLeft-e.offsetLeft<e.scrollLeft,f=this.offsetLeft-e.offsetLeft+this.clientWidth-o>e.scrollLeft+e.clientWidth,d=i&&!s;(i||s)&&n&&(e.scrollTop=this.offsetTop-e.offsetTop-e.clientHeight/2-r+this.clientHeight/2),(c||f)&&n&&(e.scrollLeft=this.offsetLeft-e.offsetLeft-e.clientWidth/2-o+this.clientWidth/2),(i||s||c||f)&&!n&&this.scrollIntoView(d)});window.requestIdleCallback=window.requestIdleCallback||function(n){const e=Date.now();return setTimeout(function(){n({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(n){clearTimeout(n)};let vv=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");var Ea=(n=>(n.VERBOSE="VERBOSE",n.INFO="INFO",n.WARN="WARN",n.ERROR="ERROR",n))(Ea||{});const re={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},mv={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};function Gt(n,e,t="log",r,o="color: inherit"){if(!("console"in window)||!window.console[t])return;const i=["info","log","warn","error"].includes(t),s=[];switch(Gt.logLevel){case"ERROR":if(t!=="error")return;break;case"WARN":if(!["error","warn"].includes(t))return;break;case"INFO":if(!i||n)return;break}r&&s.push(r);const c="Editor.js 2.31.0-rc.7";n&&(i?(s.unshift(`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`,o),e=`%c${c}%c ${e}`):e=`( ${c} )${e}`);try{i?r?console[t](`${e} %o`,...s):console[t](e,...s):console[t](e)}catch{}}Gt.logLevel="VERBOSE";function yv(n){Gt.logLevel=n}const de=Gt.bind(window,!1),je=Gt.bind(window,!0);function dt(n){return Object.prototype.toString.call(n).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function me(n){return dt(n)==="function"||dt(n)==="asyncfunction"}function Ee(n){return dt(n)==="object"}function Ye(n){return dt(n)==="string"}function bv(n){return dt(n)==="boolean"}function Is(n){return dt(n)==="number"}function js(n){return dt(n)==="undefined"}function Re(n){return n?Object.keys(n).length===0&&n.constructor===Object:!0}function _a(n){return n>47&&n<58||n===32||n===13||n===229||n>64&&n<91||n>95&&n<112||n>185&&n<193||n>218&&n<223}async function wv(n,e=()=>{},t=()=>{}){async function r(o,i,s){try{await o.function(o.data),await i(js(o.data)?{}:o.data)}catch{s(js(o.data)?{}:o.data)}}return n.reduce(async(o,i)=>(await o,r(i,e,t)),Promise.resolve())}function Oa(n){return Array.prototype.slice.call(n)}function bn(n,e){return function(){const t=this,r=arguments;window.setTimeout(()=>n.apply(t,r),e)}}function kv(n){return n.name.split(".").pop()}function xv(n){return/^[-\w]+\/([-+\w]+|\*)$/.test(n)}function Rs(n,e,t){let r;return(...o)=>{const i=this,s=()=>{r=null,n.apply(i,o)};window.clearTimeout(r),r=window.setTimeout(s,e)}}function Er(n,e,t=void 0){let r,o,i,s=null,c=0;t||(t={});const f=function(){c=t.leading===!1?0:Date.now(),s=null,i=n.apply(r,o),s||(r=o=null)};return function(){const d=Date.now();!c&&t.leading===!1&&(c=d);const g=e-(d-c);return r=this,o=arguments,g<=0||g>e?(s&&(clearTimeout(s),s=null),c=d,i=n.apply(r,o),s||(r=o=null)):!s&&t.trailing!==!1&&(s=setTimeout(f,g)),i}}function Ev(){const n={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(n).find(t=>window.navigator.appVersion.toLowerCase().indexOf(t)!==-1);return e&&(n[e]=!0),n}function wn(n){return n[0].toUpperCase()+n.slice(1)}function _r(n,...e){if(!e.length)return n;const t=e.shift();if(Ee(n)&&Ee(t))for(const r in t)Ee(t[r])?(n[r]||Object.assign(n,{[r]:{}}),_r(n[r],t[r])):Object.assign(n,{[r]:t[r]});return _r(n,...e)}function Fr(n){const e=Ev();return n=n.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi," + "),e.mac?n=n.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):n=n.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),n}function _v(n){try{return new URL(n).href}catch{}return n.substring(0,2)==="//"?window.location.protocol+n:window.location.origin+n}function Ov(){return vv(10)}function Tv(n){window.open(n,"_blank")}function Cv(n=""){return`${n}${Math.floor(Math.random()*1e8).toString(16)}`}function Or(n,e,t){const r=`«${e}» is deprecated and will be removed in the next major release. Please use the «${t}» instead.`;n&&je(r,"warn")}function Mt(n,e,t){const r=t.value?"value":"get",o=t[r],i=`#${e}Cache`;if(t[r]=function(...s){return this[i]===void 0&&(this[i]=o.apply(this,...s)),this[i]},r==="get"&&t.set){const s=t.set;t.set=function(c){delete n[i],s.apply(this,c)}}return t}const Ta=650;function Nt(){return window.matchMedia(`(max-width: ${Ta}px)`).matches}const Tr=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function Sv(n,e){const t=Array.isArray(n)||Ee(n),r=Array.isArray(e)||Ee(e);return t||r?JSON.stringify(n)===JSON.stringify(e):n===e}let V=class Te{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e,t=null,r={}){const o=document.createElement(e);if(Array.isArray(t)){const i=t.filter(s=>s!==void 0);o.classList.add(...i)}else t&&o.classList.add(t);for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(o[i]=r[i]);return o}static text(e){return document.createTextNode(e)}static append(e,t){Array.isArray(t)?t.forEach(r=>e.appendChild(r)):e.appendChild(t)}static prepend(e,t){Array.isArray(t)?(t=t.reverse(),t.forEach(r=>e.prepend(r))):e.prepend(t)}static swap(e,t){const r=document.createElement("div"),o=e.parentNode;o.insertBefore(r,e),o.insertBefore(e,t),o.insertBefore(t,r),o.removeChild(r)}static find(e=document,t){return e.querySelector(t)}static get(e){return document.getElementById(e)}static findAll(e=document,t){return e.querySelectorAll(t)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(e=>`input[type="${e}"]`).join(", ")}static findAllInputs(e){return Oa(e.querySelectorAll(Te.allInputsSelector)).reduce((t,r)=>Te.isNativeInput(r)||Te.containsOnlyInlineElements(r)?[...t,r]:[...t,...Te.getDeepestBlockElements(r)],[])}static getDeepestNode(e,t=!1){const r=t?"lastChild":"firstChild",o=t?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[r]){let i=e[r];if(Te.isSingleTag(i)&&!Te.isNativeInput(i)&&!Te.isLineBreakTag(i))if(i[o])i=i[o];else if(i.parentNode[o])i=i.parentNode[o];else return i.parentNode;return this.getDeepestNode(i,t)}return e}static isElement(e){return Is(e)?!1:e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE}static isFragment(e){return Is(e)?!1:e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}static isContentEditable(e){return e.contentEditable==="true"}static isNativeInput(e){const t=["INPUT","TEXTAREA"];return e&&e.tagName?t.includes(e.tagName):!1}static canSetCaret(e){let t=!0;if(Te.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":t=!1;break}else t=Te.isContentEditable(e);return t}static isNodeEmpty(e,t){let r;return this.isSingleTag(e)&&!this.isLineBreakTag(e)?!1:(this.isElement(e)&&this.isNativeInput(e)?r=e.value:r=e.textContent.replace("​",""),t&&(r=r.replace(new RegExp(t,"g"),"")),r.length===0)}static isLeaf(e){return e?e.childNodes.length===0:!1}static isEmpty(e,t){const r=[e];for(;r.length>0;)if(e=r.shift(),!!e){if(this.isLeaf(e)&&!this.isNodeEmpty(e,t))return!1;e.childNodes&&r.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){const t=Te.make("div");return t.innerHTML=e,t.childElementCount>0}static getContentLength(e){return Te.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let t;Ye(e)?(t=document.createElement("div"),t.innerHTML=e):t=e;const r=o=>!Te.blockElements.includes(o.tagName.toLowerCase())&&Array.from(o.children).every(r);return Array.from(t.children).every(r)}static getDeepestBlockElements(e){return Te.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce((t,r)=>[...t,...Te.getDeepestBlockElements(r)],[])}static getHolder(e){return Ye(e)?document.getElementById(e):e}static isAnchor(e){return e.tagName.toLowerCase()==="a"}static offset(e){const t=e.getBoundingClientRect(),r=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop,i=t.top+o,s=t.left+r;return{top:i,left:s,bottom:i+t.height,right:s+t.width}}};function Av(n){return!/[^\t\n\r ]/.test(n)}function Lv(n){const e=window.getComputedStyle(n),t=parseFloat(e.fontSize),r=parseFloat(e.lineHeight)||t*1.2,o=parseFloat(e.paddingTop),i=parseFloat(e.borderTopWidth),s=parseFloat(e.marginTop),c=t*.8,f=(r-t)/2;return s+i+o+f+c}function Ca(n){n.dataset.empty=V.isEmpty(n)?"true":"false"}const Bv={blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":"","Convert to":""}},Pv={Text:"",Link:"",Bold:"",Italic:""},Mv={link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},Nv={delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}},Sa={ui:Bv,toolNames:Pv,tools:Mv,blockTunes:Nv},Aa=class wt{static ui(e,t){return wt._t(e,t)}static t(e,t){return wt._t(e,t)}static setDictionary(e){wt.currentDictionary=e}static _t(e,t){const r=wt.getNamespace(e);return!r||!r[t]?t:r[t]}static getNamespace(e){return e.split(".").reduce((t,r)=>!t||!Object.keys(t).length?{}:t[r],wt.currentDictionary)}};Aa.currentDictionary=Sa;let Ce=Aa;class La extends Error{}let Yt=class{constructor(){this.subscribers={}}on(e,t){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(t)}once(e,t){e in this.subscribers||(this.subscribers[e]=[]);const r=o=>{const i=t(o),s=this.subscribers[e].indexOf(r);return s!==-1&&this.subscribers[e].splice(s,1),i};this.subscribers[e].push(r)}emit(e,t){Re(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce((r,o)=>{const i=o(r);return i!==void 0?i:r},t)}off(e,t){if(this.subscribers[e]===void 0){console.warn(`EventDispatcher .off(): there is no subscribers for event "${e.toString()}". Probably, .off() called before .on()`);return}for(let r=0;r<this.subscribers[e].length;r++)if(this.subscribers[e][r]===t){delete this.subscribers[e][r];break}}destroy(){this.subscribers={}}};function Ke(n){Object.setPrototypeOf(this,{get id(){return n.id},get name(){return n.name},get config(){return n.config},get holder(){return n.holder},get isEmpty(){return n.isEmpty},get selected(){return n.selected},set stretched(e){n.stretched=e},get stretched(){return n.stretched},get focusable(){return n.focusable},call(e,t){return n.call(e,t)},save(){return n.save()},validate(e){return n.validate(e)},dispatchChange(){n.dispatchChange()},getActiveToolboxEntry(){return n.getActiveToolboxEntry()}})}let Xt=class{constructor(){this.allListeners=[]}on(e,t,r,o=!1){const i=Cv("l"),s={id:i,element:e,eventType:t,handler:r,options:o};if(!this.findOne(e,t,r))return this.allListeners.push(s),e.addEventListener(t,r,o),i}off(e,t,r,o){const i=this.findAll(e,t,r);i.forEach((s,c)=>{const f=this.allListeners.indexOf(i[c]);f>-1&&(this.allListeners.splice(f,1),s.element.removeEventListener(s.eventType,s.handler,s.options))})}offById(e){const t=this.findById(e);t&&t.element.removeEventListener(t.eventType,t.handler,t.options)}findOne(e,t,r){const o=this.findAll(e,t,r);return o.length>0?o[0]:null}findAll(e,t,r){let o;const i=e?this.findByEventTarget(e):[];return e&&t&&r?o=i.filter(s=>s.eventType===t&&s.handler===r):e&&t?o=i.filter(s=>s.eventType===t):o=i,o}removeAll(){this.allListeners.map(e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)}),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter(t=>{if(t.element===e)return t})}findByType(e){return this.allListeners.filter(t=>{if(t.eventType===e)return t})}findByHandler(e){return this.allListeners.filter(t=>{if(t.handler===e)return t})}findById(e){return this.allListeners.find(t=>t.id===e)}},ue=class Ba{constructor({config:e,eventsDispatcher:t}){if(this.nodes={},this.listeners=new Xt,this.readOnlyMutableListeners={on:(r,o,i,s=!1)=>{this.mutableListenerIds.push(this.listeners.on(r,o,i,s))},clearAll:()=>{for(const r of this.mutableListenerIds)this.listeners.offById(r);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===Ba)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=e,this.eventsDispatcher=t}set state(e){this.Editor=e}removeAllNodes(){for(const e in this.nodes){const t=this.nodes[e];t instanceof HTMLElement&&t.remove()}}get isRtl(){return this.config.i18n.direction==="rtl"}},te=class Je{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){const e=window.getSelection();if(!e)return null;const t=e.anchorNode;return t?V.isElement(t)?t:t.parentElement:null}static get anchorOffset(){const e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){const e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(Je.get())}static isSelectionAtEditor(e){if(!e)return!1;let t=e.anchorNode||e.focusNode;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let r=null;return t&&t instanceof Element&&(r=t.closest(`.${Je.CSS.editorZone}`)),r?r.nodeType===Node.ELEMENT_NODE:!1}static isRangeAtEditor(e){if(!e)return;let t=e.startContainer;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let r=null;return t&&t instanceof Element&&(r=t.closest(`.${Je.CSS.editorZone}`)),r?r.nodeType===Node.ELEMENT_NODE:!1}static get isSelectionExists(){return!!Je.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e=document.selection,t,r={x:0,y:0,width:0,height:0};if(e&&e.type!=="Control")return e=e,t=e.createRange(),r.x=t.boundingLeft,r.y=t.boundingTop,r.width=t.boundingWidth,r.height=t.boundingHeight,r;if(!window.getSelection)return de("Method window.getSelection is not supported","warn"),r;if(e=window.getSelection(),e.rangeCount===null||isNaN(e.rangeCount))return de("Method SelectionUtils.rangeCount is not supported","warn"),r;if(e.rangeCount===0)return r;if(t=e.getRangeAt(0).cloneRange(),t.getBoundingClientRect&&(r=t.getBoundingClientRect()),r.x===0&&r.y===0){const o=document.createElement("span");if(o.getBoundingClientRect){o.appendChild(document.createTextNode("​")),t.insertNode(o),r=o.getBoundingClientRect();const i=o.parentNode;i.removeChild(o),i.normalize()}}return r}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e,t=0){const r=document.createRange(),o=window.getSelection();return V.isNativeInput(e)?V.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=t,e.getBoundingClientRect()):void 0:(r.setStart(e,t),r.setEnd(e,t),o.removeAllRanges(),o.addRange(r),r.getBoundingClientRect())}static isRangeInsideContainer(e){const t=Je.range;return t===null?!1:e.contains(t.startContainer)}static addFakeCursor(){const e=Je.range;if(e===null)return;const t=V.make("span","codex-editor__fake-cursor");t.dataset.mutationFree="true",e.collapse(),e.insertNode(t)}static isFakeCursorInsideContainer(e){return V.find(e,".codex-editor__fake-cursor")!==null}static removeFakeCursor(e=document.body){const t=V.find(e,".codex-editor__fake-cursor");t&&t.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=Je.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(e.focusNode),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}findParentTag(e,t,r=10){const o=window.getSelection();let i=null;return!o||!o.anchorNode||!o.focusNode?null:([o.anchorNode,o.focusNode].forEach(s=>{let c=r;for(;c>0&&s.parentNode&&!(s.tagName===e&&(i=s,t&&s.classList&&!s.classList.contains(t)&&(i=null),i));)s=s.parentNode,c--}),i)}expandToTag(e){const t=window.getSelection();t.removeAllRanges();const r=document.createRange();r.selectNodeContents(e),t.addRange(r)}};function Iv(n,e){const{type:t,target:r,addedNodes:o,removedNodes:i}=n;return n.type==="attributes"&&n.attributeName==="data-empty"?!1:!!(e.contains(r)||t==="childList"&&(Array.from(o).some(s=>s===e)||Array.from(i).some(s=>s===e)))}const Cr="redactor dom changed",Pa="block changed",Ma="fake cursor is about to be toggled",Na="fake cursor have been set",Kt="editor mobile layout toggled";function Sr(n,e){if(!n.conversionConfig)return!1;const t=n.conversionConfig[e];return me(t)||Ye(t)}function kn(n,e){return Sr(n.tool,e)}function Ia(n,e){return Object.entries(n).some(([t,r])=>e[t]&&Sv(e[t],r))}async function ja(n,e){const t=(await n.save()).data,r=e.find(o=>o.name===n.name);return r!==void 0&&!Sr(r,"export")?[]:e.reduce((o,i)=>{if(!Sr(i,"import")||i.toolbox===void 0)return o;const s=i.toolbox.filter(c=>{if(Re(c)||c.icon===void 0)return!1;if(c.data!==void 0){if(Ia(c.data,t))return!1}else if(i.name===n.name)return!1;return!0});return o.push({...i,toolbox:s}),o},[])}function Ds(n,e){return n.mergeable?n.name===e.name?!0:kn(e,"export")&&kn(n,"import"):!1}function jv(n,e){const t=e==null?void 0:e.export;return me(t)?t(n):Ye(t)?n[t]:(t!==void 0&&de("Conversion «export» property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}function $s(n,e,t){const r=e==null?void 0:e.import;return me(r)?r(n,t):Ye(r)?{[r]:n}:(r!==void 0&&de("Conversion «import» property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}var ge=(n=>(n.Default="default",n.Separator="separator",n.Html="html",n))(ge||{}),Ve=(n=>(n.APPEND_CALLBACK="appendCallback",n.RENDERED="rendered",n.MOVED="moved",n.UPDATED="updated",n.REMOVED="removed",n.ON_PASTE="onPaste",n))(Ve||{});let Ge=class Qe extends Yt{constructor({id:e=Ov(),data:t,tool:r,readOnly:o,tunesData:i},s){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(c=void 0)=>{const f=c===void 0,d=c instanceof InputEvent;!f&&!d&&this.detectToolRootChange(c);let g;f||d?g=!0:g=!(c.length>0&&c.every(l=>{const{addedNodes:a,removedNodes:u,target:p}=l;return[...Array.from(a),...Array.from(u),p].some(b=>(V.isElement(b)||(b=b.parentElement),b&&b.closest('[data-mutation-free="true"]')!==null))})),g&&(this.dropInputsCache(),this.updateCurrentInput(),this.toggleInputsEmptyMark(),this.call("updated"),this.emit("didMutated",this))},this.name=r.name,this.id=e,this.settings=r.settings,this.config=r.settings.config||{},this.editorEventBus=s||null,this.blockAPI=new Ke(this),this.tool=r,this.toolInstance=r.create(t,this.blockAPI,o),this.tunes=r.tunes,this.composeTunes(i),this.holder=this.compose(),window.requestIdleCallback(()=>{this.watchBlockMutations(),this.addInputEvents(),this.toggleInputsEmptyMark()})}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(this.cachedInputs.length!==0)return this.cachedInputs;const e=V.findAllInputs(this.holder);return this.inputIndex>e.length-1&&(this.inputIndex=e.length-1),this.cachedInputs=e,e}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(e){const t=this.inputs.findIndex(r=>r===e||r.contains(e));t!==-1&&(this.inputIndex=t)}get firstInput(){return this.inputs[0]}get lastInput(){const e=this.inputs;return e[e.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then(e=>e&&!Re(e.data)?e.data:{})}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return me(this.toolInstance.merge)}get focusable(){return this.inputs.length!==0}get isEmpty(){const e=V.isEmpty(this.pluginsContent,"/"),t=!this.hasMedia;return e&&t}get hasMedia(){const e=["img","iframe","video","audio","source","input","textarea","twitterwidget"];return!!this.holder.querySelector(e.join(","))}set selected(e){var t,r;this.holder.classList.toggle(Qe.CSS.selected,e);const o=e===!0&&te.isRangeInsideContainer(this.holder),i=e===!1&&te.isFakeCursorInsideContainer(this.holder);(o||i)&&((t=this.editorEventBus)==null||t.emit(Ma,{state:e}),o?te.addFakeCursor():te.removeFakeCursor(this.holder),(r=this.editorEventBus)==null||r.emit(Na,{state:e}))}get selected(){return this.holder.classList.contains(Qe.CSS.selected)}set stretched(e){this.holder.classList.toggle(Qe.CSS.wrapperStretched,e)}get stretched(){return this.holder.classList.contains(Qe.CSS.wrapperStretched)}set dropTarget(e){this.holder.classList.toggle(Qe.CSS.dropTarget,e)}get pluginsContent(){return this.toolRenderedElement}call(e,t){if(me(this.toolInstance[e])){e==="appendCallback"&&de("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[e].call(this.toolInstance,t)}catch(r){de(`Error during '${e}' call: ${r.message}`,"error")}}}async mergeWith(e){await this.toolInstance.merge(e)}async save(){const e=await this.toolInstance.save(this.pluginsContent),t=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach(([i,s])=>{if(me(s.save))try{t[i]=s.save()}catch(c){de(`Tune ${s.constructor.name} save method throws an Error %o`,"warn",c)}});const r=window.performance.now();let o;return Promise.resolve(e).then(i=>(o=window.performance.now(),{id:this.id,tool:this.name,data:i,tunes:t,time:o-r})).catch(i=>{de(`Saving process for ${this.name} tool failed due to the ${i}`,"log","red")})}async validate(e){let t=!0;return this.toolInstance.validate instanceof Function&&(t=await this.toolInstance.validate(e)),t}getTunes(){const e=[],t=[],r=typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[];return V.isElement(r)?e.push({type:ge.Html,element:r}):Array.isArray(r)?e.push(...r):e.push(r),[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map(o=>o.render()).forEach(o=>{V.isElement(o)?t.push({type:ge.Html,element:o}):Array.isArray(o)?t.push(...o):t.push(o)}),{toolTunes:e,commonTunes:t}}updateCurrentInput(){this.currentInput=V.isNativeInput(document.activeElement)||!te.anchorNode?document.activeElement:te.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),me(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const e=this.tool.toolbox;if(e.length===1)return Promise.resolve(this.tool.toolbox[0]);const t=await this.data,r=e;return r==null?void 0:r.find(o=>Ia(o.data,t))}async exportDataAsString(){const e=await this.data;return jv(e,this.tool.conversionConfig)}compose(){const e=V.make("div",Qe.CSS.wrapper),t=V.make("div",Qe.CSS.content),r=this.toolInstance.render();e.setAttribute("data-cy","block-wrapper"),e.dataset.id=this.id,this.toolRenderedElement=r,t.appendChild(this.toolRenderedElement);let o=t;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach(i=>{if(me(i.wrap))try{o=i.wrap(o)}catch(s){de(`Tune ${i.constructor.name} wrap method throws an Error %o`,"warn",s)}}),e.appendChild(o),e}composeTunes(e){Array.from(this.tunes.values()).forEach(t=>{(t.isInternal?this.defaultTunesInstances:this.tunesInstances).set(t.name,t.create(e[t.name],this.blockAPI))}),Object.entries(e).forEach(([t,r])=>{this.tunesInstances.has(t)||(this.unavailableTunesData[t]=r)})}addInputEvents(){this.inputs.forEach(e=>{e.addEventListener("focus",this.handleFocus),V.isNativeInput(e)&&e.addEventListener("input",this.didMutated)})}removeInputEvents(){this.inputs.forEach(e=>{e.removeEventListener("focus",this.handleFocus),V.isNativeInput(e)&&e.removeEventListener("input",this.didMutated)})}watchBlockMutations(){var e;this.redactorDomChangedCallback=t=>{const{mutations:r}=t;r.some(o=>Iv(o,this.toolRenderedElement))&&this.didMutated(r)},(e=this.editorEventBus)==null||e.on(Cr,this.redactorDomChangedCallback)}unwatchBlockMutations(){var e;(e=this.editorEventBus)==null||e.off(Cr,this.redactorDomChangedCallback)}detectToolRootChange(e){e.forEach(t=>{if(Array.from(t.removedNodes).includes(this.toolRenderedElement)){const r=t.addedNodes[t.addedNodes.length-1];this.toolRenderedElement=r}})}dropInputsCache(){this.cachedInputs=[]}toggleInputsEmptyMark(){this.inputs.forEach(Ca)}};class Rv extends ue{constructor(){super(...arguments),this.insert=(e=this.config.defaultBlock,t={},r={},o,i,s,c)=>{const f=this.Editor.BlockManager.insert({id:c,tool:e,data:t,index:o,needToFocus:i,replace:s});return new Ke(f)},this.composeBlockData=async e=>{const t=this.Editor.Tools.blockTools.get(e);return new Ge({tool:t,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(e,t,r)=>{const{BlockManager:o}=this.Editor,i=o.getBlockById(e);if(i===void 0)throw new Error(`Block with id "${e}" not found`);const s=await o.update(i,t,r);return new Ke(s)},this.convert=async(e,t,r)=>{var o,i;const{BlockManager:s,Tools:c}=this.Editor,f=s.getBlockById(e);if(!f)throw new Error(`Block with id "${e}" not found`);const d=c.blockTools.get(f.name),g=c.blockTools.get(t);if(!g)throw new Error(`Block Tool with type "${t}" not found`);const l=((o=d==null?void 0:d.conversionConfig)==null?void 0:o.export)!==void 0,a=((i=g.conversionConfig)==null?void 0:i.import)!==void 0;if(l&&a){const u=await s.convert(f,t,r);return new Ke(u)}else{const u=[l?!1:wn(f.name),a?!1:wn(t)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${f.name}" to "${t}" is not possible. ${u} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(e,t=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(t);const r=e.map(({id:o,type:i,data:s})=>this.Editor.BlockManager.composeBlock({id:o,tool:i||this.config.defaultBlock,data:s}));return this.Editor.BlockManager.insertMany(r,t),r.map(o=>new Ke(o))}}get methods(){return{clear:()=>this.clear(),render:e=>this.render(e),renderFromHTML:e=>this.renderFromHTML(e),delete:e=>this.delete(e),swap:(e,t)=>this.swap(e,t),move:(e,t)=>this.move(e,t),getBlockByIndex:e=>this.getBlockByIndex(e),getById:e=>this.getById(e),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:e=>this.getBlockIndex(e),getBlocksCount:()=>this.getBlocksCount(),getBlockByElement:e=>this.getBlockByElement(e),stretchBlock:(e,t=!0)=>this.stretchBlock(e,t),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(e){const t=this.Editor.BlockManager.getBlockById(e);if(!t){je("There is no block with id `"+e+"`","warn");return}return this.Editor.BlockManager.getBlockIndex(t)}getBlockByIndex(e){const t=this.Editor.BlockManager.getBlockByIndex(e);if(t===void 0){je("There is no block at index `"+e+"`","warn");return}return new Ke(t)}getById(e){const t=this.Editor.BlockManager.getBlockById(e);return t===void 0?(je("There is no block with id `"+e+"`","warn"),null):new Ke(t)}getBlockByElement(e){const t=this.Editor.BlockManager.getBlock(e);if(t===void 0){je("There is no block corresponding to element `"+e+"`","warn");return}return new Ke(t)}swap(e,t){de("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(e,t)}move(e,t){this.Editor.BlockManager.move(e,t)}delete(e=this.Editor.BlockManager.currentBlockIndex){try{const t=this.Editor.BlockManager.getBlockByIndex(e);this.Editor.BlockManager.removeBlock(t)}catch(t){je(t,"warn");return}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(e){if(e===void 0||e.blocks===void 0)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(e.blocks),this.Editor.ModificationsObserver.enable()}renderFromHTML(e){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(e,!0)}stretchBlock(e,t=!0){Or(!0,"blocks.stretchBlock()","BlockAPI");const r=this.Editor.BlockManager.getBlockByIndex(e);r&&(r.stretched=t)}insertNewBlock(){de("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(e){if(typeof e!="number")throw new Error("Index should be a number");if(e<0)throw new Error("Index should be greater than or equal to 0");if(e===null)throw new Error("Index should be greater than or equal to 0")}}function Dv(n,e){return typeof n=="number"?e.BlockManager.getBlockByIndex(n):typeof n=="string"?e.BlockManager.getBlockById(n):e.BlockManager.getBlockById(n.id)}class $v extends ue{constructor(){super(...arguments),this.setToFirstBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.firstBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,e,t),!0):!1,this.setToLastBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.lastBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,e,t),!0):!1,this.setToPreviousBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.previousBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,e,t),!0):!1,this.setToNextBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.nextBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,e,t),!0):!1,this.setToBlock=(e,t=this.Editor.Caret.positions.DEFAULT,r=0)=>{const o=Dv(e,this.Editor);return o===void 0?!1:(this.Editor.Caret.setToBlock(o,t,r),!0)},this.focus=(e=!1)=>e?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}}class Fv extends ue{get methods(){return{emit:(e,t)=>this.emit(e,t),off:(e,t)=>this.off(e,t),on:(e,t)=>this.on(e,t)}}on(e,t){this.eventsDispatcher.on(e,t)}emit(e,t){this.eventsDispatcher.emit(e,t)}off(e,t){this.eventsDispatcher.off(e,t)}}let Hv=class Ra extends ue{static getNamespace(e,t){return t?`blockTunes.${e}`:`tools.${e}`}get methods(){return{t:()=>{je("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(e,t){return Object.assign(this.methods,{t:r=>Ce.t(Ra.getNamespace(e,t),r)})}};class qv extends ue{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,tools:this.Editor.ToolsAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(e,t){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(e,t)})}}class Uv extends ue{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}}class zv extends ue{get methods(){return{on:(e,t,r,o)=>this.on(e,t,r,o),off:(e,t,r,o)=>this.off(e,t,r,o),offById:e=>this.offById(e)}}on(e,t,r,o){return this.listeners.on(e,t,r,o)}off(e,t,r,o){this.listeners.off(e,t,r,o)}offById(e){this.listeners.offById(e)}}var Da={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(window,function(){return function(t){var r={};function o(i){if(r[i])return r[i].exports;var s=r[i]={i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=t,o.c=r,o.d=function(i,s,c){o.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:c})},o.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},o.t=function(i,s){if(1&s&&(i=o(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var f in i)o.d(c,f,(function(d){return i[d]}).bind(null,f));return c},o.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(s,"a",s),s},o.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},o.p="/",o(o.s=0)}([function(t,r,o){o(1),t.exports=function(){var i=o(6),s="cdx-notify--bounce-in",c=null;return{show:function(f){if(f.message){(function(){if(c)return!0;c=i.getWrapper(),document.body.appendChild(c)})();var d=null,g=f.time||8e3;switch(f.type){case"confirm":d=i.confirm(f);break;case"prompt":d=i.prompt(f);break;default:d=i.alert(f),window.setTimeout(function(){d.remove()},g)}c.appendChild(d),d.classList.add(s)}}}}()},function(t,r,o){var i=o(2);typeof i=="string"&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};o(4)(i,s),i.locals&&(t.exports=i.locals)},function(t,r,o){(t.exports=o(3)(!1)).push([t.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(t,r){t.exports=function(o){var i=[];return i.toString=function(){return this.map(function(s){var c=function(f,d){var g=f[1]||"",l=f[3];if(!l)return g;if(d&&typeof btoa=="function"){var a=(p=l,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(p))))+" */"),u=l.sources.map(function(b){return"/*# sourceURL="+l.sourceRoot+b+" */"});return[g].concat(u).concat([a]).join(`
`)}var p;return[g].join(`
`)}(s,o);return s[2]?"@media "+s[2]+"{"+c+"}":c}).join("")},i.i=function(s,c){typeof s=="string"&&(s=[[null,s,""]]);for(var f={},d=0;d<this.length;d++){var g=this[d][0];typeof g=="number"&&(f[g]=!0)}for(d=0;d<s.length;d++){var l=s[d];typeof l[0]=="number"&&f[l[0]]||(c&&!l[2]?l[2]=c:c&&(l[2]="("+l[2]+") and ("+c+")"),i.push(l))}},i}},function(t,r,o){var i,s,c={},f=(i=function(){return window&&document&&document.all&&!window.atob},function(){return s===void 0&&(s=i.apply(this,arguments)),s}),d=function(E){var O={};return function(C){if(typeof C=="function")return C();if(O[C]===void 0){var x=(function(_){return document.querySelector(_)}).call(this,C);if(window.HTMLIFrameElement&&x instanceof window.HTMLIFrameElement)try{x=x.contentDocument.head}catch{x=null}O[C]=x}return O[C]}}(),g=null,l=0,a=[],u=o(5);function p(E,O){for(var C=0;C<E.length;C++){var x=E[C],_=c[x.id];if(_){_.refs++;for(var A=0;A<_.parts.length;A++)_.parts[A](x.parts[A]);for(;A<x.parts.length;A++)_.parts.push(m(x.parts[A],O))}else{var L=[];for(A=0;A<x.parts.length;A++)L.push(m(x.parts[A],O));c[x.id]={id:x.id,refs:1,parts:L}}}}function b(E,O){for(var C=[],x={},_=0;_<E.length;_++){var A=E[_],L=O.base?A[0]+O.base:A[0],P={css:A[1],media:A[2],sourceMap:A[3]};x[L]?x[L].parts.push(P):C.push(x[L]={id:L,parts:[P]})}return C}function v(E,O){var C=d(E.insertInto);if(!C)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var x=a[a.length-1];if(E.insertAt==="top")x?x.nextSibling?C.insertBefore(O,x.nextSibling):C.appendChild(O):C.insertBefore(O,C.firstChild),a.push(O);else if(E.insertAt==="bottom")C.appendChild(O);else{if(typeof E.insertAt!="object"||!E.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var _=d(E.insertInto+" "+E.insertAt.before);C.insertBefore(O,_)}}function y(E){if(E.parentNode===null)return!1;E.parentNode.removeChild(E);var O=a.indexOf(E);O>=0&&a.splice(O,1)}function h(E){var O=document.createElement("style");return E.attrs.type===void 0&&(E.attrs.type="text/css"),w(O,E.attrs),v(E,O),O}function w(E,O){Object.keys(O).forEach(function(C){E.setAttribute(C,O[C])})}function m(E,O){var C,x,_,A;if(O.transform&&E.css){if(!(A=O.transform(E.css)))return function(){};E.css=A}if(O.singleton){var L=l++;C=g||(g=h(O)),x=T.bind(null,C,L,!1),_=T.bind(null,C,L,!0)}else E.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(C=function(P){var R=document.createElement("link");return P.attrs.type===void 0&&(P.attrs.type="text/css"),P.attrs.rel="stylesheet",w(R,P.attrs),v(P,R),R}(O),x=(function(P,R,F){var W=F.css,$=F.sourceMap,I=R.convertToAbsoluteUrls===void 0&&$;(R.convertToAbsoluteUrls||I)&&(W=u(W)),$&&(W+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify($))))+" */");var B=new Blob([W],{type:"text/css"}),N=P.href;P.href=URL.createObjectURL(B),N&&URL.revokeObjectURL(N)}).bind(null,C,O),_=function(){y(C),C.href&&URL.revokeObjectURL(C.href)}):(C=h(O),x=(function(P,R){var F=R.css,W=R.media;if(W&&P.setAttribute("media",W),P.styleSheet)P.styleSheet.cssText=F;else{for(;P.firstChild;)P.removeChild(P.firstChild);P.appendChild(document.createTextNode(F))}}).bind(null,C),_=function(){y(C)});return x(E),function(P){if(P){if(P.css===E.css&&P.media===E.media&&P.sourceMap===E.sourceMap)return;x(E=P)}else _()}}t.exports=function(E,O){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(O=O||{}).attrs=typeof O.attrs=="object"?O.attrs:{},O.singleton||typeof O.singleton=="boolean"||(O.singleton=f()),O.insertInto||(O.insertInto="head"),O.insertAt||(O.insertAt="bottom");var C=b(E,O);return p(C,O),function(x){for(var _=[],A=0;A<C.length;A++){var L=C[A];(P=c[L.id]).refs--,_.push(P)}for(x&&p(b(x,O),O),A=0;A<_.length;A++){var P;if((P=_[A]).refs===0){for(var R=0;R<P.parts.length;R++)P.parts[R]();delete c[P.id]}}}};var k,S=(k=[],function(E,O){return k[E]=O,k.filter(Boolean).join(`
`)});function T(E,O,C,x){var _=C?"":x.css;if(E.styleSheet)E.styleSheet.cssText=S(O,_);else{var A=document.createTextNode(_),L=E.childNodes;L[O]&&E.removeChild(L[O]),L.length?E.insertBefore(A,L[O]):E.appendChild(A)}}},function(t,r){t.exports=function(o){var i=typeof window<"u"&&window.location;if(!i)throw new Error("fixUrls requires window.location");if(!o||typeof o!="string")return o;var s=i.protocol+"//"+i.host,c=s+i.pathname.replace(/\/[^\/]*$/,"/");return o.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(f,d){var g,l=d.trim().replace(/^"(.*)"$/,function(a,u){return u}).replace(/^'(.*)'$/,function(a,u){return u});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(l)?f:(g=l.indexOf("//")===0?l:l.indexOf("/")===0?s+l:c+l.replace(/^\.\//,""),"url("+JSON.stringify(g)+")")})}},function(t,r,o){var i,s,c,f,d,g,l,a,u;t.exports=(i="cdx-notifies",s="cdx-notify",c="cdx-notify__cross",f="cdx-notify__button--confirm",d="cdx-notify__button--cancel",g="cdx-notify__input",l="cdx-notify__button",a="cdx-notify__btns-wrapper",{alert:u=function(p){var b=document.createElement("DIV"),v=document.createElement("DIV"),y=p.message,h=p.style;return b.classList.add(s),h&&b.classList.add(s+"--"+h),b.innerHTML=y,v.classList.add(c),v.addEventListener("click",b.remove.bind(b)),b.appendChild(v),b},confirm:function(p){var b=u(p),v=document.createElement("div"),y=document.createElement("button"),h=document.createElement("button"),w=b.querySelector("."+c),m=p.cancelHandler,k=p.okHandler;return v.classList.add(a),y.innerHTML=p.okText||"Confirm",h.innerHTML=p.cancelText||"Cancel",y.classList.add(l),h.classList.add(l),y.classList.add(f),h.classList.add(d),m&&typeof m=="function"&&(h.addEventListener("click",m),w.addEventListener("click",m)),k&&typeof k=="function"&&y.addEventListener("click",k),y.addEventListener("click",b.remove.bind(b)),h.addEventListener("click",b.remove.bind(b)),v.appendChild(y),v.appendChild(h),b.appendChild(v),b},prompt:function(p){var b=u(p),v=document.createElement("div"),y=document.createElement("button"),h=document.createElement("input"),w=b.querySelector("."+c),m=p.cancelHandler,k=p.okHandler;return v.classList.add(a),y.innerHTML=p.okText||"Ok",y.classList.add(l),y.classList.add(f),h.classList.add(g),p.placeholder&&h.setAttribute("placeholder",p.placeholder),p.default&&(h.value=p.default),p.inputType&&(h.type=p.inputType),m&&typeof m=="function"&&w.addEventListener("click",m),k&&typeof k=="function"&&y.addEventListener("click",function(){k(h.value)}),y.addEventListener("click",b.remove.bind(b)),v.appendChild(h),v.appendChild(y),b.appendChild(v),b},getWrapper:function(){var p=document.createElement("DIV");return p.classList.add(i),p}})}])})})(Da);var Wv=Da.exports;const Kv=jn(Wv);class Vv{show(e){Kv.show(e)}}class Gv extends ue{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.notifier=new Vv}get methods(){return{show:e=>this.show(e)}}show(e){return this.notifier.show(e)}}class Yv extends ue{get methods(){const e=()=>this.isEnabled;return{toggle:t=>this.toggle(t),get isEnabled(){return e()}}}toggle(e){return this.Editor.ReadOnly.toggle(e)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}}var $a={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Wt,function(){function t(l){var a=l.tags,u=Object.keys(a),p=u.map(function(b){return typeof a[b]}).every(function(b){return b==="object"||b==="boolean"||b==="function"});if(!p)throw new Error("The configuration was invalid");this.config=l}var r=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function o(l){return r.indexOf(l.nodeName)!==-1}var i=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function s(l){return i.indexOf(l.nodeName)!==-1}t.prototype.clean=function(l){const a=document.implementation.createHTMLDocument(),u=a.createElement("div");return u.innerHTML=l,this._sanitize(a,u),u.innerHTML},t.prototype._sanitize=function(l,a){var u=c(l,a),p=u.firstChild();if(p)do{if(p.nodeType===Node.TEXT_NODE)if(p.data.trim()===""&&(p.previousElementSibling&&o(p.previousElementSibling)||p.nextElementSibling&&o(p.nextElementSibling))){a.removeChild(p),this._sanitize(l,a);break}else continue;if(p.nodeType===Node.COMMENT_NODE){a.removeChild(p),this._sanitize(l,a);break}var b=s(p),v;b&&(v=Array.prototype.some.call(p.childNodes,o));var y=!!a.parentNode,h=o(a)&&o(p)&&y,w=p.nodeName.toLowerCase(),m=f(this.config,w,p),k=b&&v;if(k||d(p,m)||!this.config.keepNestedBlockElements&&h){if(!(p.nodeName==="SCRIPT"||p.nodeName==="STYLE"))for(;p.childNodes.length>0;)a.insertBefore(p.childNodes[0],p);a.removeChild(p),this._sanitize(l,a);break}for(var S=0;S<p.attributes.length;S+=1){var T=p.attributes[S];g(T,m,p)&&(p.removeAttribute(T.name),S=S-1)}this._sanitize(l,p)}while(p=u.nextSibling())};function c(l,a){return l.createTreeWalker(a,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function f(l,a,u){return typeof l.tags[a]=="function"?l.tags[a](u):l.tags[a]}function d(l,a){return typeof a>"u"?!0:typeof a=="boolean"?!a:!1}function g(l,a,u){var p=l.name.toLowerCase();return a===!0?!1:typeof a[p]=="function"?!a[p](l.value,u):typeof a[p]>"u"||a[p]===!1?!0:typeof a[p]=="string"?a[p]!==l.value:!1}return t})})($a);var Xv=$a.exports;const Zv=jn(Xv);function Hr(n,e){return n.map(t=>{const r=me(e)?e(t.tool):e;return Re(r)||(t.data=qr(t.data,r)),t})}function qe(n,e={}){const t={tags:e};return new Zv(t).clean(n)}function qr(n,e){return Array.isArray(n)?Jv(n,e):Ee(n)?Qv(n,e):Ye(n)?em(n,e):n}function Jv(n,e){return n.map(t=>qr(t,e))}function Qv(n,e){const t={};for(const r in n){if(!Object.prototype.hasOwnProperty.call(n,r))continue;const o=n[r],i=tm(e[r])?e[r]:e;t[r]=qr(o,i)}return t}function em(n,e){return Ee(e)?qe(n,e):e===!1?qe(n,{}):n}function tm(n){return Ee(n)||bv(n)||me(n)}class nm extends ue{get methods(){return{clean:(e,t)=>this.clean(e,t)}}clean(e,t){return qe(e,t)}}class rm extends ue{get methods(){return{save:()=>this.save()}}save(){const e="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(je(e,"warn"),Promise.reject(new Error(e))):this.Editor.Saver.save()}}class om extends ue{constructor(){super(...arguments),this.selectionUtils=new te}get methods(){return{findParentTag:(e,t)=>this.findParentTag(e,t),expandToTag:e=>this.expandToTag(e),save:()=>this.selectionUtils.save(),restore:()=>this.selectionUtils.restore(),setFakeBackground:()=>this.selectionUtils.setFakeBackground(),removeFakeBackground:()=>this.selectionUtils.removeFakeBackground()}}findParentTag(e,t){return this.selectionUtils.findParentTag(e,t)}expandToTag(e){this.selectionUtils.expandToTag(e)}}class im extends ue{get methods(){return{getBlockTools:()=>Array.from(this.Editor.Tools.blockTools.values())}}}class sm extends ue{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}class am extends ue{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:e=>this.toggleBlockSettings(e),toggleToolbox:e=>this.toggleToolbox(e)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(e){if(this.Editor.BlockManager.currentBlockIndex===-1){je("Could't toggle the Toolbar because there is no block selected ","warn");return}e??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close()}toggleToolbox(e){if(this.Editor.BlockManager.currentBlockIndex===-1){je("Could't toggle the Toolbox because there is no block selected ","warn");return}e??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close()}}var Fa={exports:{}};/*!
 * CodeX.Tooltips
 * 
 * @version 1.0.5
 * 
 * @licence MIT
 * @author CodeX <https://codex.so>
 * 
 * 
 */(function(n,e){(function(t,r){n.exports=r()})(window,function(){return function(t){var r={};function o(i){if(r[i])return r[i].exports;var s=r[i]={i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=t,o.c=r,o.d=function(i,s,c){o.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:c})},o.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},o.t=function(i,s){if(1&s&&(i=o(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var f in i)o.d(c,f,(function(d){return i[d]}).bind(null,f));return c},o.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(s,"a",s),s},o.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},o.p="",o(o.s=0)}([function(t,r,o){t.exports=o(1)},function(t,r,o){o.r(r),o.d(r,"default",function(){return i});class i{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(c,f,d){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const g=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},d);if(g.hidingDelay&&(this.hidingDelay=g.hidingDelay),this.nodes.content.innerHTML="",typeof f=="string")this.nodes.content.appendChild(document.createTextNode(f));else{if(!(f instanceof Node))throw Error("[CodeX Tooltip] Wrong type of «content» passed. It should be an instance of Node or String. But "+typeof f+" given.");this.nodes.content.appendChild(f)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),g.placement){case"top":this.placeTop(c,g);break;case"left":this.placeLeft(c,g);break;case"right":this.placeRight(c,g);break;case"bottom":default:this.placeBottom(c,g)}g&&g.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},g.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(c=!1){if(this.hidingDelay&&!c)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(c,f,d){c.addEventListener("mouseenter",()=>{this.show(c,f,d)}),c.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const c="codex-tooltips-style";if(document.getElementById(c))return;const f=o(2),d=this.make("style",null,{textContent:f.toString(),id:c});this.prepend(document.head,d)}placeBottom(c,f){const d=c.getBoundingClientRect(),g=d.left+c.clientWidth/2-this.nodes.wrapper.offsetWidth/2,l=d.bottom+window.pageYOffset+this.offsetTop+f.marginTop;this.applyPlacement("bottom",g,l)}placeTop(c,f){const d=c.getBoundingClientRect(),g=d.left+c.clientWidth/2-this.nodes.wrapper.offsetWidth/2,l=d.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",g,l)}placeLeft(c,f){const d=c.getBoundingClientRect(),g=d.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-f.marginLeft,l=d.top+window.pageYOffset+c.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",g,l)}placeRight(c,f){const d=c.getBoundingClientRect(),g=d.right+this.offsetRight+f.marginRight,l=d.top+window.pageYOffset+c.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",g,l)}applyPlacement(c,f,d){this.nodes.wrapper.classList.add(this.CSS.placement[c]),this.nodes.wrapper.style.left=f+"px",this.nodes.wrapper.style.top=d+"px"}make(c,f=null,d={}){const g=document.createElement(c);Array.isArray(f)?g.classList.add(...f):f&&g.classList.add(f);for(const l in d)d.hasOwnProperty(l)&&(g[l]=d[l]);return g}append(c,f){Array.isArray(f)?f.forEach(d=>c.appendChild(d)):c.appendChild(f)}prepend(c,f){Array.isArray(f)?(f=f.reverse()).forEach(d=>c.prepend(d)):c.prepend(f)}}},function(t,r){t.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default})})(Fa);var lm=Fa.exports;const cm=jn(lm);let $e=null;function Ur(){$e||($e=new cm)}function um(n,e,t){Ur(),$e==null||$e.show(n,e,t)}function xn(n=!1){Ur(),$e==null||$e.hide(n)}function En(n,e,t){Ur(),$e==null||$e.onHover(n,e,t)}function dm(){$e==null||$e.destroy(),$e=null}class hm extends ue{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t})}get methods(){return{show:(e,t,r)=>this.show(e,t,r),hide:()=>this.hide(),onHover:(e,t,r)=>this.onHover(e,t,r)}}show(e,t,r){um(e,t,r)}hide(){xn()}onHover(e,t,r){En(e,t,r)}}class fm extends ue{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}}function Ha(n,e){const t={};return Object.entries(n).forEach(([r,o])=>{if(Ee(o)){const i=e?`${e}.${r}`:r;Object.values(o).every(s=>Ye(s))?t[r]=i:t[r]=Ha(o,i);return}t[r]=o}),t}const Ne=Ha(Sa);function pm(n,e){const t={};return Object.keys(n).forEach(r=>{const o=e[r];o!==void 0?t[o]=n[r]:t[r]=n[r]}),t}const qa=class Ht{constructor(e,t){this.cursor=-1,this.items=[],this.items=e||[],this.focusedCssClass=t}get currentItem(){return this.cursor===-1?null:this.items[this.cursor]}setCursor(e){e<this.items.length&&e>=-1&&(this.dropCursor(),this.cursor=e,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(e){this.items=e}next(){this.cursor=this.leafNodesAndReturnIndex(Ht.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(Ht.directions.LEFT)}dropCursor(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(e){if(this.items.length===0)return this.cursor;let t=this.cursor;return t===-1?t=e===Ht.directions.RIGHT?-1:0:this.items[t].classList.remove(this.focusedCssClass),e===Ht.directions.RIGHT?t=(t+1)%this.items.length:t=(this.items.length+t-1)%this.items.length,V.canSetCaret(this.items[t])&&bn(()=>te.setCursor(this.items[t]),50)(),this.items[t].classList.add(this.focusedCssClass),t}};qa.directions={RIGHT:"right",LEFT:"left"};let Rt=qa,_n=class Ar{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=t=>{if(this.isEventReadyForHandling(t))switch(Ar.usedKeys.includes(t.keyCode)&&t.preventDefault(),t.keyCode){case re.TAB:this.handleTabPress(t);break;case re.LEFT:case re.UP:this.flipLeft();break;case re.RIGHT:case re.DOWN:this.flipRight();break;case re.ENTER:this.handleEnterPress(t);break}},this.iterator=new Rt(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||Ar.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[re.TAB,re.LEFT,re.RIGHT,re.ENTER,re.UP,re.DOWN]}activate(e,t){this.activated=!0,e&&this.iterator.setItems(e),t!==void 0&&this.iterator.setCursor(t),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter(t=>t!==e)}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?Rt.directions.LEFT:Rt.directions.RIGHT){case Rt.directions.RIGHT:this.flipRight();break;case Rt.directions.LEFT:this.flipLeft();break}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),me(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(e=>e())}};const gm='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',vm='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',mm='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.5 17.5L9.64142 12.6414C9.56331 12.5633 9.56331 12.4367 9.64142 12.3586L14.5 7.5"/></svg>',ym='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.58284 17.5L14.4414 12.6414C14.5195 12.5633 14.5195 12.4367 14.4414 12.3586L9.58284 7.5"/></svg>',bm='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',wm='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',km='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>',xm='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',Fs='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',Em='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',_m='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',Ua='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M11.5 17.5L5 11M5 11V15.5M5 11H9.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12.5 6.5L19 13M19 13V8.5M19 13H14.5"/></svg>',Om='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',Tm='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',Cm='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>',Sm="__",Am="--";function st(n){return(e,t)=>[[n,e].filter(r=>!!r).join(Sm),t].filter(r=>!!r).join(Am)}const Dt=st("ce-hint"),$t={root:Dt(),alignedStart:Dt(null,"align-left"),alignedCenter:Dt(null,"align-center"),title:Dt("title"),description:Dt("description")};class Lm{constructor(e){this.nodes={root:V.make("div",[$t.root,e.alignment==="center"?$t.alignedCenter:$t.alignedStart]),title:V.make("div",$t.title,{textContent:e.title})},this.nodes.root.appendChild(this.nodes.title),e.description!==void 0&&(this.nodes.description=V.make("div",$t.description,{textContent:e.description}),this.nodes.root.appendChild(this.nodes.description))}getElement(){return this.nodes.root}}let zr=class{constructor(e){this.params=e}get name(){if(this.params!==void 0&&"name"in this.params)return this.params.name}destroy(){xn()}onChildrenOpen(){var e;this.params!==void 0&&"children"in this.params&&typeof((e=this.params.children)==null?void 0:e.onOpen)=="function"&&this.params.children.onOpen()}onChildrenClose(){var e;this.params!==void 0&&"children"in this.params&&typeof((e=this.params.children)==null?void 0:e.onClose)=="function"&&this.params.children.onClose()}handleClick(){var e,t;this.params!==void 0&&"onActivate"in this.params&&((t=(e=this.params).onActivate)==null||t.call(e,this.params))}addHint(e,t){const r=new Lm(t);En(e,r.getElement(),{placement:t.position,hidingDelay:100})}get children(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.items)!==void 0?this.params.children.items:[]}get hasChildren(){return this.children.length>0}get isChildrenOpen(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.isOpen)===!0}get isChildrenFlippable(){var e;return!(this.params===void 0||!("children"in this.params)||((e=this.params.children)==null?void 0:e.isFlippable)===!1)}get isChildrenSearchable(){var e;return this.params!==void 0&&"children"in this.params&&((e=this.params.children)==null?void 0:e.searchable)===!0}get closeOnActivate(){return this.params!==void 0&&"closeOnActivate"in this.params&&this.params.closeOnActivate}get isActive(){return this.params===void 0||!("isActive"in this.params)?!1:typeof this.params.isActive=="function"?this.params.isActive():this.params.isActive===!0}};const Be=st("ce-popover-item"),ye={container:Be(),active:Be(null,"active"),disabled:Be(null,"disabled"),focused:Be(null,"focused"),hidden:Be(null,"hidden"),confirmationState:Be(null,"confirmation"),noHover:Be(null,"no-hover"),noFocus:Be(null,"no-focus"),title:Be("title"),secondaryTitle:Be("secondary-title"),icon:Be("icon"),iconTool:Be("icon","tool"),iconChevronRight:Be("icon","chevron-right"),wobbleAnimation:st("wobble")()};let ct=class extends zr{constructor(e,t){super(e),this.params=e,this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{var r;(r=this.nodes.root)==null||r.classList.remove(ye.noFocus)},this.removeSpecialHoverBehavior=()=>{var r;(r=this.nodes.root)==null||r.classList.remove(ye.noHover)},this.onErrorAnimationEnd=()=>{var r,o;(r=this.nodes.icon)==null||r.classList.remove(ye.wobbleAnimation),(o=this.nodes.icon)==null||o.removeEventListener("animationend",this.onErrorAnimationEnd)},this.nodes.root=this.make(e,t)}get isDisabled(){return this.params.isDisabled===!0}get toggle(){return this.params.toggle}get title(){return this.params.title}get isConfirmationStateEnabled(){return this.confirmationState!==null}get isFocused(){return this.nodes.root===null?!1:this.nodes.root.classList.contains(ye.focused)}getElement(){return this.nodes.root}handleClick(){if(this.isConfirmationStateEnabled&&this.confirmationState!==null){this.activateOrEnableConfirmationMode(this.confirmationState);return}this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){var t;(t=this.nodes.root)==null||t.classList.toggle(ye.active,e)}toggleHidden(e){var t;(t=this.nodes.root)==null||t.classList.toggle(ye.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e,t){var r,o;const i=(t==null?void 0:t.wrapperTag)||"div",s=V.make(i,ye.container,{type:i==="button"?"button":void 0});return e.name&&(s.dataset.itemName=e.name),this.nodes.icon=V.make("div",[ye.icon,ye.iconTool],{innerHTML:e.icon||km}),s.appendChild(this.nodes.icon),e.title!==void 0&&s.appendChild(V.make("div",ye.title,{innerHTML:e.title||""})),e.secondaryLabel&&s.appendChild(V.make("div",ye.secondaryTitle,{textContent:e.secondaryLabel})),this.hasChildren&&s.appendChild(V.make("div",[ye.icon,ye.iconChevronRight],{innerHTML:ym})),this.isActive&&s.classList.add(ye.active),e.isDisabled&&s.classList.add(ye.disabled),e.hint!==void 0&&((r=t==null?void 0:t.hint)==null?void 0:r.enabled)!==!1&&this.addHint(s,{...e.hint,position:((o=t==null?void 0:t.hint)==null?void 0:o.position)||"right"}),s}enableConfirmationMode(e){if(this.nodes.root===null)return;const t={...this.params,...e,confirmation:"confirmation"in e?e.confirmation:void 0},r=this.make(t);this.nodes.root.innerHTML=r.innerHTML,this.nodes.root.classList.add(ye.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){if(this.nodes.root===null)return;const e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(ye.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){var e,t,r;(e=this.nodes.root)==null||e.classList.add(ye.noHover),(t=this.nodes.root)==null||t.classList.add(ye.noFocus),(r=this.nodes.root)==null||r.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){var e;this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),(e=this.nodes.root)==null||e.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){var t;if(!("confirmation"in e)||e.confirmation===void 0)try{(t=e.onActivate)==null||t.call(e,e),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(e.confirmation)}animateError(){var e,t,r;(e=this.nodes.icon)!=null&&e.classList.contains(ye.wobbleAnimation)||((t=this.nodes.icon)==null||t.classList.add(ye.wobbleAnimation),(r=this.nodes.icon)==null||r.addEventListener("animationend",this.onErrorAnimationEnd))}};const ar=st("ce-popover-item-separator"),lr={container:ar(),line:ar("line"),hidden:ar(null,"hidden")};class za extends zr{constructor(){super(),this.nodes={root:V.make("div",lr.container),line:V.make("div",lr.line)},this.nodes.root.appendChild(this.nodes.line)}getElement(){return this.nodes.root}toggleHidden(e){var t;(t=this.nodes.root)==null||t.classList.toggle(lr.hidden,e)}}var Ue=(n=>(n.Closed="closed",n.ClosedOnActivate="closed-on-activate",n))(Ue||{});const Oe=st("ce-popover"),be={popover:Oe(),popoverContainer:Oe("container"),popoverOpenTop:Oe(null,"open-top"),popoverOpenLeft:Oe(null,"open-left"),popoverOpened:Oe(null,"opened"),search:Oe("search"),nothingFoundMessage:Oe("nothing-found-message"),nothingFoundMessageDisplayed:Oe("nothing-found-message","displayed"),items:Oe("items"),overlay:Oe("overlay"),overlayHidden:Oe("overlay","hidden"),popoverNested:Oe(null,"nested"),getPopoverNestedClass:n=>Oe(null,`nested-level-${n.toString()}`),popoverInline:Oe(null,"inline"),popoverHeader:Oe("header")};var _t=(n=>(n.NestingLevel="--nesting-level",n.PopoverHeight="--popover-height",n.InlinePopoverWidth="--inline-popover-width",n.TriggerItemLeft="--trigger-item-left",n.TriggerItemTop="--trigger-item-top",n))(_t||{});const Hs=st("ce-popover-item-html"),qs={root:Hs(),hidden:Hs(null,"hidden")};let Vt=class extends zr{constructor(e,t){var r,o;super(e),this.nodes={root:V.make("div",qs.root)},this.nodes.root.appendChild(e.element),e.name&&(this.nodes.root.dataset.itemName=e.name),e.hint!==void 0&&((r=t==null?void 0:t.hint)==null?void 0:r.enabled)!==!1&&this.addHint(this.nodes.root,{...e.hint,position:((o=t==null?void 0:t.hint)==null?void 0:o.position)||"right"})}getElement(){return this.nodes.root}toggleHidden(e){var t;(t=this.nodes.root)==null||t.classList.toggle(qs.hidden,e)}getControls(){const e=this.nodes.root.querySelectorAll(`button, ${V.allInputsSelector}`);return Array.from(e)}};class Wa extends Yt{constructor(e,t={}){super(),this.params=e,this.itemsRenderParams=t,this.listeners=new Xt,this.messages={nothingFound:"Nothing found",search:"Search"},this.items=this.buildItems(e.items),e.messages&&(this.messages={...this.messages,...e.messages}),this.nodes={},this.nodes.popoverContainer=V.make("div",[be.popoverContainer]),this.nodes.nothingFoundMessage=V.make("div",[be.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popoverContainer.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=V.make("div",[be.items]),this.items.forEach(r=>{const o=r.getElement();o!==null&&this.nodes.items.appendChild(o)}),this.nodes.popoverContainer.appendChild(this.nodes.items),this.listeners.on(this.nodes.popoverContainer,"click",r=>this.handleClick(r)),this.nodes.popover=V.make("div",[be.popover,this.params.class]),this.nodes.popover.appendChild(this.nodes.popoverContainer)}get itemsDefault(){return this.items.filter(e=>e instanceof ct)}getElement(){return this.nodes.popover}show(){this.nodes.popover.classList.add(be.popoverOpened),this.search!==void 0&&this.search.focus()}hide(){this.nodes.popover.classList.remove(be.popoverOpened),this.nodes.popover.classList.remove(be.popoverOpenTop),this.itemsDefault.forEach(e=>e.reset()),this.search!==void 0&&this.search.clear(),this.emit(Ue.Closed)}destroy(){var e;this.items.forEach(t=>t.destroy()),this.nodes.popover.remove(),this.listeners.removeAll(),(e=this.search)==null||e.destroy()}activateItemByName(e){const t=this.items.find(r=>r.name===e);this.handleItemClick(t)}buildItems(e){return e.map(t=>{switch(t.type){case ge.Separator:return new za;case ge.Html:return new Vt(t,this.itemsRenderParams[ge.Html]);default:return new ct(t,this.itemsRenderParams[ge.Default])}})}getTargetItem(e){return this.items.filter(t=>t instanceof ct||t instanceof Vt).find(t=>{const r=t.getElement();return r===null?!1:e.composedPath().includes(r)})}handleItemClick(e){if(!("isDisabled"in e&&e.isDisabled)){if(e.hasChildren){this.showNestedItems(e),"handleClick"in e&&typeof e.handleClick=="function"&&e.handleClick();return}this.itemsDefault.filter(t=>t!==e).forEach(t=>t.reset()),"handleClick"in e&&typeof e.handleClick=="function"&&e.handleClick(),this.toggleItemActivenessIfNeeded(e),e.closeOnActivate&&(this.hide(),this.emit(Ue.ClosedOnActivate))}}handleClick(e){const t=this.getTargetItem(e);t!==void 0&&this.handleItemClick(t)}toggleItemActivenessIfNeeded(e){if(e instanceof ct&&(e.toggle===!0&&e.toggleActive(),typeof e.toggle=="string")){const t=this.itemsDefault.filter(r=>r.toggle===e.toggle);if(t.length===1){e.toggleActive();return}t.forEach(r=>{r.toggleActive(r===e)})}}}var On=(n=>(n.Search="search",n))(On||{});const cr=st("cdx-search-field"),ur={wrapper:cr(),icon:cr("icon"),input:cr("input")};class Bm extends Yt{constructor({items:e,placeholder:t}){super(),this.listeners=new Xt,this.items=e,this.wrapper=V.make("div",ur.wrapper);const r=V.make("div",ur.icon,{innerHTML:Om});this.input=V.make("input",ur.input,{placeholder:t,tabIndex:-1}),this.wrapper.appendChild(r),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",()=>{this.searchQuery=this.input.value,this.emit(On.Search,{query:this.searchQuery,items:this.foundItems})})}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.emit(On.Search,{query:"",items:this.foundItems})}destroy(){this.listeners.removeAll()}get foundItems(){return this.items.filter(e=>this.checkItem(e))}checkItem(e){var t,r;const o=((t=e.title)==null?void 0:t.toLowerCase())||"",i=(r=this.searchQuery)==null?void 0:r.toLowerCase();return i!==void 0?o.includes(i):!1}}var Pm=Object.defineProperty,Mm=Object.getOwnPropertyDescriptor,Nm=(n,e,t,r)=>{for(var o=Mm(e,t),i=n.length-1,s;i>=0;i--)(s=n[i])&&(o=s(e,t,o)||o);return o&&Pm(e,t,o),o};const Ka=class Va extends Wa{constructor(e,t){super(e,t),this.nestingLevel=0,this.nestedPopoverTriggerItem=null,this.previouslyHoveredItem=null,this.scopeElement=document.body,this.hide=()=>{var r;super.hide(),this.destroyNestedPopoverIfExists(),(r=this.flipper)==null||r.deactivate(),this.previouslyHoveredItem=null},this.onFlip=()=>{const r=this.itemsDefault.find(o=>o.isFocused);r==null||r.onFocus()},this.onSearch=r=>{var o;const i=r.query==="",s=r.items.length===0;this.items.forEach(f=>{let d=!1;f instanceof ct?d=!r.items.includes(f):(f instanceof za||f instanceof Vt)&&(d=s||!i),f.toggleHidden(d)}),this.toggleNothingFoundMessage(s);const c=r.query===""?this.flippableElements:r.items.map(f=>f.getElement());(o=this.flipper)!=null&&o.isActivated&&(this.flipper.deactivate(),this.flipper.activate(c))},e.nestingLevel!==void 0&&(this.nestingLevel=e.nestingLevel),this.nestingLevel>0&&this.nodes.popover.classList.add(be.popoverNested),e.scopeElement!==void 0&&(this.scopeElement=e.scopeElement),this.nodes.popoverContainer!==null&&this.listeners.on(this.nodes.popoverContainer,"mouseover",r=>this.handleHover(r)),e.searchable&&this.addSearch(),e.flippable!==!1&&(this.flipper=new _n({items:this.flippableElements,focusedItemClass:ye.focused,allowedKeys:[re.TAB,re.UP,re.DOWN,re.ENTER]}),this.flipper.onFlip(this.onFlip))}hasFocus(){return this.flipper===void 0?!1:this.flipper.hasFocus()}get scrollTop(){return this.nodes.items===null?0:this.nodes.items.scrollTop}get offsetTop(){return this.nodes.popoverContainer===null?0:this.nodes.popoverContainer.offsetTop}show(){var e;this.nodes.popover.style.setProperty(_t.PopoverHeight,this.size.height+"px"),this.shouldOpenBottom||this.nodes.popover.classList.add(be.popoverOpenTop),this.shouldOpenRight||this.nodes.popover.classList.add(be.popoverOpenLeft),super.show(),(e=this.flipper)==null||e.activate(this.flippableElements)}destroy(){this.hide(),super.destroy()}showNestedItems(e){this.nestedPopover!==null&&this.nestedPopover!==void 0||(this.nestedPopoverTriggerItem=e,this.showNestedPopoverForItem(e))}handleHover(e){const t=this.getTargetItem(e);t!==void 0&&this.previouslyHoveredItem!==t&&(this.destroyNestedPopoverIfExists(),this.previouslyHoveredItem=t,t.hasChildren&&this.showNestedPopoverForItem(t))}setTriggerItemPosition(e,t){const r=t.getElement(),o=(r?r.offsetTop:0)-this.scrollTop,i=this.offsetTop+o;e.style.setProperty(_t.TriggerItemTop,i+"px")}destroyNestedPopoverIfExists(){var e,t;this.nestedPopover===void 0||this.nestedPopover===null||(this.nestedPopover.off(Ue.ClosedOnActivate,this.hide),this.nestedPopover.hide(),this.nestedPopover.destroy(),this.nestedPopover.getElement().remove(),this.nestedPopover=null,(e=this.flipper)==null||e.activate(this.flippableElements),(t=this.nestedPopoverTriggerItem)==null||t.onChildrenClose())}showNestedPopoverForItem(e){var t;this.nestedPopover=new Va({searchable:e.isChildrenSearchable,items:e.children,nestingLevel:this.nestingLevel+1,flippable:e.isChildrenFlippable,messages:this.messages}),e.onChildrenOpen(),this.nestedPopover.on(Ue.ClosedOnActivate,this.hide);const r=this.nestedPopover.getElement();return this.nodes.popover.appendChild(r),this.setTriggerItemPosition(r,e),r.style.setProperty(_t.NestingLevel,this.nestedPopover.nestingLevel.toString()),this.nestedPopover.show(),(t=this.flipper)==null||t.deactivate(),this.nestedPopover}get shouldOpenBottom(){if(this.nodes.popover===void 0||this.nodes.popover===null)return!1;const e=this.nodes.popoverContainer.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),r=this.size.height,o=e.top+r,i=e.top-r,s=Math.min(window.innerHeight,t.bottom);return i<t.top||o<=s}get shouldOpenRight(){if(this.nodes.popover===void 0||this.nodes.popover===null)return!1;const e=this.nodes.popover.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),r=this.size.width,o=e.right+r,i=e.left-r,s=Math.min(window.innerWidth,t.right);return i<t.left||o<=s}get size(){var e;const t={height:0,width:0};if(this.nodes.popover===null)return t;const r=this.nodes.popover.cloneNode(!0);r.style.visibility="hidden",r.style.position="absolute",r.style.top="-1000px",r.classList.add(be.popoverOpened),(e=r.querySelector("."+be.popoverNested))==null||e.remove(),document.body.appendChild(r);const o=r.querySelector("."+be.popoverContainer);return t.height=o.offsetHeight,t.width=o.offsetWidth,r.remove(),t}get flippableElements(){return this.items.map(e=>{if(e instanceof ct)return e.getElement();if(e instanceof Vt)return e.getControls()}).flat().filter(e=>e!=null)}addSearch(){this.search=new Bm({items:this.itemsDefault,placeholder:this.messages.search}),this.search.on(On.Search,this.onSearch);const e=this.search.getElement();e.classList.add(be.search),this.nodes.popoverContainer.insertBefore(e,this.nodes.popoverContainer.firstChild)}toggleNothingFoundMessage(e){this.nodes.nothingFoundMessage.classList.toggle(be.nothingFoundMessageDisplayed,e)}};Nm([Mt],Ka.prototype,"size");let Wr=Ka;class Im extends Wr{constructor(e){const t=!Nt();super({...e,class:be.popoverInline},{[ge.Default]:{wrapperTag:"button",hint:{position:"top",alignment:"center",enabled:t}},[ge.Html]:{hint:{position:"top",alignment:"center",enabled:t}}}),this.items.forEach(r=>{!(r instanceof ct)&&!(r instanceof Vt)||r.hasChildren&&r.isChildrenOpen&&this.showNestedItems(r)})}get offsetLeft(){return this.nodes.popoverContainer===null?0:this.nodes.popoverContainer.offsetLeft}show(){this.nestingLevel===0&&this.nodes.popover.style.setProperty(_t.InlinePopoverWidth,this.size.width+"px"),super.show()}handleHover(){}setTriggerItemPosition(e,t){const r=t.getElement(),o=r?r.offsetLeft:0,i=this.offsetLeft+o;e.style.setProperty(_t.TriggerItemLeft,i+"px")}showNestedItems(e){if(this.nestedPopoverTriggerItem===e){this.destroyNestedPopoverIfExists(),this.nestedPopoverTriggerItem=null;return}super.showNestedItems(e)}showNestedPopoverForItem(e){const t=super.showNestedPopoverForItem(e);return t.getElement().classList.add(be.getPopoverNestedClass(t.nestingLevel)),t}handleItemClick(e){var t;e!==this.nestedPopoverTriggerItem&&((t=this.nestedPopoverTriggerItem)==null||t.handleClick(),super.destroyNestedPopoverIfExists()),super.handleItemClick(e)}}const Ga=class qt{constructor(){this.scrollPosition=null}lock(){Tr?this.lockHard():document.body.classList.add(qt.CSS.scrollLocked)}unlock(){Tr?this.unlockHard():document.body.classList.remove(qt.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(qt.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(qt.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};Ga.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};let jm=Ga;const dr=st("ce-popover-header"),hr={root:dr(),text:dr("text"),backButton:dr("back-button")};class Rm{constructor({text:e,onBackButtonClick:t}){this.listeners=new Xt,this.text=e,this.onBackButtonClick=t,this.nodes={root:V.make("div",[hr.root]),backButton:V.make("button",[hr.backButton]),text:V.make("div",[hr.text])},this.nodes.backButton.innerHTML=mm,this.nodes.root.appendChild(this.nodes.backButton),this.listeners.on(this.nodes.backButton,"click",this.onBackButtonClick),this.nodes.text.innerText=this.text,this.nodes.root.appendChild(this.nodes.text)}getElement(){return this.nodes.root}destroy(){this.nodes.root.remove(),this.listeners.destroy()}}class Dm{constructor(){this.history=[]}push(e){this.history.push(e)}pop(){return this.history.pop()}get currentTitle(){return this.history.length===0?"":this.history[this.history.length-1].title}get currentItems(){return this.history.length===0?[]:this.history[this.history.length-1].items}reset(){for(;this.history.length>1;)this.pop()}}let Ya=class extends Wa{constructor(e){super(e,{[ge.Default]:{hint:{enabled:!1}},[ge.Html]:{hint:{enabled:!1}}}),this.scrollLocker=new jm,this.history=new Dm,this.isHidden=!0,this.nodes.overlay=V.make("div",[be.overlay,be.overlayHidden]),this.nodes.popover.insertBefore(this.nodes.overlay,this.nodes.popover.firstChild),this.listeners.on(this.nodes.overlay,"click",()=>{this.hide()}),this.history.push({items:e.items})}show(){this.nodes.overlay.classList.remove(be.overlayHidden),super.show(),this.scrollLocker.lock(),this.isHidden=!1}hide(){this.isHidden||(super.hide(),this.nodes.overlay.classList.add(be.overlayHidden),this.scrollLocker.unlock(),this.history.reset(),this.isHidden=!0)}destroy(){super.destroy(),this.scrollLocker.unlock()}showNestedItems(e){this.updateItemsAndHeader(e.children,e.title),this.history.push({title:e.title,items:e.children})}updateItemsAndHeader(e,t){if(this.header!==null&&this.header!==void 0&&(this.header.destroy(),this.header=null),t!==void 0){this.header=new Rm({text:t,onBackButtonClick:()=>{this.history.pop(),this.updateItemsAndHeader(this.history.currentItems,this.history.currentTitle)}});const r=this.header.getElement();r!==null&&this.nodes.popoverContainer.insertBefore(r,this.nodes.popoverContainer.firstChild)}this.items.forEach(r=>{var o;return(o=r.getElement())==null?void 0:o.remove()}),this.items=this.buildItems(e),this.items.forEach(r=>{var o;const i=r.getElement();i!==null&&((o=this.nodes.items)==null||o.appendChild(i))})}};class $m extends ue{constructor(){super(...arguments),this.opened=!1,this.selection=new te,this.popover=null,this.close=()=>{this.opened&&(this.opened=!1,te.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&this.Editor.BlockSelection.unselectBlock(this.Editor.BlockManager.currentBlock),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(Ue.Closed,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null))},this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var e;if(this.popover!==null)return"flipper"in this.popover?(e=this.popover)==null?void 0:e.flipper:void 0}make(){this.nodes.wrapper=V.make("div",[this.CSS.settings]),this.nodes.wrapper.setAttribute("data-cy","block-tunes"),this.eventsDispatcher.on(Kt,this.close)}destroy(){this.removeAllNodes(),this.listeners.destroy(),this.eventsDispatcher.off(Kt,this.close)}async open(e=this.Editor.BlockManager.currentBlock){var t;this.opened=!0,this.selection.save(),this.Editor.BlockSelection.selectBlock(e),this.Editor.BlockSelection.clearCache();const{toolTunes:r,commonTunes:o}=e.getTunes();this.eventsDispatcher.emit(this.events.opened);const i=Nt()?Ya:Wr;this.popover=new i({searchable:!0,items:await this.getTunesItems(e,o,r),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:Ce.ui(Ne.ui.popover,"Nothing found"),search:Ce.ui(Ne.ui.popover,"Filter")}}),this.popover.on(Ue.Closed,this.onPopoverClose),(t=this.nodes.wrapper)==null||t.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}async getTunesItems(e,t,r){const o=[];r!==void 0&&r.length>0&&(o.push(...r),o.push({type:ge.Separator}));const i=Array.from(this.Editor.Tools.blockTools.values()),s=(await ja(e,i)).reduce((c,f)=>(f.toolbox.forEach(d=>{c.push({icon:d.icon,title:Ce.t(Ne.toolNames,d.title),name:f.name,closeOnActivate:!0,onActivate:async()=>{const{BlockManager:g,Caret:l,Toolbar:a}=this.Editor,u=await g.convert(e,f.name,d.data);a.close(),l.setToBlock(u,l.positions.END)}})}),c),[]);return s.length>0&&(o.push({icon:Ua,name:"convert-to",title:Ce.ui(Ne.ui.popover,"Convert to"),children:{searchable:!0,items:s}}),o.push({type:ge.Separator})),o.push(...t),o.map(c=>this.resolveTuneAliases(c))}resolveTuneAliases(e){if(e.type===ge.Separator||e.type===ge.Html)return e;const t=pm(e,{label:"title"});return e.confirmation&&(t.confirmation=this.resolveTuneAliases(e.confirmation)),t}}var Xa={exports:{}};/*!
 * Library for handling keyboard shortcuts
 * @copyright CodeX (https://codex.so)
 * @license MIT
 * @author CodeX (https://codex.so)
 * @version 1.2.0
 */(function(n,e){(function(t,r){n.exports=r()})(window,function(){return function(t){var r={};function o(i){if(r[i])return r[i].exports;var s=r[i]={i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=t,o.c=r,o.d=function(i,s,c){o.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:c})},o.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},o.t=function(i,s){if(1&s&&(i=o(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var f in i)o.d(c,f,(function(d){return i[d]}).bind(null,f));return c},o.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(s,"a",s),s},o.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},o.p="",o(o.s=0)}([function(t,r,o){function i(f,d){for(var g=0;g<d.length;g++){var l=d[g];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(f,l.key,l)}}function s(f,d,g){return d&&i(f.prototype,d),g&&i(f,g),f}o.r(r);var c=function(){function f(d){var g=this;(function(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")})(this,f),this.commands={},this.keys={},this.name=d.name,this.parseShortcutName(d.name),this.element=d.on,this.callback=d.callback,this.executeShortcut=function(l){g.execute(l)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return s(f,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),s(f,[{key:"parseShortcutName",value:function(d){d=d.split("+");for(var g=0;g<d.length;g++){d[g]=d[g].toUpperCase();var l=!1;for(var a in f.supportedCommands)if(f.supportedCommands[a].includes(d[g])){l=this.commands[a]=!0;break}l||(this.keys[d[g]]=!0)}for(var u in f.supportedCommands)this.commands[u]||(this.commands[u]=!1)}},{key:"execute",value:function(d){var g,l={CMD:d.ctrlKey||d.metaKey,SHIFT:d.shiftKey,ALT:d.altKey},a=!0;for(g in this.commands)this.commands[g]!==l[g]&&(a=!1);var u,p=!0;for(u in this.keys)p=p&&d.keyCode===f.keyCodes[u];a&&p&&this.callback(d)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),f}();r.default=c}]).default})})(Xa);var Fm=Xa.exports;const Hm=jn(Fm);class qm{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error(`Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`);const t=new Hm({name:e.name,on:e.on,callback:e.handler}),r=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...r,t])}remove(e,t){const r=this.findShortcut(e,t);if(!r)return;r.remove();const o=this.registeredShortcuts.get(e);this.registeredShortcuts.set(e,o.filter(i=>i!==r))}findShortcut(e,t){return(this.registeredShortcuts.get(e)||[]).find(({name:r})=>r===t)}}const Tt=new qm;var Um=Object.defineProperty,zm=Object.getOwnPropertyDescriptor,Za=(n,e,t,r)=>{for(var o=zm(e,t),i=n.length-1,s;i>=0;i--)(s=n[i])&&(o=s(e,t,o)||o);return o&&Um(e,t,o),o},rn=(n=>(n.Opened="toolbox-opened",n.Closed="toolbox-closed",n.BlockAdded="toolbox-block-added",n))(rn||{});const Kr=class Ja extends Yt{constructor({api:e,tools:t,i18nLabels:r}){super(),this.opened=!1,this.listeners=new Xt,this.popover=null,this.handleMobileLayoutToggle=()=>{this.destroyPopover(),this.initPopover()},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=e,this.tools=t,this.i18nLabels=r,this.enableShortcuts(),this.nodes={toolbox:V.make("div",Ja.CSS.toolbox)},this.initPopover(),this.nodes.toolbox.setAttribute("data-cy","toolbox"),this.api.events.on(Kt,this.handleMobileLayoutToggle)}get isEmpty(){return this.toolsToBeDisplayed.length===0}static get CSS(){return{toolbox:"ce-toolbox"}}getElement(){return this.nodes.toolbox}hasFocus(){if(this.popover!==null)return"hasFocus"in this.popover?this.popover.hasFocus():void 0}destroy(){var e;super.destroy(),this.nodes&&this.nodes.toolbox&&this.nodes.toolbox.remove(),this.removeAllShortcuts(),(e=this.popover)==null||e.off(Ue.Closed,this.onPopoverClose),this.listeners.destroy(),this.api.events.off(Kt,this.handleMobileLayoutToggle)}toolButtonActivated(e,t){this.insertNewBlock(e,t)}open(){var e;this.isEmpty||((e=this.popover)==null||e.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var e;(e=this.popover)==null||e.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}initPopover(){var e;const t=Nt()?Ya:Wr;this.popover=new t({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(Ue.Closed,this.onPopoverClose),(e=this.nodes.toolbox)==null||e.append(this.popover.getElement())}destroyPopover(){this.popover!==null&&(this.popover.hide(),this.popover.off(Ue.Closed,this.onPopoverClose),this.popover.destroy(),this.popover=null),this.nodes.toolbox!==null&&(this.nodes.toolbox.innerHTML="")}get toolsToBeDisplayed(){const e=[];return this.tools.forEach(t=>{t.toolbox&&e.push(t)}),e}get toolboxItemsToBeDisplayed(){const e=(t,r,o=!0)=>({icon:t.icon,title:Ce.t(Ne.toolNames,t.title||wn(r.name)),name:r.name,onActivate:()=>{this.toolButtonActivated(r.name,t.data)},secondaryLabel:r.shortcut&&o?Fr(r.shortcut):""});return this.toolsToBeDisplayed.reduce((t,r)=>(Array.isArray(r.toolbox)?r.toolbox.forEach((o,i)=>{t.push(e(o,r,i===0))}):r.toolbox!==void 0&&t.push(e(r.toolbox,r)),t),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach(e=>{const t=e.shortcut;t&&this.enableShortcutForTool(e.name,t)})}enableShortcutForTool(e,t){Tt.add({name:t,on:this.api.ui.nodes.redactor,handler:async r=>{r.preventDefault();const o=this.api.blocks.getCurrentBlockIndex(),i=this.api.blocks.getBlockByIndex(o);if(i)try{const s=await this.api.blocks.convert(i.id,e);this.api.caret.setToBlock(s,"end");return}catch{}this.insertNewBlock(e)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach(e=>{const t=e.shortcut;t&&Tt.remove(this.api.ui.nodes.redactor,t)})}async insertNewBlock(e,t){const r=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(r);if(!o)return;const i=o.isEmpty?r:r+1;let s;if(t){const f=await this.api.blocks.composeBlockData(e);s=Object.assign(f,t)}const c=this.api.blocks.insert(e,s,void 0,i,void 0,o.isEmpty);c.call(Ve.APPEND_CALLBACK),this.api.caret.setToBlock(i),this.emit("toolbox-block-added",{block:c}),this.api.toolbar.close()}};Za([Mt],Kr.prototype,"toolsToBeDisplayed");Za([Mt],Kr.prototype,"toolboxItemsToBeDisplayed");let Wm=Kr;const Qa="block hovered";async function Km(n,e){const t=navigator.keyboard;if(!t)return e;try{return(await t.getLayoutMap()).get(n)||e}catch(r){return console.error(r),e}}class Vm extends ue{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.toolboxInstance=null}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var e;return{opened:(e=this.toolboxInstance)==null?void 0:e.opened,close:()=>{var t;(t=this.toolboxInstance)==null||t.close()},open:()=>{if(this.toolboxInstance===null){de("toolbox.open() called before initialization is finished","warn");return}this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()},toggle:()=>{if(this.toolboxInstance===null){de("toolbox.toggle() called before initialization is finished","warn");return}this.toolboxInstance.toggle()},hasFocus:()=>{var t;return(t=this.toolboxInstance)==null?void 0:t.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(e){e?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback(()=>{this.drawUI(),this.enableModuleBindings()},{timeout:2e3})}moveAndOpen(e=this.Editor.BlockManager.currentBlock){if(this.toolboxInstance===null){de("Can't open Toolbar since Editor initialization is not finished yet","warn");return}if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!e)return;this.hoveredBlock=e;const t=e.holder,{isMobile:r}=this.Editor.UI;let o;const i=20,s=e.firstInput,c=t.getBoundingClientRect(),f=s!==void 0?s.getBoundingClientRect():null,d=f!==null?f.top-c.top:null,g=d!==null?d>i:void 0;if(r)o=t.offsetTop+t.offsetHeight;else if(s===void 0||g){const l=parseInt(window.getComputedStyle(e.pluginsContent).paddingTop);o=t.offsetTop+l}else{const l=Lv(s),a=parseInt(window.getComputedStyle(this.nodes.plusButton).height,10);o=t.offsetTop+l-a+8+d}this.nodes.wrapper.style.top=`${Math.floor(o)}px`,this.Editor.BlockManager.blocks.length===1&&e.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var e,t;this.Editor.ReadOnly.isEnabled||((e=this.nodes.wrapper)==null||e.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),(t=this.toolboxInstance)==null||t.close(),this.Editor.BlockSettings.close(),this.reset())}reset(){this.nodes.wrapper.style.top="unset"}open(e=!0){this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),e?this.blockActions.show():this.blockActions.hide()}async make(){this.nodes.wrapper=V.make("div",this.CSS.toolbar),["content","actions"].forEach(i=>{this.nodes[i]=V.make("div",this.CSS[i])}),V.append(this.nodes.wrapper,this.nodes.content),V.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=V.make("div",this.CSS.plusButton,{innerHTML:_m}),V.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",()=>{xn(!0),this.plusButtonClicked()},!1);const e=V.make("div");e.appendChild(document.createTextNode(Ce.ui(Ne.ui.toolbar.toolbox,"Add"))),e.appendChild(V.make("div",this.CSS.plusButtonShortcut,{textContent:"/"})),En(this.nodes.plusButton,e,{hidingDelay:400}),this.nodes.settingsToggler=V.make("span",this.CSS.settingsToggler,{innerHTML:Em}),V.append(this.nodes.actions,this.nodes.settingsToggler);const t=V.make("div"),r=V.text(Ce.ui(Ne.ui.blockTunes.toggler,"Click to tune")),o=await Km("Slash","/");t.appendChild(r),t.appendChild(V.make("div",this.CSS.plusButtonShortcut,{textContent:Fr(`CMD + ${o}`)})),En(this.nodes.settingsToggler,t,{hidingDelay:400}),V.append(this.nodes.actions,this.makeToolbox()),V.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),V.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new Wm({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:Ce.ui(Ne.ui.popover,"Filter"),nothingFound:Ce.ui(Ne.ui.popover,"Nothing found")}}),this.toolboxInstance.on(rn.Opened,()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(rn.Closed,()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(rn.BlockAdded,({block:e})=>{const{BlockManager:t,Caret:r}=this.Editor,o=t.getBlockById(e.id);o.inputs.length===0&&(o===t.lastBlock?(t.insertAtEnd(),r.setToBlock(t.lastBlock)):r.setToBlock(t.nextBlock))}),this.toolboxInstance.getElement()}plusButtonClicked(){var e;this.Editor.BlockManager.currentBlock=this.hoveredBlock,(e=this.toolboxInstance)==null||e.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",e=>{var t;e.stopPropagation(),this.settingsTogglerClicked(),(t=this.toolboxInstance)!=null&&t.opened&&this.toolboxInstance.close(),xn(!0)},!0),Nt()||this.eventsDispatcher.on(Qa,e=>{var t;this.Editor.BlockSettings.opened||(t=this.toolboxInstance)!=null&&t.opened||this.moveAndOpen(e.block)})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy()}}var ut=(n=>(n[n.Block=0]="Block",n[n.Inline=1]="Inline",n[n.Tune=2]="Tune",n))(ut||{}),on=(n=>(n.Shortcut="shortcut",n.Toolbox="toolbox",n.EnabledInlineTools="inlineToolbar",n.EnabledBlockTunes="tunes",n.Config="config",n))(on||{}),el=(n=>(n.Shortcut="shortcut",n.SanitizeConfig="sanitize",n))(el||{}),kt=(n=>(n.IsEnabledLineBreaks="enableLineBreaks",n.Toolbox="toolbox",n.ConversionConfig="conversionConfig",n.IsReadOnlySupported="isReadOnlySupported",n.PasteConfig="pasteConfig",n))(kt||{}),Tn=(n=>(n.IsInline="isInline",n.Title="title",n.IsReadOnlySupported="isReadOnlySupported",n))(Tn||{}),Lr=(n=>(n.IsTune="isTune",n))(Lr||{});let Vr=class{constructor({name:e,constructable:t,config:r,api:o,isDefault:i,isInternal:s=!1,defaultPlaceholder:c}){this.api=o,this.name=e,this.constructable=t,this.config=r,this.isDefault=i,this.isInternal=s,this.defaultPlaceholder=c}get settings(){const e=this.config.config||{};return this.isDefault&&!("placeholder"in e)&&this.defaultPlaceholder&&(e.placeholder=this.defaultPlaceholder),e}reset(){if(me(this.constructable.reset))return this.constructable.reset()}prepare(){if(me(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===ut.Inline}isBlock(){return this.type===ut.Block}isTune(){return this.type===ut.Tune}};class Gm extends ue{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.CSS={inlineToolbar:"ce-inline-toolbar"},this.opened=!1,this.popover=null,this.toolbarVerticalMargin=Nt()?20:6,this.tools=new Map,window.requestIdleCallback(()=>{this.make()},{timeout:2e3})}async tryToShow(e=!1){e&&this.close(),this.allowedToShow()&&(await this.open(),this.Editor.Toolbar.close())}close(){var e,t;if(this.opened){for(const[r,o]of this.tools){const i=this.getToolShortcut(r.name);i!==void 0&&Tt.remove(this.Editor.UI.nodes.redactor,i),me(o.clear)&&o.clear()}this.tools=new Map,this.reset(),this.opened=!1,(e=this.popover)==null||e.hide(),(t=this.popover)==null||t.destroy(),this.popover=null}}containsNode(e){return this.nodes.wrapper===void 0?!1:this.nodes.wrapper.contains(e)}destroy(){var e;this.removeAllNodes(),(e=this.popover)==null||e.destroy(),this.popover=null}make(){this.nodes.wrapper=V.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.wrapper.setAttribute("data-cy","inline-toolbar"),V.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}async open(){var e;if(this.opened)return;this.opened=!0,this.popover!==null&&this.popover.destroy(),this.createToolsInstances();const t=await this.getPopoverItems();this.popover=new Im({items:t,scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:Ce.ui(Ne.ui.popover,"Nothing found"),search:Ce.ui(Ne.ui.popover,"Filter")}}),this.move(this.popover.size.width),(e=this.nodes.wrapper)==null||e.append(this.popover.getElement()),this.popover.show()}move(e){const t=te.rect,r=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),o={x:t.x-r.x,y:t.y+t.height-r.top+this.toolbarVerticalMargin};o.x+e+r.x>this.Editor.UI.contentRect.right&&(o.x=this.Editor.UI.contentRect.right-e-r.x),this.nodes.wrapper.style.left=Math.floor(o.x)+"px",this.nodes.wrapper.style.top=Math.floor(o.y)+"px"}reset(){this.nodes.wrapper.style.left="0",this.nodes.wrapper.style.top="0"}allowedToShow(){const e=["IMG","INPUT"],t=te.get(),r=te.text;if(!t||!t.anchorNode||t.isCollapsed||r.length<1)return!1;const o=V.isElement(t.anchorNode)?t.anchorNode:t.anchorNode.parentElement;if(o===null||t!==null&&e.includes(o.tagName))return!1;const i=this.Editor.BlockManager.getBlock(t.anchorNode);return!i||this.getTools().some(s=>i.tool.inlineTools.has(s.name))===!1?!1:o.closest("[contenteditable]")!==null}getTools(){const e=this.Editor.BlockManager.currentBlock;return e?Array.from(e.tool.inlineTools.values()).filter(t=>!(this.Editor.ReadOnly.isEnabled&&t.isReadOnlySupported!==!0)):[]}createToolsInstances(){this.tools=new Map,this.getTools().forEach(e=>{const t=e.create();this.tools.set(e,t)})}async getPopoverItems(){const e=[];let t=0;for(const[r,o]of this.tools){const i=await o.render(),s=this.getToolShortcut(r.name);if(s!==void 0)try{this.enableShortcuts(r.name,s)}catch{}const c=s!==void 0?Fr(s):void 0,f=Ce.t(Ne.toolNames,r.title||wn(r.name));[i].flat().forEach(d=>{var g,l;const a={name:r.name,onActivate:()=>{this.toolClicked(o)},hint:{title:f,description:c}};if(V.isElement(d)){const u={...a,element:d,type:ge.Html};if(me(o.renderActions)){const p=o.renderActions();u.children={isOpen:(g=o.checkState)==null?void 0:g.call(o,te.get()),isFlippable:!1,items:[{type:ge.Html,element:p}]}}else(l=o.checkState)==null||l.call(o,te.get());e.push(u)}else if(d.type===ge.Html)e.push({...a,...d,type:ge.Html});else if(d.type===ge.Separator)e.push({type:ge.Separator});else{const u={...a,...d,type:ge.Default};"children"in u&&t!==0&&e.push({type:ge.Separator}),e.push(u),"children"in u&&t<this.tools.size-1&&e.push({type:ge.Separator})}}),t++}return e}getToolShortcut(e){const{Tools:t}=this.Editor,r=t.inlineTools.get(e),o=t.internal.inlineTools;return Array.from(o.keys()).includes(e)?this.inlineTools[e][el.Shortcut]:r==null?void 0:r.shortcut}enableShortcuts(e,t){Tt.add({name:t,handler:r=>{var o;const{currentBlock:i}=this.Editor.BlockManager;i&&i.tool.enabledInlineTools&&(r.preventDefault(),(o=this.popover)==null||o.activateItemByName(e))},on:document})}toolClicked(e){var t;const r=te.range;(t=e.surround)==null||t.call(e,r),this.checkToolsState()}checkToolsState(){var e;(e=this.tools)==null||e.forEach(t=>{var r;(r=t.checkState)==null||r.call(t,te.get())})}get inlineTools(){const e={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([t,r])=>{e[t]=r.create()}),e}}function tl(){const n=window.getSelection();if(n===null)return[null,0];let e=n.focusNode,t=n.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[t]?(e=e.childNodes[t],t=0):(e=e.childNodes[t-1],t=e.textContent.length)),[e,t])}function nl(n,e,t,r){const o=document.createRange();r==="left"?(o.setStart(n,0),o.setEnd(e,t)):(o.setStart(e,t),o.setEnd(n,n.childNodes.length));const i=o.cloneContents(),s=document.createElement("div");s.appendChild(i);const c=s.textContent||"";return Av(c)}function sn(n){const e=V.getDeepestNode(n);if(e===null||V.isEmpty(n))return!0;if(V.isNativeInput(e))return e.selectionEnd===0;if(V.isEmpty(n))return!0;const[t,r]=tl();return t===null?!1:nl(n,t,r,"left")}function an(n){const e=V.getDeepestNode(n,!0);if(e===null)return!0;if(V.isNativeInput(e))return e.selectionEnd===e.value.length;const[t,r]=tl();return t===null?!1:nl(n,t,r,"right")}var rl={},Gr={},Rn={},ht={},Yr={},Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.allInputsSelector=Ym;function Ym(){var n=["text","password","email","number","search","tel","url"];return"[contenteditable=true], textarea, input:not([type]), "+n.map(function(e){return'input[type="'.concat(e,'"]')}).join(", ")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.allInputsSelector=void 0;var e=Xr;Object.defineProperty(n,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}})})(Yr);var ft={},Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.isNativeInput=Xm;function Xm(n){var e=["INPUT","TEXTAREA"];return n&&n.tagName?e.includes(n.tagName):!1}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNativeInput=void 0;var e=Zr;Object.defineProperty(n,"isNativeInput",{enumerable:!0,get:function(){return e.isNativeInput}})})(ft);var ol={},Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.append=Zm;function Zm(n,e){Array.isArray(e)?e.forEach(function(t){n.appendChild(t)}):n.appendChild(e)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.append=void 0;var e=Jr;Object.defineProperty(n,"append",{enumerable:!0,get:function(){return e.append}})})(ol);var Qr={},eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.blockElements=Jm;function Jm(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.blockElements=void 0;var e=eo;Object.defineProperty(n,"blockElements",{enumerable:!0,get:function(){return e.blockElements}})})(Qr);var il={},to={};Object.defineProperty(to,"__esModule",{value:!0});to.calculateBaseline=Qm;function Qm(n){var e=window.getComputedStyle(n),t=parseFloat(e.fontSize),r=parseFloat(e.lineHeight)||t*1.2,o=parseFloat(e.paddingTop),i=parseFloat(e.borderTopWidth),s=parseFloat(e.marginTop),c=t*.8,f=(r-t)/2,d=s+i+o+f+c;return d}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateBaseline=void 0;var e=to;Object.defineProperty(n,"calculateBaseline",{enumerable:!0,get:function(){return e.calculateBaseline}})})(il);var sl={},no={},ro={},oo={};Object.defineProperty(oo,"__esModule",{value:!0});oo.isContentEditable=ey;function ey(n){return n.contentEditable==="true"}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isContentEditable=void 0;var e=oo;Object.defineProperty(n,"isContentEditable",{enumerable:!0,get:function(){return e.isContentEditable}})})(ro);Object.defineProperty(no,"__esModule",{value:!0});no.canSetCaret=ry;var ty=ft,ny=ro;function ry(n){var e=!0;if((0,ty.isNativeInput)(n))switch(n.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":e=!1;break}else e=(0,ny.isContentEditable)(n);return e}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.canSetCaret=void 0;var e=no;Object.defineProperty(n,"canSetCaret",{enumerable:!0,get:function(){return e.canSetCaret}})})(sl);var Dn={},io={};function oy(n,e,t){const r=t.value!==void 0?"value":"get",o=t[r],i=`#${e}Cache`;if(t[r]=function(...s){return this[i]===void 0&&(this[i]=o.apply(this,s)),this[i]},r==="get"&&t.set){const s=t.set;t.set=function(c){delete n[i],s.apply(this,c)}}return t}function al(){const n={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(n).find(t=>window.navigator.appVersion.toLowerCase().indexOf(t)!==-1);return e!==void 0&&(n[e]=!0),n}function so(n){return n!=null&&n!==""&&(typeof n!="object"||Object.keys(n).length>0)}function iy(n){return!so(n)}const sy=()=>typeof window<"u"&&window.navigator!==null&&so(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function ay(n){const e=al();return n=n.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi,"+"),e.mac?n=n.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):n=n.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),n}function ly(n){return n[0].toUpperCase()+n.slice(1)}function cy(n){const e=document.createElement("div");e.style.position="absolute",e.style.left="-999px",e.style.bottom="-999px",e.innerHTML=n,document.body.appendChild(e);const t=window.getSelection(),r=document.createRange();if(r.selectNode(e),t===null)throw new Error("Cannot copy text to clipboard");t.removeAllRanges(),t.addRange(r),document.execCommand("copy"),document.body.removeChild(e)}function uy(n,e,t){let r;return(...o)=>{const i=this,s=()=>{r=void 0,t!==!0&&n.apply(i,o)},c=t===!0&&r!==void 0;window.clearTimeout(r),r=window.setTimeout(s,e),c&&n.apply(i,o)}}function rt(n){return Object.prototype.toString.call(n).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function dy(n){return rt(n)==="boolean"}function ll(n){return rt(n)==="function"||rt(n)==="asyncfunction"}function hy(n){return ll(n)&&/^\s*class\s+/.test(n.toString())}function fy(n){return rt(n)==="number"}function ln(n){return rt(n)==="object"}function py(n){return Promise.resolve(n)===n}function gy(n){return rt(n)==="string"}function vy(n){return rt(n)==="undefined"}function Br(n,...e){if(!e.length)return n;const t=e.shift();if(ln(n)&&ln(t))for(const r in t)ln(t[r])?(n[r]===void 0&&Object.assign(n,{[r]:{}}),Br(n[r],t[r])):Object.assign(n,{[r]:t[r]});return Br(n,...e)}function my(n,e,t){const r=`«${e}» is deprecated and will be removed in the next major release. Please use the «${t}» instead.`;n&&console.warn(r)}function yy(n){try{return new URL(n).href}catch{}return n.substring(0,2)==="//"?window.location.protocol+n:window.location.origin+n}function by(n){return n>47&&n<58||n===32||n===13||n===229||n>64&&n<91||n>95&&n<112||n>185&&n<193||n>218&&n<223}const wy={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},ky={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};let xy=class{constructor(){this.completed=Promise.resolve()}add(n){return new Promise((e,t)=>{this.completed=this.completed.then(n).then(e).catch(t)})}};function Ey(n,e,t=void 0){let r,o,i,s=null,c=0;t||(t={});const f=function(){c=t.leading===!1?0:Date.now(),s=null,i=n.apply(r,o),s===null&&(r=o=null)};return function(){const d=Date.now();!c&&t.leading===!1&&(c=d);const g=e-(d-c);return r=this,o=arguments,g<=0||g>e?(s&&(clearTimeout(s),s=null),c=d,i=n.apply(r,o),s===null&&(r=o=null)):!s&&t.trailing!==!1&&(s=setTimeout(f,g)),i}}const _y=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:xy,beautifyShortcut:ay,cacheable:oy,capitalize:ly,copyTextToClipboard:cy,debounce:uy,deepMerge:Br,deprecationAssert:my,getUserOS:al,getValidUrl:yy,isBoolean:dy,isClass:hy,isEmpty:iy,isFunction:ll,isIosDevice:sy,isNumber:fy,isObject:ln,isPrintableKey:by,isPromise:py,isString:gy,isUndefined:vy,keyCodes:wy,mouseButtons:ky,notEmpty:so,throttle:Ey,typeOf:rt},Symbol.toStringTag,{value:"Module"})),ao=gv(_y);Object.defineProperty(io,"__esModule",{value:!0});io.containsOnlyInlineElements=Cy;var Oy=ao,Ty=Qr;function Cy(n){var e;(0,Oy.isString)(n)?(e=document.createElement("div"),e.innerHTML=n):e=n;var t=function(r){return!(0,Ty.blockElements)().includes(r.tagName.toLowerCase())&&Array.from(r.children).every(t)};return Array.from(e.children).every(t)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.containsOnlyInlineElements=void 0;var e=io;Object.defineProperty(n,"containsOnlyInlineElements",{enumerable:!0,get:function(){return e.containsOnlyInlineElements}})})(Dn);var cl={},lo={},$n={},co={};Object.defineProperty(co,"__esModule",{value:!0});co.make=Sy;function Sy(n,e,t){var r;e===void 0&&(e=null),t===void 0&&(t={});var o=document.createElement(n);if(Array.isArray(e)){var i=e.filter(function(c){return c!==void 0});(r=o.classList).add.apply(r,i)}else e!==null&&o.classList.add(e);for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(o[s]=t[s]);return o}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.make=void 0;var e=co;Object.defineProperty(n,"make",{enumerable:!0,get:function(){return e.make}})})($n);Object.defineProperty(lo,"__esModule",{value:!0});lo.fragmentToString=Ly;var Ay=$n;function Ly(n){var e=(0,Ay.make)("div");return e.appendChild(n),e.innerHTML}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.fragmentToString=void 0;var e=lo;Object.defineProperty(n,"fragmentToString",{enumerable:!0,get:function(){return e.fragmentToString}})})(cl);var ul={},uo={};Object.defineProperty(uo,"__esModule",{value:!0});uo.getContentLength=Py;var By=ft;function Py(n){var e,t;return(0,By.isNativeInput)(n)?n.value.length:n.nodeType===Node.TEXT_NODE?n.length:(t=(e=n.textContent)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getContentLength=void 0;var e=uo;Object.defineProperty(n,"getContentLength",{enumerable:!0,get:function(){return e.getContentLength}})})(ul);var ho={},fo={},Us=Wt&&Wt.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(fo,"__esModule",{value:!0});fo.getDeepestBlockElements=dl;var My=Dn;function dl(n){return(0,My.containsOnlyInlineElements)(n)?[n]:Array.from(n.children).reduce(function(e,t){return Us(Us([],e,!0),dl(t),!0)},[])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDeepestBlockElements=void 0;var e=fo;Object.defineProperty(n,"getDeepestBlockElements",{enumerable:!0,get:function(){return e.getDeepestBlockElements}})})(ho);var hl={},po={},Fn={},go={};Object.defineProperty(go,"__esModule",{value:!0});go.isLineBreakTag=Ny;function Ny(n){return["BR","WBR"].includes(n.tagName)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isLineBreakTag=void 0;var e=go;Object.defineProperty(n,"isLineBreakTag",{enumerable:!0,get:function(){return e.isLineBreakTag}})})(Fn);var Hn={},vo={};Object.defineProperty(vo,"__esModule",{value:!0});vo.isSingleTag=Iy;function Iy(n){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(n.tagName)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isSingleTag=void 0;var e=vo;Object.defineProperty(n,"isSingleTag",{enumerable:!0,get:function(){return e.isSingleTag}})})(Hn);Object.defineProperty(po,"__esModule",{value:!0});po.getDeepestNode=fl;var jy=ft,Ry=Fn,Dy=Hn;function fl(n,e){e===void 0&&(e=!1);var t=e?"lastChild":"firstChild",r=e?"previousSibling":"nextSibling";if(n.nodeType===Node.ELEMENT_NODE&&n[t]){var o=n[t];if((0,Dy.isSingleTag)(o)&&!(0,jy.isNativeInput)(o)&&!(0,Ry.isLineBreakTag)(o))if(o[r])o=o[r];else if(o.parentNode!==null&&o.parentNode[r])o=o.parentNode[r];else return o.parentNode;return fl(o,e)}return n}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDeepestNode=void 0;var e=po;Object.defineProperty(n,"getDeepestNode",{enumerable:!0,get:function(){return e.getDeepestNode}})})(hl);var pl={},mo={},Jt=Wt&&Wt.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(mo,"__esModule",{value:!0});mo.findAllInputs=Uy;var $y=Dn,Fy=ho,Hy=Yr,qy=ft;function Uy(n){return Array.from(n.querySelectorAll((0,Hy.allInputsSelector)())).reduce(function(e,t){return(0,qy.isNativeInput)(t)||(0,$y.containsOnlyInlineElements)(t)?Jt(Jt([],e,!0),[t],!1):Jt(Jt([],e,!0),(0,Fy.getDeepestBlockElements)(t),!0)},[])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.findAllInputs=void 0;var e=mo;Object.defineProperty(n,"findAllInputs",{enumerable:!0,get:function(){return e.findAllInputs}})})(pl);var gl={},yo={};Object.defineProperty(yo,"__esModule",{value:!0});yo.isCollapsedWhitespaces=zy;function zy(n){return!/[^\t\n\r ]/.test(n)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCollapsedWhitespaces=void 0;var e=yo;Object.defineProperty(n,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return e.isCollapsedWhitespaces}})})(gl);var bo={},wo={};Object.defineProperty(wo,"__esModule",{value:!0});wo.isElement=Ky;var Wy=ao;function Ky(n){return(0,Wy.isNumber)(n)?!1:!!n&&!!n.nodeType&&n.nodeType===Node.ELEMENT_NODE}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isElement=void 0;var e=wo;Object.defineProperty(n,"isElement",{enumerable:!0,get:function(){return e.isElement}})})(bo);var vl={},ko={},xo={},Eo={};Object.defineProperty(Eo,"__esModule",{value:!0});Eo.isLeaf=Vy;function Vy(n){return n===null?!1:n.childNodes.length===0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isLeaf=void 0;var e=Eo;Object.defineProperty(n,"isLeaf",{enumerable:!0,get:function(){return e.isLeaf}})})(xo);var _o={},Oo={};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.isNodeEmpty=Jy;var Gy=Fn,Yy=bo,Xy=ft,Zy=Hn;function Jy(n,e){var t="";return(0,Zy.isSingleTag)(n)&&!(0,Gy.isLineBreakTag)(n)?!1:((0,Yy.isElement)(n)&&(0,Xy.isNativeInput)(n)?t=n.value:n.textContent!==null&&(t=n.textContent.replace("​","")),e!==void 0&&(t=t.replace(new RegExp(e,"g"),"")),t.trim().length===0)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeEmpty=void 0;var e=Oo;Object.defineProperty(n,"isNodeEmpty",{enumerable:!0,get:function(){return e.isNodeEmpty}})})(_o);Object.defineProperty(ko,"__esModule",{value:!0});ko.isEmpty=tb;var Qy=xo,eb=_o;function tb(n,e){n.normalize();for(var t=[n];t.length>0;){var r=t.shift();if(r){if(n=r,(0,Qy.isLeaf)(n)&&!(0,eb.isNodeEmpty)(n,e))return!1;t.push.apply(t,Array.from(n.childNodes))}}return!0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isEmpty=void 0;var e=ko;Object.defineProperty(n,"isEmpty",{enumerable:!0,get:function(){return e.isEmpty}})})(vl);var ml={},To={};Object.defineProperty(To,"__esModule",{value:!0});To.isFragment=rb;var nb=ao;function rb(n){return(0,nb.isNumber)(n)?!1:!!n&&!!n.nodeType&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isFragment=void 0;var e=To;Object.defineProperty(n,"isFragment",{enumerable:!0,get:function(){return e.isFragment}})})(ml);var yl={},Co={};Object.defineProperty(Co,"__esModule",{value:!0});Co.isHTMLString=ib;var ob=$n;function ib(n){var e=(0,ob.make)("div");return e.innerHTML=n,e.childElementCount>0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isHTMLString=void 0;var e=Co;Object.defineProperty(n,"isHTMLString",{enumerable:!0,get:function(){return e.isHTMLString}})})(yl);var bl={},So={};Object.defineProperty(So,"__esModule",{value:!0});So.offset=sb;function sb(n){var e=n.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,o=e.top+r,i=e.left+t;return{top:o,left:i,bottom:o+e.height,right:i+e.width}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.offset=void 0;var e=So;Object.defineProperty(n,"offset",{enumerable:!0,get:function(){return e.offset}})})(bl);var wl={},Ao={};Object.defineProperty(Ao,"__esModule",{value:!0});Ao.prepend=ab;function ab(n,e){Array.isArray(e)?(e=e.reverse(),e.forEach(function(t){return n.prepend(t)})):n.prepend(e)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.prepend=void 0;var e=Ao;Object.defineProperty(n,"prepend",{enumerable:!0,get:function(){return e.prepend}})})(wl);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.prepend=n.offset=n.make=n.isLineBreakTag=n.isSingleTag=n.isNodeEmpty=n.isLeaf=n.isHTMLString=n.isFragment=n.isEmpty=n.isElement=n.isContentEditable=n.isCollapsedWhitespaces=n.findAllInputs=n.isNativeInput=n.allInputsSelector=n.getDeepestNode=n.getDeepestBlockElements=n.getContentLength=n.fragmentToString=n.containsOnlyInlineElements=n.canSetCaret=n.calculateBaseline=n.blockElements=n.append=void 0;var e=Yr;Object.defineProperty(n,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}});var t=ft;Object.defineProperty(n,"isNativeInput",{enumerable:!0,get:function(){return t.isNativeInput}});var r=ol;Object.defineProperty(n,"append",{enumerable:!0,get:function(){return r.append}});var o=Qr;Object.defineProperty(n,"blockElements",{enumerable:!0,get:function(){return o.blockElements}});var i=il;Object.defineProperty(n,"calculateBaseline",{enumerable:!0,get:function(){return i.calculateBaseline}});var s=sl;Object.defineProperty(n,"canSetCaret",{enumerable:!0,get:function(){return s.canSetCaret}});var c=Dn;Object.defineProperty(n,"containsOnlyInlineElements",{enumerable:!0,get:function(){return c.containsOnlyInlineElements}});var f=cl;Object.defineProperty(n,"fragmentToString",{enumerable:!0,get:function(){return f.fragmentToString}});var d=ul;Object.defineProperty(n,"getContentLength",{enumerable:!0,get:function(){return d.getContentLength}});var g=ho;Object.defineProperty(n,"getDeepestBlockElements",{enumerable:!0,get:function(){return g.getDeepestBlockElements}});var l=hl;Object.defineProperty(n,"getDeepestNode",{enumerable:!0,get:function(){return l.getDeepestNode}});var a=pl;Object.defineProperty(n,"findAllInputs",{enumerable:!0,get:function(){return a.findAllInputs}});var u=gl;Object.defineProperty(n,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return u.isCollapsedWhitespaces}});var p=ro;Object.defineProperty(n,"isContentEditable",{enumerable:!0,get:function(){return p.isContentEditable}});var b=bo;Object.defineProperty(n,"isElement",{enumerable:!0,get:function(){return b.isElement}});var v=vl;Object.defineProperty(n,"isEmpty",{enumerable:!0,get:function(){return v.isEmpty}});var y=ml;Object.defineProperty(n,"isFragment",{enumerable:!0,get:function(){return y.isFragment}});var h=yl;Object.defineProperty(n,"isHTMLString",{enumerable:!0,get:function(){return h.isHTMLString}});var w=xo;Object.defineProperty(n,"isLeaf",{enumerable:!0,get:function(){return w.isLeaf}});var m=_o;Object.defineProperty(n,"isNodeEmpty",{enumerable:!0,get:function(){return m.isNodeEmpty}});var k=Fn;Object.defineProperty(n,"isLineBreakTag",{enumerable:!0,get:function(){return k.isLineBreakTag}});var S=Hn;Object.defineProperty(n,"isSingleTag",{enumerable:!0,get:function(){return S.isSingleTag}});var T=$n;Object.defineProperty(n,"make",{enumerable:!0,get:function(){return T.make}});var E=bl;Object.defineProperty(n,"offset",{enumerable:!0,get:function(){return E.offset}});var O=wl;Object.defineProperty(n,"prepend",{enumerable:!0,get:function(){return O.prepend}})})(ht);var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.getContenteditableSlice=cb;var lb=ht;function cb(n,e,t,r,o){var i;o===void 0&&(o=!1);var s=document.createRange();if(r==="left"?(s.setStart(n,0),s.setEnd(e,t)):(s.setStart(e,t),s.setEnd(n,n.childNodes.length)),o===!0){var c=s.extractContents();return(0,lb.fragmentToString)(c)}var f=s.cloneContents(),d=document.createElement("div");d.appendChild(f);var g=(i=d.textContent)!==null&&i!==void 0?i:"";return g}Object.defineProperty(Rn,"__esModule",{value:!0});Rn.checkContenteditableSliceForEmptiness=hb;var ub=ht,db=qn;function hb(n,e,t,r){var o=(0,db.getContenteditableSlice)(n,e,t,r);return(0,ub.isCollapsedWhitespaces)(o)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.checkContenteditableSliceForEmptiness=void 0;var e=Rn;Object.defineProperty(n,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}})})(Gr);var kl={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getContenteditableSlice=void 0;var e=qn;Object.defineProperty(n,"getContenteditableSlice",{enumerable:!0,get:function(){return e.getContenteditableSlice}})})(kl);var xl={},Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.focus=pb;var fb=ht;function pb(n,e){var t,r;if(e===void 0&&(e=!0),(0,fb.isNativeInput)(n)){n.focus();var o=e?0:n.value.length;n.setSelectionRange(o,o)}else{var i=document.createRange(),s=window.getSelection();if(!s)return;var c=function(a){var u=document.createTextNode("");a.appendChild(u),i.setStart(u,0),i.setEnd(u,0)},f=function(a){return a!=null},d=n.childNodes,g=e?d[0]:d[d.length-1];if(f(g)){for(;f(g)&&g.nodeType!==Node.TEXT_NODE;)g=e?g.firstChild:g.lastChild;if(f(g)&&g.nodeType===Node.TEXT_NODE){var l=(r=(t=g.textContent)===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0,o=e?0:l;i.setStart(g,o),i.setEnd(g,o)}else c(n)}else c(n);s.removeAllRanges(),s.addRange(i)}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.focus=void 0;var e=Lo;Object.defineProperty(n,"focus",{enumerable:!0,get:function(){return e.focus}})})(xl);var Bo={},Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.getCaretNodeAndOffset=gb;function gb(){var n=window.getSelection();if(n===null)return[null,0];var e=n.focusNode,t=n.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[t]!==void 0?(e=e.childNodes[t],t=0):(e=e.childNodes[t-1],e.textContent!==null&&(t=e.textContent.length))),[e,t])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCaretNodeAndOffset=void 0;var e=Un;Object.defineProperty(n,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return e.getCaretNodeAndOffset}})})(Bo);var El={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.getRange=vb;function vb(){var n=window.getSelection();return n&&n.rangeCount?n.getRangeAt(0):null}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRange=void 0;var e=zn;Object.defineProperty(n,"getRange",{enumerable:!0,get:function(){return e.getRange}})})(El);var _l={},Po={};Object.defineProperty(Po,"__esModule",{value:!0});Po.isCaretAtEndOfInput=bb;var zs=ht,mb=Bo,yb=Gr;function bb(n){var e=(0,zs.getDeepestNode)(n,!0);if(e===null)return!0;if((0,zs.isNativeInput)(e))return e.selectionEnd===e.value.length;var t=(0,mb.getCaretNodeAndOffset)(),r=t[0],o=t[1];return r===null?!1:(0,yb.checkContenteditableSliceForEmptiness)(n,r,o,"right")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCaretAtEndOfInput=void 0;var e=Po;Object.defineProperty(n,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return e.isCaretAtEndOfInput}})})(_l);var Ol={},Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.isCaretAtStartOfInput=xb;var Qt=ht,wb=Un,kb=Rn;function xb(n){var e=(0,Qt.getDeepestNode)(n);if(e===null||(0,Qt.isEmpty)(n))return!0;if((0,Qt.isNativeInput)(e))return e.selectionEnd===0;if((0,Qt.isEmpty)(n))return!0;var t=(0,wb.getCaretNodeAndOffset)(),r=t[0],o=t[1];return r===null?!1:(0,kb.checkContenteditableSliceForEmptiness)(n,r,o,"left")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCaretAtStartOfInput=void 0;var e=Mo;Object.defineProperty(n,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return e.isCaretAtStartOfInput}})})(Ol);var Tl={},No={};Object.defineProperty(No,"__esModule",{value:!0});No.save=Ob;var Eb=ht,_b=zn;function Ob(){var n=(0,_b.getRange)(),e=(0,Eb.make)("span");if(e.id="cursor",e.hidden=!0,!!n)return n.insertNode(e),function(){var t=window.getSelection();t&&(n.setStartAfter(e),n.setEndAfter(e),t.removeAllRanges(),t.addRange(n),setTimeout(function(){e.remove()},150))}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.save=void 0;var e=No;Object.defineProperty(n,"save",{enumerable:!0,get:function(){return e.save}})})(Tl);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.save=n.isCaretAtStartOfInput=n.isCaretAtEndOfInput=n.getRange=n.getCaretNodeAndOffset=n.focus=n.getContenteditableSlice=n.checkContenteditableSliceForEmptiness=void 0;var e=Gr;Object.defineProperty(n,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}});var t=kl;Object.defineProperty(n,"getContenteditableSlice",{enumerable:!0,get:function(){return t.getContenteditableSlice}});var r=xl;Object.defineProperty(n,"focus",{enumerable:!0,get:function(){return r.focus}});var o=Bo;Object.defineProperty(n,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return o.getCaretNodeAndOffset}});var i=El;Object.defineProperty(n,"getRange",{enumerable:!0,get:function(){return i.getRange}});var s=_l;Object.defineProperty(n,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return s.isCaretAtEndOfInput}});var c=Ol;Object.defineProperty(n,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return c.isCaretAtStartOfInput}});var f=Tl;Object.defineProperty(n,"save",{enumerable:!0,get:function(){return f.save}})})(rl);class Tb extends ue{keydown(e){switch(this.beforeKeydownProcessing(e),e.keyCode){case re.BACKSPACE:this.backspace(e);break;case re.DELETE:this.delete(e);break;case re.ENTER:this.enter(e);break;case re.DOWN:case re.RIGHT:this.arrowRightAndDown(e);break;case re.UP:case re.LEFT:this.arrowLeftAndUp(e);break;case re.TAB:this.tabPressed(e);break}e.key==="/"&&!e.ctrlKey&&!e.metaKey&&this.slashPressed(e),e.code==="Slash"&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.commandSlashPressed())}beforeKeydownProcessing(e){this.needToolbarClosing(e)&&_a(e.keyCode)&&(this.Editor.Toolbar.close(),e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||this.Editor.BlockSelection.clearSelection(e))}keyup(e){e.shiftKey||this.Editor.UI.checkEmptiness()}dragOver(e){const t=this.Editor.BlockManager.getBlockByChildNode(e.target);t.dropTarget=!0}dragLeave(e){const t=this.Editor.BlockManager.getBlockByChildNode(e.target);t.dropTarget=!1}handleCommandC(e){const{BlockSelection:t}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e)}handleCommandX(e){const{BlockSelection:t,BlockManager:r,Caret:o}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e).then(()=>{const i=r.removeSelectedBlocks(),s=r.insertDefaultBlockAtIndex(i,!0);o.setToBlock(s,o.positions.START),t.clearSelection(e)})}tabPressed(e){const{InlineToolbar:t,Caret:r}=this.Editor;t.opened||(e.shiftKey?r.navigatePrevious(!0):r.navigateNext(!0))&&e.preventDefault()}commandSlashPressed(){this.Editor.BlockSelection.selectedBlocks.length>1||this.activateBlockSettings()}slashPressed(e){this.Editor.BlockManager.currentBlock.isEmpty&&(e.preventDefault(),this.Editor.Caret.insertContentAtCaretPosition("/"),this.activateToolbox())}enter(e){const{BlockManager:t,UI:r}=this.Editor,o=t.currentBlock;if(o===void 0||o.tool.isLineBreaksEnabled||r.someToolbarOpened&&r.someFlipperButtonFocused||e.shiftKey&&!Tr)return;let i=o;o.currentInput!==void 0&&sn(o.currentInput)&&!o.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):o.currentInput&&an(o.currentInput)?i=this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):i=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(i),this.Editor.Toolbar.moveAndOpen(i),e.preventDefault()}backspace(e){const{BlockManager:t,Caret:r}=this.Editor,{currentBlock:o,previousBlock:i}=t;if(!(o===void 0||!te.isCollapsed||!o.currentInput||!sn(o.currentInput))){if(e.preventDefault(),this.Editor.Toolbar.close(),o.currentInput!==o.firstInput){r.navigatePrevious();return}if(i!==null){if(i.isEmpty){t.removeBlock(i);return}if(o.isEmpty){t.removeBlock(o);const s=t.currentBlock;r.setToBlock(s,r.positions.END);return}Ds(i,o)?this.mergeBlocks(i,o):r.setToBlock(i,r.positions.END)}}}delete(e){const{BlockManager:t,Caret:r}=this.Editor,{currentBlock:o,nextBlock:i}=t;if(!(!te.isCollapsed||!an(o.currentInput))){if(e.preventDefault(),this.Editor.Toolbar.close(),o.currentInput!==o.lastInput){r.navigateNext();return}if(i!==null){if(i.isEmpty){t.removeBlock(i);return}if(o.isEmpty){t.removeBlock(o),r.setToBlock(i,r.positions.START);return}Ds(o,i)?this.mergeBlocks(o,i):r.setToBlock(i,r.positions.START)}}}mergeBlocks(e,t){const{BlockManager:r,Toolbar:o}=this.Editor;e.lastInput!==void 0&&(rl.focus(e.lastInput,!1),r.mergeBlocks(e,t).then(()=>{o.close()}))}arrowRightAndDown(e){const t=_n.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===re.TAB);if(this.Editor.UI.someToolbarOpened&&t)return;this.Editor.Toolbar.close();const{currentBlock:r}=this.Editor.BlockManager,o=((r==null?void 0:r.currentInput)!==void 0?an(r.currentInput):void 0)||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===re.DOWN&&o){this.Editor.CrossBlockSelection.toggleBlockSelectedState();return}if(e.keyCode===re.DOWN||e.keyCode===re.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious()){e.preventDefault();return}bn(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}arrowLeftAndUp(e){if(this.Editor.UI.someToolbarOpened){if(_n.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===re.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.Toolbar.close();const{currentBlock:t}=this.Editor.BlockManager,r=((t==null?void 0:t.currentInput)!==void 0?sn(t.currentInput):void 0)||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===re.UP&&r){this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);return}if(e.keyCode===re.UP||e.keyCode===re.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext()){e.preventDefault();return}bn(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}needToolbarClosing(e){const t=e.keyCode===re.ENTER&&this.Editor.Toolbar.toolbox.opened,r=e.keyCode===re.ENTER&&this.Editor.BlockSettings.opened,o=e.keyCode===re.ENTER&&this.Editor.InlineToolbar.opened,i=e.keyCode===re.TAB;return!(e.shiftKey||i||t||r||o)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}}let fr=class{constructor(e){this.blocks=[],this.workingArea=e}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return Oa(this.workingArea.children)}static set(e,t,r){return isNaN(Number(t))?(Reflect.set(e,t,r),!0):(e.insert(+t,r),!0)}static get(e,t){return isNaN(Number(t))?Reflect.get(e,t):e.get(+t)}push(e){this.blocks.push(e),this.insertToDOM(e)}swap(e,t){const r=this.blocks[t];V.swap(this.blocks[e].holder,r.holder),this.blocks[t]=this.blocks[e],this.blocks[e]=r}move(e,t){const r=this.blocks.splice(t,1)[0],o=e-1,i=Math.max(0,o),s=this.blocks[i];e>0?this.insertToDOM(r,"afterend",s):this.insertToDOM(r,"beforebegin",s),this.blocks.splice(e,0,r);const c=this.composeBlockEvent("move",{fromIndex:t,toIndex:e});r.call(Ve.MOVED,c)}insert(e,t,r=!1){if(!this.length){this.push(t);return}e>this.length&&(e=this.length),r&&(this.blocks[e].holder.remove(),this.blocks[e].call(Ve.REMOVED));const o=r?1:0;if(this.blocks.splice(e,o,t),e>0){const i=this.blocks[e-1];this.insertToDOM(t,"afterend",i)}else{const i=this.blocks[e+1];i?this.insertToDOM(t,"beforebegin",i):this.insertToDOM(t)}}replace(e,t){if(this.blocks[e]===void 0)throw Error("Incorrect index");this.blocks[e].holder.replaceWith(t.holder),this.blocks[e]=t}insertMany(e,t){const r=new DocumentFragment;for(const o of e)r.appendChild(o.holder);if(this.length>0){if(t>0){const o=Math.min(t-1,this.length-1);this.blocks[o].holder.after(r)}else t===0&&this.workingArea.prepend(r);this.blocks.splice(t,0,...e)}else this.blocks.push(...e),this.workingArea.appendChild(r);e.forEach(o=>o.call(Ve.RENDERED))}remove(e){isNaN(e)&&(e=this.length-1),this.blocks[e].holder.remove(),this.blocks[e].call(Ve.REMOVED),this.blocks.splice(e,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach(e=>e.call(Ve.REMOVED)),this.blocks.length=0}insertAfter(e,t){const r=this.blocks.indexOf(e);this.insert(r+1,t)}get(e){return this.blocks[e]}indexOf(e){return this.blocks.indexOf(e)}insertToDOM(e,t,r){t?r.holder.insertAdjacentElement(t,e.holder):this.workingArea.appendChild(e.holder),e.call(Ve.RENDERED)}composeBlockEvent(e,t){return new CustomEvent(e,{detail:t})}};const Ws="block-removed",Ks="block-added",Cb="block-moved",Vs="block-changed";class Sb{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((t,r)=>{this.completed=this.completed.then(e).then(t).catch(r)})}}class Ab extends ue{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(e){this._currentBlockIndex=e}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(e){this.currentBlockIndex=this.getBlockIndex(e)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find(e=>!!e.inputs.length)}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(e=>!!e.inputs.length)}get previousBlock(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every(e=>e.isEmpty)}prepare(){const e=new fr(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(e,{set:fr.set,get:fr.get}),this.listeners.on(document,"copy",t=>this.Editor.BlockEvents.handleCommandC(t))}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:e,data:t={},id:r=void 0,tunes:o={}}){const i=this.Editor.ReadOnly.isEnabled,s=this.Editor.Tools.blockTools.get(e),c=new Ge({id:r,data:t,tool:s,api:this.Editor.API,readOnly:i,tunesData:o},this.eventsDispatcher);return i||window.requestIdleCallback(()=>{this.bindBlockEvents(c)},{timeout:2e3}),c}insert({id:e=void 0,tool:t=this.config.defaultBlock,data:r={},index:o,needToFocus:i=!0,replace:s=!1,tunes:c={}}={}){let f=o;f===void 0&&(f=this.currentBlockIndex+(s?0:1));const d=this.composeBlock({id:e,tool:t,data:r,tunes:c});return s&&this.blockDidMutated(Ws,this.getBlockByIndex(f),{index:f}),this._blocks.insert(f,d,s),this.blockDidMutated(Ks,d,{index:f}),i?this.currentBlockIndex=f:f<=this.currentBlockIndex&&this.currentBlockIndex++,d}insertMany(e,t=0){this._blocks.insertMany(e,t)}async update(e,t,r){if(!t&&!r)return e;const o=await e.data,i=this.composeBlock({id:e.id,tool:e.name,data:Object.assign({},o,t??{}),tunes:r??e.tunes}),s=this.getBlockIndex(e);return this._blocks.replace(s,i),this.blockDidMutated(Vs,i,{index:s}),i}replace(e,t,r){const o=this.getBlockIndex(e);return this.insert({tool:t,data:r,index:o,replace:!0})}paste(e,t,r=!1){const o=this.insert({tool:e,replace:r});try{window.requestIdleCallback(()=>{o.call(Ve.ON_PASTE,t)})}catch(i){de(`${e}: onPaste callback call is failed`,"error",i)}return o}insertDefaultBlockAtIndex(e,t=!1){const r=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[e]=r,this.blockDidMutated(Ks,r,{index:e}),t?this.currentBlockIndex=e:e<=this.currentBlockIndex&&this.currentBlockIndex++,r}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(e,t){let r;if(e.name===t.name&&e.mergeable){const o=await t.data;if(Re(o)){console.error("Could not merge Block. Failed to extract original Block data.");return}const[i]=Hr([o],e.tool.sanitizeConfig);r=i}else if(e.mergeable&&kn(t,"export")&&kn(e,"import")){const o=await t.exportDataAsString(),i=qe(o,e.tool.sanitizeConfig);r=$s(i,e.tool.conversionConfig)}r!==void 0&&(await e.mergeWith(r),this.removeBlock(t),this.currentBlockIndex=this._blocks.indexOf(e))}removeBlock(e,t=!0){return new Promise(r=>{const o=this._blocks.indexOf(e);if(!this.validateIndex(o))throw new Error("Can't find a Block to remove");e.destroy(),this._blocks.remove(o),this.blockDidMutated(Ws,e,{index:o}),this.currentBlockIndex>=o&&this.currentBlockIndex--,this.blocks.length?o===0&&(this.currentBlockIndex=0):(this.unsetCurrentBlock(),t&&this.insert()),r()})}removeSelectedBlocks(){let e;for(let t=this.blocks.length-1;t>=0;t--)this.blocks[t].selected&&(this.removeBlock(this.blocks[t]),e=t);return e}removeAllBlocks(){for(let e=this.blocks.length-1;e>=0;e--)this._blocks.remove(e);this.unsetCurrentBlock(),this.insert(),this.currentBlock.firstInput.focus()}split(){const e=this.Editor.Caret.extractFragmentFromCaretPosition(),t=V.make("div");t.appendChild(e);const r={text:V.isEmpty(t)?"":t.innerHTML};return this.insert({data:r})}getBlockByIndex(e){return e===-1&&(e=this._blocks.length-1),this._blocks[e]}getBlockIndex(e){return this._blocks.indexOf(e)}getBlockById(e){return this._blocks.array.find(t=>t.id===e)}getBlock(e){V.isElement(e)||(e=e.parentNode);const t=this._blocks.nodes,r=e.closest(`.${Ge.CSS.wrapper}`),o=t.indexOf(r);if(o>=0)return this._blocks[o]}setCurrentBlockByChildNode(e){V.isElement(e)||(e=e.parentNode);const t=e.closest(`.${Ge.CSS.wrapper}`);if(!t)return;const r=t.closest(`.${this.Editor.UI.CSS.editorWrapper}`);if(r!=null&&r.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(t),this.currentBlock.updateCurrentInput(),this.currentBlock}getBlockByChildNode(e){if(!e||!(e instanceof Node))return;V.isElement(e)||(e=e.parentNode);const t=e.closest(`.${Ge.CSS.wrapper}`);return this.blocks.find(r=>r.holder===t)}swap(e,t){this._blocks.swap(e,t),this.currentBlockIndex=t}move(e,t=this.currentBlockIndex){if(isNaN(e)||isNaN(t)){de("Warning during 'move' call: incorrect indices provided.","warn");return}if(!this.validateIndex(e)||!this.validateIndex(t)){de("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn");return}this._blocks.move(e,t),this.currentBlockIndex=e,this.blockDidMutated(Cb,this.currentBlock,{fromIndex:t,toIndex:e})}async convert(e,t,r){if(!await e.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const o=this.Editor.Tools.blockTools.get(t);if(!o)throw new Error(`Could not convert Block. Tool «${t}» not found.`);const i=await e.exportDataAsString(),s=qe(i,o.sanitizeConfig);let c=$s(s,o.conversionConfig,o.settings);return r&&(c=Object.assign(c,r)),this.replace(e,o.name,c)}unsetCurrentBlock(){this.currentBlockIndex=-1}async clear(e=!1){const t=new Sb;this.blocks.forEach(r=>{t.add(async()=>{await this.removeBlock(r,!1)})}),await t.completed,this.unsetCurrentBlock(),e&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map(e=>e.destroy()))}bindBlockEvents(e){const{BlockEvents:t}=this.Editor;this.readOnlyMutableListeners.on(e.holder,"keydown",r=>{t.keydown(r)}),this.readOnlyMutableListeners.on(e.holder,"keyup",r=>{t.keyup(r)}),this.readOnlyMutableListeners.on(e.holder,"dragover",r=>{t.dragOver(r)}),this.readOnlyMutableListeners.on(e.holder,"dragleave",r=>{t.dragLeave(r)}),e.on("didMutated",r=>this.blockDidMutated(Vs,r,{index:this.getBlockIndex(r)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",e=>this.Editor.BlockEvents.handleCommandX(e)),this.blocks.forEach(e=>{this.bindBlockEvents(e)})}validateIndex(e){return!(e<0||e>=this._blocks.length)}blockDidMutated(e,t,r){const o=new CustomEvent(e,{detail:{target:new Ke(t),...r}});return this.eventsDispatcher.emit(Pa,{event:o}),t}}class Lb extends ue{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:e}=this.Editor;return e.blocks.every(t=>t.selected===!0)}set allBlocksSelected(e){const{BlockManager:t}=this.Editor;t.blocks.forEach(r=>{r.selected=e}),this.clearCache()}get anyBlockSelected(){const{BlockManager:e}=this.Editor;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=e.blocks.some(t=>t.selected===!0)),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter(e=>e.selected)}prepare(){this.selection=new te,Tt.add({name:"CMD+A",handler:e=>{const{BlockManager:t,ReadOnly:r}=this.Editor;if(r.isEnabled){e.preventDefault(),this.selectAllBlocks();return}t.currentBlock&&this.handleCommandA(e)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){te.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(e){const{BlockManager:t}=this.Editor;let r;isNaN(e)?r=t.currentBlock:r=t.getBlockByIndex(e),r.selected=!1,this.clearCache()}clearSelection(e,t=!1){const{BlockManager:r,Caret:o,RectangleSelection:i}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const s=e&&e instanceof KeyboardEvent,c=s&&_a(e.keyCode);if(this.anyBlockSelected&&s&&c&&!te.isSelectionExists){const f=r.removeSelectedBlocks();r.insertDefaultBlockAtIndex(f,!0),o.setToBlock(r.currentBlock),bn(()=>{const d=e.key;o.insertContentAtCaretPosition(d.length>1?"":d)},20)()}if(this.Editor.CrossBlockSelection.clear(e),!this.anyBlockSelected||i.isRectActivated()){this.Editor.RectangleSelection.clearSelection();return}t&&this.selection.restore(),this.allBlocksSelected=!1}copySelectedBlocks(e){e.preventDefault();const t=V.make("div");this.selectedBlocks.forEach(i=>{const s=qe(i.holder.innerHTML,this.sanitizerConfig),c=V.make("p");c.innerHTML=s,t.appendChild(c)});const r=Array.from(t.childNodes).map(i=>i.textContent).join(`

`),o=t.innerHTML;return e.clipboardData.setData("text/plain",r),e.clipboardData.setData("text/html",o),Promise.all(this.selectedBlocks.map(i=>i.save())).then(i=>{try{e.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(i))}catch{}})}selectBlockByIndex(e){const{BlockManager:t}=this.Editor,r=t.getBlockByIndex(e);r!==void 0&&this.selectBlock(r)}selectBlock(e){this.selection.save(),te.get().removeAllRanges(),e.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}unselectBlock(e){e.selected=!1,this.clearCache()}clearCache(){this.anyBlockSelectedCache=null}destroy(){Tt.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(e){if(this.Editor.RectangleSelection.clearSelection(),V.isNativeInput(e.target)&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}const t=this.Editor.BlockManager.getBlock(e.target),r=t.inputs;if(r.length>1&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}if(r.length===1&&!this.needToSelectAll){this.needToSelectAll=!0;return}this.needToSelectAll?(e.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1):this.readyToBlockSelection&&(e.preventDefault(),this.selectBlock(t),this.needToSelectAll=!0)}selectAllBlocks(){this.selection.save(),te.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}}let Bb=class Pr extends ue{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}setToBlock(e,t=this.positions.DEFAULT,r=0){var o;const{BlockManager:i,BlockSelection:s}=this.Editor;if(s.clearSelection(),!e.focusable){(o=window.getSelection())==null||o.removeAllRanges(),s.selectBlock(e),i.currentBlock=e;return}let c;switch(t){case this.positions.START:c=e.firstInput;break;case this.positions.END:c=e.lastInput;break;default:c=e.currentInput}if(!c)return;const f=V.getDeepestNode(c,t===this.positions.END),d=V.getContentLength(f);switch(!0){case t===this.positions.START:r=0;break;case t===this.positions.END:case r>d:r=d;break}this.set(f,r),i.setCurrentBlockByChildNode(e.holder),i.currentBlock.currentInput=c}setToInput(e,t=this.positions.DEFAULT,r=0){const{currentBlock:o}=this.Editor.BlockManager,i=V.getDeepestNode(e);switch(t){case this.positions.START:this.set(i,0);break;case this.positions.END:this.set(i,V.getContentLength(i));break;default:r&&this.set(i,r)}o.currentInput=e}set(e,t=0){const{top:r,bottom:o}=te.setCursor(e,t),{innerHeight:i}=window;r<0?window.scrollBy(0,r-30):o>i&&window.scrollBy(0,o-i+30)}setToTheLastBlock(){const e=this.Editor.BlockManager.lastBlock;if(e)if(e.tool.isDefault&&e.isEmpty)this.setToBlock(e);else{const t=this.Editor.BlockManager.insertAtEnd();this.setToBlock(t)}}extractFragmentFromCaretPosition(){const e=te.get();if(e.rangeCount){const t=e.getRangeAt(0),r=this.Editor.BlockManager.currentBlock.currentInput;if(t.deleteContents(),r)if(V.isNativeInput(r)){const o=r,i=document.createDocumentFragment(),s=o.value.substring(0,o.selectionStart),c=o.value.substring(o.selectionStart);return i.textContent=c,o.value=s,i}else{const o=t.cloneRange();return o.selectNodeContents(r),o.setStart(t.endContainer,t.endOffset),o.extractContents()}}}navigateNext(e=!1){const{BlockManager:t}=this.Editor,{currentBlock:r,nextBlock:o}=t;if(r===void 0)return!1;const{nextInput:i,currentInput:s}=r,c=s!==void 0?an(s):void 0;let f=o;const d=e||c||!r.focusable;if(i&&d)return this.setToInput(i,this.positions.START),!0;if(f===null){if(r.tool.isDefault||!d)return!1;f=t.insertAtEnd()}return d?(this.setToBlock(f,this.positions.START),!0):!1}navigatePrevious(e=!1){const{currentBlock:t,previousBlock:r}=this.Editor.BlockManager;if(!t)return!1;const{previousInput:o,currentInput:i}=t,s=i!==void 0?sn(i):void 0,c=e||s||!t.focusable;return o&&c?(this.setToInput(o,this.positions.END),!0):r!==null&&c?(this.setToBlock(r,this.positions.END),!0):!1}createShadow(e){const t=document.createElement("span");t.classList.add(Pr.CSS.shadowCaret),e.insertAdjacentElement("beforeend",t)}restoreCaret(e){const t=e.querySelector(`.${Pr.CSS.shadowCaret}`);if(!t)return;new te().expandToTag(t);const r=document.createRange();r.selectNode(t),r.extractContents()}insertContentAtCaretPosition(e){const t=document.createDocumentFragment(),r=document.createElement("div"),o=te.get(),i=te.range;r.innerHTML=e,Array.from(r.childNodes).forEach(d=>t.appendChild(d)),t.childNodes.length===0&&t.appendChild(new Text);const s=t.lastChild;i.deleteContents(),i.insertNode(t);const c=document.createRange(),f=s.nodeType===Node.TEXT_NODE?s:s.firstChild;f!==null&&f.textContent!==null&&c.setStart(f,f.textContent.length),o.removeAllRanges(),o.addRange(c)}};class Pb extends ue{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=e=>{const{BlockManager:t,BlockSelection:r}=this.Editor;if(e.relatedTarget===null&&e.target===null)return;const o=t.getBlockByChildNode(e.relatedTarget)||this.lastSelectedBlock,i=t.getBlockByChildNode(e.target);if(!(!o||!i)&&i!==o){if(o===this.firstSelectedBlock){te.get().removeAllRanges(),o.selected=!0,i.selected=!0,r.clearCache();return}if(i===this.firstSelectedBlock){o.selected=!1,i.selected=!1,r.clearCache();return}this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(o,i),this.lastSelectedBlock=i}}}async prepare(){this.listeners.on(document,"mousedown",e=>{this.enableCrossBlockSelection(e)})}watchSelection(e){if(e.button!==mv.LEFT)return;const{BlockManager:t}=this.Editor;this.firstSelectedBlock=t.getBlock(e.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock&&this.firstSelectedBlock!==this.lastSelectedBlock}toggleBlockSelectedState(e=!0){const{BlockManager:t,BlockSelection:r}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=t.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,r.clearCache(),te.get().removeAllRanges());const o=t.blocks.indexOf(this.lastSelectedBlock)+(e?1:-1),i=t.blocks[o];i&&(this.lastSelectedBlock.selected!==i.selected?(i.selected=!0,r.clearCache()):(this.lastSelectedBlock.selected=!1,r.clearCache()),this.lastSelectedBlock=i,this.Editor.InlineToolbar.close(),i.holder.scrollIntoView({block:"nearest"}))}clear(e){const{BlockManager:t,BlockSelection:r,Caret:o}=this.Editor,i=t.blocks.indexOf(this.firstSelectedBlock),s=t.blocks.indexOf(this.lastSelectedBlock);if(r.anyBlockSelected&&i>-1&&s>-1&&e&&e instanceof KeyboardEvent)switch(e.keyCode){case re.DOWN:case re.RIGHT:o.setToBlock(t.blocks[Math.max(i,s)],o.positions.END);break;case re.UP:case re.LEFT:o.setToBlock(t.blocks[Math.min(i,s)],o.positions.START);break;default:o.setToBlock(t.blocks[Math.max(i,s)],o.positions.END)}this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(e){const{UI:t}=this.Editor;te.isCollapsed||this.Editor.BlockSelection.clearSelection(e),t.nodes.redactor.contains(e.target)?this.watchSelection(e):this.Editor.BlockSelection.clearSelection(e)}toggleBlocksSelectedState(e,t){const{BlockManager:r,BlockSelection:o}=this.Editor,i=r.blocks.indexOf(e),s=r.blocks.indexOf(t),c=e.selected!==t.selected;for(let f=Math.min(i,s);f<=Math.max(i,s);f++){const d=r.blocks[f];d!==this.firstSelectedBlock&&d!==(c?e:t)&&(r.blocks[f].selected=!r.blocks[f].selected,o.clearCache())}}}class Mb extends ue{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:e}=this.Editor;this.readOnlyMutableListeners.on(e.nodes.holder,"drop",async t=>{await this.processDrop(t)},!0),this.readOnlyMutableListeners.on(e.nodes.holder,"dragstart",()=>{this.processDragStart()}),this.readOnlyMutableListeners.on(e.nodes.holder,"dragover",t=>{this.processDragOver(t)},!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(e){const{BlockManager:t,Paste:r,Caret:o}=this.Editor;e.preventDefault(),t.blocks.forEach(s=>{s.dropTarget=!1}),te.isAtEditor&&!te.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const i=t.setCurrentBlockByChildNode(e.target);if(i)this.Editor.Caret.setToBlock(i,o.positions.END);else{const s=t.setCurrentBlockByChildNode(t.lastBlock.holder);this.Editor.Caret.setToBlock(s,o.positions.END)}await r.processDataTransfer(e.dataTransfer,!0)}processDragStart(){te.isAtEditor&&!te.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(e){e.preventDefault()}}const Nb=180,Ib=400;class jb extends ue{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=Ib,this.mutationObserver=new MutationObserver(r=>{this.redactorChanged(r)}),this.eventsDispatcher.on(Pa,r=>{this.particularBlockChanged(r.event)}),this.eventsDispatcher.on(Ma,()=>{this.disable()}),this.eventsDispatcher.on(Na,()=>{this.enable()})}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(e){this.disabled||!me(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${e.detail.target.id}:event:${e.type}`,e),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout(()=>{let t;this.batchingOnChangeQueue.size===1?t=this.batchingOnChangeQueue.values().next().value:t=Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,t),this.batchingOnChangeQueue.clear()},this.batchTime))}redactorChanged(e){this.eventsDispatcher.emit(Cr,{mutations:e})}}const Cl=class Sl extends ue{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=e=>{try{const t=e.create({},{},!1);if(e.pasteConfig===!1){this.exceptionList.push(e.name);return}if(!me(t.onPaste))return;this.getTagsConfig(e),this.getFilesConfig(e),this.getPatternsConfig(e)}catch(t){de(`Paste handling for «${e.name}» Tool hasn't been set up because of the error`,"warn",t)}},this.handlePasteEvent=async e=>{const{BlockManager:t,Toolbar:r}=this.Editor,o=t.setCurrentBlockByChildNode(e.target);!o||this.isNativeBehaviour(e.target)&&!e.clipboardData.types.includes("Files")||o&&this.exceptionList.includes(o.name)||(e.preventDefault(),this.processDataTransfer(e.clipboardData),r.close())}}async prepare(){this.processTools()}toggleReadOnly(e){e?this.unsetCallback():this.setCallback()}async processDataTransfer(e,t=!1){const{Tools:r}=this.Editor,o=e.types;if((o.includes?o.includes("Files"):o.contains("Files"))&&!Re(this.toolsFiles)){await this.processFiles(e.files);return}const i=e.getData(this.MIME_TYPE),s=e.getData("text/plain");let c=e.getData("text/html");if(i)try{this.insertEditorJSData(JSON.parse(i));return}catch{}t&&s.trim()&&c.trim()&&(c="<p>"+(c.trim()?c:s)+"</p>");const f=Object.keys(this.toolsTags).reduce((l,a)=>(l[a.toLowerCase()]=this.toolsTags[a].sanitizationConfig??{},l),{}),d=Object.assign({},f,r.getAllInlineToolsSanitizeConfig(),{br:{}}),g=qe(c,d);!g.trim()||g.trim()===s||!V.isHTMLString(g)?await this.processText(s):await this.processText(g,!0)}async processText(e,t=!1){const{Caret:r,BlockManager:o}=this.Editor,i=t?this.processHTML(e):this.processPlain(e);if(!i.length)return;if(i.length===1){i[0].isBlock?this.processSingleBlock(i.pop()):this.processInlinePaste(i.pop());return}const s=o.currentBlock&&o.currentBlock.tool.isDefault&&o.currentBlock.isEmpty;i.map(async(c,f)=>this.insertBlock(c,f===0&&s)),o.currentBlock&&r.setToBlock(o.currentBlock,r.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const e=this.Editor.Tools.blockTools;Array.from(e.values()).forEach(this.processTool)}collectTagNames(e){return Ye(e)?[e]:Ee(e)?Object.keys(e):[]}getTagsConfig(e){if(e.pasteConfig===!1)return;const t=e.pasteConfig.tags||[],r=[];t.forEach(o=>{const i=this.collectTagNames(o);r.push(...i),i.forEach(s=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,s)){de(`Paste handler for «${e.name}» Tool on «${s}» tag is skipped because it is already used by «${this.toolsTags[s].tool.name}» Tool.`,"warn");return}const c=Ee(o)?o[s]:null;this.toolsTags[s.toUpperCase()]={tool:e,sanitizationConfig:c}})}),this.tagsByTool[e.name]=r.map(o=>o.toUpperCase())}getFilesConfig(e){if(e.pasteConfig===!1)return;const{files:t={}}=e.pasteConfig;let{extensions:r,mimeTypes:o}=t;!r&&!o||(r&&!Array.isArray(r)&&(de(`«extensions» property of the onDrop config for «${e.name}» Tool should be an array`),r=[]),o&&!Array.isArray(o)&&(de(`«mimeTypes» property of the onDrop config for «${e.name}» Tool should be an array`),o=[]),o&&(o=o.filter(i=>xv(i)?!0:(de(`MIME type value «${i}» for the «${e.name}» Tool is not a valid MIME type`,"warn"),!1))),this.toolsFiles[e.name]={extensions:r||[],mimeTypes:o||[]})}getPatternsConfig(e){e.pasteConfig===!1||!e.pasteConfig.patterns||Re(e.pasteConfig.patterns)||Object.entries(e.pasteConfig.patterns).forEach(([t,r])=>{r instanceof RegExp||de(`Pattern ${r} for «${e.name}» Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:t,pattern:r,tool:e})})}isNativeBehaviour(e){return V.isNativeInput(e)}async processFiles(e){const{BlockManager:t}=this.Editor;let r;r=await Promise.all(Array.from(e).map(i=>this.processFile(i))),r=r.filter(i=>!!i);const o=t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty;r.forEach((i,s)=>{t.paste(i.type,i.event,s===0&&o)})}async processFile(e){const t=kv(e),r=Object.entries(this.toolsFiles).find(([i,{mimeTypes:s,extensions:c}])=>{const[f,d]=e.type.split("/"),g=c.find(a=>a.toLowerCase()===t.toLowerCase()),l=s.find(a=>{const[u,p]=a.split("/");return u===f&&(p===d||p==="*")});return!!g||!!l});if(!r)return;const[o]=r;return{event:this.composePasteEvent("file",{file:e}),type:o}}processHTML(e){const{Tools:t}=this.Editor,r=V.make("DIV");return r.innerHTML=e,this.getNodes(r).map(o=>{let i,s=t.defaultTool,c=!1;switch(o.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:i=V.make("div"),i.appendChild(o);break;case Node.ELEMENT_NODE:i=o,c=!0,this.toolsTags[i.tagName]&&(s=this.toolsTags[i.tagName].tool);break}const{tags:f}=s.pasteConfig||{tags:[]},d=f.reduce((a,u)=>(this.collectTagNames(u).forEach(p=>{const b=Ee(u)?u[p]:null;a[p.toLowerCase()]=b||{}}),a),{}),g=Object.assign({},d,s.baseSanitizeConfig);if(i.tagName.toLowerCase()==="table"){const a=qe(i.outerHTML,g);i=V.make("div",void 0,{innerHTML:a}).firstChild}else i.innerHTML=qe(i.innerHTML,g);const l=this.composePasteEvent("tag",{data:i});return{content:i,isBlock:c,tool:s.name,event:l}}).filter(o=>{const i=V.isEmpty(o.content),s=V.isSingleTag(o.content);return!i||s})}processPlain(e){const{defaultBlock:t}=this.config;if(!e)return[];const r=t;return e.split(/\r?\n/).filter(o=>o.trim()).map(o=>{const i=V.make("div");i.textContent=o;const s=this.composePasteEvent("tag",{data:i});return{content:i,tool:r,isBlock:!1,event:s}})}async processSingleBlock(e){const{Caret:t,BlockManager:r}=this.Editor,{currentBlock:o}=r;if(!o||e.tool!==o.name||!V.containsOnlyInlineElements(e.content.innerHTML)){this.insertBlock(e,(o==null?void 0:o.tool.isDefault)&&o.isEmpty);return}t.insertContentAtCaretPosition(e.content.innerHTML)}async processInlinePaste(e){const{BlockManager:t,Caret:r}=this.Editor,{content:o}=e;if(t.currentBlock&&t.currentBlock.tool.isDefault&&o.textContent.length<Sl.PATTERN_PROCESSING_MAX_LENGTH){const i=await this.processPattern(o.textContent);if(i){const s=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty,c=t.paste(i.tool,i.event,s);r.setToBlock(c,r.positions.END);return}}if(t.currentBlock&&t.currentBlock.currentInput){const i=t.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,qe(o.innerHTML,i))}else this.insertBlock(e)}async processPattern(e){const t=this.toolsPatterns.find(r=>{const o=r.pattern.exec(e);return o?e===o.shift():!1});return t?{event:this.composePasteEvent("pattern",{key:t.key,data:e}),tool:t.tool.name}:void 0}insertBlock(e,t=!1){const{BlockManager:r,Caret:o}=this.Editor,{currentBlock:i}=r;let s;if(t&&i&&i.isEmpty){s=r.paste(e.tool,e.event,!0),o.setToBlock(s,o.positions.END);return}s=r.paste(e.tool,e.event),o.setToBlock(s,o.positions.END)}insertEditorJSData(e){const{BlockManager:t,Caret:r,Tools:o}=this.Editor;Hr(e,i=>o.blockTools.get(i).sanitizeConfig).forEach(({tool:i,data:s},c)=>{let f=!1;c===0&&(f=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty);const d=t.insert({tool:i,data:s,replace:f});r.setToBlock(d,r.positions.END)})}processElementNode(e,t,r){const o=Object.keys(this.toolsTags),i=e,{tool:s}=this.toolsTags[i.tagName]||{},c=this.tagsByTool[s==null?void 0:s.name]||[],f=o.includes(i.tagName),d=V.blockElements.includes(i.tagName.toLowerCase()),g=Array.from(i.children).some(({tagName:a})=>o.includes(a)&&!c.includes(a)),l=Array.from(i.children).some(({tagName:a})=>V.blockElements.includes(a.toLowerCase()));if(!d&&!f&&!g)return r.appendChild(i),[...t,r];if(f&&!g||d&&!l&&!g)return[...t,r,i]}getNodes(e){const t=Array.from(e.childNodes);let r;const o=(i,s)=>{if(V.isEmpty(s)&&!V.isSingleTag(s))return i;const c=i[i.length-1];let f=new DocumentFragment;switch(c&&V.isFragment(c)&&(f=i.pop()),s.nodeType){case Node.ELEMENT_NODE:if(r=this.processElementNode(s,i,f),r)return r;break;case Node.TEXT_NODE:return f.appendChild(s),[...i,f];default:return[...i,f]}return[...i,...Array.from(s.childNodes).reduce(o,[])]};return t.reduce(o,[])}composePasteEvent(e,t){return new CustomEvent(e,{detail:t})}};Cl.PATTERN_PROCESSING_MAX_LENGTH=450;let Rb=Cl;class Db extends ue{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:e}=this.Editor,{blockTools:t}=e,r=[];Array.from(t.entries()).forEach(([o,i])=>{i.isReadOnlySupported||r.push(o)}),this.toolsDontSupportReadOnly=r,this.config.readOnly&&r.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly,!0)}async toggle(e=!this.readOnlyEnabled,t=!1){e&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const r=this.readOnlyEnabled;this.readOnlyEnabled=e;for(const i in this.Editor)this.Editor[i].toggleReadOnly&&this.Editor[i].toggleReadOnly(e);if(r===e)return this.readOnlyEnabled;if(t)return this.readOnlyEnabled;this.Editor.ModificationsObserver.disable();const o=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(o.blocks),this.Editor.ModificationsObserver.enable(),this.readOnlyEnabled}throwCriticalError(){throw new La(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}}let $b=class cn extends ue{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(e,t){const r=document.elementFromPoint(e-window.pageXOffset,t-window.pageYOffset);r.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const o=[`.${Ge.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],i=r.closest("."+this.Editor.UI.CSS.editorWrapper),s=o.some(c=>!!r.closest(c));!i||s||(this.mousedown=!0,this.startX=e,this.startY=t)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:e}=this.genHTML();this.listeners.on(e,"mousedown",t=>{this.processMouseDown(t)},!1),this.listeners.on(document.body,"mousemove",Er(t=>{this.processMouseMove(t)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",()=>{this.processMouseLeave()}),this.listeners.on(window,"scroll",Er(t=>{this.processScroll(t)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",()=>{this.processMouseUp()},!1)}processMouseDown(e){e.button===this.MAIN_MOUSE_BUTTON&&(e.target.closest(V.allInputsSelector)!==null||this.startSelection(e.pageX,e.pageY))}processMouseMove(e){this.changingRectangle(e),this.scrollByZones(e.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(e){this.changingRectangle(e)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(e){if(this.inScrollZone=null,e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),!this.inScrollZone){this.isScrolling=!1;return}this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0)}genHTML(){const{UI:e}=this.Editor,t=e.nodes.holder.querySelector("."+e.CSS.editorWrapper),r=V.make("div",cn.CSS.overlay,{}),o=V.make("div",cn.CSS.overlayContainer,{}),i=V.make("div",cn.CSS.rect,{});return o.appendChild(i),r.appendChild(o),t.appendChild(r),this.overlayRectangle=i,{container:t,overlay:r}}scrollVertical(e){if(!(this.inScrollZone&&this.mousedown))return;const t=window.pageYOffset;window.scrollBy(0,e),this.mouseY+=window.pageYOffset-t,setTimeout(()=>{this.scrollVertical(e)},0)}changingRectangle(e){if(!this.mousedown)return;e.pageY!==void 0&&(this.mouseX=e.pageX,this.mouseY=e.pageY);const{rightPos:t,leftPos:r,index:o}=this.genInfoForMouseSelection(),i=this.startX>t&&this.mouseX>t,s=this.startX<r&&this.mouseX<r;this.rectCrossesBlocks=!(i||s),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),o!==void 0&&(this.trySelectNextBlock(o),this.inverseSelection(),te.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const e=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!e)for(const t of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(t);if(!this.rectCrossesBlocks&&e)for(const t of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(t)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=`${this.mouseY-window.pageYOffset}px`),this.mouseX>=this.startX?(this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=`${this.mouseX-window.pageXOffset}px`)}genInfoForMouseSelection(){const e=document.body.offsetWidth/2,t=this.mouseY-window.pageYOffset,r=document.elementFromPoint(e,t),o=this.Editor.BlockManager.getBlockByChildNode(r);let i;o!==void 0&&(i=this.Editor.BlockManager.blocks.findIndex(g=>g.holder===o.holder));const s=this.Editor.BlockManager.lastBlock.holder.querySelector("."+Ge.CSS.content),c=Number.parseInt(window.getComputedStyle(s).width,10)/2,f=e-c,d=e+c;return{index:i,leftPos:f,rightPos:d}}addBlockInSelection(e){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(e),this.stackOfSelected.push(e)}trySelectNextBlock(e){const t=this.stackOfSelected[this.stackOfSelected.length-1]===e,r=this.stackOfSelected.length,o=1,i=-1,s=0;if(t)return;const c=this.stackOfSelected[r-1]-this.stackOfSelected[r-2]>0;let f=s;r>1&&(f=c?o:i);const d=e>this.stackOfSelected[r-1]&&f===o,g=e<this.stackOfSelected[r-1]&&f===i,l=!(d||g||f===s);if(!l&&(e>this.stackOfSelected[r-1]||this.stackOfSelected[r-1]===void 0)){let p=this.stackOfSelected[r-1]+1||e;for(p;p<=e;p++)this.addBlockInSelection(p);return}if(!l&&e<this.stackOfSelected[r-1]){for(let p=this.stackOfSelected[r-1]-1;p>=e;p--)this.addBlockInSelection(p);return}if(!l)return;let a=r-1,u;for(e>this.stackOfSelected[r-1]?u=()=>e>this.stackOfSelected[a]:u=()=>e<this.stackOfSelected[a];u();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[a]),this.stackOfSelected.pop(),a--}};class Fb extends ue{async render(e){return new Promise(t=>{const{Tools:r,BlockManager:o}=this.Editor;if(e.length===0)o.insert();else{const i=e.map(({type:s,data:c,tunes:f,id:d})=>{r.available.has(s)===!1&&(je(`Tool «${s}» is not found. Check 'tools' property at the Editor.js config.`,"warn"),c=this.composeStubDataForTool(s,c,d),s=r.stubTool);let g;try{g=o.composeBlock({id:d,tool:s,data:c,tunes:f})}catch(l){de(`Block «${s}» skipped because of plugins error`,"error",{data:c,error:l}),c=this.composeStubDataForTool(s,c,d),s=r.stubTool,g=o.composeBlock({id:d,tool:s,data:c,tunes:f})}return g});o.insertMany(i)}window.requestIdleCallback(()=>{t()},{timeout:2e3})})}composeStubDataForTool(e,t,r){const{Tools:o}=this.Editor;let i=e;if(o.unavailable.has(e)){const s=o.unavailable.get(e).toolbox;s!==void 0&&s[0].title!==void 0&&(i=s[0].title)}return{savedData:{id:r,type:e,data:t},title:i}}}class Hb extends ue{async save(){const{BlockManager:e,Tools:t}=this.Editor,r=e.blocks,o=[];try{r.forEach(c=>{o.push(this.getSavedData(c))});const i=await Promise.all(o),s=await Hr(i,c=>t.blockTools.get(c).sanitizeConfig);return this.makeOutput(s)}catch(i){je("Saving failed due to the Error %o","error",i)}}async getSavedData(e){const t=await e.save(),r=t&&await e.validate(t.data);return{...t,isValid:r}}makeOutput(e){const t=[];return e.forEach(({id:r,tool:o,data:i,tunes:s,isValid:c})=>{if(!c){de(`Block «${o}» skipped because saved data is invalid`);return}if(o===this.Editor.Tools.stubTool){t.push(i);return}const f={id:r,type:o,data:i,...!Re(s)&&{tunes:s}};t.push(f)}),{time:+new Date,blocks:t,version:"2.31.0-rc.7"}}}(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-block:only-of-type .ce-paragraph[data-placeholder-active]:empty:before,.ce-block:only-of-type .ce-paragraph[data-placeholder-active][data-empty=true]:before{content:attr(data-placeholder-active)}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const qb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';function Ub(n){const e=document.createElement("div");e.innerHTML=n.trim();const t=document.createDocumentFragment();return t.append(...Array.from(e.childNodes)),t}/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */class Io{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:e,config:t,api:r,readOnly:o}){this.api=r,this.readOnly=o,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=t.placeholder?t.placeholder:Io.DEFAULT_PLACEHOLDER,this._data=e??{},this._element=null,this._preserveBlank=t.preserveBlank??!1}onKeyUp(e){if(e.code!=="Backspace"&&e.code!=="Delete"||!this._element)return;const{textContent:t}=this._element;t===""&&(this._element.innerHTML="")}drawView(){const e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable="false",e.dataset.placeholderActive=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable="true",e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){if(!this._element)return;this._data.text+=e.text;const t=Ub(e.text);this._element.appendChild(t),this._element.normalize()}validate(e){return!(e.text.trim()===""&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){const t={text:e.detail.data.innerHTML};this._data=t,window.requestAnimationFrame(()=>{this._element&&(this._element.innerHTML=this._data.text||"")})}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:qb,title:"Text"}}}class jo{constructor(){this.commandName="bold"}static get sanitize(){return{b:{}}}render(){return{icon:gm,name:"bold",onActivate:()=>{document.execCommand(this.commandName)},isActive:()=>document.queryCommandState(this.commandName)}}get shortcut(){return"CMD+B"}}jo.isInline=!0;jo.title="Bold";class Ro{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=xm,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}}Ro.isInline=!0;Ro.title="Italic";class Do{constructor({api:e}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=e.toolbar,this.inlineToolbar=e.inlineToolbar,this.notifier=e.notifier,this.i18n=e.i18n,this.selection=new te}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Fs,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.enterKeyHint="done",this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)}),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const t=this.selection.findParentTag("A");if(t){this.selection.expandToTag(t),this.unlink(),this.closeActions(),this.checkState(),this.toolbar.close();return}}this.toggleActions()}checkState(){const e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML=Tm,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const t=e.getAttribute("href");this.nodes.input.value=t!=="null"?t:"",this.selection.save()}else this.nodes.button.innerHTML=Fs,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(e=!1){this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(e=!0){if(this.selection.isFakeBackgroundEnabled){const t=new te;t.save(),this.selection.restore(),this.selection.removeFakeBackground(),t.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let t=this.nodes.input.value||"";if(!t.trim()){this.selection.restore(),this.unlink(),e.preventDefault(),this.closeActions();return}if(!this.validateURL(t)){this.notifier.show({message:"Pasted link is not valid.",style:"error"}),de("Incorrect Link pasted","warn",t);return}t=this.prepareLink(t),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(t),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),this.inlineToolbar.close()}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e),e}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;const t=/^\/[^/\s]/.test(e),r=e.substring(0,1)==="#",o=/^\/\/[^/\s]/.test(e);return!t&&!r&&!o&&(e="http://"+e),e}insertLink(e){const t=this.selection.findParentTag("A");t&&this.selection.expandToTag(t),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}}Do.isInline=!0;Do.title="Link";let Al=class{constructor({api:e}){this.i18nAPI=e.i18n,this.blocksAPI=e.blocks,this.selectionAPI=e.selection,this.toolsAPI=e.tools,this.caretAPI=e.caret}async render(){const e=te.get(),t=this.blocksAPI.getBlockByElement(e.anchorNode);if(t===void 0)return[];const r=this.toolsAPI.getBlockTools(),o=await ja(t,r);if(o.length===0)return[];const i=o.reduce((d,g)=>{var l;return(l=g.toolbox)==null||l.forEach(a=>{d.push({icon:a.icon,title:Ce.t(Ne.toolNames,a.title),name:g.name,closeOnActivate:!0,onActivate:async()=>{const u=await this.blocksAPI.convert(t.id,g.name,a.data);this.caretAPI.setToBlock(u,"end")}})}),d},[]),s=await t.getActiveToolboxEntry(),c=s!==void 0?s.icon:Ua,f=!Nt();return{icon:c,name:"convert-to",hint:{title:this.i18nAPI.t("Convert to")},children:{searchable:f,items:i,onOpen:()=>{f&&(this.selectionAPI.setFakeBackground(),this.selectionAPI.save())},onClose:()=>{f&&(this.selectionAPI.restore(),this.selectionAPI.removeFakeBackground())}}}}};Al.isInline=!0;let Ll=class{constructor({data:e,api:t}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=t,this.title=e.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=e.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const e=V.make("div",this.CSS.wrapper),t=Cm,r=V.make("div",this.CSS.info),o=V.make("div",this.CSS.title,{textContent:this.title}),i=V.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML=t,r.appendChild(o),r.appendChild(i),e.appendChild(r),e}};Ll.isReadOnlySupported=!0;class zb extends Vr{constructor(){super(...arguments),this.type=ut.Inline}get title(){return this.constructable[Tn.Title]}create(){return new this.constructable({api:this.api,config:this.settings})}get isReadOnlySupported(){return this.constructable[Tn.IsReadOnlySupported]??!1}}class Wb extends Vr{constructor(){super(...arguments),this.type=ut.Tune}create(e,t){return new this.constructable({api:this.api,config:this.settings,block:t,data:e})}}let He=class xt extends Map{get blockTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isBlock());return new xt(e)}get inlineTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isInline());return new xt(e)}get blockTunes(){const e=Array.from(this.entries()).filter(([,t])=>t.isTune());return new xt(e)}get internalTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isInternal);return new xt(e)}get externalTools(){const e=Array.from(this.entries()).filter(([,t])=>!t.isInternal);return new xt(e)}};var Kb=Object.defineProperty,Vb=Object.getOwnPropertyDescriptor,Bl=(n,e,t,r)=>{for(var o=Vb(e,t),i=n.length-1,s;i>=0;i--)(s=n[i])&&(o=s(e,t,o)||o);return o&&Kb(e,t,o),o};class $o extends Vr{constructor(){super(...arguments),this.type=ut.Block,this.inlineTools=new He,this.tunes=new He}create(e,t,r){return new this.constructable({data:e,block:t,readOnly:r,api:this.api,config:this.settings})}get isReadOnlySupported(){return this.constructable[kt.IsReadOnlySupported]===!0}get isLineBreaksEnabled(){return this.constructable[kt.IsEnabledLineBreaks]}get toolbox(){const e=this.constructable[kt.Toolbox],t=this.config[on.Toolbox];if(!Re(e)&&t!==!1)return t?Array.isArray(e)?Array.isArray(t)?t.map((r,o)=>{const i=e[o];return i?{...i,...r}:r}):[t]:Array.isArray(t)?t:[{...e,...t}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[kt.ConversionConfig]}get enabledInlineTools(){return this.config[on.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[on.EnabledBlockTunes]}get pasteConfig(){return this.constructable[kt.PasteConfig]??{}}get sanitizeConfig(){const e=super.sanitizeConfig,t=this.baseSanitizeConfig;if(Re(e))return t;const r={};for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const i=e[o];Ee(i)?r[o]=Object.assign({},t,i):r[o]=i}return r}get baseSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(t=>Object.assign(e,t.sanitizeConfig)),Array.from(this.tunes.values()).forEach(t=>Object.assign(e,t.sanitizeConfig)),e}}Bl([Mt],$o.prototype,"sanitizeConfig");Bl([Mt],$o.prototype,"baseSanitizeConfig");class Gb{constructor(e,t,r){this.api=r,this.config=e,this.editorConfig=t}get(e){const{class:t,isInternal:r=!1,...o}=this.config[e],i=this.getConstructor(t),s=t[Lr.IsTune];return new i({name:e,constructable:t,config:o,api:this.api.getMethodsForTool(e,s),isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:r})}getConstructor(e){switch(!0){case e[Tn.IsInline]:return zb;case e[Lr.IsTune]:return Wb;default:return $o}}}let Pl=class{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:vm,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e+1);if(!t)throw new Error("Unable to move Block down since it is already the last");const r=t.holder,o=r.getBoundingClientRect();let i=Math.abs(window.innerHeight-r.offsetHeight);o.top<window.innerHeight&&(i=window.scrollY+r.offsetHeight),window.scrollTo(0,i),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}};Pl.isTune=!0;let Ml=class{constructor({api:e}){this.api=e}render(){return{icon:wm,title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}};Ml.isTune=!0;let Nl=class{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:bm,title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e),r=this.api.blocks.getBlockByIndex(e-1);if(e===0||!t||!r)throw new Error("Unable to move Block up since it is already the first");const o=t.holder,i=r.holder,s=o.getBoundingClientRect(),c=i.getBoundingClientRect();let f;c.top>0?f=Math.abs(s.top)-Math.abs(c.top):f=Math.abs(s.top)+c.height,window.scrollBy(0,-1*f),this.api.blocks.move(e-1),this.api.toolbar.toggleBlockSettings(!0)}};Nl.isTune=!0;var Yb=Object.defineProperty,Xb=Object.getOwnPropertyDescriptor,Zb=(n,e,t,r)=>{for(var o=Xb(e,t),i=n.length-1,s;i>=0;i--)(s=n[i])&&(o=s(e,t,o)||o);return o&&Yb(e,t,o),o};let Il=class extends ue{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new He,this.toolsUnavailable=new He}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=_r({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||Object.keys(this.config.tools).length===0)throw Error("Can't start without tools");const e=this.prepareConfig();this.factory=new Gb(e,this.config,this.Editor.API);const t=this.getListOfPrepareFunctions(e);if(t.length===0)return Promise.resolve();await wv(t,r=>{this.toolPrepareMethodSuccess(r)},r=>{this.toolPrepareMethodFallback(r)}),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(t=>{Object.assign(e,t.sanitizeConfig)}),e}destroy(){Object.values(this.available).forEach(async e=>{me(e.reset)&&await e.reset()})}get internalTools(){return{convertTo:{class:Al,isInternal:!0},link:{class:Do,isInternal:!0},bold:{class:jo,isInternal:!0},italic:{class:Ro,isInternal:!0},paragraph:{class:Io,inlineToolbar:!0,isInternal:!0},stub:{class:Ll,isInternal:!0},moveUp:{class:Nl,isInternal:!0},delete:{class:Ml,isInternal:!0},moveDown:{class:Pl,isInternal:!0}}}toolPrepareMethodSuccess(e){const t=this.factory.get(e.toolName);if(t.isInline()){const r=["render"].filter(o=>!t.create()[o]);if(r.length){de(`Incorrect Inline Tool: ${t.name}. Some of required methods is not implemented %o`,"warn",r),this.toolsUnavailable.set(t.name,t);return}}this.toolsAvailable.set(t.name,t)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){const t=[];return Object.entries(e).forEach(([r,o])=>{t.push({function:me(o.class.prepare)?o.class.prepare:()=>{},data:{toolName:r,config:o.config}})}),t}prepareBlockTools(){Array.from(this.blockTools.values()).forEach(e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)})}assignInlineToolsToBlockTool(e){if(this.config.inlineToolbar!==!1){if(e.enabledInlineTools===!0){e.inlineTools=new He(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(t=>[t,this.inlineTools.get(t)]):Array.from(this.inlineTools.entries()));return}Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new He(["convertTo",...e.enabledInlineTools].map(t=>[t,this.inlineTools.get(t)])))}}assignBlockTunesToBlockTool(e){if(e.enabledBlockTunes!==!1){if(Array.isArray(e.enabledBlockTunes)){const t=new He(e.enabledBlockTunes.map(r=>[r,this.blockTunes.get(r)]));e.tunes=new He([...t,...this.blockTunes.internalTools]);return}if(Array.isArray(this.config.tunes)){const t=new He(this.config.tunes.map(r=>[r,this.blockTunes.get(r)]));e.tunes=new He([...t,...this.blockTunes.internalTools]);return}e.tunes=this.blockTunes.internalTools}}validateTools(){for(const e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;const t=this.config.tools[e];if(!me(t)&&!me(t.class))throw Error(`Tool «${e}» must be a constructor function or an object with function in the «class» property`)}}prepareConfig(){const e={};for(const t in this.config.tools)Ee(this.config.tools[t])?e[t]=this.config.tools[t]:e[t]={class:this.config.tools[t]};return e}};Zb([Mt],Il.prototype,"getAllInlineToolsSanitizeConfig");const Jb=`:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;--color-background-icon-active: rgba(56, 138, 229, .1);--color-text-icon-active: #388AE5;--color-text-primary: black;position:absolute;visibility:hidden;-webkit-transition:opacity .25s ease;transition:opacity .25s ease;will-change:opacity,left,top;top:0;left:0;z-index:3;opacity:1;visibility:visible}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{color:var(--color-text-primary);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:0;border-radius:4px;line-height:normal;height:100%;padding:0;width:28px;background-color:transparent;cursor:pointer}@media (max-width: 650px){.ce-inline-tool{width:36px;height:36px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#f8f8f8}}.ce-inline-tool svg{display:block;width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:4px 8px;font-size:14px;line-height:22px;outline:none;margin:0;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-inline-tool--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #EFF0F1;--color-shadow: rgba(13, 20, 33, .1);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #F8F8F8;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;--popover-top: calc(100% + var(--offset-from-target));--popover-left: 0;--nested-popover-overlap: 4px;--icon-size: 20px;--item-padding: 3px;--item-height: calc(var(--icon-size) + 2 * var(--item-padding))}.ce-popover__container{min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0px 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:var(--popover-left);top:var(--popover-top);background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened>.ce-popover__container{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened>.ce-popover__container{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover--open-top .ce-popover__container{--popover-top: calc(-1 * (var(--offset-from-target) + var(--popover-height)))}.ce-popover--open-left .ce-popover__container{--popover-left: calc(-1 * var(--width) + 100%)}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}@media (max-width: 650px){.ce-popover .ce-popover__container{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}}.ce-popover__search{margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover--nested .ce-popover__container{--popover-left: calc(var(--nesting-level) * (var(--width) - var(--nested-popover-overlap)));top:calc(var(--trigger-item-top) - var(--nested-popover-overlap));position:absolute}.ce-popover--open-top.ce-popover--nested .ce-popover__container{top:calc(var(--trigger-item-top) - var(--popover-height) + var(--item-height) + var(--offset-from-target) + var(--nested-popover-overlap))}.ce-popover--open-left .ce-popover--nested .ce-popover__container{--popover-left: calc(-1 * (var(--nesting-level) + 1) * var(--width) + 100%)}.ce-popover-item-separator{padding:4px 3px}.ce-popover-item-separator--hidden{display:none}.ce-popover-item-separator__line{height:1px;background:var(--color-border);width:100%}.ce-popover-item-html--hidden{display:none}.ce-popover-item{--border-radius: 6px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:var(--item-padding);color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;background:transparent}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:28px;height:28px}}.ce-popover-item__icon--tool{margin-right:4px}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-right:auto}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title,.ce-popover-item--confirmation .ce-popover-item__icon{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}.ce-popover-header{margin-bottom:8px;margin-top:4px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-popover-header__text{font-size:18px;font-weight:600}.ce-popover-header__back-button{border:0;background:transparent;width:36px;height:36px;color:var(--color-text-primary)}.ce-popover-header__back-button svg{display:block;width:28px;height:28px}.ce-popover--inline{--height: 38px;--height-mobile: 46px;--container-padding: 4px;position:relative}.ce-popover--inline .ce-popover__custom-content{margin-bottom:0}.ce-popover--inline .ce-popover__items{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-popover--inline .ce-popover__container{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding:var(--container-padding);height:var(--height);top:0;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;width:-webkit-max-content;width:-moz-max-content;width:max-content;-webkit-animation:none;animation:none}@media (max-width: 650px){.ce-popover--inline .ce-popover__container{height:var(--height-mobile);position:absolute}}.ce-popover--inline .ce-popover-item-separator{padding:0 4px}.ce-popover--inline .ce-popover-item-separator__line{height:100%;width:1px}.ce-popover--inline .ce-popover-item{border-radius:4px;padding:4px}.ce-popover--inline .ce-popover-item__icon--tool{-webkit-box-shadow:none;box-shadow:none;background:transparent;margin-right:0}.ce-popover--inline .ce-popover-item__icon{width:auto;width:initial;height:auto;height:initial}.ce-popover--inline .ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover--inline .ce-popover-item__icon svg{width:28px;height:28px}}.ce-popover--inline .ce-popover-item:not(:last-of-type){margin-bottom:0;margin-bottom:initial}.ce-popover--inline .ce-popover-item-html{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-popover--inline .ce-popover-item__icon--chevron-right{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.ce-popover--inline .ce-popover--nested-level-1 .ce-popover__container{--offset: 3px;left:0;top:calc(var(--height) + var(--offset))}@media (max-width: 650px){.ce-popover--inline .ce-popover--nested-level-1 .ce-popover__container{top:calc(var(--height-mobile) + var(--offset))}}.ce-popover--inline .ce-popover--nested .ce-popover__container{min-width:var(--width);width:var(--width);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;padding:6px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.ce-popover--inline .ce-popover--nested .ce-popover__items{display:block;width:100%}.ce-popover--inline .ce-popover--nested .ce-popover-item{border-radius:6px;padding:3px}@media (max-width: 650px){.ce-popover--inline .ce-popover--nested .ce-popover-item{padding:4px}}.ce-popover--inline .ce-popover--nested .ce-popover-item__icon--tool{margin-right:4px}.ce-popover--inline .ce-popover--nested .ce-popover-item__icon{width:26px;height:26px}.ce-popover--inline .ce-popover--nested .ce-popover-item-separator{padding:4px 3px}.ce-popover--inline .ce-popover--nested .ce-popover-item-separator__line{width:100%;height:1px}.codex-editor [data-placeholder]:empty:before,.codex-editor [data-placeholder][data-empty=true]:before{pointer-events:none;color:#707684;cursor:text;content:attr(data-placeholder)}.codex-editor [data-placeholder-active]:empty:before,.codex-editor [data-placeholder-active][data-empty=true]:before{pointer-events:none;color:#707684;cursor:text}.codex-editor [data-placeholder-active]:empty:focus:before,.codex-editor [data-placeholder-active][data-empty=true]:focus:before{content:attr(data-placeholder-active)}
`;class Qb extends ue{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=null,this.resizeDebouncer=Rs(()=>{this.windowResize()},200),this.selectionChangeDebounced=Rs(()=>{this.selectionChanged()},Nb),this.documentTouchedListener=e=>{this.documentTouched(e)}}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache!==null)return this.contentRectCache;const e=this.nodes.wrapper.querySelector(`.${Ge.CSS.content}`);return e?(this.contentRectCache=e.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.setIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(e){e?this.unbindReadOnlySensitiveListeners():window.requestIdleCallback(()=>{this.bindReadOnlySensitiveListeners()},{timeout:2e3})}checkEmptiness(){const{BlockManager:e}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,e.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:e,BlockSettings:t,InlineToolbar:r}=this.Editor;return!!(t.opened||r.opened||e.toolbox.opened)}get someFlipperButtonFocused(){return this.Editor.Toolbar.toolbox.hasFocus()?!0:Object.entries(this.Editor).filter(([e,t])=>t.flipper instanceof _n).some(([e,t])=>t.flipper.hasFocus())}destroy(){this.nodes.holder.innerHTML="",this.unbindReadOnlyInsensitiveListeners()}closeAllToolbars(){const{Toolbar:e,BlockSettings:t,InlineToolbar:r}=this.Editor;t.close(),r.close(),e.toolbox.close()}setIsMobile(){const e=window.innerWidth<Ta;e!==this.isMobile&&this.eventsDispatcher.emit(Kt,{isEnabled:this.isMobile}),this.isMobile=e}make(){this.nodes.holder=V.getHolder(this.config.holder),this.nodes.wrapper=V.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=V.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper),this.bindReadOnlyInsensitiveListeners()}loadStyles(){const e="editor-js-styles";if(V.get(e))return;const t=V.make("style",null,{id:e,textContent:Jb.toString()});this.config.style&&!Re(this.config.style)&&this.config.style.nonce&&t.setAttribute("nonce",this.config.style.nonce),V.prepend(document.head,t)}bindReadOnlyInsensitiveListeners(){this.listeners.on(document,"selectionchange",this.selectionChangeDebounced),this.listeners.on(window,"resize",this.resizeDebouncer,{passive:!0}),this.listeners.on(this.nodes.redactor,"mousedown",this.documentTouchedListener,{capture:!0,passive:!0}),this.listeners.on(this.nodes.redactor,"touchstart",this.documentTouchedListener,{capture:!0,passive:!0})}unbindReadOnlyInsensitiveListeners(){this.listeners.off(document,"selectionchange",this.selectionChangeDebounced),this.listeners.off(window,"resize",this.resizeDebouncer),this.listeners.off(this.nodes.redactor,"mousedown",this.documentTouchedListener),this.listeners.off(this.nodes.redactor,"touchstart",this.documentTouchedListener)}bindReadOnlySensitiveListeners(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",e=>{this.redactorClicked(e)},!1),this.readOnlyMutableListeners.on(document,"keydown",e=>{this.documentKeydown(e)},!0),this.readOnlyMutableListeners.on(document,"mousedown",e=>{this.documentClicked(e)},!0),this.watchBlockHoveredEvents(),this.enableInputsEmptyMark()}watchBlockHoveredEvents(){let e;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",Er(t=>{const r=t.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||r&&e!==r&&(e=r,this.eventsDispatcher.emit(Qa,{block:this.Editor.BlockManager.getBlockByChildNode(r)}))},20),{passive:!0})}unbindReadOnlySensitiveListeners(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.setIsMobile()}documentKeydown(e){switch(e.keyCode){case re.ENTER:this.enterPressed(e);break;case re.BACKSPACE:case re.DELETE:this.backspacePressed(e);break;case re.ESC:this.escapePressed(e);break;default:this.defaultBehaviour(e);break}}defaultBehaviour(e){const{currentBlock:t}=this.Editor.BlockManager,r=e.target.closest(`.${this.CSS.editorWrapper}`),o=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(t!==void 0&&r===null){this.Editor.BlockEvents.keydown(e);return}r||t&&o||(this.Editor.BlockManager.unsetCurrentBlock(),this.Editor.Toolbar.close())}backspacePressed(e){const{BlockManager:t,BlockSelection:r,Caret:o}=this.Editor;if(r.anyBlockSelected&&!te.isSelectionExists){const i=t.removeSelectedBlocks(),s=t.insertDefaultBlockAtIndex(i,!0);o.setToBlock(s,o.positions.START),r.clearSelection(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}escapePressed(e){this.Editor.BlockSelection.clearSelection(e),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(e){const{BlockManager:t,BlockSelection:r}=this.Editor;if(this.someToolbarOpened)return;const o=t.currentBlockIndex>=0;if(r.anyBlockSelected&&!te.isSelectionExists){r.clearSelection(e),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();return}if(!this.someToolbarOpened&&o&&e.target.tagName==="BODY"){const i=this.Editor.BlockManager.insert();e.preventDefault(),this.Editor.Caret.setToBlock(i),this.Editor.Toolbar.moveAndOpen(i)}this.Editor.BlockSelection.clearSelection(e)}documentClicked(e){var t,r;if(!e.isTrusted)return;const o=e.target;this.nodes.holder.contains(o)||te.isAtEditor||(this.Editor.BlockManager.unsetCurrentBlock(),this.Editor.Toolbar.close());const i=(t=this.Editor.BlockSettings.nodes.wrapper)==null?void 0:t.contains(o),s=(r=this.Editor.Toolbar.nodes.settingsToggler)==null?void 0:r.contains(o),c=i||s;if(this.Editor.BlockSettings.opened&&!c){this.Editor.BlockSettings.close();const f=this.Editor.BlockManager.getBlockByChildNode(o);this.Editor.Toolbar.moveAndOpen(f)}this.Editor.BlockSelection.clearSelection(e)}documentTouched(e){let t=e.target;if(t===this.nodes.redactor){const r=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,o=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;t=document.elementFromPoint(r,o)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(t)}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.ReadOnly.isEnabled||this.Editor.Toolbar.moveAndOpen()}redactorClicked(e){if(!te.isCollapsed)return;const t=e.target,r=e.metaKey||e.ctrlKey;if(V.isAnchor(t)&&r){e.stopImmediatePropagation(),e.stopPropagation();const o=t.getAttribute("href"),i=_v(o);Tv(i);return}this.processBottomZoneClick(e)}processBottomZoneClick(e){const t=this.Editor.BlockManager.getBlockByIndex(-1),r=V.offset(t.holder).bottom,o=e.pageY,{BlockSelection:i}=this.Editor;if(e.target instanceof Element&&e.target.isEqualNode(this.nodes.redactor)&&!i.anyBlockSelected&&r<o){e.stopImmediatePropagation(),e.stopPropagation();const{BlockManager:s,Caret:c,Toolbar:f}=this.Editor;(!s.lastBlock.tool.isDefault||!s.lastBlock.isEmpty)&&s.insertAtEnd(),c.setToTheLastBlock(),f.moveAndOpen(s.lastBlock)}}selectionChanged(){const{CrossBlockSelection:e,BlockSelection:t}=this.Editor,r=te.anchorElement;if(e.isCrossBlockSelectionStarted&&t.anyBlockSelected&&te.get().removeAllRanges(),!r){te.range||this.Editor.InlineToolbar.close();return}const o=r.closest(`.${Ge.CSS.content}`);(o===null||o.closest(`.${te.CSS.editorWrapper}`)!==this.nodes.wrapper)&&(this.Editor.InlineToolbar.containsNode(r)||this.Editor.InlineToolbar.close(),r.dataset.inlineToolbar!=="true")||(this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(r),this.Editor.InlineToolbar.tryToShow(!0))}enableInputsEmptyMark(){function e(t){const r=t.target;Ca(r)}this.readOnlyMutableListeners.on(this.nodes.wrapper,"input",e),this.readOnlyMutableListeners.on(this.nodes.wrapper,"focusin",e),this.readOnlyMutableListeners.on(this.nodes.wrapper,"focusout",e)}}const e0={BlocksAPI:Rv,CaretAPI:$v,EventsAPI:Fv,I18nAPI:Hv,API:qv,InlineToolbarAPI:Uv,ListenersAPI:zv,NotifierAPI:Gv,ReadOnlyAPI:Yv,SanitizerAPI:nm,SaverAPI:rm,SelectionAPI:om,ToolsAPI:im,StylesAPI:sm,ToolbarAPI:am,TooltipAPI:hm,UiAPI:fm,BlockSettings:$m,Toolbar:Vm,InlineToolbar:Gm,BlockEvents:Tb,BlockManager:Ab,BlockSelection:Lb,Caret:Bb,CrossBlockSelection:Pb,DragNDrop:Mb,ModificationsObserver:jb,Paste:Rb,ReadOnly:Db,RectangleSelection:$b,Renderer:Fb,Saver:Hb,Tools:Il,UI:Qb};class t0{constructor(e){this.moduleInstances={},this.eventsDispatcher=new Yt;let t,r;this.isReady=new Promise((o,i)=>{t=o,r=i}),Promise.resolve().then(async()=>{this.configuration=e,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:o,Caret:i,UI:s,ModificationsObserver:c}=this.moduleInstances;s.checkEmptiness(),c.enable(),this.configuration.autofocus===!0&&this.configuration.readOnly!==!0&&i.setToBlock(o.blocks[0],i.positions.START),t()}).catch(o=>{de(`Editor.js is not ready because of ${o}`,"error"),r(o)})}set configuration(e){var t,r;Ee(e)?this.config={...e}:this.config={holder:e},Or(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=Ea.VERBOSE),yv(this.config.logLevel),Or(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;const o={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=this.config.hideToolbar?this.config.hideToolbar:!1,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=this.config.inlineToolbar!==void 0?this.config.inlineToolbar:!0,(Re(this.config.data)||!this.config.data.blocks||this.config.data.blocks.length===0)&&(this.config.data={blocks:[o]}),this.config.readOnly=this.config.readOnly||!1,(t=this.config.i18n)!=null&&t.messages&&Ce.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((r=this.config.i18n)==null?void 0:r.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:e,holder:t}=this.config;if(e&&t)throw Error("«holderId» and «holder» param can't assign at the same time.");if(Ye(t)&&!V.get(t))throw Error(`element with ID «${t}» is missing. Pass correct holder's ID.`);if(t&&Ee(t)&&!V.isElement(t))throw Error("«holder» value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce((e,t)=>e.then(async()=>{try{await this.moduleInstances[t].prepare()}catch(r){if(r instanceof La)throw new Error(r.message);de(`Module ${t} was skipped because of %o`,"warn",r)}}),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(e0).forEach(([e,t])=>{try{this.moduleInstances[e]=new t({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(r){de("[constructModules]",`Module ${e} skipped because`,"error",r)}})}configureModules(){for(const e in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,e)&&(this.moduleInstances[e].state=this.getModulesDiff(e))}getModulesDiff(e){const t={};for(const r in this.moduleInstances)r!==e&&(t[r]=this.moduleInstances[r]);return t}}/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */class n0{static get version(){return"2.31.0-rc.7"}constructor(e){let t=()=>{};Ee(e)&&me(e.onReady)&&(t=e.onReady);const r=new t0(e);this.isReady=r.isReady.then(()=>{this.exportAPI(r),t()})}exportAPI(e){const t=["configuration"],r=()=>{Object.values(e.moduleInstances).forEach(o=>{me(o.destroy)&&o.destroy(),o.listeners.removeAll()}),dm(),e=null;for(const o in this)Object.prototype.hasOwnProperty.call(this,o)&&delete this[o];Object.setPrototypeOf(this,null)};t.forEach(o=>{this[o]=e[o]}),this.destroy=r,Object.setPrototypeOf(this,e.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(([o,i])=>{Object.entries(i).forEach(([s,c])=>{this[c]=e.moduleInstances.API.methods[o][s]})})}}(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".ce-header{padding:.6em 0 3px;margin:0;line-height:1.25em;outline:none}.ce-header p,.ce-header div{padding:0!important;margin:0!important}")),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const r0='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17V10.2135C19 10.1287 18.9011 10.0824 18.836 10.1367L16 12.5"/></svg>',o0='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10 19 9.5 19 12C19 13.9771 16.0684 13.9997 16.0012 16.8981C15.9999 16.9533 16.0448 17 16.1 17L19.3 17"/></svg>',i0='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10.5 16.8323 10 17.6 10C18.3677 10 19.5 10.311 19.5 11.5C19.5 12.5315 18.7474 12.9022 18.548 12.9823C18.5378 12.9864 18.5395 13.0047 18.5503 13.0063C18.8115 13.0456 20 13.3065 20 14.8C20 16 19.5 17 17.8 17C17.8 17 16 17 16 16.3"/></svg>',s0='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 10L15.2834 14.8511C15.246 14.9178 15.294 15 15.3704 15C16.8489 15 18.7561 15 20.2 15M19 17C19 15.7187 19 14.8813 19 13.6"/></svg>',a0='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 15.9C16 15.9 16.3768 17 17.8 17C19.5 17 20 15.6199 20 14.7C20 12.7323 17.6745 12.0486 16.1635 12.9894C16.094 13.0327 16 12.9846 16 12.9027V10.1C16 10.0448 16.0448 10 16.1 10H19.8"/></svg>',l0='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19.5 10C16.5 10.5 16 13.3285 16 15M16 15V15C16 16.1046 16.8954 17 18 17H18.3246C19.3251 17 20.3191 16.3492 20.2522 15.3509C20.0612 12.4958 16 12.6611 16 15Z"/></svg>',c0='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 7L9 12M9 17V12M9 12L15 12M15 7V12M15 17L15 12"/></svg>';/**
 * Header block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license MIT
 * @version 2.0.0
 */let u0=class{constructor({data:e,config:t,api:r,readOnly:o}){this.api=r,this.readOnly=o,this._settings=t,this._data=this.normalizeData(e),this._element=this.getTag()}get _CSS(){return{block:this.api.styles.block,wrapper:"ce-header"}}isHeaderData(e){return e.text!==void 0}normalizeData(e){const t={text:"",level:this.defaultLevel.number};return this.isHeaderData(e)&&(t.text=e.text||"",e.level!==void 0&&!isNaN(parseInt(e.level.toString()))&&(t.level=parseInt(e.level.toString()))),t}render(){return this._element}renderSettings(){return this.levels.map(e=>({icon:e.svg,label:this.api.i18n.t(`Heading ${e.number}`),onActivate:()=>this.setLevel(e.number),closeOnActivate:!0,isActive:this.currentLevel.number===e.number,render:()=>document.createElement("div")}))}setLevel(e){this.data={level:e,text:this.data.text}}merge(e){this._element.insertAdjacentHTML("beforeend",e.text)}validate(e){return e.text.trim()!==""}save(e){return{text:e.innerHTML,level:this.currentLevel.number}}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{level:!1,text:{}}}static get isReadOnlySupported(){return!0}get data(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data}set data(e){if(this._data=this.normalizeData(e),e.level!==void 0&&this._element.parentNode){const t=this.getTag();t.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(t,this._element),this._element=t}e.text!==void 0&&(this._element.innerHTML=this._data.text||"")}getTag(){const e=document.createElement(this.currentLevel.tag);return e.innerHTML=this._data.text||"",e.classList.add(this._CSS.wrapper),e.contentEditable=this.readOnly?"false":"true",e.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),e}get currentLevel(){let e=this.levels.find(t=>t.number===this._data.level);return e||(e=this.defaultLevel),e}get defaultLevel(){if(this._settings.defaultLevel){const e=this.levels.find(t=>t.number===this._settings.defaultLevel);if(e)return e;console.warn("(ง'̀-'́)ง Heading Tool: the default level specified was not found in available levels")}return this.levels[1]}get levels(){const e=[{number:1,tag:"H1",svg:r0},{number:2,tag:"H2",svg:o0},{number:3,tag:"H3",svg:i0},{number:4,tag:"H4",svg:s0},{number:5,tag:"H5",svg:a0},{number:6,tag:"H6",svg:l0}];return this._settings.levels?e.filter(t=>this._settings.levels.includes(t.number)):e}onPaste(e){const t=e.detail;if("data"in t){const r=t.data;let o=this.defaultLevel.number;switch(r.tagName){case"H1":o=1;break;case"H2":o=2;break;case"H3":o=3;break;case"H4":o=4;break;case"H5":o=5;break;case"H6":o=6;break}this._settings.levels&&(o=this._settings.levels.reduce((i,s)=>Math.abs(s-o)<Math.abs(i-o)?s:i)),this.data={level:o,text:r.innerHTML}}}static get pasteConfig(){return{tags:["H1","H2","H3","H4","H5","H6"]}}static get toolbox(){return{icon:c0,title:"Heading"}}};(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode('.cdx-list{margin:0;padding:0;outline:none;display:grid;counter-reset:item;gap:var(--spacing-s);padding:var(--spacing-xs);--spacing-s: 8px;--spacing-xs: 6px;--list-counter-type: numeric;--radius-border: 5px;--checkbox-background: #fff;--color-border: #C9C9C9;--color-bg-checked: #369FFF;--line-height: 1.45em;--color-bg-checked-hover: #0059AB;--color-tick: #fff;--size-checkbox: 1.2em}.cdx-list__item{line-height:var(--line-height);display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto auto;grid-template-areas:"checkbox content" ". child"}.cdx-list__item-children{display:grid;grid-area:child;gap:var(--spacing-s);padding-top:var(--spacing-s)}.cdx-list__item [contenteditable]{outline:none}.cdx-list__item-content{word-break:break-word;white-space:pre-wrap;grid-area:content;padding-left:var(--spacing-s)}.cdx-list__item:before{counter-increment:item;white-space:nowrap}.cdx-list-ordered .cdx-list__item:before{content:counters(item,".",var(--list-counter-type)) "."}.cdx-list-ordered{counter-reset:item}.cdx-list-unordered .cdx-list__item:before{content:"•"}.cdx-list-checklist .cdx-list__item:before{content:""}.cdx-list__settings .cdx-settings-button{width:50%}.cdx-list__checkbox{padding-top:calc((var(--line-height) - var(--size-checkbox)) / 2);grid-area:checkbox;width:var(--size-checkbox);height:var(--size-checkbox);display:flex;cursor:pointer}.cdx-list__checkbox svg{opacity:0;height:var(--size-checkbox);width:var(--size-checkbox);left:-1px;top:-1px;position:absolute}@media (hover: hover){.cdx-list__checkbox:not(.cdx-list__checkbox--no-hover):hover .cdx-list__checkbox-check svg{opacity:1}}.cdx-list__checkbox--checked{line-height:var(--line-height)}@media (hover: hover){.cdx-list__checkbox--checked:not(.cdx-list__checkbox--checked--no-hover):hover .cdx-checklist__checkbox-check{background:var(--color-bg-checked-hover);border-color:var(--color-bg-checked-hover)}}.cdx-list__checkbox--checked .cdx-list__checkbox-check{background:var(--color-bg-checked);border-color:var(--color-bg-checked)}.cdx-list__checkbox--checked .cdx-list__checkbox-check svg{opacity:1}.cdx-list__checkbox--checked .cdx-list__checkbox-check svg path{stroke:var(--color-tick)}.cdx-list__checkbox--checked .cdx-list__checkbox-check:before{opacity:0;visibility:visible;transform:scale(2.5)}.cdx-list__checkbox-check{cursor:pointer;display:inline-block;position:relative;margin:0 auto;width:var(--size-checkbox);height:var(--size-checkbox);box-sizing:border-box;border-radius:var(--radius-border);border:1px solid var(--color-border);background:var(--checkbox-background)}.cdx-list__checkbox-check:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border-radius:100%;background-color:var(--color-bg-checked);visibility:hidden;pointer-events:none;transform:scale(1);transition:transform .4s ease-out,opacity .4s}.cdx-list-start-with-field{background:#F8F8F8;border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-list-start-with-field--invalid{background:#FFECED;border:1px solid #E13F3F}.cdx-list-start-with-field--invalid .cdx-list-start-with-field__input{color:#e13f3f}.cdx-list-start-with-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - var(--toolbox-buttons-size) - var(--icon-margin-right))}.cdx-list-start-with-field__input::placeholder{color:var(--grayText);font-weight:500}')),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const d0='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 12L10.4884 15.8372C10.5677 15.9245 10.705 15.9245 10.7844 15.8372L17 9"/></svg>',Gs='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.2 12L11.0586 13.8586C11.1367 13.9367 11.2633 13.9367 11.3414 13.8586L14.7 10.5"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',Ys='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',Xs='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>',h0='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 14.2L10 7.4135C10 7.32872 9.90111 7.28241 9.83598 7.33668L7 9.7" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',f0='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 14.2L10 9.5" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 7.01L10 7" stroke="black" stroke-width="1.8" stroke-linecap="round"/></svg>',p0='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2087 14.2H13.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M10 14.2L10 7.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',g0='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.0087 14.2H16" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M7 14.2L7.78865 12M13 14.2L12.1377 12M7.78865 12C7.78865 12 9.68362 7 10 7C10.3065 7 12.1377 12 12.1377 12M7.78865 12L12.1377 12" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',v0='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.2087 14.2H14.2" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M11.5 14.5C11.5 14.5 11 13.281 11 12.5M7 9.5C7 9.5 7.5 8.5 9 8.5C10.5 8.5 11 9.5 11 10.5L11 11.5M11 11.5L11 12.5M11 11.5C11 11.5 7 11 7 13C7 15.3031 11 15 11 12.5" stroke="black" stroke-width="1.6" stroke-linecap="round"/></svg>',m0='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 14.2L8 7.4135C8 7.32872 7.90111 7.28241 7.83598 7.33668L5 9.7" stroke="black" stroke-width="1.6" stroke-linecap="round"/><path d="M14 13L16.4167 10.7778M16.4167 10.7778L14 8.5M16.4167 10.7778H11.6562" stroke="black" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>';var Cn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y0(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}),t}var fe={},Fo={},Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.allInputsSelector=b0;function b0(){var n=["text","password","email","number","search","tel","url"];return"[contenteditable=true], textarea, input:not([type]), "+n.map(function(e){return'input[type="'.concat(e,'"]')}).join(", ")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.allInputsSelector=void 0;var e=Ho;Object.defineProperty(n,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}})})(Fo);var pt={},qo={};Object.defineProperty(qo,"__esModule",{value:!0});qo.isNativeInput=w0;function w0(n){var e=["INPUT","TEXTAREA"];return n&&n.tagName?e.includes(n.tagName):!1}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNativeInput=void 0;var e=qo;Object.defineProperty(n,"isNativeInput",{enumerable:!0,get:function(){return e.isNativeInput}})})(pt);var jl={},Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.append=k0;function k0(n,e){Array.isArray(e)?e.forEach(function(t){n.appendChild(t)}):n.appendChild(e)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.append=void 0;var e=Uo;Object.defineProperty(n,"append",{enumerable:!0,get:function(){return e.append}})})(jl);var zo={},Wo={};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.blockElements=x0;function x0(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.blockElements=void 0;var e=Wo;Object.defineProperty(n,"blockElements",{enumerable:!0,get:function(){return e.blockElements}})})(zo);var Rl={},Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.calculateBaseline=E0;function E0(n){var e=window.getComputedStyle(n),t=parseFloat(e.fontSize),r=parseFloat(e.lineHeight)||t*1.2,o=parseFloat(e.paddingTop),i=parseFloat(e.borderTopWidth),s=parseFloat(e.marginTop),c=t*.8,f=(r-t)/2,d=s+i+o+f+c;return d}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateBaseline=void 0;var e=Ko;Object.defineProperty(n,"calculateBaseline",{enumerable:!0,get:function(){return e.calculateBaseline}})})(Rl);var Dl={},Vo={},Go={},Yo={};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.isContentEditable=_0;function _0(n){return n.contentEditable==="true"}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isContentEditable=void 0;var e=Yo;Object.defineProperty(n,"isContentEditable",{enumerable:!0,get:function(){return e.isContentEditable}})})(Go);Object.defineProperty(Vo,"__esModule",{value:!0});Vo.canSetCaret=C0;var O0=pt,T0=Go;function C0(n){var e=!0;if((0,O0.isNativeInput)(n))switch(n.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":e=!1;break}else e=(0,T0.isContentEditable)(n);return e}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.canSetCaret=void 0;var e=Vo;Object.defineProperty(n,"canSetCaret",{enumerable:!0,get:function(){return e.canSetCaret}})})(Dl);var Wn={},Xo={};function S0(n,e,t){const r=t.value!==void 0?"value":"get",o=t[r],i=`#${e}Cache`;if(t[r]=function(...s){return this[i]===void 0&&(this[i]=o.apply(this,s)),this[i]},r==="get"&&t.set){const s=t.set;t.set=function(c){delete n[i],s.apply(this,c)}}return t}function $l(){const n={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(n).find(t=>window.navigator.appVersion.toLowerCase().indexOf(t)!==-1);return e!==void 0&&(n[e]=!0),n}function Zo(n){return n!=null&&n!==""&&(typeof n!="object"||Object.keys(n).length>0)}function A0(n){return!Zo(n)}const L0=()=>typeof window<"u"&&window.navigator!==null&&Zo(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function B0(n){const e=$l();return n=n.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi,"+"),e.mac?n=n.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):n=n.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),n}function P0(n){return n[0].toUpperCase()+n.slice(1)}function M0(n){const e=document.createElement("div");e.style.position="absolute",e.style.left="-999px",e.style.bottom="-999px",e.innerHTML=n,document.body.appendChild(e);const t=window.getSelection(),r=document.createRange();if(r.selectNode(e),t===null)throw new Error("Cannot copy text to clipboard");t.removeAllRanges(),t.addRange(r),document.execCommand("copy"),document.body.removeChild(e)}function N0(n,e,t){let r;return(...o)=>{const i=this,s=()=>{r=void 0,t!==!0&&n.apply(i,o)},c=t===!0&&r!==void 0;window.clearTimeout(r),r=window.setTimeout(s,e),c&&n.apply(i,o)}}function ot(n){return Object.prototype.toString.call(n).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function I0(n){return ot(n)==="boolean"}function Fl(n){return ot(n)==="function"||ot(n)==="asyncfunction"}function j0(n){return Fl(n)&&/^\s*class\s+/.test(n.toString())}function R0(n){return ot(n)==="number"}function un(n){return ot(n)==="object"}function D0(n){return Promise.resolve(n)===n}function $0(n){return ot(n)==="string"}function F0(n){return ot(n)==="undefined"}function Mr(n,...e){if(!e.length)return n;const t=e.shift();if(un(n)&&un(t))for(const r in t)un(t[r])?(n[r]===void 0&&Object.assign(n,{[r]:{}}),Mr(n[r],t[r])):Object.assign(n,{[r]:t[r]});return Mr(n,...e)}function H0(n,e,t){const r=`«${e}» is deprecated and will be removed in the next major release. Please use the «${t}» instead.`;n&&console.warn(r)}function q0(n){try{return new URL(n).href}catch{}return n.substring(0,2)==="//"?window.location.protocol+n:window.location.origin+n}function U0(n){return n>47&&n<58||n===32||n===13||n===229||n>64&&n<91||n>95&&n<112||n>185&&n<193||n>218&&n<223}const z0={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},W0={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};class K0{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((t,r)=>{this.completed=this.completed.then(e).then(t).catch(r)})}}function V0(n,e,t=void 0){let r,o,i,s=null,c=0;t||(t={});const f=function(){c=t.leading===!1?0:Date.now(),s=null,i=n.apply(r,o),s===null&&(r=o=null)};return function(){const d=Date.now();!c&&t.leading===!1&&(c=d);const g=e-(d-c);return r=this,o=arguments,g<=0||g>e?(s&&(clearTimeout(s),s=null),c=d,i=n.apply(r,o),s===null&&(r=o=null)):!s&&t.trailing!==!1&&(s=setTimeout(f,g)),i}}const G0=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:K0,beautifyShortcut:B0,cacheable:S0,capitalize:P0,copyTextToClipboard:M0,debounce:N0,deepMerge:Mr,deprecationAssert:H0,getUserOS:$l,getValidUrl:q0,isBoolean:I0,isClass:j0,isEmpty:A0,isFunction:Fl,isIosDevice:L0,isNumber:R0,isObject:un,isPrintableKey:U0,isPromise:D0,isString:$0,isUndefined:F0,keyCodes:z0,mouseButtons:W0,notEmpty:Zo,throttle:V0,typeOf:ot},Symbol.toStringTag,{value:"Module"})),Jo=y0(G0);Object.defineProperty(Xo,"__esModule",{value:!0});Xo.containsOnlyInlineElements=Z0;var Y0=Jo,X0=zo;function Z0(n){var e;(0,Y0.isString)(n)?(e=document.createElement("div"),e.innerHTML=n):e=n;var t=function(r){return!(0,X0.blockElements)().includes(r.tagName.toLowerCase())&&Array.from(r.children).every(t)};return Array.from(e.children).every(t)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.containsOnlyInlineElements=void 0;var e=Xo;Object.defineProperty(n,"containsOnlyInlineElements",{enumerable:!0,get:function(){return e.containsOnlyInlineElements}})})(Wn);var Hl={},Qo={},Kn={},ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.make=J0;function J0(n,e,t){var r;e===void 0&&(e=null),t===void 0&&(t={});var o=document.createElement(n);if(Array.isArray(e)){var i=e.filter(function(c){return c!==void 0});(r=o.classList).add.apply(r,i)}else e!==null&&o.classList.add(e);for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(o[s]=t[s]);return o}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.make=void 0;var e=ei;Object.defineProperty(n,"make",{enumerable:!0,get:function(){return e.make}})})(Kn);Object.defineProperty(Qo,"__esModule",{value:!0});Qo.fragmentToString=e1;var Q0=Kn;function e1(n){var e=(0,Q0.make)("div");return e.appendChild(n),e.innerHTML}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.fragmentToString=void 0;var e=Qo;Object.defineProperty(n,"fragmentToString",{enumerable:!0,get:function(){return e.fragmentToString}})})(Hl);var ql={},ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.getContentLength=n1;var t1=pt;function n1(n){var e,t;return(0,t1.isNativeInput)(n)?n.value.length:n.nodeType===Node.TEXT_NODE?n.length:(t=(e=n.textContent)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getContentLength=void 0;var e=ti;Object.defineProperty(n,"getContentLength",{enumerable:!0,get:function(){return e.getContentLength}})})(ql);var ni={},ri={},Zs=Cn&&Cn.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(ri,"__esModule",{value:!0});ri.getDeepestBlockElements=Ul;var r1=Wn;function Ul(n){return(0,r1.containsOnlyInlineElements)(n)?[n]:Array.from(n.children).reduce(function(e,t){return Zs(Zs([],e,!0),Ul(t),!0)},[])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDeepestBlockElements=void 0;var e=ri;Object.defineProperty(n,"getDeepestBlockElements",{enumerable:!0,get:function(){return e.getDeepestBlockElements}})})(ni);var zl={},oi={},Vn={},ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.isLineBreakTag=o1;function o1(n){return["BR","WBR"].includes(n.tagName)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isLineBreakTag=void 0;var e=ii;Object.defineProperty(n,"isLineBreakTag",{enumerable:!0,get:function(){return e.isLineBreakTag}})})(Vn);var Gn={},si={};Object.defineProperty(si,"__esModule",{value:!0});si.isSingleTag=i1;function i1(n){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(n.tagName)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isSingleTag=void 0;var e=si;Object.defineProperty(n,"isSingleTag",{enumerable:!0,get:function(){return e.isSingleTag}})})(Gn);Object.defineProperty(oi,"__esModule",{value:!0});oi.getDeepestNode=Wl;var s1=pt,a1=Vn,l1=Gn;function Wl(n,e){e===void 0&&(e=!1);var t=e?"lastChild":"firstChild",r=e?"previousSibling":"nextSibling";if(n.nodeType===Node.ELEMENT_NODE&&n[t]){var o=n[t];if((0,l1.isSingleTag)(o)&&!(0,s1.isNativeInput)(o)&&!(0,a1.isLineBreakTag)(o))if(o[r])o=o[r];else if(o.parentNode!==null&&o.parentNode[r])o=o.parentNode[r];else return o.parentNode;return Wl(o,e)}return n}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDeepestNode=void 0;var e=oi;Object.defineProperty(n,"getDeepestNode",{enumerable:!0,get:function(){return e.getDeepestNode}})})(zl);var Kl={},ai={},en=Cn&&Cn.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(ai,"__esModule",{value:!0});ai.findAllInputs=f1;var c1=Wn,u1=ni,d1=Fo,h1=pt;function f1(n){return Array.from(n.querySelectorAll((0,d1.allInputsSelector)())).reduce(function(e,t){return(0,h1.isNativeInput)(t)||(0,c1.containsOnlyInlineElements)(t)?en(en([],e,!0),[t],!1):en(en([],e,!0),(0,u1.getDeepestBlockElements)(t),!0)},[])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.findAllInputs=void 0;var e=ai;Object.defineProperty(n,"findAllInputs",{enumerable:!0,get:function(){return e.findAllInputs}})})(Kl);var Vl={},li={};Object.defineProperty(li,"__esModule",{value:!0});li.isCollapsedWhitespaces=p1;function p1(n){return!/[^\t\n\r ]/.test(n)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCollapsedWhitespaces=void 0;var e=li;Object.defineProperty(n,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return e.isCollapsedWhitespaces}})})(Vl);var ci={},ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.isElement=v1;var g1=Jo;function v1(n){return(0,g1.isNumber)(n)?!1:!!n&&!!n.nodeType&&n.nodeType===Node.ELEMENT_NODE}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isElement=void 0;var e=ui;Object.defineProperty(n,"isElement",{enumerable:!0,get:function(){return e.isElement}})})(ci);var Gl={},di={},hi={},fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.isLeaf=m1;function m1(n){return n===null?!1:n.childNodes.length===0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isLeaf=void 0;var e=fi;Object.defineProperty(n,"isLeaf",{enumerable:!0,get:function(){return e.isLeaf}})})(hi);var pi={},gi={};Object.defineProperty(gi,"__esModule",{value:!0});gi.isNodeEmpty=x1;var y1=Vn,b1=ci,w1=pt,k1=Gn;function x1(n,e){var t="";return(0,k1.isSingleTag)(n)&&!(0,y1.isLineBreakTag)(n)?!1:((0,b1.isElement)(n)&&(0,w1.isNativeInput)(n)?t=n.value:n.textContent!==null&&(t=n.textContent.replace("​","")),e!==void 0&&(t=t.replace(new RegExp(e,"g"),"")),t.trim().length===0)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeEmpty=void 0;var e=gi;Object.defineProperty(n,"isNodeEmpty",{enumerable:!0,get:function(){return e.isNodeEmpty}})})(pi);Object.defineProperty(di,"__esModule",{value:!0});di.isEmpty=O1;var E1=hi,_1=pi;function O1(n,e){n.normalize();for(var t=[n];t.length>0;){var r=t.shift();if(r){if(n=r,(0,E1.isLeaf)(n)&&!(0,_1.isNodeEmpty)(n,e))return!1;t.push.apply(t,Array.from(n.childNodes))}}return!0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isEmpty=void 0;var e=di;Object.defineProperty(n,"isEmpty",{enumerable:!0,get:function(){return e.isEmpty}})})(Gl);var Yl={},vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.isFragment=C1;var T1=Jo;function C1(n){return(0,T1.isNumber)(n)?!1:!!n&&!!n.nodeType&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isFragment=void 0;var e=vi;Object.defineProperty(n,"isFragment",{enumerable:!0,get:function(){return e.isFragment}})})(Yl);var Xl={},mi={};Object.defineProperty(mi,"__esModule",{value:!0});mi.isHTMLString=A1;var S1=Kn;function A1(n){var e=(0,S1.make)("div");return e.innerHTML=n,e.childElementCount>0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isHTMLString=void 0;var e=mi;Object.defineProperty(n,"isHTMLString",{enumerable:!0,get:function(){return e.isHTMLString}})})(Xl);var Zl={},yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.offset=L1;function L1(n){var e=n.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,o=e.top+r,i=e.left+t;return{top:o,left:i,bottom:o+e.height,right:i+e.width}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.offset=void 0;var e=yi;Object.defineProperty(n,"offset",{enumerable:!0,get:function(){return e.offset}})})(Zl);var Jl={},bi={};Object.defineProperty(bi,"__esModule",{value:!0});bi.prepend=B1;function B1(n,e){Array.isArray(e)?(e=e.reverse(),e.forEach(function(t){return n.prepend(t)})):n.prepend(e)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.prepend=void 0;var e=bi;Object.defineProperty(n,"prepend",{enumerable:!0,get:function(){return e.prepend}})})(Jl);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.prepend=n.offset=n.make=n.isLineBreakTag=n.isSingleTag=n.isNodeEmpty=n.isLeaf=n.isHTMLString=n.isFragment=n.isEmpty=n.isElement=n.isContentEditable=n.isCollapsedWhitespaces=n.findAllInputs=n.isNativeInput=n.allInputsSelector=n.getDeepestNode=n.getDeepestBlockElements=n.getContentLength=n.fragmentToString=n.containsOnlyInlineElements=n.canSetCaret=n.calculateBaseline=n.blockElements=n.append=void 0;var e=Fo;Object.defineProperty(n,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}});var t=pt;Object.defineProperty(n,"isNativeInput",{enumerable:!0,get:function(){return t.isNativeInput}});var r=jl;Object.defineProperty(n,"append",{enumerable:!0,get:function(){return r.append}});var o=zo;Object.defineProperty(n,"blockElements",{enumerable:!0,get:function(){return o.blockElements}});var i=Rl;Object.defineProperty(n,"calculateBaseline",{enumerable:!0,get:function(){return i.calculateBaseline}});var s=Dl;Object.defineProperty(n,"canSetCaret",{enumerable:!0,get:function(){return s.canSetCaret}});var c=Wn;Object.defineProperty(n,"containsOnlyInlineElements",{enumerable:!0,get:function(){return c.containsOnlyInlineElements}});var f=Hl;Object.defineProperty(n,"fragmentToString",{enumerable:!0,get:function(){return f.fragmentToString}});var d=ql;Object.defineProperty(n,"getContentLength",{enumerable:!0,get:function(){return d.getContentLength}});var g=ni;Object.defineProperty(n,"getDeepestBlockElements",{enumerable:!0,get:function(){return g.getDeepestBlockElements}});var l=zl;Object.defineProperty(n,"getDeepestNode",{enumerable:!0,get:function(){return l.getDeepestNode}});var a=Kl;Object.defineProperty(n,"findAllInputs",{enumerable:!0,get:function(){return a.findAllInputs}});var u=Vl;Object.defineProperty(n,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return u.isCollapsedWhitespaces}});var p=Go;Object.defineProperty(n,"isContentEditable",{enumerable:!0,get:function(){return p.isContentEditable}});var b=ci;Object.defineProperty(n,"isElement",{enumerable:!0,get:function(){return b.isElement}});var v=Gl;Object.defineProperty(n,"isEmpty",{enumerable:!0,get:function(){return v.isEmpty}});var y=Yl;Object.defineProperty(n,"isFragment",{enumerable:!0,get:function(){return y.isFragment}});var h=Xl;Object.defineProperty(n,"isHTMLString",{enumerable:!0,get:function(){return h.isHTMLString}});var w=hi;Object.defineProperty(n,"isLeaf",{enumerable:!0,get:function(){return w.isLeaf}});var m=pi;Object.defineProperty(n,"isNodeEmpty",{enumerable:!0,get:function(){return m.isNodeEmpty}});var k=Vn;Object.defineProperty(n,"isLineBreakTag",{enumerable:!0,get:function(){return k.isLineBreakTag}});var S=Gn;Object.defineProperty(n,"isSingleTag",{enumerable:!0,get:function(){return S.isSingleTag}});var T=Kn;Object.defineProperty(n,"make",{enumerable:!0,get:function(){return T.make}});var E=Zl;Object.defineProperty(n,"offset",{enumerable:!0,get:function(){return E.offset}});var O=Jl;Object.defineProperty(n,"prepend",{enumerable:!0,get:function(){return O.prepend}})})(fe);const Le="cdx-list",_e={wrapper:Le,item:`${Le}__item`,itemContent:`${Le}__item-content`,itemChildren:`${Le}__item-children`};let Ql=class et{static get CSS(){return{..._e,orderedList:`${Le}-ordered`}}constructor(e,t){this.config=t,this.readOnly=e}renderWrapper(e){let t;return e===!0?t=fe.make("ol",[et.CSS.wrapper,et.CSS.orderedList]):t=fe.make("ol",[et.CSS.orderedList,et.CSS.itemChildren]),t}renderItem(e,t){const r=fe.make("li",et.CSS.item),o=fe.make("div",et.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()});return r.appendChild(o),r}getItemContent(e){const t=e.querySelector(`.${et.CSS.itemContent}`);return!t||fe.isEmpty(t)?"":t.innerHTML}getItemMeta(){return{}}composeDefaultMeta(){return{}}},ec=class tt{static get CSS(){return{..._e,unorderedList:`${Le}-unordered`}}constructor(e,t){this.config=t,this.readOnly=e}renderWrapper(e){let t;return e===!0?t=fe.make("ul",[tt.CSS.wrapper,tt.CSS.unorderedList]):t=fe.make("ul",[tt.CSS.unorderedList,tt.CSS.itemChildren]),t}renderItem(e,t){const r=fe.make("li",tt.CSS.item),o=fe.make("div",tt.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()});return r.appendChild(o),r}getItemContent(e){const t=e.querySelector(`.${tt.CSS.itemContent}`);return!t||fe.isEmpty(t)?"":t.innerHTML}getItemMeta(){return{}}composeDefaultMeta(){return{}}};function at(n){return n.nodeType===Node.ELEMENT_NODE}var Ut={},wi={},Yn={},Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.getContenteditableSlice=M1;var P1=fe;function M1(n,e,t,r,o){var i;o===void 0&&(o=!1);var s=document.createRange();if(r==="left"?(s.setStart(n,0),s.setEnd(e,t)):(s.setStart(e,t),s.setEnd(n,n.childNodes.length)),o===!0){var c=s.extractContents();return(0,P1.fragmentToString)(c)}var f=s.cloneContents(),d=document.createElement("div");d.appendChild(f);var g=(i=d.textContent)!==null&&i!==void 0?i:"";return g}Object.defineProperty(Yn,"__esModule",{value:!0});Yn.checkContenteditableSliceForEmptiness=j1;var N1=fe,I1=Xn;function j1(n,e,t,r){var o=(0,I1.getContenteditableSlice)(n,e,t,r);return(0,N1.isCollapsedWhitespaces)(o)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.checkContenteditableSliceForEmptiness=void 0;var e=Yn;Object.defineProperty(n,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}})})(wi);var tc={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getContenteditableSlice=void 0;var e=Xn;Object.defineProperty(n,"getContenteditableSlice",{enumerable:!0,get:function(){return e.getContenteditableSlice}})})(tc);var nc={},ki={};Object.defineProperty(ki,"__esModule",{value:!0});ki.focus=D1;var R1=fe;function D1(n,e){var t,r;if(e===void 0&&(e=!0),(0,R1.isNativeInput)(n)){n.focus();var o=e?0:n.value.length;n.setSelectionRange(o,o)}else{var i=document.createRange(),s=window.getSelection();if(!s)return;var c=function(a,u){u===void 0&&(u=!1);var p=document.createTextNode("");u?a.insertBefore(p,a.firstChild):a.appendChild(p),i.setStart(p,0),i.setEnd(p,0)},f=function(a){return a!=null},d=n.childNodes,g=e?d[0]:d[d.length-1];if(f(g)){for(;f(g)&&g.nodeType!==Node.TEXT_NODE;)g=e?g.firstChild:g.lastChild;if(f(g)&&g.nodeType===Node.TEXT_NODE){var l=(r=(t=g.textContent)===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0,o=e?0:l;i.setStart(g,o),i.setEnd(g,o)}else c(n,e)}else c(n);s.removeAllRanges(),s.addRange(i)}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.focus=void 0;var e=ki;Object.defineProperty(n,"focus",{enumerable:!0,get:function(){return e.focus}})})(nc);var xi={},Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.getCaretNodeAndOffset=$1;function $1(){var n=window.getSelection();if(n===null)return[null,0];var e=n.focusNode,t=n.focusOffset;return e===null?[null,0]:(e.nodeType!==Node.TEXT_NODE&&e.childNodes.length>0&&(e.childNodes[t]!==void 0?(e=e.childNodes[t],t=0):(e=e.childNodes[t-1],e.textContent!==null&&(t=e.textContent.length))),[e,t])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCaretNodeAndOffset=void 0;var e=Zn;Object.defineProperty(n,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return e.getCaretNodeAndOffset}})})(xi);var rc={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.getRange=F1;function F1(){var n=window.getSelection();return n&&n.rangeCount?n.getRangeAt(0):null}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRange=void 0;var e=Jn;Object.defineProperty(n,"getRange",{enumerable:!0,get:function(){return e.getRange}})})(rc);var oc={},Ei={};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.isCaretAtEndOfInput=U1;var Js=fe,H1=xi,q1=wi;function U1(n){var e=(0,Js.getDeepestNode)(n,!0);if(e===null)return!0;if((0,Js.isNativeInput)(e))return e.selectionEnd===e.value.length;var t=(0,H1.getCaretNodeAndOffset)(),r=t[0],o=t[1];return r===null?!1:(0,q1.checkContenteditableSliceForEmptiness)(n,r,o,"right")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCaretAtEndOfInput=void 0;var e=Ei;Object.defineProperty(n,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return e.isCaretAtEndOfInput}})})(oc);var ic={},_i={};Object.defineProperty(_i,"__esModule",{value:!0});_i.isCaretAtStartOfInput=K1;var tn=fe,z1=Zn,W1=Yn;function K1(n){var e=(0,tn.getDeepestNode)(n);if(e===null||(0,tn.isEmpty)(n))return!0;if((0,tn.isNativeInput)(e))return e.selectionEnd===0;if((0,tn.isEmpty)(n))return!0;var t=(0,z1.getCaretNodeAndOffset)(),r=t[0],o=t[1];return r===null?!1:(0,W1.checkContenteditableSliceForEmptiness)(n,r,o,"left")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCaretAtStartOfInput=void 0;var e=_i;Object.defineProperty(n,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return e.isCaretAtStartOfInput}})})(ic);var sc={},Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.save=Y1;var V1=fe,G1=Jn;function Y1(){var n=(0,G1.getRange)(),e=(0,V1.make)("span");if(e.id="cursor",e.hidden=!0,!!n)return n.insertNode(e),function(){var t=window.getSelection();t&&(n.setStartAfter(e),n.setEndAfter(e),t.removeAllRanges(),t.addRange(n),setTimeout(function(){e.remove()},150))}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.save=void 0;var e=Oi;Object.defineProperty(n,"save",{enumerable:!0,get:function(){return e.save}})})(sc);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.save=n.isCaretAtStartOfInput=n.isCaretAtEndOfInput=n.getRange=n.getCaretNodeAndOffset=n.focus=n.getContenteditableSlice=n.checkContenteditableSliceForEmptiness=void 0;var e=wi;Object.defineProperty(n,"checkContenteditableSliceForEmptiness",{enumerable:!0,get:function(){return e.checkContenteditableSliceForEmptiness}});var t=tc;Object.defineProperty(n,"getContenteditableSlice",{enumerable:!0,get:function(){return t.getContenteditableSlice}});var r=nc;Object.defineProperty(n,"focus",{enumerable:!0,get:function(){return r.focus}});var o=xi;Object.defineProperty(n,"getCaretNodeAndOffset",{enumerable:!0,get:function(){return o.getCaretNodeAndOffset}});var i=rc;Object.defineProperty(n,"getRange",{enumerable:!0,get:function(){return i.getRange}});var s=oc;Object.defineProperty(n,"isCaretAtEndOfInput",{enumerable:!0,get:function(){return s.isCaretAtEndOfInput}});var c=ic;Object.defineProperty(n,"isCaretAtStartOfInput",{enumerable:!0,get:function(){return c.isCaretAtStartOfInput}});var f=sc;Object.defineProperty(n,"save",{enumerable:!0,get:function(){return f.save}})})(Ut);let X1=class xe{static get CSS(){return{..._e,checklist:`${Le}-checklist`,itemChecked:`${Le}__checkbox--checked`,noHover:`${Le}__checkbox--no-hover`,checkbox:`${Le}__checkbox-check`,checkboxContainer:`${Le}__checkbox`}}constructor(e,t){this.config=t,this.readOnly=e}renderWrapper(e){let t;return e===!0?(t=fe.make("ul",[xe.CSS.wrapper,xe.CSS.checklist]),t.addEventListener("click",r=>{const o=r.target;if(o){const i=o.closest(`.${xe.CSS.checkboxContainer}`);i&&i.contains(o)&&this.toggleCheckbox(i)}})):t=fe.make("ul",[xe.CSS.checklist,xe.CSS.itemChildren]),t}renderItem(e,t){const r=fe.make("li",[xe.CSS.item,xe.CSS.item]),o=fe.make("div",xe.CSS.itemContent,{innerHTML:e,contentEditable:(!this.readOnly).toString()}),i=fe.make("span",xe.CSS.checkbox),s=fe.make("div",xe.CSS.checkboxContainer);return t.checked===!0&&s.classList.add(xe.CSS.itemChecked),i.innerHTML=d0,s.appendChild(i),r.appendChild(s),r.appendChild(o),r}getItemContent(e){const t=e.querySelector(`.${xe.CSS.itemContent}`);return!t||fe.isEmpty(t)?"":t.innerHTML}getItemMeta(e){const t=e.querySelector(`.${xe.CSS.checkboxContainer}`);return{checked:t?t.classList.contains(xe.CSS.itemChecked):!1}}composeDefaultMeta(){return{checked:!1}}toggleCheckbox(e){e.classList.toggle(xe.CSS.itemChecked),e.classList.add(xe.CSS.noHover),e.addEventListener("mouseleave",()=>this.removeSpecialHoverBehavior(e),{once:!0})}removeSpecialHoverBehavior(e){e.classList.remove(xe.CSS.noHover)}};function pr(n,e="after"){const t=[];let r;function o(i){switch(e){case"after":return i.nextElementSibling;case"before":return i.previousElementSibling}}for(r=o(n);r!==null;)t.push(r),r=o(r);return t.length!==0?t:null}function We(n,e=!0){let t=n;return n.classList.contains(_e.item)&&(t=n.querySelector(`.${_e.itemChildren}`)),t===null?[]:e?Array.from(t.querySelectorAll(`:scope > .${_e.item}`)):Array.from(t.querySelectorAll(`.${_e.item}`))}function Z1(n){return n.nextElementSibling===null}function J1(n){return n.querySelector(`.${_e.itemChildren}`)!==null}function nt(n){return n.querySelector(`.${_e.itemChildren}`)}function gr(n){let e=n;n.classList.contains(_e.item)&&(e=nt(n)),e!==null&&We(e).length===0&&e.remove()}function dn(n){return n.querySelector(`.${_e.itemContent}`)}function vt(n,e=!0){const t=dn(n);t&&Ut.focus(t,e)}let vr=class{get currentItem(){const e=window.getSelection();if(!e)return null;let t=e.anchorNode;return!t||(at(t)||(t=t.parentNode),!t)||!at(t)?null:t.closest(`.${_e.item}`)}get currentItemLevel(){const e=this.currentItem;if(e===null)return null;let t=e.parentNode,r=0;for(;t!==null&&t!==this.listWrapper;)at(t)&&t.classList.contains(_e.item)&&(r+=1),t=t.parentNode;return r+1}constructor({data:e,config:t,api:r,readOnly:o,block:i},s){this.config=t,this.data=e,this.readOnly=o,this.api=r,this.block=i,this.renderer=s}render(){return this.listWrapper=this.renderer.renderWrapper(!0),this.data.items.length?this.appendItems(this.data.items,this.listWrapper):this.appendItems([{content:"",meta:{},items:[]}],this.listWrapper),this.readOnly||this.listWrapper.addEventListener("keydown",e=>{switch(e.key){case"Enter":e.shiftKey||this.enterPressed(e);break;case"Backspace":this.backspace(e);break;case"Tab":e.shiftKey?this.shiftTab(e):this.addTab(e);break}},!1),"start"in this.data.meta&&this.data.meta.start!==void 0&&this.changeStartWith(this.data.meta.start),"counterType"in this.data.meta&&this.data.meta.counterType!==void 0&&this.changeCounters(this.data.meta.counterType),this.listWrapper}save(e){const t=e??this.listWrapper,r=s=>We(s).map(c=>{const f=nt(c),d=this.renderer.getItemContent(c),g=this.renderer.getItemMeta(c),l=f?r(f):[];return{content:d,meta:g,items:l}}),o=t?r(t):[];let i={style:this.data.style,meta:{},items:o};return this.data.style==="ordered"&&(i.meta={start:this.data.meta.start,counterType:this.data.meta.counterType}),i}static get pasteConfig(){return{tags:["OL","UL","LI"]}}merge(e){const t=this.block.holder.querySelectorAll(`.${_e.item}`),r=t[t.length-1],o=dn(r);if(r===null||o===null||(o.insertAdjacentHTML("beforeend",e.items[0].content),this.listWrapper===void 0))return;const i=We(this.listWrapper);if(i.length===0)return;const s=i[i.length-1];let c=nt(s);const f=e.items.shift();f!==void 0&&(f.items.length!==0&&(c===null&&(c=this.renderer.renderWrapper(!1)),this.appendItems(f.items,c)),e.items.length>0&&this.appendItems(e.items,this.listWrapper))}onPaste(e){const t=e.detail.data;this.data=this.pasteHandler(t);const r=this.listWrapper;r&&r.parentNode&&r.parentNode.replaceChild(this.render(),r)}pasteHandler(e){const{tagName:t}=e;let r="unordered",o;switch(t){case"OL":r="ordered",o="ol";break;case"UL":case"LI":r="unordered",o="ul"}const i={style:r,meta:{},items:[]};r==="ordered"&&(this.data.meta.counterType="numeric",this.data.meta.start=1);const s=c=>Array.from(c.querySelectorAll(":scope > li")).map(f=>{const d=f.querySelector(`:scope > ${o}`),g=d?s(d):[];return{content:f.innerHTML??"",meta:{},items:g}});return i.items=s(e),i}changeStartWith(e){this.listWrapper.style.setProperty("counter-reset",`item ${e-1}`),this.data.meta.start=e}changeCounters(e){this.listWrapper.style.setProperty("--list-counter-type",e),this.data.meta.counterType=e}enterPressed(e){var t;const r=this.currentItem;if(e.stopPropagation(),e.preventDefault(),e.isComposing||r===null)return;const o=((t=this.renderer)==null?void 0:t.getItemContent(r).trim().length)===0,i=r.parentNode===this.listWrapper,s=r.previousElementSibling===null,c=this.api.blocks.getCurrentBlockIndex();if(i&&o)if(Z1(r)&&!J1(r)){s?this.convertItemToDefaultBlock(c,!0):this.convertItemToDefaultBlock();return}else{this.splitList(r);return}else if(o){this.unshiftItem(r);return}else this.splitItem(r)}backspace(e){var t;const r=this.currentItem;if(r!==null&&Ut.isCaretAtStartOfInput(r)&&((t=window.getSelection())==null?void 0:t.isCollapsed)!==!1){if(e.stopPropagation(),r.parentNode===this.listWrapper&&r.previousElementSibling===null){this.convertFirstItemToDefaultBlock();return}e.preventDefault(),this.mergeItemWithPrevious(r)}}shiftTab(e){e.stopPropagation(),e.preventDefault(),this.currentItem!==null&&this.unshiftItem(this.currentItem)}unshiftItem(e){if(!e.parentNode||!at(e.parentNode))return;const t=e.parentNode.closest(`.${_e.item}`);if(!t)return;let r=nt(e);if(e.parentElement===null)return;const o=pr(e);o!==null&&(r===null&&(r=this.renderer.renderWrapper(!1)),o.forEach(i=>{r.appendChild(i)}),e.appendChild(r)),t.after(e),vt(e,!1),gr(t)}splitList(e){const t=We(e),r=this.block,o=this.api.blocks.getCurrentBlockIndex();if(t.length!==0){const f=t[0];this.unshiftItem(f),vt(e,!1)}if(e.previousElementSibling===null&&e.parentNode===this.listWrapper){this.convertItemToDefaultBlock(o);return}const i=pr(e);if(i===null)return;const s=this.renderer.renderWrapper(!0);i.forEach(f=>{s.appendChild(f)});const c=this.save(s);c.meta.start=this.data.style=="ordered"?1:void 0,this.api.blocks.insert(r==null?void 0:r.name,c,this.config,o+1),this.convertItemToDefaultBlock(o+1),s.remove()}splitItem(e){const[t,r]=Ut.getCaretNodeAndOffset();if(t===null)return;const o=dn(e);let i;o===null?i="":i=Ut.getContenteditableSlice(o,t,r,"right",!0);const s=nt(e),c=this.renderItem(i);e==null||e.after(c),s&&c.appendChild(s),vt(c)}mergeItemWithPrevious(e){const t=e.previousElementSibling,r=e.parentNode;if(r===null||!at(r))return;const o=r.closest(`.${_e.item}`);if(!t&&!o||t&&!at(t))return;let i;if(t){const l=We(t,!1);l.length!==0&&l.length!==0?i=l[l.length-1]:i=t}else i=o;const s=this.renderer.getItemContent(e);if(!i)return;vt(i,!1);const c=dn(i);if(c===null)return;c.insertAdjacentHTML("beforeend",s);const f=We(e);if(f.length===0){e.remove(),gr(i);return}const d=t||o,g=nt(d)??this.renderer.renderWrapper(!1);t?f.forEach(l=>{g.appendChild(l)}):f.forEach(l=>{g.prepend(l)}),nt(d)===null&&i.appendChild(g),e.remove()}addTab(e){var t;e.stopPropagation(),e.preventDefault();const r=this.currentItem;if(!r)return;if(((t=this.config)==null?void 0:t.maxLevel)!==void 0){const s=this.currentItemLevel;if(s!==null&&s===this.config.maxLevel)return}const o=r.previousSibling;if(o===null||!at(o))return;const i=nt(o);if(i)i.appendChild(r),We(r).forEach(s=>{i.appendChild(s)});else{const s=this.renderer.renderWrapper(!1);s.appendChild(r),We(r).forEach(c=>{s.appendChild(c)}),o.appendChild(s)}gr(r),vt(r,!1)}convertItemToDefaultBlock(e,t){let r;const o=this.currentItem,i=o!==null?this.renderer.getItemContent(o):"";t===!0&&this.api.blocks.delete(),e!==void 0?r=this.api.blocks.insert(void 0,{text:i},void 0,e):r=this.api.blocks.insert(),o==null||o.remove(),this.api.caret.setToBlock(r,"start")}convertFirstItemToDefaultBlock(){const e=this.currentItem;if(e===null)return;const t=We(e);if(t.length!==0){const s=t[0];this.unshiftItem(s),vt(e)}const r=pr(e),o=this.api.blocks.getCurrentBlockIndex(),i=r===null;this.convertItemToDefaultBlock(o,i)}renderItem(e,t){const r=t??this.renderer.composeDefaultMeta();switch(!0){case this.renderer instanceof Ql:return this.renderer.renderItem(e,r);case this.renderer instanceof ec:return this.renderer.renderItem(e,r);default:return this.renderer.renderItem(e,r)}}appendItems(e,t){e.forEach(r=>{var o;const i=this.renderItem(r.content,r.meta);if(t.appendChild(i),r.items.length){const s=(o=this.renderer)==null?void 0:o.renderWrapper(!1);this.appendItems(r.items,s),i.appendChild(s)}})}};const mt={wrapper:`${Le}-start-with-field`,input:`${Le}-start-with-field__input`,startWithElementWrapperInvalid:`${Le}-start-with-field--invalid`};function Q1(n,{value:e,placeholder:t,attributes:r,sanitize:o}){const i=fe.make("div",mt.wrapper),s=fe.make("input",mt.input,{placeholder:t,tabIndex:-1,value:e});for(const c in r)s.setAttribute(c,r[c]);return i.appendChild(s),s.addEventListener("input",()=>{o!==void 0&&(s.value=o(s.value));const c=s.checkValidity();!c&&!i.classList.contains(mt.startWithElementWrapperInvalid)&&i.classList.add(mt.startWithElementWrapperInvalid),c&&i.classList.contains(mt.startWithElementWrapperInvalid)&&i.classList.remove(mt.startWithElementWrapperInvalid),c&&n(s.value)}),i}const Ft=new Map([["Numeric","numeric"],["Lower Roman","lower-roman"],["Upper Roman","upper-roman"],["Lower Alpha","lower-alpha"],["Upper Alpha","upper-alpha"]]),Qs=new Map([["numeric",h0],["lower-roman",f0],["upper-roman",p0],["lower-alpha",v0],["upper-alpha",g0]]);function ew(n){return n.replace(/\D+/g,"")}function tw(n){return typeof n.items[0]=="string"}function nw(n){return!("meta"in n)}function rw(n){return typeof n.items[0]!="string"&&"text"in n.items[0]&&"checked"in n.items[0]&&typeof n.items[0].text=="string"&&typeof n.items[0].checked=="boolean"}function ow(n){const e=[];return tw(n)?(n.items.forEach(t=>{e.push({content:t,meta:{},items:[]})}),{style:n.style,meta:{},items:e}):rw(n)?(n.items.forEach(t=>{e.push({content:t.text,meta:{checked:t.checked},items:[]})}),{style:"checklist",meta:{},items:e}):nw(n)?{style:n.style,meta:{},items:n.items}:structuredClone(n)}let iw=class Nr{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return[{icon:Ys,title:"Unordered List",data:{style:"unordered"}},{icon:Xs,title:"Ordered List",data:{style:"ordered"}},{icon:Gs,title:"Checklist",data:{style:"checklist"}}]}static get pasteConfig(){return{tags:["OL","UL","LI"]}}static get conversionConfig(){return{export:e=>Nr.joinRecursive(e),import:(e,t)=>({meta:{},items:[{content:e,meta:{},items:[]}],style:(t==null?void 0:t.defaultStyle)!==void 0?t.defaultStyle:"unordered"})}}get listStyle(){return this.data.style||this.defaultListStyle}set listStyle(e){var t;this.data.style=e,this.changeTabulatorByStyle();const r=this.list.render();(t=this.listElement)==null||t.replaceWith(r),this.listElement=r}constructor({data:e,config:t,api:r,readOnly:o,block:i}){var s;this.api=r,this.readOnly=o,this.config=t,this.block=i,this.defaultListStyle=((s=this.config)==null?void 0:s.defaultStyle)||"unordered",this.defaultCounterTypes=this.config.counterTypes||Array.from(Ft.values());const c={style:this.defaultListStyle,meta:{},items:[]};this.data=Object.keys(e).length?ow(e):c,this.listStyle==="ordered"&&this.data.meta.counterType===void 0&&(this.data.meta.counterType="numeric"),this.changeTabulatorByStyle()}static joinRecursive(e){return e.items.map(t=>`${t.content} ${Nr.joinRecursive(t)}`).join("")}render(){return this.listElement=this.list.render(),this.listElement}save(){return this.data=this.list.save(),this.data}merge(e){this.list.merge(e)}renderSettings(){const e=[{label:this.api.i18n.t("Unordered"),icon:Ys,closeOnActivate:!0,isActive:this.listStyle=="unordered",onActivate:()=>{this.listStyle="unordered"}},{label:this.api.i18n.t("Ordered"),icon:Xs,closeOnActivate:!0,isActive:this.listStyle=="ordered",onActivate:()=>{this.listStyle="ordered"}},{label:this.api.i18n.t("Checklist"),icon:Gs,closeOnActivate:!0,isActive:this.listStyle=="checklist",onActivate:()=>{this.listStyle="checklist"}}];if(this.listStyle==="ordered"){const t=Q1(i=>this.changeStartWith(Number(i)),{value:String(this.data.meta.start??1),placeholder:"",attributes:{required:"true"},sanitize:i=>ew(i)}),r=[{label:this.api.i18n.t("Start with"),icon:m0,children:{items:[{element:t,type:"html"}]}}],o={label:this.api.i18n.t("Counter type"),icon:Qs.get(this.data.meta.counterType),children:{items:[]}};Ft.forEach((i,s)=>{const c=Ft.get(s);this.defaultCounterTypes.includes(c)&&o.children.items.push({title:this.api.i18n.t(s),icon:Qs.get(c),isActive:this.data.meta.counterType===Ft.get(s),closeOnActivate:!0,onActivate:()=>{this.changeCounters(Ft.get(s))}})}),o.children.items.length>1&&r.push(o),e.push({type:"separator"},...r)}return e}onPaste(e){const{tagName:t}=e.detail.data;switch(t){case"OL":this.listStyle="ordered";break;case"UL":case"LI":this.listStyle="unordered"}this.list.onPaste(e)}pasteHandler(e){return this.list.pasteHandler(e)}changeCounters(e){var t;(t=this.list)==null||t.changeCounters(e),this.data.meta.counterType=e}changeStartWith(e){var t;(t=this.list)==null||t.changeStartWith(e),this.data.meta.start=e}changeTabulatorByStyle(){switch(this.listStyle){case"ordered":this.list=new vr({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new Ql(this.readOnly,this.config));break;case"unordered":this.list=new vr({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new ec(this.readOnly,this.config));break;case"checklist":this.list=new vr({data:this.data,readOnly:this.readOnly,api:this.api,config:this.config,block:this.block},new X1(this.readOnly,this.config));break}}};(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode('.image-tool{--bg-color: #cdd1e0;--front-color: #388ae5;--border-color: #e8e8eb}.image-tool__image{border-radius:3px;overflow:hidden;margin-bottom:10px;padding-bottom:0}.image-tool__image-picture{max-width:100%;vertical-align:bottom;display:block}.image-tool__image-preloader{width:50px;height:50px;border-radius:50%;background-size:cover;margin:auto;position:relative;background-color:var(--bg-color);background-position:center center}.image-tool__image-preloader:after{content:"";position:absolute;z-index:3;width:60px;height:60px;border-radius:50%;border:2px solid var(--bg-color);border-top-color:var(--front-color);left:50%;top:50%;margin-top:-30px;margin-left:-30px;animation:image-preloader-spin 2s infinite linear;box-sizing:border-box}.image-tool__caption{visibility:hidden;position:absolute;bottom:0;left:0;margin-bottom:10px}.image-tool__caption[contentEditable=true][data-placeholder]:before{position:absolute!important;content:attr(data-placeholder);color:#707684;font-weight:400;display:none}.image-tool__caption[contentEditable=true][data-placeholder]:empty:before{display:block}.image-tool__caption[contentEditable=true][data-placeholder]:empty:focus:before{display:none}.image-tool--empty .image-tool__image,.image-tool--empty .image-tool__image-preloader{display:none}.image-tool--empty .image-tool__caption,.image-tool--uploading .image-tool__caption{visibility:hidden!important}.image-tool .cdx-button{display:flex;align-items:center;justify-content:center}.image-tool .cdx-button svg{height:auto;margin:0 6px 0 0}.image-tool--filled .cdx-button,.image-tool--filled .image-tool__image-preloader{display:none}.image-tool--uploading .image-tool__image{min-height:200px;display:flex;border:1px solid var(--border-color);background-color:#fff}.image-tool--uploading .image-tool__image-picture,.image-tool--uploading .cdx-button{display:none}.image-tool--withBorder .image-tool__image{border:1px solid var(--border-color)}.image-tool--withBackground .image-tool__image{padding:15px;background:var(--bg-color)}.image-tool--withBackground .image-tool__image-picture{max-width:60%;margin:0 auto}.image-tool--stretched .image-tool__image-picture{width:100%}.image-tool--caption .image-tool__caption{visibility:visible}.image-tool--caption{padding-bottom:50px}@keyframes image-preloader-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}')),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const sw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19V19C9.13623 19 8.20435 19 7.46927 18.6955C6.48915 18.2895 5.71046 17.5108 5.30448 16.5307C5 15.7956 5 14.8638 5 13V12C5 9.19108 5 7.78661 5.67412 6.77772C5.96596 6.34096 6.34096 5.96596 6.77772 5.67412C7.78661 5 9.19108 5 12 5H13.5C14.8956 5 15.5933 5 16.1611 5.17224C17.4395 5.56004 18.44 6.56046 18.8278 7.83886C19 8.40666 19 9.10444 19 10.5V10.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 17.5L17.5 6.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 10.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.9919 19H11.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13L13 5"/></svg>',aw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 9.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 5H14.5096"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.625 5H15C17.2091 5 19 6.79086 19 9V9.375"/><path stroke="currentColor" stroke-width="2" d="M9.375 5L9 5C6.79086 5 5 6.79086 5 9V9.375"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 5H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 9.5H5.00957"/><path stroke="currentColor" stroke-width="2" d="M9.375 19H9C6.79086 19 5 17.2091 5 15V14.625"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 19H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 14.55H5.00957"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/></svg>',ac='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.13968 15.32L8.69058 11.5661C9.02934 11.2036 9.48873 11 9.96774 11C10.4467 11 10.9061 11.2036 11.2449 11.5661L15.3871 16M13.5806 14.0664L15.0132 12.533C15.3519 12.1705 15.8113 11.9668 16.2903 11.9668C16.7693 11.9668 17.2287 12.1705 17.5675 12.533L18.841 13.9634"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.7778 9.33331H13.7867"/></svg>',lw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>',cw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';function yt(n,e=null,t={}){const r=document.createElement(n);Array.isArray(e)?r.classList.add(...e):e!==null&&r.classList.add(e);for(const o in t)t.hasOwnProperty(o)&&(r[o]=t[o]);return r}var hn=(n=>(n.Empty="empty",n.Uploading="uploading",n.Filled="filled",n))(hn||{});let uw=class{constructor({api:e,config:t,onSelectFile:r,readOnly:o}){this.api=e,this.config=t,this.onSelectFile=r,this.readOnly=o,this.nodes={wrapper:yt("div",[this.CSS.baseClass,this.CSS.wrapper]),imageContainer:yt("div",[this.CSS.imageContainer]),fileButton:this.createFileButton(),imageEl:void 0,imagePreloader:yt("div",this.CSS.imagePreloader),caption:yt("div",[this.CSS.input,this.CSS.caption],{contentEditable:!this.readOnly})},this.nodes.caption.dataset.placeholder=this.config.captionPlaceholder,this.nodes.imageContainer.appendChild(this.nodes.imagePreloader),this.nodes.wrapper.appendChild(this.nodes.imageContainer),this.nodes.wrapper.appendChild(this.nodes.caption),this.nodes.wrapper.appendChild(this.nodes.fileButton)}applyTune(e,t){this.nodes.wrapper.classList.toggle(`${this.CSS.wrapper}--${e}`,t)}render(){return this.toggleStatus("empty"),this.nodes.wrapper}showPreloader(e){this.nodes.imagePreloader.style.backgroundImage=`url(${e})`,this.toggleStatus("uploading")}hidePreloader(){this.nodes.imagePreloader.style.backgroundImage="",this.toggleStatus("empty")}fillImage(e){const t=/\.mp4$/.test(e)?"VIDEO":"IMG",r={src:e};let o="load";t==="VIDEO"&&(r.autoplay=!0,r.loop=!0,r.muted=!0,r.playsinline=!0,o="loadeddata"),this.nodes.imageEl=yt(t,this.CSS.imageEl,r),this.nodes.imageEl.addEventListener(o,()=>{this.toggleStatus("filled"),this.nodes.imagePreloader!==void 0&&(this.nodes.imagePreloader.style.backgroundImage="")}),this.nodes.imageContainer.appendChild(this.nodes.imageEl)}fillCaption(e){this.nodes.caption!==void 0&&(this.nodes.caption.innerHTML=e)}toggleStatus(e){for(const t in hn)if(Object.prototype.hasOwnProperty.call(hn,t)){const r=hn[t];this.nodes.wrapper.classList.toggle(`${this.CSS.wrapper}--${r}`,r===e)}}get CSS(){return{baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,button:this.api.styles.button,wrapper:"image-tool",imageContainer:"image-tool__image",imagePreloader:"image-tool__image-preloader",imageEl:"image-tool__image-picture",caption:"image-tool__caption"}}createFileButton(){const e=yt("div",[this.CSS.button]);return e.innerHTML=this.config.buttonContent??`${ac} ${this.api.i18n.t("Select an Image")}`,e.addEventListener("click",()=>{this.onSelectFile()}),e}};function dw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lc={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(window,function(){return function(t){var r={};function o(i){if(r[i])return r[i].exports;var s=r[i]={i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=t,o.c=r,o.d=function(i,s,c){o.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:c})},o.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},o.t=function(i,s){if(1&s&&(i=o(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var f in i)o.d(c,f,(function(d){return i[d]}).bind(null,f));return c},o.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(s,"a",s),s},o.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},o.p="",o(o.s=3)}([function(t,r){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}t.exports=o},function(t,r,o){(function(i){var s=o(2),c=setTimeout;function f(){}function d(v){if(!(this instanceof d))throw new TypeError("Promises must be constructed via new");if(typeof v!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],b(v,this)}function g(v,y){for(;v._state===3;)v=v._value;v._state!==0?(v._handled=!0,d._immediateFn(function(){var h=v._state===1?y.onFulfilled:y.onRejected;if(h!==null){var w;try{w=h(v._value)}catch(m){return void a(y.promise,m)}l(y.promise,w)}else(v._state===1?l:a)(y.promise,v._value)})):v._deferreds.push(y)}function l(v,y){try{if(y===v)throw new TypeError("A promise cannot be resolved with itself.");if(y&&(typeof y=="object"||typeof y=="function")){var h=y.then;if(y instanceof d)return v._state=3,v._value=y,void u(v);if(typeof h=="function")return void b((w=h,m=y,function(){w.apply(m,arguments)}),v)}v._state=1,v._value=y,u(v)}catch(k){a(v,k)}var w,m}function a(v,y){v._state=2,v._value=y,u(v)}function u(v){v._state===2&&v._deferreds.length===0&&d._immediateFn(function(){v._handled||d._unhandledRejectionFn(v._value)});for(var y=0,h=v._deferreds.length;y<h;y++)g(v,v._deferreds[y]);v._deferreds=null}function p(v,y,h){this.onFulfilled=typeof v=="function"?v:null,this.onRejected=typeof y=="function"?y:null,this.promise=h}function b(v,y){var h=!1;try{v(function(w){h||(h=!0,l(y,w))},function(w){h||(h=!0,a(y,w))})}catch(w){if(h)return;h=!0,a(y,w)}}d.prototype.catch=function(v){return this.then(null,v)},d.prototype.then=function(v,y){var h=new this.constructor(f);return g(this,new p(v,y,h)),h},d.prototype.finally=s.a,d.all=function(v){return new d(function(y,h){if(!v||v.length===void 0)throw new TypeError("Promise.all accepts an array");var w=Array.prototype.slice.call(v);if(w.length===0)return y([]);var m=w.length;function k(T,E){try{if(E&&(typeof E=="object"||typeof E=="function")){var O=E.then;if(typeof O=="function")return void O.call(E,function(C){k(T,C)},h)}w[T]=E,--m==0&&y(w)}catch(C){h(C)}}for(var S=0;S<w.length;S++)k(S,w[S])})},d.resolve=function(v){return v&&typeof v=="object"&&v.constructor===d?v:new d(function(y){y(v)})},d.reject=function(v){return new d(function(y,h){h(v)})},d.race=function(v){return new d(function(y,h){for(var w=0,m=v.length;w<m;w++)v[w].then(y,h)})},d._immediateFn=typeof i=="function"&&function(v){i(v)}||function(v){c(v,0)},d._unhandledRejectionFn=function(v){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",v)},r.a=d}).call(this,o(5).setImmediate)},function(t,r,o){r.a=function(i){var s=this.constructor;return this.then(function(c){return s.resolve(i()).then(function(){return c})},function(c){return s.resolve(i()).then(function(){return s.reject(c)})})}},function(t,r,o){function i(b){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(b)}o(4);var s,c,f,d,g,l,a,u=o(8),p=(c=function(b){return new Promise(function(v,y){b=d(b),(b=g(b)).beforeSend&&b.beforeSend();var h=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");h.open(b.method,b.url),h.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(b.headers).forEach(function(m){var k=b.headers[m];h.setRequestHeader(m,k)});var w=b.ratio;h.upload.addEventListener("progress",function(m){var k=Math.round(m.loaded/m.total*100),S=Math.ceil(k*w/100);b.progress(Math.min(S,100))},!1),h.addEventListener("progress",function(m){var k=Math.round(m.loaded/m.total*100),S=Math.ceil(k*(100-w)/100)+w;b.progress(Math.min(S,100))},!1),h.onreadystatechange=function(){if(h.readyState===4){var m=h.response;try{m=JSON.parse(m)}catch{}var k=u.parseHeaders(h.getAllResponseHeaders()),S={body:m,code:h.status,headers:k};a(h.status)?v(S):y(S)}},h.send(b.data)})},f=function(b){return b.method="POST",c(b)},d=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(b.url&&typeof b.url!="string")throw new Error("Url must be a string");if(b.url=b.url||"",b.method&&typeof b.method!="string")throw new Error("`method` must be a string or null");if(b.method=b.method?b.method.toUpperCase():"GET",b.headers&&i(b.headers)!=="object")throw new Error("`headers` must be an object or null");if(b.headers=b.headers||{},b.type&&(typeof b.type!="string"||!Object.values(s).includes(b.type)))throw new Error("`type` must be taken from module's «contentType» library");if(b.progress&&typeof b.progress!="function")throw new Error("`progress` must be a function or null");if(b.progress=b.progress||function(v){},b.beforeSend=b.beforeSend||function(v){},b.ratio&&typeof b.ratio!="number")throw new Error("`ratio` must be a number");if(b.ratio<0||b.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(b.ratio=b.ratio||90,b.accept&&typeof b.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(b.accept=b.accept||"*/*",b.multiple&&typeof b.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(b.multiple=b.multiple||!1,b.fieldName&&typeof b.fieldName!="string")throw new Error("`fieldName` must be a string");return b.fieldName=b.fieldName||"files",b},g=function(b){switch(b.method){case"GET":var v=l(b.data,s.URLENCODED);delete b.data,b.url=/\?/.test(b.url)?b.url+"&"+v:b.url+"?"+v;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var y=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||s.JSON}(b);(u.isFormData(b.data)||u.isFormElement(b.data))&&(y=s.FORM),b.data=l(b.data,y),y!==p.contentType.FORM&&(b.headers["content-type"]=y)}return b},l=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case s.URLENCODED:return u.urlEncode(b);case s.JSON:return u.jsonEncode(b);case s.FORM:return u.formEncode(b);default:return b}},a=function(b){return b>=200&&b<300},{contentType:s={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:c,get:function(b){return b.method="GET",c(b)},post:f,transport:function(b){return b=d(b),u.selectFiles(b).then(function(v){for(var y=new FormData,h=0;h<v.length;h++)y.append(b.fieldName,v[h],v[h].name);u.isObject(b.data)&&Object.keys(b.data).forEach(function(m){var k=b.data[m];y.append(m,k)});var w=b.beforeSend;return b.beforeSend=function(){return w(v)},b.data=y,f(b)})},selectFiles:function(b){return delete(b=d(b)).beforeSend,u.selectFiles(b)}});t.exports=p},function(t,r,o){o.r(r);var i=o(1);window.Promise=window.Promise||i.a},function(t,r,o){(function(i){var s=i!==void 0&&i||typeof self<"u"&&self||window,c=Function.prototype.apply;function f(d,g){this._id=d,this._clearFn=g}r.setTimeout=function(){return new f(c.call(setTimeout,s,arguments),clearTimeout)},r.setInterval=function(){return new f(c.call(setInterval,s,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(d){d&&d.close()},f.prototype.unref=f.prototype.ref=function(){},f.prototype.close=function(){this._clearFn.call(s,this._id)},r.enroll=function(d,g){clearTimeout(d._idleTimeoutId),d._idleTimeout=g},r.unenroll=function(d){clearTimeout(d._idleTimeoutId),d._idleTimeout=-1},r._unrefActive=r.active=function(d){clearTimeout(d._idleTimeoutId);var g=d._idleTimeout;g>=0&&(d._idleTimeoutId=setTimeout(function(){d._onTimeout&&d._onTimeout()},g))},o(6),r.setImmediate=typeof self<"u"&&self.setImmediate||i!==void 0&&i.setImmediate||this&&this.setImmediate,r.clearImmediate=typeof self<"u"&&self.clearImmediate||i!==void 0&&i.clearImmediate||this&&this.clearImmediate}).call(this,o(0))},function(t,r,o){(function(i,s){(function(c,f){if(!c.setImmediate){var d,g,l,a,u,p=1,b={},v=!1,y=c.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(c);h=h&&h.setTimeout?h:c,{}.toString.call(c.process)==="[object process]"?d=function(k){s.nextTick(function(){m(k)})}:function(){if(c.postMessage&&!c.importScripts){var k=!0,S=c.onmessage;return c.onmessage=function(){k=!1},c.postMessage("","*"),c.onmessage=S,k}}()?(a="setImmediate$"+Math.random()+"$",u=function(k){k.source===c&&typeof k.data=="string"&&k.data.indexOf(a)===0&&m(+k.data.slice(a.length))},c.addEventListener?c.addEventListener("message",u,!1):c.attachEvent("onmessage",u),d=function(k){c.postMessage(a+k,"*")}):c.MessageChannel?((l=new MessageChannel).port1.onmessage=function(k){m(k.data)},d=function(k){l.port2.postMessage(k)}):y&&"onreadystatechange"in y.createElement("script")?(g=y.documentElement,d=function(k){var S=y.createElement("script");S.onreadystatechange=function(){m(k),S.onreadystatechange=null,g.removeChild(S),S=null},g.appendChild(S)}):d=function(k){setTimeout(m,0,k)},h.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var S=new Array(arguments.length-1),T=0;T<S.length;T++)S[T]=arguments[T+1];var E={callback:k,args:S};return b[p]=E,d(p),p++},h.clearImmediate=w}function w(k){delete b[k]}function m(k){if(v)setTimeout(m,0,k);else{var S=b[k];if(S){v=!0;try{(function(T){var E=T.callback,O=T.args;switch(O.length){case 0:E();break;case 1:E(O[0]);break;case 2:E(O[0],O[1]);break;case 3:E(O[0],O[1],O[2]);break;default:E.apply(f,O)}})(S)}finally{w(k),v=!1}}}}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,o(0),o(7))},function(t,r){var o,i,s=t.exports={};function c(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}function d(h){if(o===setTimeout)return setTimeout(h,0);if((o===c||!o)&&setTimeout)return o=setTimeout,setTimeout(h,0);try{return o(h,0)}catch{try{return o.call(null,h,0)}catch{return o.call(this,h,0)}}}(function(){try{o=typeof setTimeout=="function"?setTimeout:c}catch{o=c}try{i=typeof clearTimeout=="function"?clearTimeout:f}catch{i=f}})();var g,l=[],a=!1,u=-1;function p(){a&&g&&(a=!1,g.length?l=g.concat(l):u=-1,l.length&&b())}function b(){if(!a){var h=d(p);a=!0;for(var w=l.length;w;){for(g=l,l=[];++u<w;)g&&g[u].run();u=-1,w=l.length}g=null,a=!1,function(m){if(i===clearTimeout)return clearTimeout(m);if((i===f||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(m);try{i(m)}catch{try{return i.call(null,m)}catch{return i.call(this,m)}}}(h)}}function v(h,w){this.fun=h,this.array=w}function y(){}s.nextTick=function(h){var w=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)w[m-1]=arguments[m];l.push(new v(h,w)),l.length!==1||a||d(b)},v.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=y,s.addListener=y,s.once=y,s.off=y,s.removeListener=y,s.removeAllListeners=y,s.emit=y,s.prependListener=y,s.prependOnceListener=y,s.listeners=function(h){return[]},s.binding=function(h){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(h){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,r,o){function i(c,f){for(var d=0;d<f.length;d++){var g=f[d];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(c,g.key,g)}}var s=o(9);t.exports=function(){function c(){(function(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")})(this,c)}var f,d,g;return f=c,g=[{key:"urlEncode",value:function(l){return s(l)}},{key:"jsonEncode",value:function(l){return JSON.stringify(l)}},{key:"formEncode",value:function(l){if(this.isFormData(l))return l;if(this.isFormElement(l))return new FormData(l);if(this.isObject(l)){var a=new FormData;return Object.keys(l).forEach(function(u){var p=l[u];a.append(u,p)}),a}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(l){return Object.prototype.toString.call(l)==="[object Object]"}},{key:"isFormData",value:function(l){return l instanceof FormData}},{key:"isFormElement",value:function(l){return l instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(a,u){var p=document.createElement("INPUT");p.type="file",l.multiple&&p.setAttribute("multiple","multiple"),l.accept&&p.setAttribute("accept",l.accept),p.style.display="none",document.body.appendChild(p),p.addEventListener("change",function(b){var v=b.target.files;a(v),document.body.removeChild(p)},!1),p.click()})}},{key:"parseHeaders",value:function(l){var a=l.trim().split(/[\r\n]+/),u={};return a.forEach(function(p){var b=p.split(": "),v=b.shift(),y=b.join(": ");v&&(u[v]=y)}),u}}],(d=null)&&i(f.prototype,d),g&&i(f,g),c}()},function(t,r){var o=function(s){return encodeURIComponent(s).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},i=function(s,c,f,d){return c=c||null,f=f||"&",d=d||null,s?function(g){for(var l=new Array,a=0;a<g.length;a++)g[a]&&l.push(g[a]);return l}(Object.keys(s).map(function(g){var l,a,u=g;if(d&&(u=d+"["+u+"]"),typeof s[g]=="object"&&s[g]!==null)l=i(s[g],null,f,u);else{c&&(a=u,u=!isNaN(parseFloat(a))&&isFinite(a)?c+Number(u):u);var p=s[g];p=(p=(p=(p=p===!0?"1":p)===!1?"0":p)===0?"0":p)||"",l=o(u)+"="+o(p)}return l})).join(f).replace(/[!'()*]/g,""):""};t.exports=i}])})})(lc);var hw=lc.exports;const bt=dw(hw);function mr(n){return n!==void 0&&typeof n.then=="function"}let fw=class{constructor({config:e,onUpload:t,onError:r}){this.config=e,this.onUpload=t,this.onError=r}uploadSelectedFile({onPreview:e}){const t=function(o){const i=new FileReader;i.readAsDataURL(o),i.onload=s=>{e(s.target.result)}};let r;if(this.config.uploader&&typeof this.config.uploader.uploadByFile=="function"){const o=this.config.uploader.uploadByFile;r=bt.selectFiles({accept:this.config.types??"image/*"}).then(i=>{t(i[0]);const s=o(i[0]);return mr(s)||console.warn("Custom uploader method uploadByFile should return a Promise"),s})}else r=bt.transport({url:this.config.endpoints.byFile,data:this.config.additionalRequestData,accept:this.config.types??"image/*",headers:this.config.additionalRequestHeaders,beforeSend:o=>{t(o[0])},fieldName:this.config.field??"image"}).then(o=>o.body);r.then(o=>{this.onUpload(o)}).catch(o=>{this.onError(o)})}uploadByUrl(e){let t;this.config.uploader&&typeof this.config.uploader.uploadByUrl=="function"?(t=this.config.uploader.uploadByUrl(e),mr(t)||console.warn("Custom uploader method uploadByUrl should return a Promise")):t=bt.post({url:this.config.endpoints.byUrl,data:Object.assign({url:e},this.config.additionalRequestData),type:bt.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(r=>r.body),t.then(r=>{this.onUpload(r)}).catch(r=>{this.onError(r)})}uploadByFile(e,{onPreview:t}){const r=new FileReader;r.readAsDataURL(e),r.onload=i=>{t(i.target.result)};let o;if(this.config.uploader&&typeof this.config.uploader.uploadByFile=="function")o=this.config.uploader.uploadByFile(e),mr(o)||console.warn("Custom uploader method uploadByFile should return a Promise");else{const i=new FormData;i.append(this.config.field??"image",e),this.config.additionalRequestData&&Object.keys(this.config.additionalRequestData).length&&Object.entries(this.config.additionalRequestData).forEach(([s,c])=>{i.append(s,c)}),o=bt.post({url:this.config.endpoints.byFile,data:i,type:bt.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(s=>s.body)}o.then(i=>{this.onUpload(i)}).catch(i=>{this.onError(i)})}};/**
 * Image Tool for the Editor.js
 * @author CodeX <team@codex.so>
 * @license MIT
 * @see {@link https://github.com/editor-js/image}
 *
 * To developers.
 * To simplify Tool structure, we split it to 4 parts:
 *  1) index.ts — main Tool's interface, public API and methods for working with data
 *  2) uploader.ts — module that has methods for sending files via AJAX: from device, by URL or File pasting
 *  3) ui.ts — module for UI manipulations: render, showing preloader, etc
 *
 * For debug purposes there is a testing server
 * that can save uploaded files and return a Response {@link UploadResponseFormat}
 *
 *       $ node dev/server.js
 *
 * It will expose 8008 port, so you can pass http://localhost:8008 with the Tools config:
 *
 * image: {
 *   class: ImageTool,
 *   config: {
 *     endpoints: {
 *       byFile: 'http://localhost:8008/uploadFile',
 *       byUrl: 'http://localhost:8008/fetchUrl',
 *     }
 *   },
 * },
 */let pw=class Ir{constructor({data:e,config:t,api:r,readOnly:o,block:i}){this.isCaptionEnabled=null,this.api=r,this.block=i,this.config={endpoints:t.endpoints,additionalRequestData:t.additionalRequestData,additionalRequestHeaders:t.additionalRequestHeaders,field:t.field,types:t.types,captionPlaceholder:this.api.i18n.t(t.captionPlaceholder??"Caption"),buttonContent:t.buttonContent,uploader:t.uploader,actions:t.actions,features:t.features||{}},this.uploader=new fw({config:this.config,onUpload:s=>this.onUpload(s),onError:s=>this.uploadingFailed(s)}),this.ui=new uw({api:r,config:this.config,onSelectFile:()=>{this.uploader.uploadSelectedFile({onPreview:s=>{this.ui.showPreloader(s)}})},readOnly:o}),this._data={caption:"",withBorder:!1,withBackground:!1,stretched:!1,file:{url:""}},this.data=e}static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:ac,title:"Image"}}static get tunes(){return[{name:"withBorder",icon:aw,title:"With border",toggle:!0},{name:"stretched",icon:lw,title:"Stretch image",toggle:!0},{name:"withBackground",icon:sw,title:"With background",toggle:!0}]}render(){var e,t,r;return(((e=this.config.features)==null?void 0:e.caption)===!0||((t=this.config.features)==null?void 0:t.caption)===void 0||((r=this.config.features)==null?void 0:r.caption)==="optional"&&this.data.caption)&&(this.isCaptionEnabled=!0,this.ui.applyTune("caption",!0)),this.ui.render()}validate(e){return!!e.file.url}save(){const e=this.ui.nodes.caption;return this._data.caption=e.innerHTML,this.data}renderSettings(){var e;const t=Ir.tunes.concat(this.config.actions||[]),r={border:"withBorder",background:"withBackground",stretch:"stretched",caption:"caption"};((e=this.config.features)==null?void 0:e.caption)==="optional"&&t.push({name:"caption",icon:cw,title:"With caption",toggle:!0});const o=t.filter(s=>{var c,f;const d=Object.keys(r).find(g=>r[g]===s.name);return d==="caption"?((c=this.config.features)==null?void 0:c.caption)!==!1:d==null||((f=this.config.features)==null?void 0:f[d])!==!1}),i=s=>{let c=this.data[s.name];return s.name==="caption"&&(c=this.isCaptionEnabled??c),c};return o.map(s=>({icon:s.icon,label:this.api.i18n.t(s.title),name:s.name,toggle:s.toggle,isActive:i(s),onActivate:()=>{if(typeof s.action=="function"){s.action(s.name);return}let c=!i(s);s.name==="caption"&&(this.isCaptionEnabled=!(this.isCaptionEnabled??!1),c=this.isCaptionEnabled),this.tuneToggled(s.name,c)}}))}appendCallback(){this.ui.nodes.fileButton.click()}static get pasteConfig(){return{tags:[{img:{src:!0}}],patterns:{image:/https?:\/\/\S+\.(gif|jpe?g|tiff|png|svg|webp)(\?[a-z0-9=]*)?$/i},files:{mimeTypes:["image/*"]}}}async onPaste(e){switch(e.type){case"tag":{const t=e.detail.data;if(/^blob:/.test(t.src)){const r=await(await fetch(t.src)).blob();this.uploadFile(r);break}this.uploadUrl(t.src);break}case"pattern":{const t=e.detail.data;this.uploadUrl(t);break}case"file":{const t=e.detail.file;this.uploadFile(t);break}}}set data(e){var t;this.image=e.file,this._data.caption=e.caption||"",this.ui.fillCaption(this._data.caption),Ir.tunes.forEach(({name:r})=>{const o=typeof e[r]<"u"?e[r]===!0||e[r]==="true":!1;this.setTune(r,o)}),e.caption?this.setTune("caption",!0):((t=this.config.features)==null?void 0:t.caption)===!0&&this.setTune("caption",!0)}get data(){return this._data}set image(e){this._data.file=e||{url:""},e&&e.url&&this.ui.fillImage(e.url)}onUpload(e){e.success&&e.file?this.image=e.file:this.uploadingFailed("incorrect response: "+JSON.stringify(e))}uploadingFailed(e){console.log("Image Tool: uploading failed because of",e),this.api.notifier.show({message:this.api.i18n.t("Couldn’t upload image. Please try another."),style:"error"}),this.ui.hidePreloader()}tuneToggled(e,t){e==="caption"?(this.ui.applyTune(e,t),t==!1&&(this._data.caption="",this.ui.fillCaption(""))):this.setTune(e,t)}setTune(e,t){this._data[e]=t,this.ui.applyTune(e,t),e==="stretched"&&Promise.resolve().then(()=>{this.block.stretched=t}).catch(r=>{console.error(r)})}uploadFile(e){this.uploader.uploadByFile(e,{onPreview:t=>{this.ui.showPreloader(t)}})}uploadUrl(e){this.ui.showPreloader(e),this.uploader.uploadByUrl(e)}};(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(`.link-tool{position:relative}.link-tool__input{padding-left:38px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none'%3E%3Cpath stroke='%23707684' stroke-linecap='round' stroke-width='2' d='m7.7 12.6-.021.02a2.795 2.795 0 0 0-.044 4.005v0a2.795 2.795 0 0 0 3.936.006l1.455-1.438a3 3 0 0 0 .34-3.866l-.146-.207'/%3E%3Cpath stroke='%23707684' stroke-linecap='round' stroke-width='2' d='m16.22 11.12.136-.14c.933-.954.992-2.46.135-3.483v0a2.597 2.597 0 0 0-3.664-.32L11.39 8.386a3 3 0 0 0-.301 4.3l.031.034'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:10px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.link-tool__input-holder{position:relative}.link-tool__input-holder--error .link-tool__input{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none'%3E%3Cpath stroke='rgb(224, 147, 147)' stroke-linecap='round' stroke-width='2' d='m7.7 12.6-.021.02a2.795 2.795 0 0 0-.044 4.005v0a2.795 2.795 0 0 0 3.936.006l1.455-1.438a3 3 0 0 0 .34-3.866l-.146-.207'/%3E%3Cpath stroke='rgb(224, 147, 147)' stroke-linecap='round' stroke-width='2' d='m16.22 11.12.136-.14c.933-.954.992-2.46.135-3.483v0a2.597 2.597 0 0 0-3.664-.32L11.39 8.386a3 3 0 0 0-.301 4.3l.031.034'/%3E%3C/svg%3E");background-color:#fff3f6;border-color:#f3e0e0;color:#a95a5a;box-shadow:inset 0 1px 3px #923e3e0d}.link-tool__input[contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.link-tool__input[contentEditable=true][data-placeholder]:empty:before{opacity:1}.link-tool__input[contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}.link-tool__progress{position:absolute;box-shadow:inset 0 1px 3px #66556b0a;height:100%;width:0;background-color:#f4f5f7;z-index:-1}.link-tool__progress--loading{-webkit-animation:progress .5s ease-in;-webkit-animation-fill-mode:forwards}.link-tool__progress--loaded{width:100%}.link-tool__content{display:block;padding:25px;border-radius:2px;box-shadow:0 0 0 2px #fff;color:initial!important;text-decoration:none!important}.link-tool__content:after{content:"";clear:both;display:table}.link-tool__content--rendered{background:#fff;border:1px solid rgba(201,201,204,.48);box-shadow:0 1px 3px #0000001a;border-radius:6px;will-change:filter;animation:link-in .45s 1 cubic-bezier(.215,.61,.355,1)}.link-tool__content--rendered:hover{box-shadow:0 0 3px #00000029}.link-tool__image{background-position:center center;background-repeat:no-repeat;background-size:cover;margin:0 0 0 30px;width:65px;height:65px;border-radius:3px;float:right}.link-tool__title{font-size:17px;font-weight:600;line-height:1.5em;margin:0 0 10px}.link-tool__title+.link-tool__anchor{margin-top:25px}.link-tool__description{margin:0 0 20px;font-size:15px;line-height:1.55em;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.link-tool__anchor{display:block;font-size:15px;line-height:1em;color:#888!important;border:0!important;padding:0!important}@keyframes link-in{0%{filter:blur(5px)}to{filter:none}}.codex-editor--narrow .link-tool__image{display:none}@-webkit-keyframes progress{0%{width:0}to{width:85%}}`)),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}(function(n){var e=function(){try{return!!Symbol.iterator}catch{return!1}},t=e(),r=function(d){var g={next:function(){var l=d.shift();return{done:l===void 0,value:l}}};return t&&(g[Symbol.iterator]=function(){return g}),g},o=function(d){return encodeURIComponent(d).replace(/%20/g,"+")},i=function(d){return decodeURIComponent(String(d).replace(/\+/g," "))},s=function(){var d=function(l){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var a=typeof l;if(a!=="undefined")if(a==="string")l!==""&&this._fromString(l);else if(l instanceof d){var u=this;l.forEach(function(y,h){u.append(h,y)})}else if(l!==null&&a==="object")if(Object.prototype.toString.call(l)==="[object Array]")for(var p=0;p<l.length;p++){var b=l[p];if(Object.prototype.toString.call(b)==="[object Array]"||b.length!==2)this.append(b[0],b[1]);else throw new TypeError("Expected [string, any] as entry at index "+p+" of URLSearchParams's input")}else for(var v in l)l.hasOwnProperty(v)&&this.append(v,l[v]);else throw new TypeError("Unsupported input's type for URLSearchParams")},g=d.prototype;g.append=function(l,a){l in this._entries?this._entries[l].push(String(a)):this._entries[l]=[String(a)]},g.delete=function(l){delete this._entries[l]},g.get=function(l){return l in this._entries?this._entries[l][0]:null},g.getAll=function(l){return l in this._entries?this._entries[l].slice(0):[]},g.has=function(l){return l in this._entries},g.set=function(l,a){this._entries[l]=[String(a)]},g.forEach=function(l,a){var u;for(var p in this._entries)if(this._entries.hasOwnProperty(p)){u=this._entries[p];for(var b=0;b<u.length;b++)l.call(a,u[b],p,this)}},g.keys=function(){var l=[];return this.forEach(function(a,u){l.push(u)}),r(l)},g.values=function(){var l=[];return this.forEach(function(a){l.push(a)}),r(l)},g.entries=function(){var l=[];return this.forEach(function(a,u){l.push([u,a])}),r(l)},t&&(g[Symbol.iterator]=g.entries),g.toString=function(){var l=[];return this.forEach(function(a,u){l.push(o(u)+"="+o(a))}),l.join("&")},n.URLSearchParams=d},c=function(){try{var d=n.URLSearchParams;return new d("?a=1").toString()==="a=1"&&typeof d.prototype.set=="function"}catch{return!1}};c()||s();var f=n.URLSearchParams.prototype;typeof f.sort!="function"&&(f.sort=function(){var d=this,g=[];this.forEach(function(a,u){g.push([u,a]),d._entries||d.delete(u)}),g.sort(function(a,u){return a[0]<u[0]?-1:a[0]>u[0]?1:0}),d._entries&&(d._entries={});for(var l=0;l<g.length;l++)this.append(g[l][0],g[l][1])}),typeof f._fromString!="function"&&Object.defineProperty(f,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(d){if(this._entries)this._entries={};else{var g=[];this.forEach(function(p,b){g.push(b)});for(var l=0;l<g.length;l++)this.delete(g[l])}d=d.replace(/^\?/,"");for(var a=d.split("&"),u,l=0;l<a.length;l++)u=a[l].split("="),this.append(i(u[0]),u.length>1?i(u[1]):"")}})})(typeof Ot<"u"?Ot:typeof window<"u"?window:typeof self<"u"?self:Ot);(function(n){var e=function(){try{var o=new n.URL("b","http://a");return o.pathname="c d",o.href==="http://a/c%20d"&&o.searchParams}catch{return!1}},t=function(){var o=n.URL,i=function(f,d){typeof f!="string"&&(f=String(f));var g=document,l;if(d&&(n.location===void 0||d!==n.location.href)){g=document.implementation.createHTMLDocument(""),l=g.createElement("base"),l.href=d,g.head.appendChild(l);try{if(l.href.indexOf(d)!==0)throw new Error(l.href)}catch(w){throw new Error("URL unable to set base "+d+" due to "+w)}}var a=g.createElement("a");a.href=f,l&&(g.body.appendChild(a),a.href=a.href);var u=g.createElement("input");if(u.type="url",u.value=f,a.protocol===":"||!/:/.test(a.href)||!u.checkValidity()&&!d)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:a});var p=new n.URLSearchParams(this.search),b=!0,v=!0,y=this;["append","delete","set"].forEach(function(w){var m=p[w];p[w]=function(){m.apply(p,arguments),b&&(v=!1,y.search=p.toString(),v=!0)}}),Object.defineProperty(this,"searchParams",{value:p,enumerable:!0});var h=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==h&&(h=this.search,v&&(b=!1,this.searchParams._fromString(this.search),b=!0))}})},s=i.prototype,c=function(f){Object.defineProperty(s,f,{get:function(){return this._anchorElement[f]},set:function(d){this._anchorElement[f]=d},enumerable:!0})};["hash","host","hostname","port","protocol"].forEach(function(f){c(f)}),Object.defineProperty(s,"search",{get:function(){return this._anchorElement.search},set:function(f){this._anchorElement.search=f,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(s,{toString:{get:function(){var f=this;return function(){return f.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(f){this._anchorElement.href=f,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(f){this._anchorElement.pathname=f},enumerable:!0},origin:{get:function(){var f={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],d=this._anchorElement.port!=f&&this._anchorElement.port!=="";return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(d?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(f){},enumerable:!0},username:{get:function(){return""},set:function(f){},enumerable:!0}}),i.createObjectURL=function(f){return o.createObjectURL.apply(o,arguments)},i.revokeObjectURL=function(f){return o.revokeObjectURL.apply(o,arguments)},n.URL=i};if(e()||t(),n.location!==void 0&&!("origin"in n.location)){var r=function(){return n.location.protocol+"//"+n.location.hostname+(n.location.port?":"+n.location.port:"")};try{Object.defineProperty(n.location,"origin",{get:r,enumerable:!0})}catch{setInterval(function(){n.location.origin=r()},100)}}})(typeof Ot<"u"?Ot:typeof window<"u"?window:typeof self<"u"?self:Ot);var cc={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(window,function(){return function(t){var r={};function o(i){if(r[i])return r[i].exports;var s=r[i]={i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=t,o.c=r,o.d=function(i,s,c){o.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:c})},o.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},o.t=function(i,s){if(1&s&&(i=o(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var f in i)o.d(c,f,(function(d){return i[d]}).bind(null,f));return c},o.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(s,"a",s),s},o.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},o.p="",o(o.s=3)}([function(t,r){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}t.exports=o},function(t,r,o){(function(i){var s=o(2),c=setTimeout;function f(){}function d(v){if(!(this instanceof d))throw new TypeError("Promises must be constructed via new");if(typeof v!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],b(v,this)}function g(v,y){for(;v._state===3;)v=v._value;v._state!==0?(v._handled=!0,d._immediateFn(function(){var h=v._state===1?y.onFulfilled:y.onRejected;if(h!==null){var w;try{w=h(v._value)}catch(m){return void a(y.promise,m)}l(y.promise,w)}else(v._state===1?l:a)(y.promise,v._value)})):v._deferreds.push(y)}function l(v,y){try{if(y===v)throw new TypeError("A promise cannot be resolved with itself.");if(y&&(typeof y=="object"||typeof y=="function")){var h=y.then;if(y instanceof d)return v._state=3,v._value=y,void u(v);if(typeof h=="function")return void b((w=h,m=y,function(){w.apply(m,arguments)}),v)}v._state=1,v._value=y,u(v)}catch(k){a(v,k)}var w,m}function a(v,y){v._state=2,v._value=y,u(v)}function u(v){v._state===2&&v._deferreds.length===0&&d._immediateFn(function(){v._handled||d._unhandledRejectionFn(v._value)});for(var y=0,h=v._deferreds.length;y<h;y++)g(v,v._deferreds[y]);v._deferreds=null}function p(v,y,h){this.onFulfilled=typeof v=="function"?v:null,this.onRejected=typeof y=="function"?y:null,this.promise=h}function b(v,y){var h=!1;try{v(function(w){h||(h=!0,l(y,w))},function(w){h||(h=!0,a(y,w))})}catch(w){if(h)return;h=!0,a(y,w)}}d.prototype.catch=function(v){return this.then(null,v)},d.prototype.then=function(v,y){var h=new this.constructor(f);return g(this,new p(v,y,h)),h},d.prototype.finally=s.a,d.all=function(v){return new d(function(y,h){if(!v||v.length===void 0)throw new TypeError("Promise.all accepts an array");var w=Array.prototype.slice.call(v);if(w.length===0)return y([]);var m=w.length;function k(T,E){try{if(E&&(typeof E=="object"||typeof E=="function")){var O=E.then;if(typeof O=="function")return void O.call(E,function(C){k(T,C)},h)}w[T]=E,--m==0&&y(w)}catch(C){h(C)}}for(var S=0;S<w.length;S++)k(S,w[S])})},d.resolve=function(v){return v&&typeof v=="object"&&v.constructor===d?v:new d(function(y){y(v)})},d.reject=function(v){return new d(function(y,h){h(v)})},d.race=function(v){return new d(function(y,h){for(var w=0,m=v.length;w<m;w++)v[w].then(y,h)})},d._immediateFn=typeof i=="function"&&function(v){i(v)}||function(v){c(v,0)},d._unhandledRejectionFn=function(v){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",v)},r.a=d}).call(this,o(5).setImmediate)},function(t,r,o){r.a=function(i){var s=this.constructor;return this.then(function(c){return s.resolve(i()).then(function(){return c})},function(c){return s.resolve(i()).then(function(){return s.reject(c)})})}},function(t,r,o){function i(p){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(p)}o(4);var s,c,f,d,g,l,a=o(8),u=(c=function(p){return new Promise(function(b,v){p=d(p),p=g(p);var y=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");y.open(p.method,p.url),y.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(p.headers).forEach(function(w){var m=p.headers[w];y.setRequestHeader(w,m)});var h=p.ratio;y.upload.addEventListener("progress",function(w){var m=Math.round(w.loaded/w.total*100),k=Math.ceil(m*h/100);p.progress(k)},!1),y.addEventListener("progress",function(w){var m=Math.round(w.loaded/w.total*100),k=Math.ceil(m*(100-h)/100)+h;p.progress(k)},!1),y.onreadystatechange=function(){if(y.readyState===4){var w=y.response;try{w=JSON.parse(w)}catch{}var m=a.parseHeaders(y.getAllResponseHeaders()),k={body:w,code:y.status,headers:m};y.status===200?b(k):v(k)}},y.send(p.data)})},f=function(p){return p.method="POST",c(p)},d=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(p.url&&typeof p.url!="string")throw new Error("Url must be a string");if(p.url=p.url||"",p.method&&typeof p.method!="string")throw new Error("`method` must be a string or null");if(p.method=p.method?p.method.toUpperCase():"GET",p.headers&&i(p.headers)!=="object")throw new Error("`headers` must be an object or null");if(p.headers=p.headers||{},p.type&&(typeof p.type!="string"||!Object.values(s).includes(p.type)))throw new Error("`type` must be taken from module's «contentType» library");if(p.progress&&typeof p.progress!="function")throw new Error("`progress` must be a function or null");if(p.progress=p.progress||function(b){},p.beforeSend=p.beforeSend||function(b){},p.ratio&&typeof p.ratio!="number")throw new Error("`ratio` must be a number");if(p.ratio<0||p.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(p.ratio=p.ratio||90,p.accept&&typeof p.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(p.accept=p.accept||"*/*",p.multiple&&typeof p.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(p.multiple=p.multiple||!1,p.fieldName&&typeof p.fieldName!="string")throw new Error("`fieldName` must be a string");return p.fieldName=p.fieldName||"files",p},g=function(p){switch(p.method){case"GET":var b=l(p.data,s.URLENCODED);delete p.data,p.url=/\?/.test(p.url)?p.url+"&"+b:p.url+"?"+b;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var v=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||s.JSON}(p);(a.isFormData(p.data)||a.isFormElement(p.data))&&(v=s.FORM),p.data=l(p.data,v),v!==u.contentType.FORM&&(p.headers["content-type"]=v)}return p},l=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case s.URLENCODED:return a.urlEncode(p);case s.JSON:return a.jsonEncode(p);case s.FORM:return a.formEncode(p);default:return p}},{contentType:s={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:c,get:function(p){return p.method="GET",c(p)},post:f,transport:function(p){return p=d(p),a.selectFiles(p).then(function(b){for(var v=new FormData,y=0;y<b.length;y++)v.append(p.fieldName,b[y],b[y].name);return a.isObject(p.data)&&Object.keys(p.data).forEach(function(h){var w=p.data[h];v.append(h,w)}),p.beforeSend&&p.beforeSend(b),p.data=v,f(p)})},selectFiles:function(p){return delete(p=d(p)).beforeSend,a.selectFiles(p)}});t.exports=u},function(t,r,o){o.r(r);var i=o(1);window.Promise=window.Promise||i.a},function(t,r,o){(function(i){var s=i!==void 0&&i||typeof self<"u"&&self||window,c=Function.prototype.apply;function f(d,g){this._id=d,this._clearFn=g}r.setTimeout=function(){return new f(c.call(setTimeout,s,arguments),clearTimeout)},r.setInterval=function(){return new f(c.call(setInterval,s,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(d){d&&d.close()},f.prototype.unref=f.prototype.ref=function(){},f.prototype.close=function(){this._clearFn.call(s,this._id)},r.enroll=function(d,g){clearTimeout(d._idleTimeoutId),d._idleTimeout=g},r.unenroll=function(d){clearTimeout(d._idleTimeoutId),d._idleTimeout=-1},r._unrefActive=r.active=function(d){clearTimeout(d._idleTimeoutId);var g=d._idleTimeout;g>=0&&(d._idleTimeoutId=setTimeout(function(){d._onTimeout&&d._onTimeout()},g))},o(6),r.setImmediate=typeof self<"u"&&self.setImmediate||i!==void 0&&i.setImmediate||this&&this.setImmediate,r.clearImmediate=typeof self<"u"&&self.clearImmediate||i!==void 0&&i.clearImmediate||this&&this.clearImmediate}).call(this,o(0))},function(t,r,o){(function(i,s){(function(c,f){if(!c.setImmediate){var d,g,l,a,u,p=1,b={},v=!1,y=c.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(c);h=h&&h.setTimeout?h:c,{}.toString.call(c.process)==="[object process]"?d=function(k){s.nextTick(function(){m(k)})}:function(){if(c.postMessage&&!c.importScripts){var k=!0,S=c.onmessage;return c.onmessage=function(){k=!1},c.postMessage("","*"),c.onmessage=S,k}}()?(a="setImmediate$"+Math.random()+"$",u=function(k){k.source===c&&typeof k.data=="string"&&k.data.indexOf(a)===0&&m(+k.data.slice(a.length))},c.addEventListener?c.addEventListener("message",u,!1):c.attachEvent("onmessage",u),d=function(k){c.postMessage(a+k,"*")}):c.MessageChannel?((l=new MessageChannel).port1.onmessage=function(k){m(k.data)},d=function(k){l.port2.postMessage(k)}):y&&"onreadystatechange"in y.createElement("script")?(g=y.documentElement,d=function(k){var S=y.createElement("script");S.onreadystatechange=function(){m(k),S.onreadystatechange=null,g.removeChild(S),S=null},g.appendChild(S)}):d=function(k){setTimeout(m,0,k)},h.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var S=new Array(arguments.length-1),T=0;T<S.length;T++)S[T]=arguments[T+1];var E={callback:k,args:S};return b[p]=E,d(p),p++},h.clearImmediate=w}function w(k){delete b[k]}function m(k){if(v)setTimeout(m,0,k);else{var S=b[k];if(S){v=!0;try{(function(T){var E=T.callback,O=T.args;switch(O.length){case 0:E();break;case 1:E(O[0]);break;case 2:E(O[0],O[1]);break;case 3:E(O[0],O[1],O[2]);break;default:E.apply(f,O)}})(S)}finally{w(k),v=!1}}}}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,o(0),o(7))},function(t,r){var o,i,s=t.exports={};function c(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}function d(h){if(o===setTimeout)return setTimeout(h,0);if((o===c||!o)&&setTimeout)return o=setTimeout,setTimeout(h,0);try{return o(h,0)}catch{try{return o.call(null,h,0)}catch{return o.call(this,h,0)}}}(function(){try{o=typeof setTimeout=="function"?setTimeout:c}catch{o=c}try{i=typeof clearTimeout=="function"?clearTimeout:f}catch{i=f}})();var g,l=[],a=!1,u=-1;function p(){a&&g&&(a=!1,g.length?l=g.concat(l):u=-1,l.length&&b())}function b(){if(!a){var h=d(p);a=!0;for(var w=l.length;w;){for(g=l,l=[];++u<w;)g&&g[u].run();u=-1,w=l.length}g=null,a=!1,function(m){if(i===clearTimeout)return clearTimeout(m);if((i===f||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(m);try{i(m)}catch{try{return i.call(null,m)}catch{return i.call(this,m)}}}(h)}}function v(h,w){this.fun=h,this.array=w}function y(){}s.nextTick=function(h){var w=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)w[m-1]=arguments[m];l.push(new v(h,w)),l.length!==1||a||d(b)},v.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=y,s.addListener=y,s.once=y,s.off=y,s.removeListener=y,s.removeAllListeners=y,s.emit=y,s.prependListener=y,s.prependOnceListener=y,s.listeners=function(h){return[]},s.binding=function(h){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(h){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,r,o){function i(c,f){for(var d=0;d<f.length;d++){var g=f[d];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(c,g.key,g)}}var s=o(9);t.exports=function(){function c(){(function(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")})(this,c)}var f,d,g;return f=c,g=[{key:"urlEncode",value:function(l){return s(l)}},{key:"jsonEncode",value:function(l){return JSON.stringify(l)}},{key:"formEncode",value:function(l){if(this.isFormData(l))return l;if(this.isFormElement(l))return new FormData(l);if(this.isObject(l)){var a=new FormData;return Object.keys(l).forEach(function(u){var p=l[u];a.append(u,p)}),a}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(l){return Object.prototype.toString.call(l)==="[object Object]"}},{key:"isFormData",value:function(l){return l instanceof FormData}},{key:"isFormElement",value:function(l){return l instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(a,u){var p=document.createElement("INPUT");p.type="file",l.multiple&&p.setAttribute("multiple","multiple"),l.accept&&p.setAttribute("accept",l.accept),p.style.display="none",document.body.appendChild(p),p.addEventListener("change",function(b){var v=b.target.files;a(v),document.body.removeChild(p)},!1),p.click()})}},{key:"parseHeaders",value:function(l){var a=l.trim().split(/[\r\n]+/),u={};return a.forEach(function(p){var b=p.split(": "),v=b.shift(),y=b.join(": ");v&&(u[v]=y)}),u}}],(d=null)&&i(f.prototype,d),g&&i(f,g),c}()},function(t,r){var o=function(s){return encodeURIComponent(s).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},i=function(s,c,f,d){return c=c||null,f=f||"&",d=d||null,s?function(g){for(var l=new Array,a=0;a<g.length;a++)g[a]&&l.push(g[a]);return l}(Object.keys(s).map(function(g){var l,a,u=g;if(d&&(u=d+"["+u+"]"),typeof s[g]=="object"&&s[g]!==null)l=i(s[g],null,f,u);else{c&&(a=u,u=!isNaN(parseFloat(a))&&isFinite(a)?c+Number(u):u);var p=s[g];p=(p=(p=(p=p===!0?"1":p)===!1?"0":p)===0?"0":p)||"",l=o(u)+"="+o(p)}return l})).join(f).replace(/[!'()*]/g,""):""};t.exports=i}])})})(cc);var vw=cc.exports;const mw=gw(vw),yw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.569 6.39509 13.9269 6.25143 12.8271 7.17675L11.39 8.38588C10.0935 9.47674 9.95704 11.4241 11.0887 12.6852L11.12 12.72"/></svg>';let bw=class{static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:yw,title:"Link"}}static get enableLineBreaks(){return!0}constructor({data:e,config:t,api:r,readOnly:o}){this.api=r,this.readOnly=o,this.config={endpoint:t.endpoint||"",headers:t.headers||{}},this.nodes={wrapper:null,container:null,progress:null,input:null,inputHolder:null,linkContent:null,linkImage:null,linkTitle:null,linkDescription:null,linkText:null},this._data={link:"",meta:{}},this.data=e}render(){return this.nodes.wrapper=this.make("div",this.CSS.baseClass),this.nodes.container=this.make("div",this.CSS.container),this.nodes.inputHolder=this.makeInputHolder(),this.nodes.linkContent=this.prepareLinkPreview(),Object.keys(this.data.meta).length?(this.nodes.container.appendChild(this.nodes.linkContent),this.showLinkPreview(this.data.meta)):this.nodes.container.appendChild(this.nodes.inputHolder),this.nodes.wrapper.appendChild(this.nodes.container),this.nodes.wrapper}save(){return this.data}validate(){return this.data.link.trim()!==""}set data(e){this._data=Object.assign({},{link:e.link||this._data.link,meta:e.meta||this._data.meta})}get data(){return this._data}get CSS(){return{baseClass:this.api.styles.block,input:this.api.styles.input,container:"link-tool",inputEl:"link-tool__input",inputHolder:"link-tool__input-holder",inputError:"link-tool__input-holder--error",linkContent:"link-tool__content",linkContentRendered:"link-tool__content--rendered",linkImage:"link-tool__image",linkTitle:"link-tool__title",linkDescription:"link-tool__description",linkText:"link-tool__anchor",progress:"link-tool__progress",progressLoading:"link-tool__progress--loading",progressLoaded:"link-tool__progress--loaded"}}makeInputHolder(){const e=this.make("div",this.CSS.inputHolder);return this.nodes.progress=this.make("label",this.CSS.progress),this.nodes.input=this.make("div",[this.CSS.input,this.CSS.inputEl],{contentEditable:!this.readOnly}),this.nodes.input.dataset.placeholder=this.api.i18n.t("Link"),this.readOnly||(this.nodes.input.addEventListener("paste",t=>{this.startFetching(t)}),this.nodes.input.addEventListener("keydown",t=>{const[r,o]=[13,65],i=t.ctrlKey||t.metaKey;switch(t.keyCode){case r:t.preventDefault(),t.stopPropagation(),this.startFetching(t);break;case o:i&&this.selectLinkUrl(t);break}})),e.appendChild(this.nodes.progress),e.appendChild(this.nodes.input),e}startFetching(e){let t=this.nodes.input.textContent;e.type==="paste"&&(t=(e.clipboardData||window.clipboardData).getData("text")),this.removeErrorStyle(),this.fetchLinkData(t)}removeErrorStyle(){this.nodes.inputHolder.classList.remove(this.CSS.inputError),this.nodes.inputHolder.insertBefore(this.nodes.progress,this.nodes.input)}selectLinkUrl(e){e.preventDefault(),e.stopPropagation();const t=window.getSelection(),r=new Range,o=t.anchorNode.parentNode.closest(`.${this.CSS.inputHolder}`).querySelector(`.${this.CSS.inputEl}`);r.selectNodeContents(o),t.removeAllRanges(),t.addRange(r)}prepareLinkPreview(){const e=this.make("a",this.CSS.linkContent,{target:"_blank",rel:"nofollow noindex noreferrer"});return this.nodes.linkImage=this.make("div",this.CSS.linkImage),this.nodes.linkTitle=this.make("div",this.CSS.linkTitle),this.nodes.linkDescription=this.make("p",this.CSS.linkDescription),this.nodes.linkText=this.make("span",this.CSS.linkText),e}showLinkPreview({image:e,title:t,description:r}){this.nodes.container.appendChild(this.nodes.linkContent),e&&e.url&&(this.nodes.linkImage.style.backgroundImage="url("+e.url+")",this.nodes.linkContent.appendChild(this.nodes.linkImage)),t&&(this.nodes.linkTitle.textContent=t,this.nodes.linkContent.appendChild(this.nodes.linkTitle)),r&&(this.nodes.linkDescription.textContent=r,this.nodes.linkContent.appendChild(this.nodes.linkDescription)),this.nodes.linkContent.classList.add(this.CSS.linkContentRendered),this.nodes.linkContent.setAttribute("href",this.data.link),this.nodes.linkContent.appendChild(this.nodes.linkText);try{this.nodes.linkText.textContent=new URL(this.data.link).hostname}catch{this.nodes.linkText.textContent=this.data.link}}showProgress(){this.nodes.progress.classList.add(this.CSS.progressLoading)}hideProgress(){return new Promise(e=>{this.nodes.progress.classList.remove(this.CSS.progressLoading),this.nodes.progress.classList.add(this.CSS.progressLoaded),setTimeout(e,500)})}applyErrorStyle(){this.nodes.inputHolder.classList.add(this.CSS.inputError),this.nodes.progress.remove()}async fetchLinkData(e){this.showProgress(),this.data={link:e};try{const{body:t}=await mw.get({url:this.config.endpoint,headers:this.config.headers,data:{url:e}});this.onFetch(t)}catch{this.fetchingFailed(this.api.i18n.t("Couldn't fetch the link data"))}}onFetch(e){if(!e||!e.success){this.fetchingFailed(this.api.i18n.t("Couldn't get this link data, try the other one"));return}const t=e.meta,r=e.link||this.data.link;if(this.data={meta:t,link:r},!t){this.fetchingFailed(this.api.i18n.t("Wrong response format from the server"));return}this.hideProgress().then(()=>{this.nodes.inputHolder.remove(),this.showLinkPreview(t)})}fetchingFailed(e){this.api.notifier.show({message:e,style:"error"}),this.applyErrorStyle()}make(e,t=null,r={}){const o=document.createElement(e);Array.isArray(t)?o.classList.add(...t):t&&o.classList.add(t);for(const i in r)o[i]=r[i];return o}};(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-block:only-of-type .ce-paragraph[data-placeholder-active]:empty:before,.ce-block:only-of-type .ce-paragraph[data-placeholder-active][data-empty=true]:before{content:attr(data-placeholder-active)}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const ww='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';function kw(n){const e=document.createElement("div");e.innerHTML=n.trim();const t=document.createDocumentFragment();return t.append(...Array.from(e.childNodes)),t}/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */class Ti{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:e,config:t,api:r,readOnly:o}){this.api=r,this.readOnly=o,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=t.placeholder?t.placeholder:Ti.DEFAULT_PLACEHOLDER,this._data=e??{},this._element=null,this._preserveBlank=t.preserveBlank??!1}onKeyUp(e){if(e.code!=="Backspace"&&e.code!=="Delete"||!this._element)return;const{textContent:t}=this._element;t===""&&(this._element.innerHTML="")}drawView(){const e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable="false",e.dataset.placeholderActive=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable="true",e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){if(!this._element)return;this._data.text+=e.text;const t=kw(e.text);this._element.appendChild(t),this._element.normalize()}validate(e){return!(e.text.trim()===""&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){const t={text:e.detail.data.innerHTML};this._data=t,window.requestAnimationFrame(()=>{this._element&&(this._element.innerHTML=this._data.text||"")})}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:ww,title:"Text"}}}(function(){var n;try{if(typeof document<"u"){var e=document.createElement("style");e.nonce=(n=document.head.querySelector("meta[property=csp-nonce]"))==null?void 0:n.content,e.appendChild(document.createTextNode('.tc-wrap{--color-background:#f9f9fb;--color-text-secondary:#7b7e89;--color-border:#e8e8eb;--cell-size:34px;--toolbox-icon-size:18px;--toolbox-padding:6px;--toolbox-aiming-field-size:calc(var(--toolbox-icon-size) + var(--toolbox-padding)*2);border-left:0;position:relative;height:100%;width:100%;margin-top:var(--toolbox-icon-size);box-sizing:border-box;display:grid;grid-template-columns:calc(100% - var(--cell-size)) var(--cell-size);z-index:0}.tc-wrap--readonly{grid-template-columns:100% var(--cell-size)}.tc-wrap svg{vertical-align:top}@media print{.tc-wrap{border-left-color:var(--color-border);border-left-style:solid;border-left-width:1px;grid-template-columns:100% var(--cell-size)}}@media print{.tc-wrap .tc-row:after{display:none}}.tc-table{position:relative;width:100%;height:100%;display:grid;font-size:14px;border-top:1px solid var(--color-border);line-height:1.4}.tc-table:after{width:calc(var(--cell-size));height:100%;left:calc(var(--cell-size)*-1);top:0}.tc-table:after,.tc-table:before{position:absolute;content:""}.tc-table:before{width:100%;height:var(--toolbox-aiming-field-size);top:calc(var(--toolbox-aiming-field-size)*-1);left:0}.tc-table--heading .tc-row:first-child{font-weight:600;border-bottom:2px solid var(--color-border);position:sticky;top:0;z-index:2;background:var(--color-background)}.tc-table--heading .tc-row:first-child [contenteditable]:empty:before{content:attr(heading);color:var(--color-text-secondary)}.tc-table--heading .tc-row:first-child:after{bottom:-2px;border-bottom:2px solid var(--color-border)}.tc-add-column,.tc-add-row{display:flex;color:var(--color-text-secondary)}@media print{.tc-add{display:none}}.tc-add-column{display:grid;border-top:1px solid var(--color-border);grid-template-columns:var(--cell-size);grid-auto-rows:var(--cell-size);place-items:center}.tc-add-column svg{padding:5px;position:sticky;top:0;background-color:var(--color-background)}.tc-add-column--disabled{visibility:hidden}@media print{.tc-add-column{display:none}}.tc-add-row{height:var(--cell-size);align-items:center;padding-left:4px;position:relative}.tc-add-row--disabled{display:none}.tc-add-row:before{content:"";position:absolute;right:calc(var(--cell-size)*-1);width:var(--cell-size);height:100%}@media print{.tc-add-row{display:none}}.tc-add-column,.tc-add-row{transition:0s;cursor:pointer;will-change:background-color}.tc-add-column:hover,.tc-add-row:hover{transition:background-color .1s ease;background-color:var(--color-background)}.tc-add-row{margin-top:1px}.tc-add-row:hover:before{transition:.1s;background-color:var(--color-background)}.tc-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(10px,1fr));position:relative;border-bottom:1px solid var(--color-border)}.tc-row:after{content:"";pointer-events:none;position:absolute;width:var(--cell-size);height:100%;bottom:-1px;right:calc(var(--cell-size)*-1);border-bottom:1px solid var(--color-border)}.tc-row--selected{background:var(--color-background)}.tc-row--selected:after{background:var(--color-background)}.tc-cell{border-right:1px solid var(--color-border);padding:6px 12px;overflow:hidden;outline:none;line-break:normal}.tc-cell--selected{background:var(--color-background)}.tc-wrap--readonly .tc-row:after{display:none}.tc-toolbox{--toolbox-padding:6px;--popover-margin:30px;--toggler-click-zone-size:30px;--toggler-dots-color:#7b7e89;--toggler-dots-color-hovered:#1d202b;position:absolute;cursor:pointer;z-index:1;opacity:0;transition:opacity .1s;will-change:left,opacity}.tc-toolbox--column{top:calc(var(--toggler-click-zone-size)*-1);transform:translate(calc(var(--toggler-click-zone-size)*-1/2));will-change:left,opacity}.tc-toolbox--row{left:calc(var(--popover-margin)*-1);transform:translateY(calc(var(--toggler-click-zone-size)*-1/2));margin-top:-1px;will-change:top,opacity}.tc-toolbox--showed{opacity:1}.tc-toolbox .tc-popover{position:absolute;top:0;left:var(--popover-margin)}.tc-toolbox__toggler{display:flex;align-items:center;justify-content:center;width:var(--toggler-click-zone-size);height:var(--toggler-click-zone-size);color:var(--toggler-dots-color);opacity:0;transition:opacity .15s ease;will-change:opacity}.tc-toolbox__toggler:hover{color:var(--toggler-dots-color-hovered)}.tc-toolbox__toggler svg{fill:currentColor}.tc-wrap:hover .tc-toolbox__toggler{opacity:1}.tc-settings .cdx-settings-button{width:50%;margin:0}.tc-popover{--color-border:#eaeaea;--color-background:#fff;--color-background-hover:rgba(232,232,235,.49);--color-background-confirm:#e24a4a;--color-background-confirm-hover:#d54040;--color-text-confirm:#fff;background:var(--color-background);border:1px solid var(--color-border);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;padding:6px;display:none;will-change:opacity,transform}.tc-popover--opened{display:block;animation:menuShowing .1s cubic-bezier(.215,.61,.355,1) forwards}.tc-popover__item{display:flex;align-items:center;padding:2px 14px 2px 2px;border-radius:5px;cursor:pointer;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tc-popover__item:hover{background:var(--color-background-hover)}.tc-popover__item:not(:last-of-type){margin-bottom:2px}.tc-popover__item-icon{display:inline-flex;width:26px;height:26px;align-items:center;justify-content:center;background:var(--color-background);border-radius:5px;border:1px solid var(--color-border);margin-right:8px}.tc-popover__item-label{line-height:22px;font-size:14px;font-weight:500}.tc-popover__item--confirm{background:var(--color-background-confirm);color:var(--color-text-confirm)}.tc-popover__item--confirm:hover{background-color:var(--color-background-confirm-hover)}.tc-popover__item--confirm .tc-popover__item-icon{background:var(--color-background-confirm);border-color:#0000001a}.tc-popover__item--confirm .tc-popover__item-icon svg{transition:transform .2s ease-in;transform:rotate(90deg) scale(1.2)}.tc-popover__item--hidden{display:none}@keyframes menuShowing{0%{opacity:0;transform:translateY(-8px) scale(.9)}70%{opacity:1;transform:translateY(2px)}to{transform:translateY(0)}}')),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();function Pe(n,e,t={}){const r=document.createElement(n);Array.isArray(e)?r.classList.add(...e):e&&r.classList.add(e);for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o]);return r}function ea(n){const e=n.getBoundingClientRect();return{y1:Math.floor(e.top+window.pageYOffset),x1:Math.floor(e.left+window.pageXOffset),x2:Math.floor(e.right+window.pageXOffset),y2:Math.floor(e.bottom+window.pageYOffset)}}function ta(n,e){const t=ea(n),r=ea(e);return{fromTopBorder:r.y1-t.y1,fromLeftBorder:r.x1-t.x1,fromRightBorder:t.x2-r.x2,fromBottomBorder:t.y2-r.y2}}function xw(n,e){const t=n.getBoundingClientRect(),{width:r,height:o,x:i,y:s}=t,{clientX:c,clientY:f}=e;return{width:r,height:o,x:c-i,y:f-s}}function na(n,e){return e.parentNode.insertBefore(n,e)}function ra(n,e=!0){const t=document.createRange(),r=window.getSelection();t.selectNodeContents(n),t.collapse(e),r.removeAllRanges(),r.addRange(t)}class Ae{constructor({items:e}){this.items=e,this.wrapper=void 0,this.itemEls=[]}static get CSS(){return{popover:"tc-popover",popoverOpened:"tc-popover--opened",item:"tc-popover__item",itemHidden:"tc-popover__item--hidden",itemConfirmState:"tc-popover__item--confirm",itemIcon:"tc-popover__item-icon",itemLabel:"tc-popover__item-label"}}render(){return this.wrapper=Pe("div",Ae.CSS.popover),this.items.forEach((e,t)=>{const r=Pe("div",Ae.CSS.item),o=Pe("div",Ae.CSS.itemIcon,{innerHTML:e.icon}),i=Pe("div",Ae.CSS.itemLabel,{textContent:e.label});r.dataset.index=t,r.appendChild(o),r.appendChild(i),this.wrapper.appendChild(r),this.itemEls.push(r)}),this.wrapper.addEventListener("click",e=>{this.popoverClicked(e)}),this.wrapper}popoverClicked(e){const t=e.target.closest(`.${Ae.CSS.item}`);if(!t)return;const r=t.dataset.index,o=this.items[r];if(o.confirmationRequired&&!this.hasConfirmationState(t)){this.setConfirmationState(t);return}o.onClick()}setConfirmationState(e){e.classList.add(Ae.CSS.itemConfirmState)}clearConfirmationState(e){e.classList.remove(Ae.CSS.itemConfirmState)}hasConfirmationState(e){return e.classList.contains(Ae.CSS.itemConfirmState)}get opened(){return this.wrapper.classList.contains(Ae.CSS.popoverOpened)}open(){this.items.forEach((e,t)=>{typeof e.hideIf=="function"&&this.itemEls[t].classList.toggle(Ae.CSS.itemHidden,e.hideIf())}),this.wrapper.classList.add(Ae.CSS.popoverOpened)}close(){this.wrapper.classList.remove(Ae.CSS.popoverOpened),this.itemEls.forEach(e=>{this.clearConfirmationState(e)})}}const Ew='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L10 12M10 12L7 15M10 12H4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L14 12M14 12L17 15M14 12H20"/></svg>',oa='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',_w='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 9.16666L18.2167 12.5M18.2167 12.5L14.8833 15.8333M18.2167 12.5H10.05C9.16594 12.5 8.31809 12.1488 7.69297 11.5237C7.06785 10.8986 6.71666 10.0507 6.71666 9.16666"/></svg>',Ow='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.9167 14.9167L11.5833 18.25M11.5833 18.25L8.25 14.9167M11.5833 18.25L11.5833 10.0833C11.5833 9.19928 11.9345 8.35143 12.5596 7.72631C13.1848 7.10119 14.0326 6.75 14.9167 6.75"/></svg>',Tw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.13333 14.9167L12.4667 18.25M12.4667 18.25L15.8 14.9167M12.4667 18.25L12.4667 10.0833C12.4667 9.19928 12.1155 8.35143 11.4904 7.72631C10.8652 7.10119 10.0174 6.75 9.13333 6.75"/></svg>',Cw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 15.8333L18.2167 12.5M18.2167 12.5L14.8833 9.16667M18.2167 12.5L10.05 12.5C9.16595 12.5 8.31811 12.8512 7.69299 13.4763C7.06787 14.1014 6.71667 14.9493 6.71667 15.8333"/></svg>',Sw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.41 9.66H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 9.66H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.31 14.36H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 14.36H14.59"/></svg>',ia='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',Aw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>',Lw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',Bw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M14 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><path stroke="currentColor" stroke-width="2" d="M5 14H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',Pw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>';let sa=class Et{constructor({api:e,items:t,onOpen:r,onClose:o,cssModifier:i=""}){this.api=e,this.items=t,this.onOpen=r,this.onClose=o,this.cssModifier=i,this.popover=null,this.wrapper=this.createToolbox()}static get CSS(){return{toolbox:"tc-toolbox",toolboxShowed:"tc-toolbox--showed",toggler:"tc-toolbox__toggler"}}get element(){return this.wrapper}createToolbox(){const e=Pe("div",[Et.CSS.toolbox,this.cssModifier?`${Et.CSS.toolbox}--${this.cssModifier}`:""]);e.dataset.mutationFree="true";const t=this.createPopover(),r=this.createToggler();return e.appendChild(r),e.appendChild(t),e}createToggler(){const e=Pe("div",Et.CSS.toggler,{innerHTML:Sw});return e.addEventListener("click",()=>{this.togglerClicked()}),e}createPopover(){return this.popover=new Ae({items:this.items}),this.popover.render()}togglerClicked(){this.popover.opened?(this.popover.close(),this.onClose()):(this.popover.open(),this.onOpen())}show(e){const t=e();Object.entries(t).forEach(([r,o])=>{this.wrapper.style[r]=o}),this.wrapper.classList.add(Et.CSS.toolboxShowed)}hide(){this.popover.close(),this.wrapper.classList.remove(Et.CSS.toolboxShowed)}};function Mw(n,e){let t=0;return function(...r){const o=new Date().getTime();if(!(o-t<n))return t=o,e(...r)}}const le={wrapper:"tc-wrap",wrapperReadOnly:"tc-wrap--readonly",table:"tc-table",row:"tc-row",withHeadings:"tc-table--heading",rowSelected:"tc-row--selected",cell:"tc-cell",cellSelected:"tc-cell--selected",addRow:"tc-add-row",addRowDisabled:"tc-add-row--disabled",addColumn:"tc-add-column",addColumnDisabled:"tc-add-column--disabled"};let Nw=class{constructor(e,t,r,o){this.readOnly=e,this.api=t,this.data=r,this.config=o,this.wrapper=null,this.table=null,this.toolboxColumn=this.createColumnToolbox(),this.toolboxRow=this.createRowToolbox(),this.createTableWrapper(),this.hoveredRow=0,this.hoveredColumn=0,this.selectedRow=0,this.selectedColumn=0,this.tunes={withHeadings:!1},this.resize(),this.fill(),this.focusedCell={row:0,column:0},this.documentClicked=i=>{const s=i.target.closest(`.${le.table}`)!==null,c=i.target.closest(`.${le.wrapper}`)===null;(s||c)&&this.hideToolboxes();const f=i.target.closest(`.${le.addRow}`),d=i.target.closest(`.${le.addColumn}`);f&&f.parentNode===this.wrapper?(this.addRow(void 0,!0),this.hideToolboxes()):d&&d.parentNode===this.wrapper&&(this.addColumn(void 0,!0),this.hideToolboxes())},this.readOnly||this.bindEvents()}getWrapper(){return this.wrapper}bindEvents(){document.addEventListener("click",this.documentClicked),this.table.addEventListener("mousemove",Mw(150,e=>this.onMouseMoveInTable(e)),{passive:!0}),this.table.onkeypress=e=>this.onKeyPressListener(e),this.table.addEventListener("keydown",e=>this.onKeyDownListener(e)),this.table.addEventListener("focusin",e=>this.focusInTableListener(e))}createColumnToolbox(){return new sa({api:this.api,cssModifier:"column",items:[{label:this.api.i18n.t("Add column to left"),icon:Ow,hideIf:()=>this.numberOfColumns===this.config.maxcols,onClick:()=>{this.addColumn(this.selectedColumn,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add column to right"),icon:Tw,hideIf:()=>this.numberOfColumns===this.config.maxcols,onClick:()=>{this.addColumn(this.selectedColumn+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete column"),icon:oa,hideIf:()=>this.numberOfColumns===1,confirmationRequired:!0,onClick:()=>{this.deleteColumn(this.selectedColumn),this.hideToolboxes()}}],onOpen:()=>{this.selectColumn(this.hoveredColumn),this.hideRowToolbox()},onClose:()=>{this.unselectColumn()}})}createRowToolbox(){return new sa({api:this.api,cssModifier:"row",items:[{label:this.api.i18n.t("Add row above"),icon:Cw,hideIf:()=>this.numberOfRows===this.config.maxrows,onClick:()=>{this.addRow(this.selectedRow,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add row below"),icon:_w,hideIf:()=>this.numberOfRows===this.config.maxrows,onClick:()=>{this.addRow(this.selectedRow+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete row"),icon:oa,hideIf:()=>this.numberOfRows===1,confirmationRequired:!0,onClick:()=>{this.deleteRow(this.selectedRow),this.hideToolboxes()}}],onOpen:()=>{this.selectRow(this.hoveredRow),this.hideColumnToolbox()},onClose:()=>{this.unselectRow()}})}moveCursorToNextRow(){this.focusedCell.row!==this.numberOfRows?(this.focusedCell.row+=1,this.focusCell(this.focusedCell)):(this.addRow(),this.focusedCell.row+=1,this.focusCell(this.focusedCell),this.updateToolboxesPosition(0,0))}getCell(e,t){return this.table.querySelectorAll(`.${le.row}:nth-child(${e}) .${le.cell}`)[t-1]}getRow(e){return this.table.querySelector(`.${le.row}:nth-child(${e})`)}getRowByCell(e){return e.parentElement}getRowFirstCell(e){return e.querySelector(`.${le.cell}:first-child`)}setCellContent(e,t,r){const o=this.getCell(e,t);o.innerHTML=r}addColumn(e=-1,t=!1){var r;let o=this.numberOfColumns;if(this.config&&this.config.maxcols&&this.numberOfColumns>=this.config.maxcols)return;for(let s=1;s<=this.numberOfRows;s++){let c;const f=this.createCell();if(e>0&&e<=o?(c=this.getCell(s,e),na(f,c)):c=this.getRow(s).appendChild(f),s===1){const d=this.getCell(s,e>0?e:o+1);d&&t&&ra(d)}}const i=this.wrapper.querySelector(`.${le.addColumn}`);(r=this.config)!=null&&r.maxcols&&this.numberOfColumns>this.config.maxcols-1&&i&&i.classList.add(le.addColumnDisabled),this.addHeadingAttrToFirstRow()}addRow(e=-1,t=!1){let r,o=Pe("div",le.row);this.tunes.withHeadings&&this.removeHeadingAttrFromFirstRow();let i=this.numberOfColumns;if(this.config&&this.config.maxrows&&this.numberOfRows>=this.config.maxrows&&c)return;if(e>0&&e<=this.numberOfRows){let f=this.getRow(e);r=na(o,f)}else r=this.table.appendChild(o);this.fillRow(r,i),this.tunes.withHeadings&&this.addHeadingAttrToFirstRow();const s=this.getRowFirstCell(r);s&&t&&ra(s);const c=this.wrapper.querySelector(`.${le.addRow}`);return this.config&&this.config.maxrows&&this.numberOfRows>=this.config.maxrows&&c&&c.classList.add(le.addRowDisabled),r}deleteColumn(e){for(let r=1;r<=this.numberOfRows;r++){const o=this.getCell(r,e);if(!o)return;o.remove()}const t=this.wrapper.querySelector(`.${le.addColumn}`);t&&t.classList.remove(le.addColumnDisabled)}deleteRow(e){this.getRow(e).remove();const t=this.wrapper.querySelector(`.${le.addRow}`);t&&t.classList.remove(le.addRowDisabled),this.addHeadingAttrToFirstRow()}createTableWrapper(){if(this.wrapper=Pe("div",le.wrapper),this.table=Pe("div",le.table),this.readOnly&&this.wrapper.classList.add(le.wrapperReadOnly),this.wrapper.appendChild(this.toolboxRow.element),this.wrapper.appendChild(this.toolboxColumn.element),this.wrapper.appendChild(this.table),!this.readOnly){const e=Pe("div",le.addColumn,{innerHTML:ia}),t=Pe("div",le.addRow,{innerHTML:ia});this.wrapper.appendChild(e),this.wrapper.appendChild(t)}}computeInitialSize(){const e=this.data&&this.data.content,t=Array.isArray(e),r=t?e.length:!1,o=t?e.length:void 0,i=r?e[0].length:void 0,s=Number.parseInt(this.config&&this.config.rows),c=Number.parseInt(this.config&&this.config.cols),f=!isNaN(s)&&s>0?s:void 0,d=!isNaN(c)&&c>0?c:void 0;return{rows:o||f||2,cols:i||d||2}}resize(){const{rows:e,cols:t}=this.computeInitialSize();for(let r=0;r<e;r++)this.addRow();for(let r=0;r<t;r++)this.addColumn()}fill(){const e=this.data;if(e&&e.content)for(let t=0;t<e.content.length;t++)for(let r=0;r<e.content[t].length;r++)this.setCellContent(t+1,r+1,e.content[t][r])}fillRow(e,t){for(let r=1;r<=t;r++){const o=this.createCell();e.appendChild(o)}}createCell(){return Pe("div",le.cell,{contentEditable:!this.readOnly})}get numberOfRows(){return this.table.childElementCount}get numberOfColumns(){return this.numberOfRows?this.table.querySelectorAll(`.${le.row}:first-child .${le.cell}`).length:0}get isColumnMenuShowing(){return this.selectedColumn!==0}get isRowMenuShowing(){return this.selectedRow!==0}onMouseMoveInTable(e){const{row:t,column:r}=this.getHoveredCell(e);this.hoveredColumn=r,this.hoveredRow=t,this.updateToolboxesPosition()}onKeyPressListener(e){if(e.key==="Enter"){if(e.shiftKey)return!0;this.moveCursorToNextRow()}return e.key!=="Enter"}onKeyDownListener(e){e.key==="Tab"&&e.stopPropagation()}focusInTableListener(e){const t=e.target,r=this.getRowByCell(t);this.focusedCell={row:Array.from(this.table.querySelectorAll(`.${le.row}`)).indexOf(r)+1,column:Array.from(r.querySelectorAll(`.${le.cell}`)).indexOf(t)+1}}hideToolboxes(){this.hideRowToolbox(),this.hideColumnToolbox(),this.updateToolboxesPosition()}hideRowToolbox(){this.unselectRow(),this.toolboxRow.hide()}hideColumnToolbox(){this.unselectColumn(),this.toolboxColumn.hide()}focusCell(){this.focusedCellElem.focus()}get focusedCellElem(){const{row:e,column:t}=this.focusedCell;return this.getCell(e,t)}updateToolboxesPosition(e=this.hoveredRow,t=this.hoveredColumn){this.isColumnMenuShowing||t>0&&t<=this.numberOfColumns&&this.toolboxColumn.show(()=>({left:`calc((100% - var(--cell-size)) / (${this.numberOfColumns} * 2) * (1 + (${t} - 1) * 2))`})),this.isRowMenuShowing||e>0&&e<=this.numberOfRows&&this.toolboxRow.show(()=>{const r=this.getRow(e),{fromTopBorder:o}=ta(this.table,r),{height:i}=r.getBoundingClientRect();return{top:`${Math.ceil(o+i/2)}px`}})}setHeadingsSetting(e){this.tunes.withHeadings=e,e?(this.table.classList.add(le.withHeadings),this.addHeadingAttrToFirstRow()):(this.table.classList.remove(le.withHeadings),this.removeHeadingAttrFromFirstRow())}addHeadingAttrToFirstRow(){for(let e=1;e<=this.numberOfColumns;e++){let t=this.getCell(1,e);t&&t.setAttribute("heading",this.api.i18n.t("Heading"))}}removeHeadingAttrFromFirstRow(){for(let e=1;e<=this.numberOfColumns;e++){let t=this.getCell(1,e);t&&t.removeAttribute("heading")}}selectRow(e){const t=this.getRow(e);t&&(this.selectedRow=e,t.classList.add(le.rowSelected))}unselectRow(){if(this.selectedRow<=0)return;const e=this.table.querySelector(`.${le.rowSelected}`);e&&e.classList.remove(le.rowSelected),this.selectedRow=0}selectColumn(e){for(let t=1;t<=this.numberOfRows;t++){const r=this.getCell(t,e);r&&r.classList.add(le.cellSelected)}this.selectedColumn=e}unselectColumn(){if(this.selectedColumn<=0)return;let e=this.table.querySelectorAll(`.${le.cellSelected}`);Array.from(e).forEach(t=>{t.classList.remove(le.cellSelected)}),this.selectedColumn=0}getHoveredCell(e){let t=this.hoveredRow,r=this.hoveredColumn;const{width:o,height:i,x:s,y:c}=xw(this.table,e);return s>=0&&(r=this.binSearch(this.numberOfColumns,f=>this.getCell(1,f),({fromLeftBorder:f})=>s<f,({fromRightBorder:f})=>s>o-f)),c>=0&&(t=this.binSearch(this.numberOfRows,f=>this.getCell(f,1),({fromTopBorder:f})=>c<f,({fromBottomBorder:f})=>c>i-f)),{row:t||this.hoveredRow,column:r||this.hoveredColumn}}binSearch(e,t,r,o){let i=0,s=e+1,c=0,f;for(;i<s-1&&c<10;){f=Math.ceil((i+s)/2);const d=t(f),g=ta(this.table,d);if(r(g))s=f;else if(o(g))i=f;else break;c++}return f}getData(){const e=[];for(let t=1;t<=this.numberOfRows;t++){const r=this.table.querySelector(`.${le.row}:nth-child(${t})`),o=Array.from(r.querySelectorAll(`.${le.cell}`));o.every(i=>!i.textContent.trim())||e.push(o.map(i=>i.innerHTML))}return e}destroy(){document.removeEventListener("click",this.documentClicked)}},Iw=class{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}constructor({data:e,config:t,api:r,readOnly:o,block:i}){this.api=r,this.readOnly=o,this.config=t,this.data={withHeadings:this.getConfig("withHeadings",!1,e),stretched:this.getConfig("stretched",!1,e),content:e&&e.content?e.content:[]},this.table=null,this.block=i}static get toolbox(){return{icon:Pw,title:"Table"}}render(){return this.table=new Nw(this.readOnly,this.api,this.data,this.config),this.container=Pe("div",this.api.styles.block),this.container.appendChild(this.table.getWrapper()),this.table.setHeadingsSetting(this.data.withHeadings),this.container}renderSettings(){return[{label:this.api.i18n.t("With headings"),icon:Lw,isActive:this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!0,this.table.setHeadingsSetting(this.data.withHeadings)}},{label:this.api.i18n.t("Without headings"),icon:Bw,isActive:!this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!1,this.table.setHeadingsSetting(this.data.withHeadings)}},{label:this.data.stretched?this.api.i18n.t("Collapse"):this.api.i18n.t("Stretch"),icon:this.data.stretched?Ew:Aw,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.stretched=!this.data.stretched,this.block.stretched=this.data.stretched}}]}save(){const e=this.table.getData();return{withHeadings:this.data.withHeadings,stretched:this.data.stretched,content:e}}destroy(){this.table.destroy()}getConfig(e,t=void 0,r=void 0){const o=this.data||r;return o?o[e]?o[e]:t:this.config&&this.config[e]?this.config[e]:t}static get pasteConfig(){return{tags:["TABLE","TR","TH","TD"]}}onPaste(e){const t=e.detail.data,r=t.querySelector(":scope > thead, tr:first-of-type th"),o=Array.from(t.querySelectorAll("tr")).map(i=>Array.from(i.querySelectorAll("th, td")).map(s=>s.innerHTML));this.data={withHeadings:r!==null,content:o},this.table.wrapper&&this.table.wrapper.replaceWith(this.render())}};(function(){try{if(typeof document<"u"){var n=document.createElement("style");n.appendChild(document.createTextNode(".cdx-quote-icon svg{transform:rotate(180deg)}.cdx-quote{margin:0}.cdx-quote__text{min-height:158px;margin-bottom:10px}.cdx-quote [contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.cdx-quote [contentEditable=true][data-placeholder]:empty:before{opacity:1}.cdx-quote [contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}.cdx-quote-settings{display:flex}.cdx-quote-settings .cdx-settings-button{width:50%}")),document.head.appendChild(n)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const jw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 7L6 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 17H6"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 12L8 12"/></svg>',Rw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 7L5 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 17H5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13 12L5 12"/></svg>',Dw='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 10.8182L9 10.8182C8.80222 10.8182 8.60888 10.7649 8.44443 10.665C8.27998 10.5651 8.15181 10.4231 8.07612 10.257C8.00043 10.0909 7.98063 9.90808 8.01922 9.73174C8.0578 9.55539 8.15304 9.39341 8.29289 9.26627C8.43275 9.13913 8.61093 9.05255 8.80491 9.01747C8.99889 8.98239 9.19996 9.00039 9.38268 9.0692C9.56541 9.13801 9.72159 9.25453 9.83147 9.40403C9.94135 9.55353 10 9.72929 10 9.90909L10 12.1818C10 12.664 9.78929 13.1265 9.41421 13.4675C9.03914 13.8084 8.53043 14 8 14"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 10.8182L15 10.8182C14.8022 10.8182 14.6089 10.7649 14.4444 10.665C14.28 10.5651 14.1518 10.4231 14.0761 10.257C14.0004 10.0909 13.9806 9.90808 14.0192 9.73174C14.0578 9.55539 14.153 9.39341 14.2929 9.26627C14.4327 9.13913 14.6109 9.05255 14.8049 9.01747C14.9989 8.98239 15.2 9.00039 15.3827 9.0692C15.5654 9.13801 15.7216 9.25453 15.8315 9.40403C15.9414 9.55353 16 9.72929 16 9.90909L16 12.1818C16 12.664 15.7893 13.1265 15.4142 13.4675C15.0391 13.8084 14.5304 14 14 14"/></svg>';var Sn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $w(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}),t}var fn={},Ci={},Si={};Object.defineProperty(Si,"__esModule",{value:!0});Si.allInputsSelector=Fw;function Fw(){var n=["text","password","email","number","search","tel","url"];return"[contenteditable=true], textarea, input:not([type]), "+n.map(function(e){return'input[type="'.concat(e,'"]')}).join(", ")}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.allInputsSelector=void 0;var e=Si;Object.defineProperty(n,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}})})(Ci);var gt={},Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.isNativeInput=Hw;function Hw(n){var e=["INPUT","TEXTAREA"];return n&&n.tagName?e.includes(n.tagName):!1}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNativeInput=void 0;var e=Ai;Object.defineProperty(n,"isNativeInput",{enumerable:!0,get:function(){return e.isNativeInput}})})(gt);var uc={},Li={};Object.defineProperty(Li,"__esModule",{value:!0});Li.append=qw;function qw(n,e){Array.isArray(e)?e.forEach(function(t){n.appendChild(t)}):n.appendChild(e)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.append=void 0;var e=Li;Object.defineProperty(n,"append",{enumerable:!0,get:function(){return e.append}})})(uc);var Bi={},Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.blockElements=Uw;function Uw(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.blockElements=void 0;var e=Pi;Object.defineProperty(n,"blockElements",{enumerable:!0,get:function(){return e.blockElements}})})(Bi);var dc={},Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.calculateBaseline=zw;function zw(n){var e=window.getComputedStyle(n),t=parseFloat(e.fontSize),r=parseFloat(e.lineHeight)||t*1.2,o=parseFloat(e.paddingTop),i=parseFloat(e.borderTopWidth),s=parseFloat(e.marginTop),c=t*.8,f=(r-t)/2,d=s+i+o+f+c;return d}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateBaseline=void 0;var e=Mi;Object.defineProperty(n,"calculateBaseline",{enumerable:!0,get:function(){return e.calculateBaseline}})})(dc);var hc={},Ni={},Ii={},ji={};Object.defineProperty(ji,"__esModule",{value:!0});ji.isContentEditable=Ww;function Ww(n){return n.contentEditable==="true"}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isContentEditable=void 0;var e=ji;Object.defineProperty(n,"isContentEditable",{enumerable:!0,get:function(){return e.isContentEditable}})})(Ii);Object.defineProperty(Ni,"__esModule",{value:!0});Ni.canSetCaret=Gw;var Kw=gt,Vw=Ii;function Gw(n){var e=!0;if((0,Kw.isNativeInput)(n))switch(n.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":e=!1;break}else e=(0,Vw.isContentEditable)(n);return e}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.canSetCaret=void 0;var e=Ni;Object.defineProperty(n,"canSetCaret",{enumerable:!0,get:function(){return e.canSetCaret}})})(hc);var Qn={},Ri={};function Yw(n,e,t){const r=t.value!==void 0?"value":"get",o=t[r],i=`#${e}Cache`;if(t[r]=function(...s){return this[i]===void 0&&(this[i]=o.apply(this,s)),this[i]},r==="get"&&t.set){const s=t.set;t.set=function(c){delete n[i],s.apply(this,c)}}return t}function fc(){const n={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(n).find(t=>window.navigator.appVersion.toLowerCase().indexOf(t)!==-1);return e!==void 0&&(n[e]=!0),n}function Di(n){return n!=null&&n!==""&&(typeof n!="object"||Object.keys(n).length>0)}function Xw(n){return!Di(n)}const Zw=()=>typeof window<"u"&&window.navigator!==null&&Di(window.navigator.platform)&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function Jw(n){const e=fc();return n=n.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi,"+"),e.mac?n=n.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):n=n.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),n}function Qw(n){return n[0].toUpperCase()+n.slice(1)}function ek(n){const e=document.createElement("div");e.style.position="absolute",e.style.left="-999px",e.style.bottom="-999px",e.innerHTML=n,document.body.appendChild(e);const t=window.getSelection(),r=document.createRange();if(r.selectNode(e),t===null)throw new Error("Cannot copy text to clipboard");t.removeAllRanges(),t.addRange(r),document.execCommand("copy"),document.body.removeChild(e)}function tk(n,e,t){let r;return(...o)=>{const i=this,s=()=>{r=void 0,t!==!0&&n.apply(i,o)},c=t===!0&&r!==void 0;window.clearTimeout(r),r=window.setTimeout(s,e),c&&n.apply(i,o)}}function it(n){return Object.prototype.toString.call(n).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function nk(n){return it(n)==="boolean"}function pc(n){return it(n)==="function"||it(n)==="asyncfunction"}function rk(n){return pc(n)&&/^\s*class\s+/.test(n.toString())}function ok(n){return it(n)==="number"}function pn(n){return it(n)==="object"}function ik(n){return Promise.resolve(n)===n}function sk(n){return it(n)==="string"}function ak(n){return it(n)==="undefined"}function jr(n,...e){if(!e.length)return n;const t=e.shift();if(pn(n)&&pn(t))for(const r in t)pn(t[r])?(n[r]===void 0&&Object.assign(n,{[r]:{}}),jr(n[r],t[r])):Object.assign(n,{[r]:t[r]});return jr(n,...e)}function lk(n,e,t){const r=`«${e}» is deprecated and will be removed in the next major release. Please use the «${t}» instead.`;n&&console.warn(r)}function ck(n){try{return new URL(n).href}catch{}return n.substring(0,2)==="//"?window.location.protocol+n:window.location.origin+n}function uk(n){return n>47&&n<58||n===32||n===13||n===229||n>64&&n<91||n>95&&n<112||n>185&&n<193||n>218&&n<223}const dk={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},hk={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};class fk{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((t,r)=>{this.completed=this.completed.then(e).then(t).catch(r)})}}function pk(n,e,t=void 0){let r,o,i,s=null,c=0;t||(t={});const f=function(){c=t.leading===!1?0:Date.now(),s=null,i=n.apply(r,o),s===null&&(r=o=null)};return function(){const d=Date.now();!c&&t.leading===!1&&(c=d);const g=e-(d-c);return r=this,o=arguments,g<=0||g>e?(s&&(clearTimeout(s),s=null),c=d,i=n.apply(r,o),s===null&&(r=o=null)):!s&&t.trailing!==!1&&(s=setTimeout(f,g)),i}}const gk=Object.freeze(Object.defineProperty({__proto__:null,PromiseQueue:fk,beautifyShortcut:Jw,cacheable:Yw,capitalize:Qw,copyTextToClipboard:ek,debounce:tk,deepMerge:jr,deprecationAssert:lk,getUserOS:fc,getValidUrl:ck,isBoolean:nk,isClass:rk,isEmpty:Xw,isFunction:pc,isIosDevice:Zw,isNumber:ok,isObject:pn,isPrintableKey:uk,isPromise:ik,isString:sk,isUndefined:ak,keyCodes:dk,mouseButtons:hk,notEmpty:Di,throttle:pk,typeOf:it},Symbol.toStringTag,{value:"Module"})),$i=$w(gk);Object.defineProperty(Ri,"__esModule",{value:!0});Ri.containsOnlyInlineElements=yk;var vk=$i,mk=Bi;function yk(n){var e;(0,vk.isString)(n)?(e=document.createElement("div"),e.innerHTML=n):e=n;var t=function(r){return!(0,mk.blockElements)().includes(r.tagName.toLowerCase())&&Array.from(r.children).every(t)};return Array.from(e.children).every(t)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.containsOnlyInlineElements=void 0;var e=Ri;Object.defineProperty(n,"containsOnlyInlineElements",{enumerable:!0,get:function(){return e.containsOnlyInlineElements}})})(Qn);var gc={},Fi={},er={},Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.make=bk;function bk(n,e,t){var r;e===void 0&&(e=null),t===void 0&&(t={});var o=document.createElement(n);if(Array.isArray(e)){var i=e.filter(function(c){return c!==void 0});(r=o.classList).add.apply(r,i)}else e!==null&&o.classList.add(e);for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(o[s]=t[s]);return o}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.make=void 0;var e=Hi;Object.defineProperty(n,"make",{enumerable:!0,get:function(){return e.make}})})(er);Object.defineProperty(Fi,"__esModule",{value:!0});Fi.fragmentToString=kk;var wk=er;function kk(n){var e=(0,wk.make)("div");return e.appendChild(n),e.innerHTML}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.fragmentToString=void 0;var e=Fi;Object.defineProperty(n,"fragmentToString",{enumerable:!0,get:function(){return e.fragmentToString}})})(gc);var vc={},qi={};Object.defineProperty(qi,"__esModule",{value:!0});qi.getContentLength=Ek;var xk=gt;function Ek(n){var e,t;return(0,xk.isNativeInput)(n)?n.value.length:n.nodeType===Node.TEXT_NODE?n.length:(t=(e=n.textContent)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getContentLength=void 0;var e=qi;Object.defineProperty(n,"getContentLength",{enumerable:!0,get:function(){return e.getContentLength}})})(vc);var Ui={},zi={},aa=Sn&&Sn.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(zi,"__esModule",{value:!0});zi.getDeepestBlockElements=mc;var _k=Qn;function mc(n){return(0,_k.containsOnlyInlineElements)(n)?[n]:Array.from(n.children).reduce(function(e,t){return aa(aa([],e,!0),mc(t),!0)},[])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDeepestBlockElements=void 0;var e=zi;Object.defineProperty(n,"getDeepestBlockElements",{enumerable:!0,get:function(){return e.getDeepestBlockElements}})})(Ui);var yc={},Wi={},tr={},Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.isLineBreakTag=Ok;function Ok(n){return["BR","WBR"].includes(n.tagName)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isLineBreakTag=void 0;var e=Ki;Object.defineProperty(n,"isLineBreakTag",{enumerable:!0,get:function(){return e.isLineBreakTag}})})(tr);var nr={},Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.isSingleTag=Tk;function Tk(n){return["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(n.tagName)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isSingleTag=void 0;var e=Vi;Object.defineProperty(n,"isSingleTag",{enumerable:!0,get:function(){return e.isSingleTag}})})(nr);Object.defineProperty(Wi,"__esModule",{value:!0});Wi.getDeepestNode=bc;var Ck=gt,Sk=tr,Ak=nr;function bc(n,e){e===void 0&&(e=!1);var t=e?"lastChild":"firstChild",r=e?"previousSibling":"nextSibling";if(n.nodeType===Node.ELEMENT_NODE&&n[t]){var o=n[t];if((0,Ak.isSingleTag)(o)&&!(0,Ck.isNativeInput)(o)&&!(0,Sk.isLineBreakTag)(o))if(o[r])o=o[r];else if(o.parentNode!==null&&o.parentNode[r])o=o.parentNode[r];else return o.parentNode;return bc(o,e)}return n}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDeepestNode=void 0;var e=Wi;Object.defineProperty(n,"getDeepestNode",{enumerable:!0,get:function(){return e.getDeepestNode}})})(yc);var wc={},Gi={},nn=Sn&&Sn.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.findAllInputs=Nk;var Lk=Qn,Bk=Ui,Pk=Ci,Mk=gt;function Nk(n){return Array.from(n.querySelectorAll((0,Pk.allInputsSelector)())).reduce(function(e,t){return(0,Mk.isNativeInput)(t)||(0,Lk.containsOnlyInlineElements)(t)?nn(nn([],e,!0),[t],!1):nn(nn([],e,!0),(0,Bk.getDeepestBlockElements)(t),!0)},[])}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.findAllInputs=void 0;var e=Gi;Object.defineProperty(n,"findAllInputs",{enumerable:!0,get:function(){return e.findAllInputs}})})(wc);var kc={},Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.isCollapsedWhitespaces=Ik;function Ik(n){return!/[^\t\n\r ]/.test(n)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCollapsedWhitespaces=void 0;var e=Yi;Object.defineProperty(n,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return e.isCollapsedWhitespaces}})})(kc);var Xi={},Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.isElement=Rk;var jk=$i;function Rk(n){return(0,jk.isNumber)(n)?!1:!!n&&!!n.nodeType&&n.nodeType===Node.ELEMENT_NODE}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isElement=void 0;var e=Zi;Object.defineProperty(n,"isElement",{enumerable:!0,get:function(){return e.isElement}})})(Xi);var xc={},Ji={},Qi={},es={};Object.defineProperty(es,"__esModule",{value:!0});es.isLeaf=Dk;function Dk(n){return n===null?!1:n.childNodes.length===0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isLeaf=void 0;var e=es;Object.defineProperty(n,"isLeaf",{enumerable:!0,get:function(){return e.isLeaf}})})(Qi);var ts={},ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.isNodeEmpty=Uk;var $k=tr,Fk=Xi,Hk=gt,qk=nr;function Uk(n,e){var t="";return(0,qk.isSingleTag)(n)&&!(0,$k.isLineBreakTag)(n)?!1:((0,Fk.isElement)(n)&&(0,Hk.isNativeInput)(n)?t=n.value:n.textContent!==null&&(t=n.textContent.replace("​","")),e!==void 0&&(t=t.replace(new RegExp(e,"g"),"")),t.trim().length===0)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeEmpty=void 0;var e=ns;Object.defineProperty(n,"isNodeEmpty",{enumerable:!0,get:function(){return e.isNodeEmpty}})})(ts);Object.defineProperty(Ji,"__esModule",{value:!0});Ji.isEmpty=Kk;var zk=Qi,Wk=ts;function Kk(n,e){n.normalize();for(var t=[n];t.length>0;){var r=t.shift();if(r){if(n=r,(0,zk.isLeaf)(n)&&!(0,Wk.isNodeEmpty)(n,e))return!1;t.push.apply(t,Array.from(n.childNodes))}}return!0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isEmpty=void 0;var e=Ji;Object.defineProperty(n,"isEmpty",{enumerable:!0,get:function(){return e.isEmpty}})})(xc);var Ec={},rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.isFragment=Gk;var Vk=$i;function Gk(n){return(0,Vk.isNumber)(n)?!1:!!n&&!!n.nodeType&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isFragment=void 0;var e=rs;Object.defineProperty(n,"isFragment",{enumerable:!0,get:function(){return e.isFragment}})})(Ec);var _c={},os={};Object.defineProperty(os,"__esModule",{value:!0});os.isHTMLString=Xk;var Yk=er;function Xk(n){var e=(0,Yk.make)("div");return e.innerHTML=n,e.childElementCount>0}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isHTMLString=void 0;var e=os;Object.defineProperty(n,"isHTMLString",{enumerable:!0,get:function(){return e.isHTMLString}})})(_c);var Oc={},is={};Object.defineProperty(is,"__esModule",{value:!0});is.offset=Zk;function Zk(n){var e=n.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,o=e.top+r,i=e.left+t;return{top:o,left:i,bottom:o+e.height,right:i+e.width}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.offset=void 0;var e=is;Object.defineProperty(n,"offset",{enumerable:!0,get:function(){return e.offset}})})(Oc);var Tc={},ss={};Object.defineProperty(ss,"__esModule",{value:!0});ss.prepend=Jk;function Jk(n,e){Array.isArray(e)?(e=e.reverse(),e.forEach(function(t){return n.prepend(t)})):n.prepend(e)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.prepend=void 0;var e=ss;Object.defineProperty(n,"prepend",{enumerable:!0,get:function(){return e.prepend}})})(Tc);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.prepend=n.offset=n.make=n.isLineBreakTag=n.isSingleTag=n.isNodeEmpty=n.isLeaf=n.isHTMLString=n.isFragment=n.isEmpty=n.isElement=n.isContentEditable=n.isCollapsedWhitespaces=n.findAllInputs=n.isNativeInput=n.allInputsSelector=n.getDeepestNode=n.getDeepestBlockElements=n.getContentLength=n.fragmentToString=n.containsOnlyInlineElements=n.canSetCaret=n.calculateBaseline=n.blockElements=n.append=void 0;var e=Ci;Object.defineProperty(n,"allInputsSelector",{enumerable:!0,get:function(){return e.allInputsSelector}});var t=gt;Object.defineProperty(n,"isNativeInput",{enumerable:!0,get:function(){return t.isNativeInput}});var r=uc;Object.defineProperty(n,"append",{enumerable:!0,get:function(){return r.append}});var o=Bi;Object.defineProperty(n,"blockElements",{enumerable:!0,get:function(){return o.blockElements}});var i=dc;Object.defineProperty(n,"calculateBaseline",{enumerable:!0,get:function(){return i.calculateBaseline}});var s=hc;Object.defineProperty(n,"canSetCaret",{enumerable:!0,get:function(){return s.canSetCaret}});var c=Qn;Object.defineProperty(n,"containsOnlyInlineElements",{enumerable:!0,get:function(){return c.containsOnlyInlineElements}});var f=gc;Object.defineProperty(n,"fragmentToString",{enumerable:!0,get:function(){return f.fragmentToString}});var d=vc;Object.defineProperty(n,"getContentLength",{enumerable:!0,get:function(){return d.getContentLength}});var g=Ui;Object.defineProperty(n,"getDeepestBlockElements",{enumerable:!0,get:function(){return g.getDeepestBlockElements}});var l=yc;Object.defineProperty(n,"getDeepestNode",{enumerable:!0,get:function(){return l.getDeepestNode}});var a=wc;Object.defineProperty(n,"findAllInputs",{enumerable:!0,get:function(){return a.findAllInputs}});var u=kc;Object.defineProperty(n,"isCollapsedWhitespaces",{enumerable:!0,get:function(){return u.isCollapsedWhitespaces}});var p=Ii;Object.defineProperty(n,"isContentEditable",{enumerable:!0,get:function(){return p.isContentEditable}});var b=Xi;Object.defineProperty(n,"isElement",{enumerable:!0,get:function(){return b.isElement}});var v=xc;Object.defineProperty(n,"isEmpty",{enumerable:!0,get:function(){return v.isEmpty}});var y=Ec;Object.defineProperty(n,"isFragment",{enumerable:!0,get:function(){return y.isFragment}});var h=_c;Object.defineProperty(n,"isHTMLString",{enumerable:!0,get:function(){return h.isHTMLString}});var w=Qi;Object.defineProperty(n,"isLeaf",{enumerable:!0,get:function(){return w.isLeaf}});var m=ts;Object.defineProperty(n,"isNodeEmpty",{enumerable:!0,get:function(){return m.isNodeEmpty}});var k=tr;Object.defineProperty(n,"isLineBreakTag",{enumerable:!0,get:function(){return k.isLineBreakTag}});var S=nr;Object.defineProperty(n,"isSingleTag",{enumerable:!0,get:function(){return S.isSingleTag}});var T=er;Object.defineProperty(n,"make",{enumerable:!0,get:function(){return T.make}});var E=Oc;Object.defineProperty(n,"offset",{enumerable:!0,get:function(){return E.offset}});var O=Tc;Object.defineProperty(n,"prepend",{enumerable:!0,get:function(){return O.prepend}})})(fn);var Cc=(n=>(n.Left="left",n.Center="center",n))(Cc||{});class zt{constructor({data:e,config:t,api:r,readOnly:o,block:i}){const{DEFAULT_ALIGNMENT:s}=zt;this.api=r,this.readOnly=o,this.quotePlaceholder=r.i18n.t((t==null?void 0:t.quotePlaceholder)??zt.DEFAULT_QUOTE_PLACEHOLDER),this.captionPlaceholder=r.i18n.t((t==null?void 0:t.captionPlaceholder)??zt.DEFAULT_CAPTION_PLACEHOLDER),this.data={text:e.text||"",caption:e.caption||"",alignment:Object.values(Cc).includes(e.alignment)?e.alignment:(t==null?void 0:t.defaultAlignment)??s},this.css={baseClass:this.api.styles.block,wrapper:"cdx-quote",text:"cdx-quote__text",input:this.api.styles.input,caption:"cdx-quote__caption"},this.block=i}static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:Dw,title:"Quote"}}static get contentless(){return!0}static get enableLineBreaks(){return!0}static get DEFAULT_QUOTE_PLACEHOLDER(){return"Enter a quote"}static get DEFAULT_CAPTION_PLACEHOLDER(){return"Enter a caption"}static get DEFAULT_ALIGNMENT(){return"left"}static get conversionConfig(){return{import:"text",export:function(e){return e.caption?`${e.text} — ${e.caption}`:e.text}}}get CSS(){return{baseClass:this.api.styles.block,wrapper:"cdx-quote",text:"cdx-quote__text",input:this.api.styles.input,caption:"cdx-quote__caption"}}get settings(){return[{name:"left",icon:Rw},{name:"center",icon:jw}]}render(){const e=fn.make("blockquote",[this.css.baseClass,this.css.wrapper]),t=fn.make("div",[this.css.input,this.css.text],{contentEditable:!this.readOnly,innerHTML:this.data.text}),r=fn.make("div",[this.css.input,this.css.caption],{contentEditable:!this.readOnly,innerHTML:this.data.caption});return t.dataset.placeholder=this.quotePlaceholder,r.dataset.placeholder=this.captionPlaceholder,e.appendChild(t),e.appendChild(r),e}save(e){const t=e.querySelector(`.${this.css.text}`),r=e.querySelector(`.${this.css.caption}`);return Object.assign(this.data,{text:(t==null?void 0:t.innerHTML)??"",caption:(r==null?void 0:r.innerHTML)??""})}static get sanitize(){return{text:{br:!0},caption:{br:!0},alignment:{}}}renderSettings(){const e=t=>t&&t[0].toUpperCase()+t.slice(1);return this.settings.map(t=>({icon:t.icon,label:this.api.i18n.t(`Align ${e(t.name)}`),onActivate:()=>this._toggleTune(t.name),isActive:this.data.alignment===t.name,closeOnActivate:!0}))}_toggleTune(e){this.data.alignment=e,this.block.dispatchChange()}}var Sc={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(window,function(){return function(t){var r={};function o(i){if(r[i])return r[i].exports;var s=r[i]={i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=t,o.c=r,o.d=function(i,s,c){o.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:c})},o.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},o.t=function(i,s){if(1&s&&(i=o(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var f in i)o.d(c,f,(function(d){return i[d]}).bind(null,f));return c},o.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(s,"a",s),s},o.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},o.p="/",o(o.s=6)}([function(t,r,o){t.exports=function(i){var s={};function c(f){if(s[f])return s[f].exports;var d=s[f]={i:f,l:!1,exports:{}};return i[f].call(d.exports,d,d.exports,c),d.l=!0,d.exports}return c.m=i,c.c=s,c.d=function(f,d,g){c.o(f,d)||Object.defineProperty(f,d,{enumerable:!0,get:g})},c.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},c.t=function(f,d){if(1&d&&(f=c(f)),8&d||4&d&&typeof f=="object"&&f&&f.__esModule)return f;var g=Object.create(null);if(c.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:f}),2&d&&typeof f!="string")for(var l in f)c.d(g,l,(function(a){return f[a]}).bind(null,l));return g},c.n=function(f){var d=f&&f.__esModule?function(){return f.default}:function(){return f};return c.d(d,"a",d),d},c.o=function(f,d){return Object.prototype.hasOwnProperty.call(f,d)},c.p="",c(c.s=3)}([function(i,s){var c;c=function(){return this}();try{c=c||new Function("return this")()}catch{typeof window=="object"&&(c=window)}i.exports=c},function(i,s,c){(function(f){var d=c(2),g=setTimeout;function l(){}function a(w){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if(typeof w!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(w,this)}function u(w,m){for(;w._state===3;)w=w._value;w._state!==0?(w._handled=!0,a._immediateFn(function(){var k=w._state===1?m.onFulfilled:m.onRejected;if(k!==null){var S;try{S=k(w._value)}catch(T){return void b(m.promise,T)}p(m.promise,S)}else(w._state===1?p:b)(m.promise,w._value)})):w._deferreds.push(m)}function p(w,m){try{if(m===w)throw new TypeError("A promise cannot be resolved with itself.");if(m&&(typeof m=="object"||typeof m=="function")){var k=m.then;if(m instanceof a)return w._state=3,w._value=m,void v(w);if(typeof k=="function")return void h((S=k,T=m,function(){S.apply(T,arguments)}),w)}w._state=1,w._value=m,v(w)}catch(E){b(w,E)}var S,T}function b(w,m){w._state=2,w._value=m,v(w)}function v(w){w._state===2&&w._deferreds.length===0&&a._immediateFn(function(){w._handled||a._unhandledRejectionFn(w._value)});for(var m=0,k=w._deferreds.length;m<k;m++)u(w,w._deferreds[m]);w._deferreds=null}function y(w,m,k){this.onFulfilled=typeof w=="function"?w:null,this.onRejected=typeof m=="function"?m:null,this.promise=k}function h(w,m){var k=!1;try{w(function(S){k||(k=!0,p(m,S))},function(S){k||(k=!0,b(m,S))})}catch(S){if(k)return;k=!0,b(m,S)}}a.prototype.catch=function(w){return this.then(null,w)},a.prototype.then=function(w,m){var k=new this.constructor(l);return u(this,new y(w,m,k)),k},a.prototype.finally=d.a,a.all=function(w){return new a(function(m,k){if(!w||w.length===void 0)throw new TypeError("Promise.all accepts an array");var S=Array.prototype.slice.call(w);if(S.length===0)return m([]);var T=S.length;function E(C,x){try{if(x&&(typeof x=="object"||typeof x=="function")){var _=x.then;if(typeof _=="function")return void _.call(x,function(A){E(C,A)},k)}S[C]=x,--T==0&&m(S)}catch(A){k(A)}}for(var O=0;O<S.length;O++)E(O,S[O])})},a.resolve=function(w){return w&&typeof w=="object"&&w.constructor===a?w:new a(function(m){m(w)})},a.reject=function(w){return new a(function(m,k){k(w)})},a.race=function(w){return new a(function(m,k){for(var S=0,T=w.length;S<T;S++)w[S].then(m,k)})},a._immediateFn=typeof f=="function"&&function(w){f(w)}||function(w){g(w,0)},a._unhandledRejectionFn=function(w){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",w)},s.a=a}).call(this,c(5).setImmediate)},function(i,s,c){s.a=function(f){var d=this.constructor;return this.then(function(g){return d.resolve(f()).then(function(){return g})},function(g){return d.resolve(f()).then(function(){return d.reject(g)})})}},function(i,s,c){function f(h){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(h)}c(4);var d,g,l,a,u,p,b,v=c(8),y=(g=function(h){return new Promise(function(w,m){h=a(h),(h=u(h)).beforeSend&&h.beforeSend();var k=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");k.open(h.method,h.url),k.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(h.headers).forEach(function(T){var E=h.headers[T];k.setRequestHeader(T,E)});var S=h.ratio;k.upload.addEventListener("progress",function(T){var E=Math.round(T.loaded/T.total*100),O=Math.ceil(E*S/100);h.progress(Math.min(O,100))},!1),k.addEventListener("progress",function(T){var E=Math.round(T.loaded/T.total*100),O=Math.ceil(E*(100-S)/100)+S;h.progress(Math.min(O,100))},!1),k.onreadystatechange=function(){if(k.readyState===4){var T=k.response;try{T=JSON.parse(T)}catch{}var E=v.parseHeaders(k.getAllResponseHeaders()),O={body:T,code:k.status,headers:E};b(k.status)?w(O):m(O)}},k.send(h.data)})},l=function(h){return h.method="POST",g(h)},a=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(h.url&&typeof h.url!="string")throw new Error("Url must be a string");if(h.url=h.url||"",h.method&&typeof h.method!="string")throw new Error("`method` must be a string or null");if(h.method=h.method?h.method.toUpperCase():"GET",h.headers&&f(h.headers)!=="object")throw new Error("`headers` must be an object or null");if(h.headers=h.headers||{},h.type&&(typeof h.type!="string"||!Object.values(d).includes(h.type)))throw new Error("`type` must be taken from module's «contentType» library");if(h.progress&&typeof h.progress!="function")throw new Error("`progress` must be a function or null");if(h.progress=h.progress||function(w){},h.beforeSend=h.beforeSend||function(w){},h.ratio&&typeof h.ratio!="number")throw new Error("`ratio` must be a number");if(h.ratio<0||h.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(h.ratio=h.ratio||90,h.accept&&typeof h.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(h.accept=h.accept||"*/*",h.multiple&&typeof h.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(h.multiple=h.multiple||!1,h.fieldName&&typeof h.fieldName!="string")throw new Error("`fieldName` must be a string");return h.fieldName=h.fieldName||"files",h},u=function(h){switch(h.method){case"GET":var w=p(h.data,d.URLENCODED);delete h.data,h.url=/\?/.test(h.url)?h.url+"&"+w:h.url+"?"+w;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var m=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||d.JSON}(h);(v.isFormData(h.data)||v.isFormElement(h.data))&&(m=d.FORM),h.data=p(h.data,m),m!==y.contentType.FORM&&(h.headers["content-type"]=m)}return h},p=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case d.URLENCODED:return v.urlEncode(h);case d.JSON:return v.jsonEncode(h);case d.FORM:return v.formEncode(h);default:return h}},b=function(h){return h>=200&&h<300},{contentType:d={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:g,get:function(h){return h.method="GET",g(h)},post:l,transport:function(h){return h=a(h),v.selectFiles(h).then(function(w){for(var m=new FormData,k=0;k<w.length;k++)m.append(h.fieldName,w[k],w[k].name);v.isObject(h.data)&&Object.keys(h.data).forEach(function(T){var E=h.data[T];m.append(T,E)});var S=h.beforeSend;return h.beforeSend=function(){return S(w)},h.data=m,l(h)})},selectFiles:function(h){return delete(h=a(h)).beforeSend,v.selectFiles(h)}});i.exports=y},function(i,s,c){c.r(s);var f=c(1);window.Promise=window.Promise||f.a},function(i,s,c){(function(f){var d=f!==void 0&&f||typeof self<"u"&&self||window,g=Function.prototype.apply;function l(a,u){this._id=a,this._clearFn=u}s.setTimeout=function(){return new l(g.call(setTimeout,d,arguments),clearTimeout)},s.setInterval=function(){return new l(g.call(setInterval,d,arguments),clearInterval)},s.clearTimeout=s.clearInterval=function(a){a&&a.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(d,this._id)},s.enroll=function(a,u){clearTimeout(a._idleTimeoutId),a._idleTimeout=u},s.unenroll=function(a){clearTimeout(a._idleTimeoutId),a._idleTimeout=-1},s._unrefActive=s.active=function(a){clearTimeout(a._idleTimeoutId);var u=a._idleTimeout;u>=0&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},u))},c(6),s.setImmediate=typeof self<"u"&&self.setImmediate||f!==void 0&&f.setImmediate||this&&this.setImmediate,s.clearImmediate=typeof self<"u"&&self.clearImmediate||f!==void 0&&f.clearImmediate||this&&this.clearImmediate}).call(this,c(0))},function(i,s,c){(function(f,d){(function(g,l){if(!g.setImmediate){var a,u,p,b,v,y=1,h={},w=!1,m=g.document,k=Object.getPrototypeOf&&Object.getPrototypeOf(g);k=k&&k.setTimeout?k:g,{}.toString.call(g.process)==="[object process]"?a=function(E){d.nextTick(function(){T(E)})}:function(){if(g.postMessage&&!g.importScripts){var E=!0,O=g.onmessage;return g.onmessage=function(){E=!1},g.postMessage("","*"),g.onmessage=O,E}}()?(b="setImmediate$"+Math.random()+"$",v=function(E){E.source===g&&typeof E.data=="string"&&E.data.indexOf(b)===0&&T(+E.data.slice(b.length))},g.addEventListener?g.addEventListener("message",v,!1):g.attachEvent("onmessage",v),a=function(E){g.postMessage(b+E,"*")}):g.MessageChannel?((p=new MessageChannel).port1.onmessage=function(E){T(E.data)},a=function(E){p.port2.postMessage(E)}):m&&"onreadystatechange"in m.createElement("script")?(u=m.documentElement,a=function(E){var O=m.createElement("script");O.onreadystatechange=function(){T(E),O.onreadystatechange=null,u.removeChild(O),O=null},u.appendChild(O)}):a=function(E){setTimeout(T,0,E)},k.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var O=new Array(arguments.length-1),C=0;C<O.length;C++)O[C]=arguments[C+1];var x={callback:E,args:O};return h[y]=x,a(y),y++},k.clearImmediate=S}function S(E){delete h[E]}function T(E){if(w)setTimeout(T,0,E);else{var O=h[E];if(O){w=!0;try{(function(C){var x=C.callback,_=C.args;switch(_.length){case 0:x();break;case 1:x(_[0]);break;case 2:x(_[0],_[1]);break;case 3:x(_[0],_[1],_[2]);break;default:x.apply(void 0,_)}})(O)}finally{S(E),w=!1}}}}})(typeof self>"u"?f===void 0?this:f:self)}).call(this,c(0),c(7))},function(i,s){var c,f,d=i.exports={};function g(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function a(k){if(c===setTimeout)return setTimeout(k,0);if((c===g||!c)&&setTimeout)return c=setTimeout,setTimeout(k,0);try{return c(k,0)}catch{try{return c.call(null,k,0)}catch{return c.call(this,k,0)}}}(function(){try{c=typeof setTimeout=="function"?setTimeout:g}catch{c=g}try{f=typeof clearTimeout=="function"?clearTimeout:l}catch{f=l}})();var u,p=[],b=!1,v=-1;function y(){b&&u&&(b=!1,u.length?p=u.concat(p):v=-1,p.length&&h())}function h(){if(!b){var k=a(y);b=!0;for(var S=p.length;S;){for(u=p,p=[];++v<S;)u&&u[v].run();v=-1,S=p.length}u=null,b=!1,function(T){if(f===clearTimeout)return clearTimeout(T);if((f===l||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(T);try{f(T)}catch{try{return f.call(null,T)}catch{return f.call(this,T)}}}(k)}}function w(k,S){this.fun=k,this.array=S}function m(){}d.nextTick=function(k){var S=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)S[T-1]=arguments[T];p.push(new w(k,S)),p.length!==1||b||a(h)},w.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=m,d.addListener=m,d.once=m,d.off=m,d.removeListener=m,d.removeAllListeners=m,d.emit=m,d.prependListener=m,d.prependOnceListener=m,d.listeners=function(k){return[]},d.binding=function(k){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(k){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(i,s,c){function f(g,l){for(var a=0;a<l.length;a++){var u=l[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(g,u.key,u)}}var d=c(9);i.exports=function(){function g(){(function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,g)}var l,a;return l=g,(a=[{key:"urlEncode",value:function(u){return d(u)}},{key:"jsonEncode",value:function(u){return JSON.stringify(u)}},{key:"formEncode",value:function(u){if(this.isFormData(u))return u;if(this.isFormElement(u))return new FormData(u);if(this.isObject(u)){var p=new FormData;return Object.keys(u).forEach(function(b){var v=u[b];p.append(b,v)}),p}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(u){return Object.prototype.toString.call(u)==="[object Object]"}},{key:"isFormData",value:function(u){return u instanceof FormData}},{key:"isFormElement",value:function(u){return u instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(p,b){var v=document.createElement("INPUT");v.type="file",u.multiple&&v.setAttribute("multiple","multiple"),u.accept&&v.setAttribute("accept",u.accept),v.style.display="none",document.body.appendChild(v),v.addEventListener("change",function(y){var h=y.target.files;p(h),document.body.removeChild(v)},!1),v.click()})}},{key:"parseHeaders",value:function(u){var p=u.trim().split(/[\r\n]+/),b={};return p.forEach(function(v){var y=v.split(": "),h=y.shift(),w=y.join(": ");h&&(b[h]=w)}),b}}])&&f(l,a),g}()},function(i,s){var c=function(d){return encodeURIComponent(d).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},f=function(d,g,l,a){return g=g||null,l=l||"&",a=a||null,d?function(u){for(var p=new Array,b=0;b<u.length;b++)u[b]&&p.push(u[b]);return p}(Object.keys(d).map(function(u){var p,b,v=u;if(a&&(v=a+"["+v+"]"),typeof d[u]=="object"&&d[u]!==null)p=f(d[u],null,l,v);else{g&&(b=v,v=!isNaN(parseFloat(b))&&isFinite(b)?g+Number(v):v);var y=d[u];y=(y=(y=(y=y===!0?"1":y)===!1?"0":y)===0?"0":y)||"",p=c(v)+"="+c(y)}return p})).join(l).replace(/[!'()*]/g,""):""};i.exports=f}])},function(t,r,o){var i=o(2);typeof i=="string"&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};o(4)(i,s),i.locals&&(t.exports=i.locals)},function(t,r,o){(t.exports=o(3)(!1)).push([t.i,`.cdx-attaches {
  --color-line: #EFF0F1;
  --color-bg: #fff;
  --color-bg-secondary: #F8F8F8;
  --color-bg-secondary--hover: #f2f2f2;
  --color-text-secondary: #707684;
}

  .cdx-attaches--with-file {
    display: flex;
    align-items: center;
    padding: 10px 12px;
    border: 1px solid var(--color-line);
    border-radius: 7px;
    background: var(--color-bg);
  }

  .cdx-attaches--with-file .cdx-attaches__file-info {
      display: grid;
      grid-gap: 4px;
      max-width: calc(100% - 80px);
      margin: auto 0;
      flex-grow: 2;
    }

  .cdx-attaches--with-file .cdx-attaches__download-button {
      display: flex;
      align-items: center;
      background: var(--color-bg-secondary);
      padding: 6px;
      border-radius: 6px;
      margin: auto 0 auto auto;
    }

  .cdx-attaches--with-file .cdx-attaches__download-button:hover {
        background: var(--color-bg-secondary--hover);
      }

  .cdx-attaches--with-file .cdx-attaches__download-button svg {
        width: 20px;
        height: 20px;
        fill: none;
      }

  .cdx-attaches--with-file .cdx-attaches__file-icon {
      position: relative;
    }

  .cdx-attaches--with-file .cdx-attaches__file-icon-background {
        background-color: #333;

        width: 27px;
        height: 30px;
        margin-right: 12px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

  @supports(-webkit-mask-box-image: url('')){

  .cdx-attaches--with-file .cdx-attaches__file-icon-background {
          border-radius: 0;
          -webkit-mask-box-image: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 10.3872C0 1.83334 1.83334 0 10.3872 0H13.6128C22.1667 0 24 1.83334 24 10.3872V13.6128C24 22.1667 22.1667 24 13.6128 24H10.3872C1.83334 24 0 22.1667 0 13.6128V10.3872Z' fill='black'/%3E%3C/svg%3E%0A") 48% 41% 37.9% 53.3%
      };
        }

  .cdx-attaches--with-file .cdx-attaches__file-icon-label {
        position: absolute;
        left: 3px;
        top: 11px;
        background: inherit;
        text-transform: uppercase;
        line-height: 1em;
        color: #fff;
        padding: 1px 2px;
        border-radius: 3px;
        font-size: 10px;
        font-weight: bold;
        /* box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.22); */
        font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
        letter-spacing: 0.02em;
      }

  .cdx-attaches--with-file .cdx-attaches__file-icon svg {
        width: 20px;
        height: 20px;
      }

  .cdx-attaches--with-file .cdx-attaches__file-icon path {
        stroke: #fff;
      }

  .cdx-attaches--with-file .cdx-attaches__size {
      color: var(--color-text-secondary);
      font-size: 12px;
      line-height: 1em;
    }

  .cdx-attaches--with-file .cdx-attaches__size::after {
        content: attr(data-size);
        margin-left: 0.2em;
      }

  .cdx-attaches--with-file .cdx-attaches__title {
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
      outline: none;
      max-width: 90%;
      font-size: 14px;
      font-weight: 500;
      line-height: 1em;
    }

  .cdx-attaches--with-file .cdx-attaches__title:empty::before {
      content: attr(data-placeholder);
      color: #7b7e89;
    }

  .cdx-attaches--loading .cdx-attaches__title,
    .cdx-attaches--loading .cdx-attaches__file-icon,
    .cdx-attaches--loading .cdx-attaches__size,
    .cdx-attaches--loading .cdx-attaches__download-button,
    .cdx-attaches--loading .cdx-attaches__button {
      opacity: 0;
      font-size: 0;
    }

  .cdx-attaches__button {
    display: flex;
    align-items: center;
    justify-content: center;
    color: #000;
    border-radius: 7px;
    font-weight: 500;
  }

  .cdx-attaches__button svg {
      margin-top: 0;
    }
`,""])},function(t,r){t.exports=function(o){var i=[];return i.toString=function(){return this.map(function(s){var c=function(f,d){var g=f[1]||"",l=f[3];if(!l)return g;if(d&&typeof btoa=="function"){var a=(p=l,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(p))))+" */"),u=l.sources.map(function(b){return"/*# sourceURL="+l.sourceRoot+b+" */"});return[g].concat(u).concat([a]).join(`
`)}var p;return[g].join(`
`)}(s,o);return s[2]?"@media "+s[2]+"{"+c+"}":c}).join("")},i.i=function(s,c){typeof s=="string"&&(s=[[null,s,""]]);for(var f={},d=0;d<this.length;d++){var g=this[d][0];typeof g=="number"&&(f[g]=!0)}for(d=0;d<s.length;d++){var l=s[d];typeof l[0]=="number"&&f[l[0]]||(c&&!l[2]?l[2]=c:c&&(l[2]="("+l[2]+") and ("+c+")"),i.push(l))}},i}},function(t,r,o){var i,s,c={},f=(i=function(){return window&&document&&document.all&&!window.atob},function(){return s===void 0&&(s=i.apply(this,arguments)),s}),d=function(x){return document.querySelector(x)},g=function(x){var _={};return function(A){if(typeof A=="function")return A();if(_[A]===void 0){var L=d.call(this,A);if(window.HTMLIFrameElement&&L instanceof window.HTMLIFrameElement)try{L=L.contentDocument.head}catch{L=null}_[A]=L}return _[A]}}(),l=null,a=0,u=[],p=o(5);function b(x,_){for(var A=0;A<x.length;A++){var L=x[A],P=c[L.id];if(P){P.refs++;for(var R=0;R<P.parts.length;R++)P.parts[R](L.parts[R]);for(;R<L.parts.length;R++)P.parts.push(k(L.parts[R],_))}else{var F=[];for(R=0;R<L.parts.length;R++)F.push(k(L.parts[R],_));c[L.id]={id:L.id,refs:1,parts:F}}}}function v(x,_){for(var A=[],L={},P=0;P<x.length;P++){var R=x[P],F=_.base?R[0]+_.base:R[0],W={css:R[1],media:R[2],sourceMap:R[3]};L[F]?L[F].parts.push(W):A.push(L[F]={id:F,parts:[W]})}return A}function y(x,_){var A=g(x.insertInto);if(!A)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var L=u[u.length-1];if(x.insertAt==="top")L?L.nextSibling?A.insertBefore(_,L.nextSibling):A.appendChild(_):A.insertBefore(_,A.firstChild),u.push(_);else if(x.insertAt==="bottom")A.appendChild(_);else{if(typeof x.insertAt!="object"||!x.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var P=g(x.insertInto+" "+x.insertAt.before);A.insertBefore(_,P)}}function h(x){if(x.parentNode===null)return!1;x.parentNode.removeChild(x);var _=u.indexOf(x);_>=0&&u.splice(_,1)}function w(x){var _=document.createElement("style");return x.attrs.type===void 0&&(x.attrs.type="text/css"),m(_,x.attrs),y(x,_),_}function m(x,_){Object.keys(_).forEach(function(A){x.setAttribute(A,_[A])})}function k(x,_){var A,L,P,R;if(_.transform&&x.css){if(!(R=_.transform(x.css)))return function(){};x.css=R}if(_.singleton){var F=a++;A=l||(l=w(_)),L=E.bind(null,A,F,!1),P=E.bind(null,A,F,!0)}else x.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(A=function(W){var $=document.createElement("link");return W.attrs.type===void 0&&(W.attrs.type="text/css"),W.attrs.rel="stylesheet",m($,W.attrs),y(W,$),$}(_),L=C.bind(null,A,_),P=function(){h(A),A.href&&URL.revokeObjectURL(A.href)}):(A=w(_),L=O.bind(null,A),P=function(){h(A)});return L(x),function(W){if(W){if(W.css===x.css&&W.media===x.media&&W.sourceMap===x.sourceMap)return;L(x=W)}else P()}}t.exports=function(x,_){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(_=_||{}).attrs=typeof _.attrs=="object"?_.attrs:{},_.singleton||typeof _.singleton=="boolean"||(_.singleton=f()),_.insertInto||(_.insertInto="head"),_.insertAt||(_.insertAt="bottom");var A=v(x,_);return b(A,_),function(L){for(var P=[],R=0;R<A.length;R++){var F=A[R];(W=c[F.id]).refs--,P.push(W)}for(L&&b(v(L,_),_),R=0;R<P.length;R++){var W;if((W=P[R]).refs===0){for(var $=0;$<W.parts.length;$++)W.parts[$]();delete c[W.id]}}}};var S,T=(S=[],function(x,_){return S[x]=_,S.filter(Boolean).join(`
`)});function E(x,_,A,L){var P=A?"":L.css;if(x.styleSheet)x.styleSheet.cssText=T(_,P);else{var R=document.createTextNode(P),F=x.childNodes;F[_]&&x.removeChild(F[_]),F.length?x.insertBefore(R,F[_]):x.appendChild(R)}}function O(x,_){var A=_.css,L=_.media;if(L&&x.setAttribute("media",L),x.styleSheet)x.styleSheet.cssText=A;else{for(;x.firstChild;)x.removeChild(x.firstChild);x.appendChild(document.createTextNode(A))}}function C(x,_,A){var L=A.css,P=A.sourceMap,R=_.convertToAbsoluteUrls===void 0&&P;(_.convertToAbsoluteUrls||R)&&(L=p(L)),P&&(L+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(P))))+" */");var F=new Blob([L],{type:"text/css"}),W=x.href;x.href=URL.createObjectURL(F),W&&URL.revokeObjectURL(W)}},function(t,r){t.exports=function(o){var i=typeof window<"u"&&window.location;if(!i)throw new Error("fixUrls requires window.location");if(!o||typeof o!="string")return o;var s=i.protocol+"//"+i.host,c=s+i.pathname.replace(/\/[^\/]*$/,"/");return o.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(f,d){var g,l=d.trim().replace(/^"(.*)"$/,function(a,u){return u}).replace(/^'(.*)'$/,function(a,u){return u});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(l)?f:(g=l.indexOf("//")===0?l:l.indexOf("/")===0?s+l:c+l.replace(/^\.\//,""),"url("+JSON.stringify(g)+")")})}},function(t,r,o){o.r(r),o.d(r,"default",function(){return b}),o(1);var i=o(0),s=o.n(i);function c(v,y){for(var h=0;h<y.length;h++){var w=y[h];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}var f=function(){function v(w){var m=w.config,k=w.onUpload,S=w.onError;(function(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")})(this,v),this.config=m,this.onUpload=k,this.onError=S}var y,h;return y=v,(h=[{key:"uploadSelectedFile",value:function(w){var m=this,k=w.onPreview;(this.config.uploader&&typeof this.config.uploader.uploadByFile=="function"?s.a.selectFiles({accept:this.config.types}).then(function(S){k();var T,E=m.config.uploader.uploadByFile(S[0]);return(T=E)&&typeof T.then=="function"||console.warn("Custom uploader method uploadByFile should return a Promise"),E}):s.a.transport({url:this.config.endpoint,accept:this.config.types,beforeSend:function(){return k()},fieldName:this.config.field,headers:this.config.additionalRequestHeaders||{}}).then(function(S){return S.body})).then(function(S){m.onUpload(S)}).catch(function(S){var T=S.body,E=T&&T.message?T.message:m.config.errorMessage;m.onError(E)})}}])&&c(y.prototype,h),v}();function d(v){return function(y){if(Array.isArray(y))return g(y)}(v)||function(y){if(typeof Symbol<"u"&&y[Symbol.iterator]!=null||y["@@iterator"]!=null)return Array.from(y)}(v)||function(y,h){if(y){if(typeof y=="string")return g(y,h);var w=Object.prototype.toString.call(y).slice(8,-1);if(w==="Object"&&y.constructor&&(w=y.constructor.name),w==="Map"||w==="Set")return Array.from(y);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return g(y,h)}}(v)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function g(v,y){(y==null||y>v.length)&&(y=v.length);for(var h=0,w=new Array(y);h<y;h++)w[h]=v[h];return w}function l(v){var y,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=document.createElement(v);Array.isArray(h)?(y=m.classList).add.apply(y,d(h)):h&&m.classList.add(h);for(var k in w)m[k]=w[k];return m}function a(v){return Object.keys(v).length===0}const u='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.3236 8.43554L9.49533 12.1908C9.13119 12.5505 8.93118 13.043 8.9393 13.5598C8.94741 14.0767 9.163 14.5757 9.53862 14.947C9.91424 15.3182 10.4191 15.5314 10.9422 15.5397C11.4653 15.5479 11.9637 15.3504 12.3279 14.9908L16.1562 11.2355C16.8845 10.5161 17.2845 9.53123 17.2682 8.4975C17.252 7.46376 16.8208 6.46583 16.0696 5.72324C15.3184 4.98066 14.3086 4.55425 13.2624 4.53782C12.2162 4.52138 11.2193 4.91627 10.4911 5.63562L6.66277 9.39093C5.57035 10.4699 4.97032 11.9473 4.99467 13.4979C5.01903 15.0485 5.66578 16.5454 6.79264 17.6592C7.9195 18.7731 9.43417 19.4127 11.0034 19.4374C12.5727 19.462 14.068 18.8697 15.1604 17.7907L18.9887 14.0354"/></svg>';function p(v,y){for(var h=0;h<y.length;h++){var w=y[h];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}var b=function(){function v(m){var k=this,S=m.data,T=m.config,E=m.api,O=m.readOnly;(function(C,x){if(!(C instanceof x))throw new TypeError("Cannot call a class as a function")})(this,v),this.api=E,this.readOnly=O,this.nodes={wrapper:null,button:null,title:null},this._data={file:{},title:""},this.config={endpoint:T.endpoint||"",field:T.field||"file",types:T.types||"*",buttonText:T.buttonText||"Select file to upload",errorMessage:T.errorMessage||"File upload failed",uploader:T.uploader||void 0,additionalRequestHeaders:T.additionalRequestHeaders||{}},S===void 0||a(S)||(this.data=S),this.uploader=new f({config:this.config,onUpload:function(C){return k.onUpload(C)},onError:function(C){return k.uploadingFailed(C)}}),this.enableFileUpload=this.enableFileUpload.bind(this)}var y,h,w;return y=v,w=[{key:"toolbox",get:function(){return{icon:u,title:"Attachment"}}},{key:"isReadOnlySupported",get:function(){return!0}}],(h=[{key:"CSS",get:function(){return{baseClass:this.api.styles.block,apiButton:this.api.styles.button,loader:this.api.styles.loader,wrapper:"cdx-attaches",wrapperWithFile:"cdx-attaches--with-file",wrapperLoading:"cdx-attaches--loading",button:"cdx-attaches__button",title:"cdx-attaches__title",size:"cdx-attaches__size",downloadButton:"cdx-attaches__download-button",fileInfo:"cdx-attaches__file-info",fileIcon:"cdx-attaches__file-icon",fileIconBackground:"cdx-attaches__file-icon-background",fileIconLabel:"cdx-attaches__file-icon-label"}}},{key:"EXTENSIONS",get:function(){return{doc:"#1483E9",docx:"#1483E9",odt:"#1483E9",pdf:"#DB2F2F",rtf:"#744FDC",tex:"#5a5a5b",txt:"#5a5a5b",pptx:"#E35200",ppt:"#E35200",mp3:"#eab456",mp4:"#f676a6",xls:"#11AE3D",html:"#2988f0",htm:"#2988f0",png:"#AA2284",jpg:"#D13359",jpeg:"#D13359",gif:"#f6af76",zip:"#4f566f",rar:"#4f566f",exe:"#e26f6f",svg:"#bf5252",key:"#00B2FF",sketch:"#FFC700",ai:"#FB601D",psd:"#388ae5",dmg:"#e26f6f",json:"#2988f0",csv:"#11AE3D"}}},{key:"validate",value:function(m){return!a(m.file)}},{key:"save",value:function(m){if(this.pluginHasData()){var k=m.querySelector(".".concat(this.CSS.title));k&&Object.assign(this.data,{title:k.innerHTML})}return this.data}},{key:"render",value:function(){var m=l("div",this.CSS.baseClass);return this.nodes.wrapper=l("div",this.CSS.wrapper),this.pluginHasData()?this.showFileData():this.prepareUploadButton(),m.appendChild(this.nodes.wrapper),m}},{key:"prepareUploadButton",value:function(){this.nodes.button=l("div",[this.CSS.apiButton,this.CSS.button]),this.nodes.button.innerHTML="".concat(u," ").concat(this.config.buttonText),this.readOnly||this.nodes.button.addEventListener("click",this.enableFileUpload),this.nodes.wrapper.appendChild(this.nodes.button)}},{key:"appendCallback",value:function(){this.nodes.button.click()}},{key:"pluginHasData",value:function(){return this.data.title!==""||Object.values(this.data.file).some(function(m){return m!==void 0})}},{key:"enableFileUpload",value:function(){var m=this;this.uploader.uploadSelectedFile({onPreview:function(){m.nodes.wrapper.classList.add(m.CSS.wrapperLoading,m.CSS.loader)}})}},{key:"onUpload",value:function(m){var k,S,T,E=m;try{E.success&&E.file!==void 0&&!a(E.file)?(this.data={file:E.file,title:E.file.title||""},this.nodes.button.remove(),this.showFileData(),k=this.nodes.title,S=document.createRange(),T=window.getSelection(),S.selectNodeContents(k),S.collapse(!1),T.removeAllRanges(),T.addRange(S),this.removeLoader()):this.uploadingFailed(this.config.errorMessage)}catch(O){console.error("Attaches tool error:",O),this.uploadingFailed(this.config.errorMessage)}this.api.blocks.getBlockByIndex(this.api.blocks.getCurrentBlockIndex()).dispatchChange()}},{key:"appendFileIcon",value:function(m){var k,S=m.extension||((k=m.name)===void 0?"":k.split(".").pop()),T=this.EXTENSIONS[S],E=l("div",this.CSS.fileIcon),O=l("div",this.CSS.fileIconBackground);if(T&&(O.style.backgroundColor=T),E.appendChild(O),S){var C=S;S.length>4&&(C=S.substring(0,4)+"…");var x=l("div",this.CSS.fileIconLabel,{textContent:C,title:S});T&&(x.style.backgroundColor=T),E.appendChild(x)}else O.innerHTML=u;this.nodes.wrapper.appendChild(E)}},{key:"removeLoader",value:function(){var m=this;setTimeout(function(){return m.nodes.wrapper.classList.remove(m.CSS.wrapperLoading,m.CSS.loader)},500)}},{key:"showFileData",value:function(){this.nodes.wrapper.classList.add(this.CSS.wrapperWithFile);var m=this.data,k=m.file,S=m.title;this.appendFileIcon(k);var T=l("div",this.CSS.fileInfo);if(this.nodes.title=l("div",this.CSS.title,{contentEditable:this.readOnly===!1}),this.nodes.title.dataset.placeholder=this.api.i18n.t("File title"),this.nodes.title.textContent=S||"",T.appendChild(this.nodes.title),k.size){var E,O,C=l("div",this.CSS.size);Math.log10(+k.size)>=6?(E="MiB",O=k.size/Math.pow(2,20)):(E="KiB",O=k.size/Math.pow(2,10)),C.textContent=O.toFixed(1),C.setAttribute("data-size",E),T.appendChild(C)}if(this.nodes.wrapper.appendChild(T),k.url!==void 0){var x=l("a",this.CSS.downloadButton,{innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',href:k.url,target:"_blank",rel:"nofollow noindex noreferrer"});this.nodes.wrapper.appendChild(x)}}},{key:"uploadingFailed",value:function(m){this.api.notifier.show({message:m,style:"error"}),this.removeLoader()}},{key:"data",get:function(){return this._data},set:function(m){var k=m.file,S=m.title;this._data={file:k,title:S}}}])&&p(y.prototype,h),w&&p(y,w),v}()}]).default})})(Sc);var Qk=Sc.exports;const ex=Bc(Qk),tx=["Общие","Аккредитация","Обучение","Конференции","Методические материалы","Исследования","Анонсы"];function nx(n){try{return JSON.parse(n),!0}catch{return!1}}function rx(){const{data:n,setData:e,post:t,processing:r,errors:o}=Pc({title:"",slug:"",category:"",content:"",image:null,status:"Черновик",publishDate:new Date().toISOString().substr(0,10)}),[i,s]=De.useState(null),[c,f]=De.useState(null),[d,g]=De.useState(tx),[l,a]=De.useState([]),[u,p]=De.useState(""),[b,v]=De.useState(null);De.useEffect(()=>{if(n.image&&typeof n.image!="string"){const O=URL.createObjectURL(n.image);return f(O),()=>URL.revokeObjectURL(O)}else f(null)},[n.image]),De.useEffect(()=>{if(n.title){const O=n.title.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");e("slug",O)}},[n.title]),De.useEffect(()=>{if(!b){const O=new n0({holder:"editorjs",tools:{header:u0,list:iw,image:{class:pw,config:{endpoints:{byFile:"/api/editor-upload"},field:"image",types:"image/*"}},linkTool:bw,paragraph:Ti,table:Iw,quote:zt,attaches:ex},data:n.content&&nx(n.content)?JSON.parse(n.content):void 0,onChange:async()=>{const C=await O.save();e("content",JSON.stringify(C))}});v(O)}return()=>{b&&b.destroy&&b.destroy()}},[]);const y=()=>{if(u&&!d.includes(u)){g([...d,u]);const O=[...l,u];a(O),e("category",O),p("")}},h=O=>{O.preventDefault(),O.dataTransfer.files&&O.dataTransfer.files[0]&&(e("image",O.dataTransfer.files[0]),s(O.dataTransfer.files[0]))},w=O=>{O.target.files&&O.target.files[0]&&(e("image",O.target.files[0]),s(O.target.files[0]))},m=()=>{e("image",null),s(null),f(null)};De.useEffect(()=>{if(i){const O=URL.createObjectURL(i);return f(O),()=>URL.revokeObjectURL(O)}else f(null)},[i]);const k=(O,C)=>{e("content",O)},S=d.map(O=>({value:O,label:O})),T=O=>{const C=O?O.map(x=>x.value):[];a(C),e("category",C)},E=O=>{O.preventDefault(),e("category",l),t(route("admin.news.store"),{forceFormData:!0})};return Q.jsxs(Q.Fragment,{children:[Q.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[Q.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Создание новости"}),Q.jsxs(Mc,{href:route("admin.news"),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[Q.jsx("svg",{className:"h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Назад к списку"]})]}),Q.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:Q.jsxs("form",{onSubmit:E,children:[Q.jsx("div",{className:"px-4 py-5 sm:p-6",children:Q.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-6",children:[Q.jsxs("div",{className:"sm:col-span-6",children:[Q.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Заголовок"}),Q.jsx("div",{className:"mt-1",children:Q.jsx("input",{type:"text",name:"title",id:"title",value:n.title,onChange:O=>e("title",O.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0})}),o.title&&Q.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.title})]}),Q.jsxs("div",{className:"sm:col-span-6",children:[Q.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Категории"}),Q.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-start sm:items-center mb-2",children:[Q.jsx("div",{className:"w-full sm:w-2/3",children:Q.jsx(Ic,{isMulti:!0,options:S,value:S.filter(O=>l.includes(O.value)),onChange:T,classNamePrefix:"react-select",placeholder:"Выберите категории...",styles:{control:O=>({...O,minHeight:"42px",borderRadius:"8px",borderColor:"#cbd5e1",boxShadow:"none"}),multiValue:O=>({...O,background:"#e0e7ff",color:"#3730a3"}),option:(O,C)=>({...O,background:C.isFocused?"#f3f4f6":"white",color:"#1e293b"})}})}),Q.jsxs("div",{className:"flex gap-2 items-center w-full sm:w-auto",children:[Q.jsx("input",{type:"text",value:u,onChange:O=>p(O.target.value),placeholder:"Новая категория",className:"border rounded px-2 py-1 text-sm"}),Q.jsx("button",{type:"button",onClick:y,className:"px-2 py-1 bg-blue-500 text-white rounded text-sm",children:"Добавить"})]})]}),o.category&&Q.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.category})]}),Q.jsxs("div",{className:"sm:col-span-3",children:[Q.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Статус"}),Q.jsx("div",{className:"mt-1",children:Q.jsxs("select",{id:"status",name:"status",value:n.status,onChange:O=>e("status",O.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0,children:[Q.jsx("option",{value:"Черновик",children:"Черновик"}),Q.jsx("option",{value:"Опубликовано",children:"Опубликовано"}),Q.jsx("option",{value:"Запланировано",children:"Запланировано"})]})}),o.status&&Q.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.status})]}),Q.jsxs("div",{className:"sm:col-span-3",children:[Q.jsx("label",{htmlFor:"publishDate",className:"block text-sm font-medium text-gray-700",children:"Дата публикации"}),Q.jsx("div",{className:"mt-1",children:Q.jsx("input",{type:"date",name:"publishDate",id:"publishDate",value:n.publishDate,onChange:O=>e("publishDate",O.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0})}),o.publishDate&&Q.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.publishDate})]}),Q.jsxs("div",{className:"sm:col-span-6",children:[Q.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Изображение"}),Q.jsxs("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-lg p-4 bg-gray-50 hover:bg-gray-100 transition cursor-pointer relative",onDrop:h,onDragOver:O=>O.preventDefault(),onClick:()=>document.getElementById("image-upload-input").click(),style:{minHeight:"120px"},children:[c?Q.jsxs("div",{className:"relative group",children:[Q.jsx("img",{src:c,alt:"Превью",className:"h-32 w-32 object-cover rounded-lg shadow"}),Q.jsx("button",{type:"button",onClick:O=>{O.stopPropagation(),m()},className:"absolute top-1 right-1 bg-white bg-opacity-80 rounded-full p-1 shadow hover:bg-red-100 transition",title:"Удалить изображение",children:Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):Q.jsxs("div",{className:"flex flex-col items-center",children:[Q.jsx("svg",{className:"h-10 w-10 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 48 48",children:Q.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Q.jsx("span",{className:"text-blue-600 font-medium cursor-pointer",children:"Загрузить файл"}),Q.jsxs("span",{className:"text-xs text-gray-400",children:["или перетащите сюда",Q.jsx("br",{}),"PNG, JPG, GIF до 10MB"]})]}),Q.jsx("input",{id:"image-upload-input",type:"file",accept:"image/*",className:"hidden",onChange:w})]}),o.image&&Q.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.image})]}),Q.jsxs("div",{className:"sm:col-span-6",children:[Q.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Содержимое"}),Q.jsx("div",{className:"bg-white border-2 border-blue-200 rounded-lg shadow-sm p-2 min-h-[220px] focus-within:ring-2 focus-within:ring-blue-400 transition-all",style:{boxShadow:"0 2px 8px 0 #e0e7ff"},children:Q.jsx(jc,{apiKey:"ckt2ux657iu8ehiz8mhzuy8zxnec6kv9bra5dtuif75nwdoq",value:n.content,init:{height:350,menubar:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor |                         alignleft aligncenter alignright alignjustify |                         bullist numlist outdent indent | removeformat | help | image link",content_style:"body { font-family:Inter,Arial,sans-serif; font-size:16px }",language:"ru",images_upload_url:"/api/editor-upload",images_upload_handler:function(O,C,x){const _=new FormData;_.append("image",O.blob()),fetch("/api/editor-upload",{method:"POST",body:_}).then(A=>A.json()).then(A=>{A.success&&A.file&&A.file.url?C(A.file.url):x("Ошибка загрузки")}).catch(()=>x("Ошибка загрузки"))}},onEditorChange:k})}),o.content&&Q.jsx("p",{className:"mt-2 text-sm text-red-600",children:o.content})]})]})}),Q.jsx("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6",children:Q.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:r,children:"Создать новость"})})]})}),Q.jsxs("div",{className:"mt-8 bg-gray-50 p-6 rounded shadow",children:[Q.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Предпросмотр"}),Q.jsx("div",{className:"mb-2 text-xl font-bold",children:n.title}),Q.jsxs("div",{className:"mb-2 text-gray-500",children:[n.category," | ",n.publishDate]}),c&&Q.jsx("img",{src:c,alt:"Превью",className:"mb-4 h-48 object-cover rounded"}),Q.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:n.content}})]})]})}rx.layout=n=>Q.jsx(Nc,{title:"Создание новости",children:n});export{rx as default};
