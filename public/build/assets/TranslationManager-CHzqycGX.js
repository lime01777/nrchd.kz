import{r as c,j as e,Y as w}from"./app-yYR0FjU0.js";import{A as v}from"./AdminLayout-Df0d4tIF.js";import{b as S,c as $,d as k,e as T,F as C}from"./index-DygZZVcc.js";import"./transition-DSO618DS.js";import"./iconBase-CXazOqNo.js";function z(){const[n,o]=c.useState(!1),[f,j]=c.useState({ru:{count:0,lastUpdated:null},kz:{count:0,lastUpdated:null},en:{count:0,lastUpdated:null}}),[r,x]=c.useState("en"),[d,a]=c.useState(""),[g,p]=c.useState(0);c.useEffect(()=>{u()},[]);const u=async()=>{try{const t=await(await fetch("/api/admin/translations/stats")).json();t.success&&j(t.stats)}catch(s){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤:",s)}},N=async()=>{if(confirm(`–í—ã —Ç–æ—á–Ω–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥ –≤—Å–µ–≥–æ —Å–∞–π—Ç–∞ –Ω–∞ ${r}? –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è.`)){o(!0),a("–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞..."),p(0);try{const s=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),l=await(await fetch("/api/admin/translations/site-urls")).json();if(!l.success||!l.urls||l.urls.length===0)throw new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ URL –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞");const i=l.urls.length;let m=0;for(const h of l.urls){a(`–ü–µ—Ä–µ–≤–æ–¥ –∫–æ–Ω—Ç–µ–Ω—Ç–∞: ${h} (${m+1}/${i})`);const b=await(await fetch("/api/admin/translations/translate-page",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s},body:JSON.stringify({url:h,target_language:r})})).json();b.success||console.warn(`–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–µ ${h}:`,b.message),m++,p(Math.round(m/i*100))}await u(),a(`–ü–µ—Ä–µ–≤–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω! –ü–µ—Ä–µ–≤–µ–¥–µ–Ω–æ ${m} —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞ ${r}`)}catch(s){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–µ:",s),a(`–û—à–∏–±–∫–∞: ${s.message}`)}finally{o(!1)}}},y=async s=>{if(confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è —è–∑—ã–∫–∞ ${s}?`))try{o(!0),a(`–£–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –¥–ª—è ${s}...`);const t=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),i=await(await fetch("/api/admin/translations/clear",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t},body:JSON.stringify({language:s})})).json();i.success?(a(`–ü–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è ${s} —É–¥–∞–ª–µ–Ω—ã. –£–¥–∞–ª–µ–Ω–æ ${i.deleted_count} –∑–∞–ø–∏—Å–µ–π.`),await u()):a(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤: ${i.message}`)}catch(t){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤:",t),a(`–û—à–∏–±–∫–∞: ${t.message}`)}finally{o(!1)}};return e.jsxs(v,{children:[e.jsx(w,{title:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏ —Å–∞–π—Ç–∞"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[e.jsx(S,{className:"mr-2 text-indigo-600"}),"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏ —Å–∞–π—Ç–∞"]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[e.jsxs("h3",{className:"text-lg font-medium mb-3 flex items-center",children:[e.jsx($,{className:"mr-2 text-indigo-500"}),"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(f).map(([s,t])=>e.jsxs("div",{className:"bg-white p-4 rounded-md shadow border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:s==="ru"?"–†—É—Å—Å–∫–∏–π":s==="kz"?"–ö–∞–∑–∞—Ö—Å–∫–∏–π":"–ê–Ω–≥–ª–∏–π—Å–∫–∏–π"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s==="ru"?"bg-red-100 text-red-800":s==="kz"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:s.toUpperCase()})]}),e.jsxs("div",{className:"text-2xl font-bold mb-2",children:[t.count," ",e.jsx("span",{className:"text-sm font-normal text-gray-500",children:"–ø–µ—Ä–µ–≤–æ–¥–æ–≤"})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: ",t.lastUpdated?new Date(t.lastUpdated).toLocaleString():"–ù–∏–∫–æ–≥–¥–∞"]}),e.jsx("div",{className:"mt-3",children:e.jsx("button",{onClick:()=>y(s),className:"px-3 py-1 text-xs bg-red-50 text-red-600 rounded hover:bg-red-100 transition",disabled:n||t.count===0,children:"–û—á–∏—Å—Ç–∏—Ç—å"})})]},s))})]}),e.jsxs("div",{className:"bg-indigo-50 p-6 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-medium mb-4 flex items-center",children:[e.jsx(k,{className:"mr-2 text-indigo-600"}),"–ó–∞–ø—É—Å–∫ –ø–µ—Ä–µ–≤–æ–¥–∞ —Å–∞–π—Ç–∞"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ –ø–µ—Ä–µ–≤–æ–¥–∞:"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("button",{onClick:()=>x("ru"),className:`px-4 py-2 rounded-md flex items-center ${r==="ru"?"bg-red-600 text-white":"bg-white text-gray-700 border"}`,children:[e.jsx("span",{className:"mr-1",children:"üá∑üá∫"})," –†—É—Å—Å–∫–∏–π"]}),e.jsxs("button",{onClick:()=>x("kz"),className:`px-4 py-2 rounded-md flex items-center ${r==="kz"?"bg-blue-600 text-white":"bg-white text-gray-700 border"}`,children:[e.jsx("span",{className:"mr-1",children:"üá∞üáø"})," –ö–∞–∑–∞—Ö—Å–∫–∏–π"]}),e.jsxs("button",{onClick:()=>x("en"),className:`px-4 py-2 rounded-md flex items-center ${r==="en"?"bg-green-600 text-white":"bg-white text-gray-700 border"}`,children:[e.jsx("span",{className:"mr-1",children:"üá¨üáß"})," –ê–Ω–≥–ª–∏–π—Å–∫–∏–π"]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("button",{onClick:N,disabled:n,className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition disabled:opacity-50",children:[n?e.jsx(T,{className:"animate-spin mr-2"}):e.jsx(C,{className:"mr-2"}),n?"–ü–µ—Ä–µ–≤–æ–¥ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ...":"–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥ —Å–∞–π—Ç–∞"]})}),n&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"mb-2 flex justify-between text-sm",children:[e.jsx("span",{children:d}),e.jsxs("span",{children:[g,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:`${g}%`}})})]}),!n&&d&&e.jsx("div",{className:`mt-4 p-3 rounded ${d.includes("–û—à–∏–±–∫–∞")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:d})]})]})})})})]})}export{z as default};
