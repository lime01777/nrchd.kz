import{q as C,W as $,r as E,j as e,Y as I,a as u}from"./app-C8K1oLkQ.js";import{L as A}from"./LayoutNews-DlcKc1_b.js";import{N as D}from"./NewsImageSlider-CTHojbPn.js";import{i as M}from"./mediaUtils-oRnee45q.js";import{t as q}from"./TranslationService-BIPkk7bE.js";import"./Footer-CGTEK2kJ.js";const a=(c,t="")=>{try{return q.t(c,t||c)}catch(p){return console.warn("[News/Index] Ошибка получения перевода:",p),t||c}};function T({section:c}){var y;const{news:t,filters:p={},section:v}=C().props,n=c||v||{type:"news",title:"Новости",subtitle:"",description:""},d=n.type||"news",o=d==="media",{data:N,setData:b,get:f,processing:w}=$({search:p.search??""}),g=E.useMemo(()=>{if(!(t!=null&&t.data))return[];const s=r=>!r||typeof r!="string"?"":r.replace(/<[^>]+>/g,"").replace(/\s+/g," ").trim();return t.data.map(r=>{const x=(Array.isArray(r.images)?r.images:[]).map(l=>l?typeof l=="string"?l:typeof l=="object"&&(l.url||l.path)||null:null).filter(l=>!!l&&!M(l)),m=Array.from(new Set(x)),i=r.excerpt&&r.excerpt.trim().length>0?r.excerpt:s(r.body||"").slice(0,220),h=i?`${i}${i.length>=220?"…":""}`:"";return{...r,galleryImages:m,preparedExcerpt:h}})},[t]),k=s=>{s.preventDefault();const r=d==="media"?"news.media":"news.index";f(route(r),{preserveScroll:!0,preserveState:!0})},S=()=>{b("search","");const s=d==="media"?"news.media":"news.index";f(route(s),{preserveScroll:!0,preserveState:!0,onFinish:()=>{var r;return(r=window==null?void 0:window.scrollTo)==null?void 0:r.call(window,{top:0,behavior:"smooth"})}})},L=((y=t==null?void 0:t.meta)==null?void 0:y.total)??(t==null?void 0:t.total)??g.length;return e.jsxs(A,{h1:n.title||a("news.title","Новости"),img:"news",children:[e.jsx(I,{title:n.title||a("news.meta.title","Новости"),meta:[{name:"description",content:n.description||a("news.meta.description","Последние новости Национального научного центра развития здравоохранения.")}]}),e.jsx("div",{className:"mb-10 overflow-hidden rounded-3xl border border-blue-100 bg-gradient-to-br from-blue-50 via-white to-blue-100 p-8 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("p",{className:"text-sm uppercase tracking-[0.2em] text-blue-600",children:o?"СМИ О НАС":"НОВОСТИ"}),e.jsx("h2",{className:"mt-3 text-4xl font-extrabold text-gray-900",children:n.subtitle||(o?"Публикации в ведущих СМИ":"Актуальные события ННЦРЗ")}),e.jsx("p",{className:"mt-4 text-base text-gray-600",children:n.description||(o?"Читайте статьи и интервью о деятельности центра из авторитетных источников.":"Следите за обновлениями и важными новостями Национального научного центра развития здравоохранения.")}),e.jsxs("div",{className:"mt-6 inline-flex items-center rounded-full bg-white/70 px-4 py-2 text-sm font-medium text-blue-700 shadow",children:["Всего публикаций: ",e.jsx("span",{className:"ml-2 text-base font-semibold",children:L})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 md:items-end",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Разделы"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(u,{href:route("news.index"),className:`inline-flex items-center rounded-xl border px-5 py-2 text-sm font-semibold transition ${d==="news"?"border-blue-600 bg-blue-600 text-white shadow-lg shadow-blue-200":"border-transparent bg-white text-gray-600 hover:border-blue-100 hover:text-blue-600"}`,children:"Новости"}),e.jsx(u,{href:route("news.media"),className:`inline-flex items-center rounded-xl border px-5 py-2 text-sm font-semibold transition ${d==="media"?"border-blue-600 bg-blue-600 text-white shadow-lg shadow-blue-200":"border-transparent bg-white text-gray-600 hover:border-blue-100 hover:text-blue-600"}`,children:"СМИ о нас"})]})]})]})}),e.jsxs("form",{className:"mb-10 rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",onSubmit:k,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:o?"Поиск по названию источника или заголовку":a("news.filters.search.label","Поиск по ключевому слову")}),e.jsxs("div",{className:"mt-3 flex flex-col gap-3 sm:flex-row",children:[e.jsx("input",{type:"text",value:N.search,onChange:s=>b("search",s.target.value),placeholder:o?"Например: Forbes, КазИнформ, интервью":a("news.filters.search.placeholder","Например: медицина будущего"),className:"w-full rounded-xl border border-gray-200 px-4 py-3 text-base shadow-sm transition focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200"}),e.jsxs("div",{className:"flex flex-row gap-2 sm:flex-shrink-0",children:[e.jsx("button",{type:"submit",disabled:w,className:"flex h-12 flex-1 items-center justify-center rounded-xl bg-blue-600 px-6 text-sm font-semibold text-white shadow-sm transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-60",children:w?a("news.filters.search.processing","Поиск..."):a("news.filters.search.cta","Найти")}),e.jsx("button",{type:"button",onClick:S,className:"flex h-12 flex-1 items-center justify-center rounded-xl border border-gray-200 px-6 text-sm font-semibold text-gray-600 transition hover:border-gray-300 hover:bg-gray-50",children:a("news.filters.search.reset","Сбросить")})]})]})]}),g.length===0?e.jsxs("div",{className:"rounded-2xl border border-dashed border-gray-200 bg-white py-16 text-center shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:a("news.empty.title","Новости не найдены")}),e.jsx("p",{className:"mt-2 text-gray-600",children:o?"Мы пока не добавили материалы СМИ. Проверьте позже или предложите публикацию.":a("news.empty.description","Попробуйте изменить поисковый запрос или зайдите позже — мы уже готовим новые публикации.")})]}):e.jsx("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 xl:grid-cols-3",children:g.map(s=>e.jsx("article",{className:"group flex h-full flex-col overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm transition hover:-translate-y-1 hover:shadow-lg",children:e.jsxs(u,{href:route("news.show",s.slug),className:"block",children:[e.jsxs("div",{className:"relative h-56 overflow-hidden bg-gray-100",children:[e.jsx(D,{images:s.galleryImages,className:"h-56",height:"224px",showDots:s.galleryImages.length>1,showCounter:!1,autoPlay:s.galleryImages.length>1,interval:4e3}),e.jsx("div",{className:"absolute left-4 top-4 rounded-full bg-white/95 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-gray-700 shadow-sm",children:s.published_at_formatted||"—"})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 transition group-hover:text-blue-600",children:s.title}),s.preparedExcerpt&&e.jsx("p",{className:"flex-1 text-sm leading-relaxed text-gray-600 line-clamp-4",children:s.preparedExcerpt}),e.jsxs("span",{className:"inline-flex items-center text-sm font-semibold text-blue-600",children:[a("news.card.read_more","Читать далее"),e.jsx("svg",{className:"ml-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})},s.id))}),Array.isArray(t==null?void 0:t.links)&&t.links.length>1&&e.jsx("div",{className:"mt-12 flex justify-center",children:e.jsx("nav",{className:"flex flex-wrap items-center gap-2",children:t.links.map((s,r)=>{const j=s.url===null,x=String(s.label||"").replace(/<[^>]+>/g,"").replace(/&laquo;|&raquo;/g,"").trim(),m=x.toLowerCase(),i=["previous","предыдущая","pagination.previous"].includes(m),h=["next","следующая","pagination.next"].includes(m),l=["...","…"].includes(x);return e.jsxs(u,{href:s.url||"#",className:`rounded-full px-4 py-2 text-sm font-medium transition ${s.active?"bg-blue-600 text-white shadow":j?"bg-gray-100 text-gray-400":"bg-white text-gray-700 hover:bg-blue-50"}`,preserveScroll:!0,preserveState:!0,children:[i&&e.jsx("span",{className:"flex items-center justify-center",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),h&&e.jsx("span",{className:"flex items-center justify-center",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),!i&&!h&&!l&&e.jsx("span",{className:"flex items-center justify-center",children:x}),l&&e.jsx("span",{className:"flex items-center justify-center",children:"…"})]},`${s.label}-${r}`)})})})]})}export{T as default};
