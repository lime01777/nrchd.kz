import{r as s,b as B,j as l,Y as O}from"./app-Dx0pQLKn.js";import{L as D}from"./LayoutFolderChlank-CvTxLFEm.js";import{S as _}from"./SimpleFileDisplay-B6WRr5wm.js";import{t as a}from"./TranslationService-4OikcUHb.js";import{D as A,a as R}from"./clinicalFilters-BmX3Pc2t.js";import"./Footer-BuN2bXNn.js";function I(){const o=(e,E="")=>a.t(e,E);console.log("Catalog component rendering...");const[n,d]=s.useState(""),[t,u]=s.useState(""),[c,g]=s.useState(""),[r,m]=s.useState("protocols"),[z,b]=s.useState(!1),[h,i]=s.useState(null);s.useState([]);const[v,p]=s.useState([]),[f,x]=s.useState([]),[H,P]=s.useState(0);s.useEffect(()=>(console.log("Catalog component mounted"),j(),()=>{console.log("Catalog component unmounted")}),[]);const j=()=>{b(!0),B.get("/api/clinical-protocols/filters").then(({data:e})=>{p(e.medicine_categories||[]),x(e.mkb_categories||[])}).catch(()=>{p(A),x(R)}).finally(()=>b(!1))},S=[{value:"",label:o("directionsPages.clinicalProtocolsSubpages.catalog.allSections")},...v.map(e=>({value:e,label:e}))],y=[{value:"",label:o("directionsPages.clinicalProtocolsSubpages.catalog.allMkbCategories")},...f.map(e=>({value:e.code||e,label:e.label||e}))],k=[{value:"protocols",label:o("directionsPages.clinicalProtocolsSubpages.catalog.types.protocols")},{value:"guidelines",label:o("directionsPages.clinicalProtocolsSubpages.catalog.types.guidelines")},{value:"archive",label:o("directionsPages.clinicalProtocolsSubpages.catalog.types.archive")}],w=e=>{d(e.target.value)},N=e=>{u(e.target.value)},C=e=>{g(e.target.value)},F=e=>{m(e.target.value)},M=()=>{d(""),u(""),g(""),m("protocols"),i(null)},L=()=>{let e=n;return t&&(e+=(e?" ":"")+`medicine:${t}`),c&&(e+=(e?" ":"")+`mkb:${c}`),e},T=()=>{let e="";switch(r){case"protocols":e="Клинические протоколы/Поток клинические протоколы";break;case"guidelines":e="Клинические протоколы/Клинические руководства МЗ РК";break;case"archive":e="Клинические протоколы/Архив клинических протоколов МЗ РК";break}return console.log("getFolderPath called:",{selectedType:r,path:e}),e};return l.jsxs(l.Fragment,{children:[l.jsx(O,{title:o("directionsPages.clinicalProtocolsSubpages.catalog.title","Каталог")}),l.jsx("section",{className:"text-gray-600 body-font",children:l.jsx("div",{className:"container px-5 mx-auto",children:l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:o("directionsPages.clinicalProtocolsSubpages.catalog.searchLabel")}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),l.jsx("input",{type:"text",id:"search",name:"search",value:n,onChange:w,className:"pl-10 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:o("directionsPages.clinicalProtocolsSubpages.catalog.searchPlaceholder")})]})]})}),l.jsx("div",{className:"flex flex-col space-y-4",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1",children:o("directionsPages.clinicalProtocolsSubpages.catalog.typeLabel")}),l.jsx("select",{id:"type",name:"type",value:r,onChange:F,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:k.map(e=>l.jsx("option",{value:e.value,children:e.label},e.value))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"medicine",className:"block text-sm font-medium text-gray-700 mb-1",children:o("directionsPages.clinicalProtocolsSubpages.catalog.medicineSectionLabel")}),l.jsx("select",{id:"medicine",name:"medicine",value:t,onChange:N,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:S.map(e=>l.jsx("option",{value:e.value,children:e.label},e.value))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"mkb",className:"block text-sm font-medium text-gray-700 mb-1",children:o("directionsPages.clinicalProtocolsSubpages.catalog.mkbCategoryLabel")}),l.jsx("select",{id:"mkb",name:"mkb",value:c,onChange:C,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:y.map(e=>l.jsx("option",{value:e.value,children:e.label},e.value))})]})]})}),l.jsx("div",{className:"mt-4 flex justify-center",children:l.jsxs("button",{onClick:M,className:"px-6 py-2.5 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-200 flex items-center shadow-md",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),o("directionsPages.clinicalProtocolsSubpages.catalog.resetFiltersButton")]})})]}),h&&l.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[l.jsx("strong",{className:"font-bold",children:o("directionsPages.clinicalProtocolsSubpages.catalog.errorTitle")}),l.jsxs("span",{className:"block sm:inline",children:[" ",h]}),l.jsx("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>i(null),children:l.jsxs("svg",{className:"fill-current h-6 w-6 text-red-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:[l.jsx("title",{children:o("directionsPages.clinicalProtocolsSubpages.catalog.closeButton")}),l.jsx("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})]})})]}),l.jsx(_,{folder:T(),bgColor:"bg-white",useClinicalProtocols:!0,searchTerm:L(),medicine:t,mkb:c,onFilesLoaded:e=>P(e),onError:e=>i(e)})]})})})]})}I.layout=o=>l.jsx(D,{bgColor:"bg-white",h1:a.t("directionsPages.clinicalProtocolsSubpages.catalog.h1"),parentRoute:"/clinical-protocols",parentName:a.t("directionsPages.clinicalProtocolsSubpages.catalog.parentName"),heroBgColor:"bg-blue-100",buttonBgColor:"bg-blue-100",buttonHoverBgColor:"hover:bg-blue-200",breadcrumbs:[{name:a.t("directionsPages.clinicalProtocolsSubpages.catalog.breadcrumbDirections"),route:"directions"},{name:a.t("directionsPages.clinicalProtocolsSubpages.catalog.breadcrumbClinicalProtocols"),route:"clinical.protocols"},{name:a.t("directionsPages.clinicalProtocolsSubpages.catalog.h1"),route:null}],children:o});export{I as default};
