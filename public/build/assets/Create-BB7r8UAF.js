import{r as c,W as y,j as e,Y as f,a as j}from"./app-Y-8A9vy4.js";import{A as v}from"./AdminLayout-D2Uust3B.js";import"./transition-Bl_UznXh.js";function N(){const[o,n]=c.useState(!1),[d,x]=c.useState(""),{data:r,setData:l,post:b,processing:m,errors:s}=y({title:"",slug:"",excerpt:"",body:[],city:"",department:"",employment_type:"",status:"draft",published_at:new Date().toISOString().substr(0,10)}),u=t=>{const h=t.split(`
`).filter(i=>i.trim()!=="").map(i=>({type:"paragraph",data:{text:i.trim()}}));l("body",h),x(t)},p=["Полная занятость","Частичная занятость","Проектная работа","Стажировка","Удаленная работа"],g=t=>{t.preventDefault(),n(!0);try{r.body.length===0&&d.trim()!==""&&u(d);const a=r.status==="published"&&!r.published_at?new Date().toISOString().substr(0,10):r.published_at;b(route("vacancies.store"),{...r,published_at:a})}catch(a){console.error("Ошибка при отправке формы:",a),n(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"Создание вакансии"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 bg-white border-b border-gray-200",children:[e.jsxs("div",{className:"mb-6 flex justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Создание вакансии"}),e.jsx(j,{href:route("vacancies.index"),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400",children:"Назад к списку"})]}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Название *"}),e.jsx("input",{type:"text",id:"title",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:r.title,onChange:t=>l("title",t.target.value),required:!0}),s.title&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.title})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 mb-1",children:"URL slug (опционально)"}),e.jsx("input",{type:"text",id:"slug",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:r.slug,onChange:t=>l("slug",t.target.value),placeholder:"Оставьте пустым для автоматической генерации"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Если оставить пустым, slug будет сгенерирован автоматически из названия"}),s.slug&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.slug})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"excerpt",className:"block text-sm font-medium text-gray-700 mb-1",children:"Краткое описание"}),e.jsx("textarea",{id:"excerpt",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",rows:"3",value:r.excerpt||"",onChange:t=>l("excerpt",t.target.value)}),s.excerpt&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.excerpt})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"Город *"}),e.jsx("input",{type:"text",id:"city",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:r.city,onChange:t=>l("city",t.target.value),required:!0}),s.city&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.city})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-1",children:"Департамент *"}),e.jsx("input",{type:"text",id:"department",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:r.department,onChange:t=>l("department",t.target.value),required:!0}),s.department&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.department})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"employment_type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Тип занятости *"}),e.jsxs("select",{id:"employment_type",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:r.employment_type,onChange:t=>l("employment_type",t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Выберите тип занятости"}),p.map((t,a)=>e.jsx("option",{value:t,children:t},a))]}),s.employment_type&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.employment_type})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Статус *"}),e.jsxs("select",{id:"status",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:r.status,onChange:t=>l("status",t.target.value),required:!0,children:[e.jsx("option",{value:"draft",children:"Черновик"}),e.jsx("option",{value:"published",children:"Опубликовано"})]}),s.status&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.status})]})]}),r.status==="published"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"published_at",className:"block text-sm font-medium text-gray-700 mb-1",children:"Дата публикации"}),e.jsx("input",{type:"date",id:"published_at",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:r.published_at,onChange:t=>l("published_at",t.target.value)}),s.published_at&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.published_at})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"body",className:"block text-sm font-medium text-gray-700 mb-1",children:"Описание вакансии *"}),e.jsx("textarea",{id:"body",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:d,onChange:t=>u(t.target.value),rows:"10",placeholder:"Введите описание вакансии. Каждый абзац будет отображаться отдельно.",required:!0}),s.body&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.body})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end",children:[e.jsx("button",{type:"button",className:"mr-3 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",onClick:()=>window.history.back(),children:"Отмена"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:m,children:m?"Сохранение...":"Сохранить вакансию"})]})]})]})})})})]})}N.layout=o=>e.jsx(v,{title:"Создание вакансии",children:o});export{N as default};
