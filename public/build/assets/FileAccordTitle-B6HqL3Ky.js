import{r as i,b as z,j as e}from"./app-BRX8V-8x.js";function P({description:l,filetype:d,img:x,filesize:u="24 KB",date:w="27.03.2024",url:s="#",file:a,onVideoClick:v}){const[m,p]=i.useState({size:u,date:w}),[k,b]=i.useState(!1),[C,h]=i.useState(!1),[y,g]=i.useState(null),[N,j]=i.useState(null);i.useEffect(()=>{a&&(p({size:a.size||u,date:a.date||w}),l=a.description||l,d=a.filetype||d,x=a.img||x,s=a.url||s)},[a]),i.useEffect(()=>{s&&s!=="#"&&z.head(s).then(t=>{const r=t.headers["content-length"],o=t.headers["last-modified"];r&&p(n=>({...n,size:F(r)})),o&&p(n=>({...n,date:L(new Date(o))}))}).catch(t=>{console.error("Ошибка при получении информации о файле:",t)})},[s]);const F=t=>{if(!t)return u;const r=["B","KB","MB","GB"];let o=parseInt(t,10),n=0;for(;o>=1024&&n<r.length-1;)o/=1024,n++;return`${o.toFixed(1)} ${r[n]}`},L=t=>{if(!t)return m.date;const r=t.getDate().toString().padStart(2,"0"),o=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getFullYear();return`${r}.${o}.${n}`},c=()=>{if(!s||s==="#")return null;const t=s.split(".").pop().toLowerCase();return["pdf"].includes(t)?"pdf":["jpg","jpeg","png","gif","webp"].includes(t)?"image":["doc","docx"].includes(t)?"word":["xls","xlsx"].includes(t)?"excel":["ppt","pptx"].includes(t)?"powerpoint":["txt"].includes(t)?"text":["mp4","avi","mov","webm"].includes(t)?"video":null},M=()=>!s||s==="#"?"":s.startsWith("http://")||s.startsWith("https://")?s:`${window.location.origin}${s.startsWith("/")?"":"/"}${s}`,S=()=>{if(!s||s==="#")return"1";const t=s.split(".").pop().toLowerCase();return["pdf"].includes(t)?"2":["xls","xlsx"].includes(t)?"3":["txt"].includes(t)?"4":["ppt","pptx"].includes(t)?"5":["doc","docx"].includes(t)?"1":["mp4","avi","mov","webm"].includes(t)?"6":["jpg","jpeg","png","gif","webp"].includes(t)?"7":"1"},$=()=>{if(!s||s==="#")return"";const t=s.split(".").pop().toLowerCase();switch(t){case"pdf":return"PDF";case"doc":case"docx":return"DOCX";case"xls":case"xlsx":return"XLSX";case"ppt":case"pptx":return"PPTX";case"txt":return"TXT";case"mp4":case"avi":case"mov":return"MP4";case"jpg":case"jpeg":case"png":return"JPG";default:return t.toUpperCase()}},B=t=>{try{h(!0),j(null);const r=M(),n=`https://docs.google.com/viewer?url=${encodeURIComponent(r)}&embedded=true`;return g(n),h(!1),n}catch(r){return console.error("Ошибка при конвертации документа:",r),j("Не удалось подготовить документ для просмотра"),h(!1),null}},U=t=>{t.preventDefault(),b(!0),document.body.style.overflow="hidden";const r=c();if(r==="video"&&typeof v=="function"){v(s,l),f();return}["word","excel","powerpoint"].includes(r)?B():g(null)},f=()=>{b(!1),document.body.style.overflow="auto",g(null),h(!1),j(null)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col h-[200px] bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200",children:[e.jsx("div",{className:"flex-grow overflow-hidden",children:e.jsx("h2",{className:"font-medium leading-normal text-gray-800 line-clamp-6 mb-3",children:l})}),e.jsxs("div",{className:"flex mt-auto justify-between items-center",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:U,className:"cursor-pointer text-black inline-flex items-center border-gray-300 border rounded-lg px-3 py-2 text-sm hover:bg-gray-50 transition-colors duration-200",children:"Открыть"}),e.jsx("a",{href:s,download:!0,className:"cursor-pointer text-black inline-flex items-center border-gray-300 border rounded-lg px-3 py-2 text-sm hover:bg-gray-50 transition-colors duration-200",children:"Скачать"})]}),e.jsxs("div",{className:"flex flex-col text-sm",children:[e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("img",{src:`/img/FileType/${S()}.png`,alt:"",className:"w-4 h-4"}),e.jsxs("p",{className:"ml-1 uppercase text-xs text-gray-600",children:[$(),", ",m.size]})]}),e.jsx("p",{className:"text-gray-400 text-xs text-right",children:m.date})]})]})]})}),k&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:f,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] flex flex-col",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 truncate",children:l}),e.jsx("button",{onClick:f,className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-grow p-4 overflow-auto",children:C?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[70vh]",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-900 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Подготовка документа к просмотру..."})]}):N?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[70vh]",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"text-gray-600 mb-4",children:N}),e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200",children:"Скачать файл"})]}):c()==="image"?e.jsx("div",{className:"flex items-center justify-center h-[70vh]",children:e.jsx("img",{src:s,alt:l,className:"max-w-full max-h-[70vh] object-contain"})}):c()==="pdf"?e.jsx("div",{className:"flex flex-col items-center justify-center h-[70vh]",children:e.jsx("div",{className:"w-full h-full",children:e.jsx("object",{data:s,type:"application/pdf",className:"w-full h-full min-h-[70vh]",children:e.jsxs("p",{children:["Ваш браузер не поддерживает встроенный просмотр PDF.",e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:"Скачайте PDF"}),"."]})})})}):c()==="video"?e.jsx("div",{className:"flex flex-col items-center justify-center h-[70vh]",children:e.jsx("div",{className:"w-full h-full",children:e.jsx("video",{src:s,className:"max-w-full max-h-[70vh]",controls:!0,autoPlay:!0})})}):["word","excel","powerpoint"].includes(c())&&y?e.jsx("div",{className:"flex flex-col items-center justify-center h-[70vh]",children:e.jsx("div",{className:"w-full h-full",children:e.jsx("iframe",{src:y,className:"w-full h-full min-h-[70vh]",title:l,frameBorder:"0"})})}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-[70vh]",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:e.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Предпросмотр для этого типа файла недоступен"}),e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200",children:"Скачать файл"})]})}),e.jsxs("div",{className:"p-4 border-t flex justify-end",children:[e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-100 hover:bg-gray-200 text-gray-800 px-4 py-2 rounded-lg mr-2 transition-colors duration-200",children:"Открыть в новой вкладке"}),e.jsx("button",{onClick:f,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors duration-200",children:"Закрыть"})]})]})})]})}function T({title:l,isOpen:d,toggleOpen:x}){return e.jsxs("div",{className:"flex flex-row w-full items-center justify-between p-4 cursor-pointer rounded-lg transition-colors duration-200",onClick:x,children:[e.jsx("div",{className:"flex flex-grow",children:e.jsx("h1",{className:"sm:text-xl text-lg font-semibold title-font text-gray-900",children:l})}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"text-black inline-flex items-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:`transform transition-transform duration-300 ${d?"rotate-180":""}`,children:e.jsx("path",{d:"M12 19c-.39 0-.77-.15-1.06-.44l-7-7a1.5 1.5 0 0 1 2.12-2.12L12 15.88l5.94-5.94a1.5 1.5 0 0 1 2.12 2.12l-7 7c-.29.29-.67.44-1.06.44z"})})})})]})}export{T as F,P as a};
