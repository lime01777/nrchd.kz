import{r as g,j as e}from"./app-JquF6hsM.js";import{I as b}from"./InputLabel-C-VsfiPp.js";import{I as j}from"./TextInput-DbQuU88u.js";function w({existingMedia:r=[],onMediaUploaded:i,onMediaRemoved:c,maxFiles:m=20,className:x=""}){const[h,o]=g.useState(!1),d=g.useCallback(async s=>{const a=Array.from(s.target.files);if(a.length!==0){o(!0);try{const n=new FormData;a.forEach((p,f)=>{n.append(`media_files[${f}]`,p)});const t=await fetch("/admin/news/upload-media",{method:"POST",body:n,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}});if(!t.ok)throw new Error("Ошибка загрузки файлов");const l=await t.json();i&&l.success&&l.media&&i(l.media)}catch(n){console.error("Ошибка загрузки медиа:",n),alert("Ошибка загрузки файлов: "+n.message)}finally{o(!1)}}},[i]),u=s=>{c&&c(s)};return e.jsxs("div",{className:x,children:[e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer border-gray-300 hover:border-gray-400",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:d,className:"hidden",id:"media-upload"}),e.jsxs("label",{htmlFor:"media-upload",className:"cursor-pointer",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Нажмите для выбора файлов"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Поддерживаются изображения и видео до 50MB"})]})]})]}),r.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Загруженные файлы:"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:r.map((s,a)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:s.type==="video"?e.jsx("video",{src:s.path,className:"w-full h-full object-cover",muted:!0}):e.jsx("img",{src:s.path,alt:s.name,className:"w-full h-full object-cover"})}),s.isUploading&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsx("div",{className:"text-white text-sm",children:"Загрузка..."})}),e.jsx("button",{type:"button",onClick:()=>u(s.id),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"×"}),e.jsx("div",{className:"mt-1 text-xs text-gray-600 truncate",children:s.name})]},s.id||`media-${a}`))})]})]})}function k({selectedTags:r=[],onTagsChange:i,availableTags:c=[],maxTags:m=10,placeholder:x="Добавить теги...",className:h=""}){const[o,d]=g.useState(""),u=t=>{if(r.length>=m){alert(`Максимальное количество тегов: ${m}`);return}r.includes(t)||i([...r,t]),d("")},s=t=>{i(r.filter(l=>l!==t))},a=t=>{if(t.key==="Enter"){t.preventDefault();const l=o.trim();l&&u(l)}},n=c.filter(t=>t.toLowerCase().includes(o.toLowerCase())&&!r.includes(t));return e.jsxs("div",{className:h,children:[e.jsx(b,{value:"Теги"}),r.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.map(t=>e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[t,e.jsx("button",{type:"button",onClick:()=>s(t),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},t))}),e.jsx("input",{type:"text",value:o,onChange:t=>d(t.target.value),onKeyPress:a,placeholder:x,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),o&&n.length>0&&e.jsx("div",{className:"mt-2 border border-gray-200 rounded-md bg-white shadow-lg max-h-32 overflow-y-auto",children:n.slice(0,5).map(t=>e.jsx("button",{type:"button",onClick:()=>u(t),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100",children:t},t))}),e.jsx(j,{message:null,className:"mt-2"})]})}function S({value:r,onChange:i,minDate:c,allowPast:m=!1,error:x,className:h=""}){const o=s=>{i(s.target.value)},d=s=>{if(!s)return"";const a=new Date(s),n=a.getFullYear(),t=String(a.getMonth()+1).padStart(2,"0"),l=String(a.getDate()).padStart(2,"0"),p=String(a.getHours()).padStart(2,"0"),f=String(a.getMinutes()).padStart(2,"0");return`${n}-${t}-${l}T${p}:${f}`},u=()=>m||!c?"":d(c);return e.jsxs("div",{className:h,children:[e.jsx(b,{value:"Дата и время публикации"}),e.jsx("input",{type:"datetime-local",value:d(r),onChange:o,min:u(),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),e.jsx(j,{message:x,className:"mt-2"})]})}export{S as D,w as M,k as T};
