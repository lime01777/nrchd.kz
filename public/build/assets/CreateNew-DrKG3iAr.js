import{r as g,W as w,j as e,a as u}from"./app-Bg9C1goP.js";import{A as C}from"./AdminLayout-Bp0n_aO7.js";import{R as k,C as S}from"./CategoryCheckboxes-BaktCmUE.js";import{M as D}from"./ModernMediaUploader-CvAhNxqW.js";import{D as M,T as _}from"./DateTimePicker-D5rV9kdL.js";import{S as L}from"./StatusSelector-D4cnVwQ7.js";import{T,I as o}from"./TextInput-DEfweanv.js";import{I as d}from"./InputLabel-Dof5faoB.js";import{P as I}from"./PrimaryButton-CNn1nLOm.js";import"./transition-CraIadh-.js";import"./use-is-mounted-QLScEYSL.js";import"./index-CvI5bCqk.js";function G({availableCategories:p=[]}){const[l,c]=g.useState([]),[m,b]=g.useState(!1),{data:s,setData:r,post:j,processing:x,errors:i,reset:f}=w({title:"",content:"",category:[],tags:[],status:"draft",publish_date:"",media:[]}),h=t=>{t.preventDefault();const a={...s,images:l};j(route("admin.news.store"),{data:a,onSuccess:()=>{f(),c([])},onError:n=>{console.error("ÐžÑˆÐ¸Ð±ÐºÐ¸ Ð²Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ð¸:",n)}})},N=t=>{const a=Array.isArray(t)?t:[t];c(n=>[...n,...a]),r("images",[...l,...a])},y=t=>{const a=l.filter(n=>n.id!==t);c(a),r("images",a)},v=t=>{if(r("status",t),t==="scheduled"&&!s.publish_date){const a=new Date;a.setDate(a.getDate()+1),a.setHours(9,0,0,0),r("publish_date",a.toISOString())}t==="published"&&!s.publish_date&&r("publish_date",new Date().toISOString())};return e.jsx(C,{children:e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8 bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ð¾ÑÑ‚ÑŒ"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²ÑƒÑŽ Ð½Ð¾Ð²Ð¾ÑÑ‚ÑŒ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ ÑÐ¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð³Ð¾ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€Ð°"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(u,{href:route("admin.news.index"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"ÐÐ°Ð·Ð°Ð´ Ðº ÑÐ¿Ð¸ÑÐºÑƒ"]}),e.jsxs("button",{type:"button",onClick:()=>b(!m),className:"inline-flex items-center px-4 py-2 border border-blue-300 rounded-lg shadow-sm text-sm font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),m?"Ð¡ÐºÑ€Ñ‹Ñ‚ÑŒ":"ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ"," Ð¿Ñ€ÐµÐ²ÑŒÑŽ"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº"}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"title",value:"Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸ *"}),e.jsx(T,{id:"title",type:"text",value:s.title,onChange:t=>r("title",t.target.value),className:"mt-1 block w-full text-lg",placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸...",required:!0,autoFocus:!0}),e.jsx(o,{message:i.title,className:"mt-2"}),e.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Ð¡Ð¸Ð¼Ð²Ð¾Ð»Ð¾Ð²: ",s.title.length," / 255"]})]})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ"}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"content",value:"Ð¢ÐµÐºÑÑ‚ Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸ *"}),e.jsx("div",{className:"mt-2",children:e.jsx(k,{content:s.content,onChange:t=>r("content",t),error:i.content,placeholder:"ÐÐ°Ñ‡Ð½Ð¸Ñ‚Ðµ Ð²Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ Ñ‚ÐµÐºÑÑ‚ Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸..."})}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ð´Ð»Ñ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ‚ÐµÐºÑÑ‚Ð°"})]})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["ÐœÐµÐ´Ð¸Ð° Ñ„Ð°Ð¹Ð»Ñ‹",l.length>0&&e.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",l.length," Ñ„Ð°Ð¹Ð»Ð¾Ð²)"]})]}),e.jsx(D,{existingMedia:l,onMediaUploaded:N,onMediaRemoved:y,maxFiles:20}),e.jsx(o,{message:i.media,className:"mt-2"})]}),e.jsx("div",{className:"bg-white shadow-sm rounded-lg p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(u,{href:route("admin.news.index"),className:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition",children:"ÐžÑ‚Ð¼ÐµÐ½Ð°"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{r("status","draft"),setTimeout(()=>h({preventDefault:()=>{}}),100)},disabled:x,className:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition disabled:opacity-50",children:"ðŸ’¾ Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ÐºÐ°Ðº Ñ‡ÐµÑ€Ð½Ð¾Ð²Ð¸Ðº"}),e.jsx(I,{disabled:x,className:"px-6 py-3 text-sm font-medium rounded-lg",children:x?"â³ ÐŸÑƒÐ±Ð»Ð¸ÐºÑƒÐµÐ¼...":"ðŸš€ ÐžÐ¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ñ‚ÑŒ"})]})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ÐŸÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{value:"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸"}),e.jsx(L,{value:s.status,onChange:v,className:"mt-2"}),e.jsx(o,{message:i.status,className:"mt-2"})]}),(s.status==="scheduled"||s.status==="published")&&e.jsxs("div",{children:[e.jsx(d,{value:"Ð”Ð°Ñ‚Ð° Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸"}),e.jsx(M,{value:s.publish_date,onChange:t=>r("publish_date",t),className:"mt-2",minDate:s.status==="scheduled"?new Date:null,allowPast:s.status==="published"}),e.jsx(o,{message:i.publish_date,className:"mt-2"}),s.status==="published"&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"ðŸ’¡ ÐœÐ¾Ð¶Ð½Ð¾ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð´Ð°Ñ‚Ñƒ Ð² Ð¿Ñ€Ð¾ÑˆÐ»Ð¾Ð¼ Ð´Ð»Ñ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸ Ð·Ð°Ð´Ð½Ð¸Ð¼ Ñ‡Ð¸ÑÐ»Ð¾Ð¼"})]})]})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ *"}),e.jsx(S,{selectedCategories:s.category,onCategoriesChange:t=>r("category",t),availableCategories:p,error:i.category})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Ð¢ÐµÐ³Ð¸",e.jsx("span",{className:"text-gray-500 text-sm font-normal ml-2",children:"(Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)"})]}),e.jsx(_,{selectedTags:s.tags,onChange:t=>r("tags",t)}),e.jsx(o,{message:i.tags,className:"mt-2"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"ðŸ’¡ ÐŸÐ¾Ð´ÑÐºÐ°Ð·ÐºÐ¸"}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€ Ð´Ð»Ñ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ‚ÐµÐºÑÑ‚Ð°"}),e.jsx("li",{children:"â€¢ Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð¸Ð»Ð¸ Ð²Ð¸Ð´ÐµÐ¾"}),e.jsx("li",{children:"â€¢ ÐŸÐµÑ€Ð²Ð¾Ðµ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ð±Ð»Ð¾Ð¶ÐºÐ¾Ð¹"}),e.jsx("li",{children:"â€¢ ÐœÐ¾Ð¶Ð½Ð¾ Ð·Ð°Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸ÑŽ"})]})]})]})]}),m&&e.jsxs("div",{className:"mt-8 bg-white shadow-lg rounded-lg p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"ÐŸÑ€ÐµÐ²ÑŒÑŽ Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸"}),s.title&&e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-4",children:s.title}),s.category.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.category.map((t,a)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:t},a))}),l.length>0&&l[0]&&e.jsx("div",{className:"mb-6",children:l[0].type==="image"?e.jsx("img",{src:l[0].preview||l[0].path,alt:"ÐžÐ±Ð»Ð¾Ð¶ÐºÐ°",className:"w-full h-auto rounded-lg shadow-md"}):e.jsx("video",{src:l[0].preview||l[0].path,controls:!0,className:"w-full h-auto rounded-lg shadow-md"})}),s.content&&e.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:s.content}}),s.tags.length>0&&e.jsx("div",{className:"mt-6 flex flex-wrap gap-2",children:s.tags.map((t,a)=>e.jsxs("span",{className:"px-2 py-1 bg-gray-200 text-gray-700 rounded text-xs",children:["#",t]},a))}),s.publish_date&&e.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["ðŸ“… Ð”Ð°Ñ‚Ð° Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸: ",new Date(s.publish_date).toLocaleString("ru-RU")]})]})]})})})}export{G as default};
