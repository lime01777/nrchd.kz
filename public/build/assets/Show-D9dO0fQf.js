import{r as _,j as t,Y as M,a as C}from"./app-Csa-8otF.js";import{S as A}from"./SafeImage-BI-k4h92.js";import{S as W}from"./SafeVideo-CLVco5L8.js";import{L as P}from"./LayoutNews-CstICXCO.js";import"./Footer-Buile5qx.js";import"./TranslationService-BIPkk7bE.js";const z=["mp4","avi","mov","wmv","flv","webm","ogg","m4v"],S=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`media-${Date.now()}-${Math.random().toString(16).slice(2)}`,B=(a="")=>{if(!a||typeof a!="string")return"image";const o=a.toLowerCase(),r=o.split(".").pop();return z.includes(r)||o.includes("youtube.com")||o.includes("youtu.be")||o.includes("instagram.com")||o.includes("aitube")?"video":"image"};function V({media:a=[],className:o="",autoPlay:r=!0,interval:b=5e3}){var s,d,n,m,k,L,$;const[y,g]=_.useState(0),i=a.map((l,h)=>{if(!l)return null;if(typeof l=="string"){const u=B(l);return{id:S(),type:u,path:l,url:l,embed_url:null,is_external:l.startsWith("http"),is_embed:!1,name:l.split("/").pop()||`ÐœÐµÐ´Ð¸Ð° ${h+1}`}}if(typeof l=="object"){const u=l.embed_url||l.path||l.url||l.src||"",I=l.type||B(u);return{id:l.id||S(),type:I,path:u,url:l.url||l.path||u,embed_url:l.embed_url||null,is_external:!!(l.is_external??(typeof u=="string"&&u.startsWith("http"))),is_embed:!!(l.is_embed||l.embed_url&&l.embed_url===u),thumbnail:l.thumbnail||null,name:l.name||l.title||`ÐœÐµÐ´Ð¸Ð° ${h+1}`}}return null}).filter(Boolean),p=i.some(l=>(l==null?void 0:l.type)==="video"),c=r&&!p,[x,f]=_.useState(c);_.useEffect(()=>{f(c)},[c]),_.useEffect(()=>{if(!c||!x||i.length<=1)return;const l=setInterval(()=>{g(h=>(h+1)%i.length)},b);return()=>clearInterval(l)},[c,x,b,i.length]);const j=()=>{g(l=>l===0?i.length-1:l-1)},w=()=>{g(l=>(l+1)%i.length)},v=l=>{g(l)},N=()=>{c&&f(!x)};if(i.length===0)return t.jsx("div",{className:`bg-gray-100 rounded-lg flex items-center justify-center ${o}`,style:{minHeight:"300px"},children:t.jsxs("div",{className:"text-gray-500 text-center",children:[t.jsx("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),t.jsx("p",{children:((s=window.translations)==null?void 0:s.no_media_files)||"ÐÐµÑ‚ Ð¼ÐµÐ´Ð¸Ð° Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð´Ð»Ñ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ"})]})});const e=i[y];return t.jsxs("div",{className:`relative overflow-hidden rounded-lg ${o}`,children:[t.jsxs("div",{className:"relative w-full h-64 md:h-80 lg:h-96 bg-black cursor-pointer",onClick:N,children:[e.type==="video"?e.is_embed&&(e.embed_url||e.path)?t.jsx("iframe",{src:e.embed_url||e.path,title:e.name||"Ð’Ð¸Ð´ÐµÐ¾",className:"w-full h-full object-contain",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0},e.id):t.jsx(W,{src:e.path,className:"w-full h-full object-contain",controls:!0,autoPlay:!1,muted:!0,loop:!0,onPlay:()=>f(!0),onPause:()=>f(!1),fallbackContent:t.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-4xl mb-2",children:"ðŸŽ¥"}),t.jsx("div",{className:"text-xs text-gray-600",children:"Ð’Ð¸Ð´ÐµÐ¾ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾"})]})})},e.path):t.jsx(A,{src:e.path,alt:e.name,className:"w-full h-full object-cover",fallbackSrc:"/img/placeholder.jpg"}),t.jsx("div",{className:"hidden w-full h-full items-center justify-center text-gray-400 bg-gray-100",children:t.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),t.jsx("div",{className:"absolute top-2 left-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded",children:e.type==="video"?"ðŸŽ¥ "+(((d=window.translations)==null?void 0:d.video)||"Ð’Ð¸Ð´ÐµÐ¾"):"ðŸ–¼ï¸ "+(((n=window.translations)==null?void 0:n.image)||"Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ")}),c&&t.jsx("div",{className:"absolute top-2 right-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded",children:x?"â¸ï¸ "+(((m=window.translations)==null?void 0:m.pause)||"ÐŸÐ°ÑƒÐ·Ð°"):"â–¶ï¸ "+(((k=window.translations)==null?void 0:k.play)||"Ð’Ð¾ÑÐ¿Ñ€Ð¾Ð¸Ð·Ð²ÐµÑÑ‚Ð¸")})]}),i.length>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:j,className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all","aria-label":((L=window.translations)==null?void 0:L.previous_slide)||"ÐŸÑ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð¸Ð¹ ÑÐ»Ð°Ð¹Ð´",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),t.jsx("button",{onClick:w,className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all","aria-label":(($=window.translations)==null?void 0:$.next_slide)||"Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ ÑÐ»Ð°Ð¹Ð´",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]}),i.length>1&&t.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:i.map((l,h)=>{var u;return t.jsx("button",{onClick:()=>v(h),className:`w-2 h-2 rounded-full transition-all ${h===y?"bg-white":"bg-white bg-opacity-50 hover:bg-opacity-75"}`,"aria-label":(u=window.translations)!=null&&u.go_to_slide?`${window.translations.go_to_slide} ${h+1}`:`ÐŸÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ðº ÑÐ»Ð°Ð¹Ð´Ñƒ ${h+1}`},h)})}),i.length>1&&t.jsxs("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded",children:[y+1," / ",i.length,i.length>=15&&t.jsx("span",{className:"ml-1 text-yellow-300",children:"(Ð¼Ð°ÐºÑ.)"})]})]})}function Y({news:a,relatedNews:o,seo:r}){const b=Array.isArray(a.media)?a.media:[],y=a.type==="media",g=new Set((Array.isArray(a.gallery_images)?a.gallery_images:[]).filter(Boolean));b.filter(e=>e.type==="image").forEach(e=>{const s=e.url||e.path;s&&g.add(s)});const i=Array.from(g),p=[],c=new Set,x=e=>{if(!e)return;if(typeof e=="string"){const n=e,m=`${n}-${p.length}`;if(c.has(m))return;c.add(m),p.push({id:m,type:"video",src:n,url:n,path:n,is_external:n.startsWith("http"),is_embed:!1});return}const s=e.id||`${e.url||e.path}-${p.length}`;if(c.has(s))return;c.add(s);const d=e.embed_url||e.url||e.path||null;p.push({...e,id:s,type:"video",src:d,url:e.url||e.path||d,embed_url:e.embed_url||null,is_external:!!e.is_external,is_embed:!!(e.is_embed||e.embed_url),name:e.name||e.title||`Ð’Ð¸Ð´ÐµÐ¾ ${p.length+1}`})};Array.isArray(a.gallery_videos)&&a.gallery_videos.forEach(x),Array.isArray(a.videos)&&a.videos.forEach(x),b.filter(e=>e.type==="video").forEach(x);const f=b.map((e,s)=>{if(!e)return null;if(typeof e=="string"){const m=e.toLowerCase().match(/\.(mp4|avi|mov|wmv|flv|webm|ogg|m4v)(\?|$)/);return{id:`legacy-${s}`,type:m?"video":"image",path:e,url:e,embed_url:null,is_external:e.startsWith("http"),is_embed:!1,name:m?`Ð’Ð¸Ð´ÐµÐ¾ ${s+1}`:`Ð¤Ð¾Ñ‚Ð¾ ${s+1}`}}const d=e.type||"image",n=e.embed_url||e.url||e.path||e.src||null;return n?{id:e.id||`media-${s}`,type:d,path:n,url:e.url||e.path||n,embed_url:e.embed_url||null,is_external:!!(e.is_external??n.startsWith("http")),is_embed:!!(e.is_embed||e.embed_url),thumbnail:e.thumbnail||null,name:e.name||e.title||(d==="video"?`Ð’Ð¸Ð´ÐµÐ¾ ${s+1}`:`Ð¤Ð¾Ñ‚Ð¾ ${s+1}`)}:null}).filter(Boolean),j=f.length>0?f:[...i.map((e,s)=>({id:`image-${s}`,type:"image",path:e,url:e,embed_url:null,is_external:e.startsWith("http"),is_embed:!1,name:`Ð¤Ð¾Ñ‚Ð¾ ${s+1}`})),...p],w=j.every(e=>e.type==="image"),v=a.published_at_full||a.published_at_formatted||"";[{name:"Instagram",url:a.social_instagram,icon:"M7 10c1.657 0 3-1.343 3-3S8.657 4 7 4 4 5.343 4 7s1.343 3 3 3z"},{name:"Facebook",url:a.social_facebook,icon:"M18 2h-3a4 4 0 00-4 4v3H8v4h3v8h4v-8h3l1-4h-4V6a1 1 0 011-1h3z"},{name:"YouTube",url:a.social_youtube,icon:"M10 15l5.19-3L10 9v6zm10-7.5s-.1-1.43-.58-2.06c-.56-.78-1.19-.78-1.48-.82C16.42 4.35 12 4.35 12 4.35h-.02s-4.42 0-5.92.27c-.29.04-.92.04-1.48.82-.48.63-.58 2.06-.58 2.06S4 9.07 4 10.63v1.75c0 1.56.02 3.13.02 3.13s.1 1.43.58 2.06c.56.78 1.29.75 1.62.83 1.18.12 5.78.26 5.78.26s4.42 0 5.92-.27c.29-.04.92-.04 1.48-.82.48-.63.58-2.06.58-2.06s.02-1.56.02-3.13V10.63c0-1.56-.02-3.13-.02-3.13z"},{name:"Telegram",url:a.social_telegram,icon:"M21 3L3 10.53l5.18 1.66L9 21l4.06-4.06L17.82 21 21 3z"}].filter(e=>!!e.url);const N=()=>t.jsxs("div",{className:"bg-gradient-to-b from-white via-blue-50/30 to-blue-100/20 pb-10 pt-8 sm:pt-10 lg:pt-12",children:[t.jsxs(M,{children:[t.jsx("title",{children:(r==null?void 0:r.title)||a.title}),t.jsx("meta",{name:"description",content:(r==null?void 0:r.description)||a.excerpt||""}),t.jsx("meta",{property:"og:title",content:(r==null?void 0:r.title)||a.title}),t.jsx("meta",{property:"og:description",content:(r==null?void 0:r.description)||a.excerpt||""}),t.jsx("meta",{property:"og:image",content:(r==null?void 0:r.image)||a.cover_url}),t.jsx("meta",{property:"og:type",content:"article"})]}),t.jsx("div",{className:"container mx-auto max-w-5xl px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"mt-8 grid gap-8 lg:grid-cols-[2fr,1fr] lg:items-start",children:t.jsxs("div",{children:[t.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-blue-600",children:y?"Ð¡ÐœÐ˜ Ðž ÐÐÐ¡":"ÐÐžÐ’ÐžÐ¡Ð¢Ð˜"}),t.jsx("h1",{className:"mt-4 text-3xl font-bold leading-tight text-gray-900 sm:text-4xl lg:text-5xl",children:a.title}),v&&t.jsxs("div",{className:"mt-6 inline-flex items-center rounded-full bg-white/80 px-4 py-2 text-xs font-semibold uppercase tracking-widest text-blue-700 shadow",children:["ÐžÐ¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ð½Ð¾: ",t.jsx("span",{className:"ml-2 text-sm normal-case text-gray-700",children:v})]})]})})})]});return t.jsxs(P,{renderCustomHero:N,children:[t.jsxs(M,{children:[t.jsx("title",{children:(r==null?void 0:r.title)||a.title}),t.jsx("meta",{name:"description",content:(r==null?void 0:r.description)||a.excerpt||""}),t.jsx("meta",{property:"og:title",content:(r==null?void 0:r.title)||a.title}),t.jsx("meta",{property:"og:description",content:(r==null?void 0:r.description)||a.excerpt||""}),t.jsx("meta",{property:"og:image",content:(r==null?void 0:r.image)||a.cover_url}),t.jsx("meta",{property:"og:type",content:"article"})]}),t.jsx("div",{className:"mb-8",children:t.jsxs(C,{href:route("news.index"),className:"inline-flex items-center gap-2 text-sm font-semibold text-blue-600 transition hover:text-blue-700",children:[t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"ÐÐ°Ð·Ð°Ð´ Ðº ÑÐ¿Ð¸ÑÐºÑƒ Ð½Ð¾Ð²Ð¾ÑÑ‚ÐµÐ¹"]})}),j.length>0&&t.jsxs("section",{className:"mb-12",children:[t.jsx("h2",{className:"mb-4 text-2xl font-semibold text-gray-900",children:"ÐœÐµÐ´Ð¸Ð°"}),t.jsx(V,{media:j,className:"mb-4",autoPlay:w,interval:4e3})]}),t.jsx("article",{className:"prose prose-lg max-w-none prose-headings:text-gray-900 prose-p:leading-relaxed prose-a:text-blue-600",dangerouslySetInnerHTML:{__html:a.body}}),o&&o.length>0&&t.jsxs("section",{className:"mt-16 rounded-2xl bg-gray-50 p-8",children:[t.jsx("h2",{className:"mb-6 text-2xl font-bold text-gray-900",children:y?"Ð”Ñ€ÑƒÐ³Ð¸Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð¡ÐœÐ˜":"Ð•Ñ‰Ñ‘ Ð½Ð¾Ð²Ð¾ÑÑ‚Ð¸"}),t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:o.map(e=>{const d=(Array.isArray(e.images)?e.images.map(n=>typeof n=="string"?n:typeof n=="object"&&(n.url||n.path)||null).filter(Boolean):[])[0]||e.cover_thumb_url||e.cover_url||null;return t.jsxs(C,{href:route("news.show",e.slug),className:"group flex h-full flex-col overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm transition hover:-translate-y-1 hover:shadow-lg",children:[t.jsx("div",{className:"relative h-40 w-full overflow-hidden bg-gray-100",children:d?t.jsx("img",{src:d,alt:e.cover_image_alt||e.title,className:"h-full w-full object-cover transition duration-300 group-hover:scale-105",loading:"lazy"}):t.jsx("div",{className:"flex h-full w-full items-center justify-center text-gray-300",children:t.jsx("svg",{className:"h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),t.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-5",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:e.title}),t.jsx("span",{className:"mt-1 block text-xs font-medium uppercase tracking-wide text-gray-500",children:e.published_at_formatted})]}),t.jsxs("span",{className:"inline-flex items-center text-sm font-semibold text-blue-600",children:["Ð§Ð¸Ñ‚Ð°Ñ‚ÑŒ Ð´Ð°Ð»ÐµÐµ",t.jsx("svg",{className:"ml-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]},e.id)})})]})]})}export{Y as default};
