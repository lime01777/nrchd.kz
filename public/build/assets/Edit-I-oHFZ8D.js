import{W as n,r as u,j as e,a as x}from"./app--3lgSo5Y.js";import{A as h}from"./AdminLayout-DTFkRerQ.js";import"./transition-CaTFC7gG.js";function g({news:t=null}){const i=!!t,{data:a,setData:r,post:d,put:c,processing:o,errors:l}=n({title:(t==null?void 0:t.title)||"",slug:(t==null?void 0:t.slug)||"",category:(t==null?void 0:t.category)||"",content:(t==null?void 0:t.content)||"",image:null,status:(t==null?void 0:t.status)||"Черновик",publishDate:(t==null?void 0:t.publishDate)||new Date().toISOString().substr(0,10)});u.useEffect(()=>{if(!i&&a.title){const s=a.title.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");r("slug",s)}},[a.title,i]);const m=s=>{s.preventDefault(),i?c(route("admin.news.update",t.id)):d(route("admin.news.store"))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:i?"Редактирование новости":"Создание новости"}),e.jsxs(x,{href:route("admin.news"),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{className:"h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Назад к списку"]})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:e.jsxs("form",{onSubmit:m,children:[e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-6",children:[e.jsxs("div",{className:"sm:col-span-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Заголовок"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"text",name:"title",id:"title",value:a.title,onChange:s=>r("title",s.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0})}),l.title&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.title})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700",children:"Slug"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"text",name:"slug",id:"slug",value:a.slug,onChange:s=>r("slug",s.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0})}),l.slug&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.slug})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Категория"}),e.jsx("div",{className:"mt-1",children:e.jsxs("select",{id:"category",name:"category",value:a.category,onChange:s=>r("category",s.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0,children:[e.jsx("option",{value:"",children:"Выберите категорию"}),e.jsx("option",{value:"Общие",children:"Общие"}),e.jsx("option",{value:"Аккредитация",children:"Аккредитация"}),e.jsx("option",{value:"Обучение",children:"Обучение"}),e.jsx("option",{value:"Конференции",children:"Конференции"}),e.jsx("option",{value:"Методические материалы",children:"Методические материалы"}),e.jsx("option",{value:"Исследования",children:"Исследования"}),e.jsx("option",{value:"Анонсы",children:"Анонсы"})]})}),l.category&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.category})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Статус"}),e.jsx("div",{className:"mt-1",children:e.jsxs("select",{id:"status",name:"status",value:a.status,onChange:s=>r("status",s.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0,children:[e.jsx("option",{value:"Черновик",children:"Черновик"}),e.jsx("option",{value:"Опубликовано",children:"Опубликовано"}),e.jsx("option",{value:"Запланировано",children:"Запланировано"})]})}),l.status&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.status})]}),e.jsxs("div",{className:"sm:col-span-3",children:[e.jsx("label",{htmlFor:"publishDate",className:"block text-sm font-medium text-gray-700",children:"Дата публикации"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"date",name:"publishDate",id:"publishDate",value:a.publishDate,onChange:s=>r("publishDate",s.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0})}),l.publishDate&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.publishDate})]}),e.jsxs("div",{className:"sm:col-span-6",children:[e.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700",children:"Изображение"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[i&&t.image&&e.jsx("div",{className:"mr-4",children:e.jsx("img",{src:t.image,alt:t.title,className:"h-32 w-auto object-cover rounded-md"})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"max-w-lg flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[e.jsx("span",{children:"Загрузить файл"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:s=>r("image",s.target.files[0])})]}),e.jsx("p",{className:"pl-1",children:"или перетащите сюда"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF до 10MB"})]})})})]}),l.image&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.image})]}),e.jsxs("div",{className:"sm:col-span-6",children:[e.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Содержание"}),e.jsx("div",{className:"mt-1",children:e.jsx("textarea",{id:"content",name:"content",rows:15,value:a.content,onChange:s=>r("content",s.target.value),className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",required:!0})}),l.content&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l.content})]})]})}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6",children:e.jsx("button",{type:"submit",disabled:o,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:o?"Сохранение...":i?"Сохранить изменения":"Создать новость"})})]})})]})}g.layout=t=>e.jsx(h,{title:t.props.news?"Редактирование новости":"Создание новости",children:t});export{g as default};
