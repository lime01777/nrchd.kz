import{r as n,R as N,j as r}from"./app-6k9bwpyy.js";function k({images:o=[],className:c="",height:i="160px",showDots:p=!0,showCounter:v=!1,autoPlay:g=!0,interval:m=3e3}){const[a,d]=n.useState(0),[w,u]=n.useState(new Set),[b,x]=n.useState(new Set),[S,h]=n.useState(!0),e=N.useMemo(()=>!Array.isArray(o)||o.length===0?[]:o.filter(t=>t&&typeof t=="string"),[o]),f=n.useCallback(t=>{u(s=>{const l=new Set(s);return l.add(t),l.size>=e.length&&h(!1),l})},[e.length]),j=n.useCallback(t=>{x(s=>{const l=new Set(s);return l.add(t),l}),u(s=>{const l=new Set(s);return l.add(t),l.size>=e.length&&h(!1),l})},[e.length]);n.useEffect(()=>{u(new Set),x(new Set),h(!1),d(0)},[e]),n.useEffect(()=>{if(!g||e.length<=1)return;const t=setInterval(()=>{d(s=>(s+1)%e.length)},m);return()=>clearInterval(t)},[e.length,g,m]);const y=n.useCallback(t=>{d(t)},[]);return!e||e.length===0?r.jsx("div",{className:`relative overflow-hidden rounded-lg bg-gray-200 flex items-center justify-center ${c}`,style:{height:i},children:r.jsxs("div",{className:"text-gray-400 text-center",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("p",{className:"text-sm",children:"Нет изображений"})]})}):e.length===1?r.jsx("div",{className:`relative overflow-hidden rounded-lg ${c}`,style:{height:i},children:r.jsx("img",{src:e[0],alt:"Изображение новости",className:"w-full h-full object-cover",onError:t=>{console.error("Ошибка загрузки изображения:",e[0]),t.target.onerror=null,t.target.src="/img/placeholder.jpg"}})}):r.jsxs("div",{className:`relative overflow-hidden rounded-lg ${c}`,style:{height:i},children:[r.jsxs("div",{className:"relative w-full h-full",children:[r.jsx("img",{src:e[a],alt:`Изображение новости ${a+1}`,className:`w-full h-full object-cover transition-opacity duration-500 ${w.has(a)?"opacity-100":"opacity-0"}`,onLoad:()=>f(a),onError:t=>{console.error("Ошибка загрузки изображения:",e[a]),j(a),t.target.onerror=null,t.target.src="/img/placeholder.jpg"}}),e.map((t,s)=>s!==a&&r.jsx("img",{src:t,alt:"",className:"hidden",onLoad:()=>f(s),onError:()=>j(s)},s)),b.has(a)&&r.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx("svg",{className:"w-6 h-6 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.314 16.5c-.77.833.192 2.5 1.732 2.5z"})}),r.jsx("p",{className:"text-xs",children:"Ошибка"})]})}),p&&e.length>1&&r.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1 z-10",children:e.map((t,s)=>r.jsx("button",{onClick:()=>y(s),className:`w-2 h-2 rounded-full transition-all duration-300 ${s===a?"bg-white shadow-sm":"bg-white bg-opacity-50 hover:bg-opacity-75"}`,"aria-label":`Перейти к изображению ${s+1}`},s))})]}),v&&e.length>1&&r.jsxs("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs z-10",children:[a+1," / ",e.length]})]})}export{k as N};
