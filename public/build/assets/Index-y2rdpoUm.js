import{j as e,q as v,a as g,r as u,R as y,y as b,Y as N}from"./app-Dx0pQLKn.js";function w({items:s=[],maxVisible:t=null,moreLabel:i="+N"}){if(!s||s.length===0)return null;const n=t?s.slice(0,t):s,r=t?s.length-t:0;return e.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.map((a,o)=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:a},o)),r>0&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:i.replace("N",r)})]})}function k({clinic:s}){const{translations:t}=v().props,i=(n,r="")=>(t==null?void 0:t[n])||r;return e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:[e.jsxs("div",{className:"relative h-48 bg-gray-200",children:[s.hero_url?e.jsx("img",{src:s.hero_url,alt:s.name,className:"w-full h-full object-cover",loading:"lazy"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("svg",{className:"w-16 h-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),s.logo_url&&e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("img",{src:s.logo_url,alt:`${s.name} logo`,className:"w-12 h-12 bg-white rounded-lg shadow-sm object-contain"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(g,{href:route("clinics.show.public",s.slug),className:"block group",children:e.jsx("h3",{className:"text-xl font-semibold text-gray-900 group-hover:text-blue-600 transition-colors duration-200",children:s.name})}),s.city&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1 flex items-center",children:[e.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.city]})]}),s.short_desc&&e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:s.short_desc}),s.specialties&&s.specialties.length>0&&e.jsx("div",{className:"mb-4",children:e.jsx(w,{items:s.specialties,maxVisible:3,moreLabel:`+${s.specialties_count-3}`})}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.phone&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("a",{href:`tel:${s.phone}`,className:"hover:text-blue-600 transition-colors",children:s.phone})]}),s.email&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("a",{href:`mailto:${s.email}`,className:"hover:text-blue-600 transition-colors",children:s.email})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(g,{href:route("clinics.show.public",s.slug),className:"w-full inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[i("clinics.view_details"),e.jsx("svg",{className:"ml-2 w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})}function C({value:s="",onChange:t,placeholder:i="Поиск..."}){const[n,r]=u.useState(s);u.useEffect(()=>{r(s)},[s]);const a=o=>{const c=o.target.value;r(c),t(c)};return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:n,onChange:a,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:i})]})}function j({value:s="",onChange:t,options:i=[],placeholder:n="Выберите...",disabled:r=!1}){const[a,o]=u.useState(!1),[c,x]=u.useState(""),m=u.useRef(null);u.useEffect(()=>{const d=f=>{m.current&&!m.current.contains(f.target)&&o(!1)};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[]);const l=i.find(d=>d.value===s),h=i.filter(d=>d.label.toLowerCase().includes(c.toLowerCase())),p=d=>{t(d.value),o(!1),x("")};return e.jsxs("div",{className:"relative",ref:m,children:[e.jsxs("button",{type:"button",onClick:()=>!r&&o(!a),disabled:r,className:"relative w-full bg-white border border-gray-300 rounded-md shadow-sm pl-3 pr-10 py-2 text-left cursor-pointer focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("span",{className:`block truncate ${l?"text-gray-900":"text-gray-500"}`,children:l?l.label:n}),e.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),a&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",children:[i.length>10&&e.jsx("div",{className:"px-3 py-2",children:e.jsx("input",{type:"text",value:c,onChange:d=>x(d.target.value),placeholder:"Поиск...",className:"block w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})}),h.length>0?h.map(d=>e.jsx("button",{onClick:()=>p(d),className:`w-full text-left px-3 py-2 text-sm cursor-pointer hover:bg-gray-100 ${d.value===s?"bg-blue-50 text-blue-900":"text-gray-900"}`,children:d.label},d.value)):e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"Ничего не найдено"})]})]})}function L({currentPage:s,lastPage:t,total:i,perPage:n,onPageChange:r}){const o=(()=>{const x=[],m=[];for(let l=Math.max(2,s-2);l<=Math.min(t-1,s+2);l++)x.push(l);return s-2>2?m.push(1,"..."):m.push(1),m.push(...x),s+2<t-1?m.push("...",t):m.push(t),m})();return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>r(s-1),disabled:s===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Назад"}),e.jsx("button",{onClick:()=>r(s+1),disabled:s===t,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Вперед"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Показано"," ",e.jsx("span",{className:"font-medium",children:(s-1)*n+1})," ","до"," ",e.jsx("span",{className:"font-medium",children:Math.min(s*n,i)})," ","из"," ",e.jsx("span",{className:"font-medium",children:i})," ","результатов"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>r(s-1),disabled:s===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Предыдущая"}),e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),o.map((c,x)=>e.jsx(y.Fragment,{children:c==="..."?e.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."}):e.jsx("button",{onClick:()=>r(c),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${c===s?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:c})},x)),e.jsxs("button",{onClick:()=>r(s+1),disabled:s===t,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Следующая"}),e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})]})]})}function M({clinics:s,filters:t,filterOptions:i,pagination:n}){const{translations:r}=v().props,a=(l,h="")=>(r==null?void 0:r[l])||h,[o,c]=u.useState({search:(t==null?void 0:t.search)??"",city:(t==null?void 0:t.city)??"all",specialty:(t==null?void 0:t.specialty)??"all",service:(t==null?void 0:t.service)??"all"});u.useEffect(()=>{const l=setTimeout(()=>{b.visit(route("clinics"),{data:o,preserveState:!0,preserveScroll:!0,replace:!0})},300);return()=>clearTimeout(l)},[o]);const x=(l,h)=>{c(p=>({...p,[l]:h}))},m=l=>{c(h=>({...h,search:l}))};return e.jsxs(e.Fragment,{children:[e.jsx(N,{title:`${a("clinics.title","Клиники")} - NRCHD`,meta:[{name:"description",content:a("clinics.description","Каталог медицинских клиник")}]}),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 sm:text-4xl",children:a("clinics.title")}),e.jsx("p",{className:"mt-3 text-lg text-gray-600",children:a("clinics.subtitle")})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(C,{value:o.search,onChange:m,placeholder:a("clinics.search_placeholder")})}),e.jsx(j,{value:o.city,onChange:l=>x("city",l),options:[{value:"all",label:a("clinics.all_cities")},...i.cities],placeholder:a("clinics.select_city")}),e.jsx(j,{value:o.specialty,onChange:l=>x("specialty",l),options:[{value:"all",label:a("clinics.all_specialties")},...i.specialties],placeholder:a("clinics.select_specialty")})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-gray-600",children:a("clinics.found_count","")||`Найдено: ${n.total}`})}),s.data.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.data.map(l=>e.jsx(k,{clinic:l},l.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a("clinics.no_results_title")}),e.jsx("p",{className:"text-gray-600",children:a("clinics.no_results_description")})]}),n.last_page>1&&e.jsx("div",{className:"mt-8",children:e.jsx(L,{currentPage:n.current_page,lastPage:n.last_page,total:n.total,perPage:n.per_page,onPageChange:l=>{b.visit(route("clinics"),{data:{...o,page:l},preserveState:!0,preserveScroll:!0})}})})]})]})]})}export{M as default};
