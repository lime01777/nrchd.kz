import{r as u,W as _,j as e,a as b,y as R}from"./app-CYo44y_y.js";import{A as T}from"./AdminLayout-enUz4bpd.js";import{R as v,C as I}from"./CategoryCheckboxes-BRmu-yf9.js";import{M as w,D as U,T as E}from"./DateTimePicker-DQoDFgXd.js";import{S as F}from"./StatusSelector-B35jy6tl.js";import{T as k,I as n}from"./TextInput-BPiHo3Qo.js";import{I as o}from"./InputLabel-E0asrDBO.js";import{P as C}from"./PrimaryButton-Ba5usR6s.js";import"./transition-fgOBoZx1.js";import"./use-is-mounted-Cx2EdkYN.js";function G({news:a,availableCategories:S=[]}){const[l,p]=u.useState(a.images||[]),[x,D]=u.useState(!1),[c,j]=u.useState(!1),{data:s,setData:i,put:M,processing:m,errors:d}=_({title:a.title||"",content:a.content||"",category:a.category||[],tags:a.tags||[],status:a.status==="–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ"?"published":a.status==="–ß–µ—Ä–Ω–æ–≤–∏–∫"?"draft":a.status==="–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ"?"scheduled":a.status==="–ê—Ä—Ö–∏–≤"?"archived":a.status||"draft",publish_date:a.publish_date||"",media:a.images||[]}),h=t=>{t.preventDefault();const r={...s,images:l};M(route("admin.news.update",a.id),{data:r,onSuccess:()=>{console.log("–ù–æ–≤–æ—Å—Ç—å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞")},onError:g=>{console.error("–û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:",g)}})},f=t=>{const r=[...l,...t];p(r),i("media",r)},N=t=>{const r=l.filter(g=>g.id!==t);p(r),i("media",r)},L=t=>{if(i("status",t),t==="scheduled"&&!s.publish_date){const r=new Date;r.setDate(r.getDate()+1),r.setHours(9,0,0,0),i("publish_date",r.toISOString())}},y=()=>{c?R.delete(route("admin.news.destroy",a.id),{onSuccess:()=>{console.log("–ù–æ–≤–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∞")}}):(j(!0),setTimeout(()=>j(!1),5e3))};return e.jsx(T,{children:e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8 bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –Ω–æ–≤–æ—Å—Ç—å —Å –ø–æ–º–æ—â—å—é —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["ID: ",a.id," | –°–æ–∑–¥–∞–Ω–æ: ",new Date(a.created_at).toLocaleString("ru-RU")," | –ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: ",a.views||0]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(b,{href:route("admin.news"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É"]}),e.jsxs("button",{type:"button",onClick:()=>D(!x),className:"inline-flex items-center px-4 py-2 border border-blue-300 rounded-lg shadow-sm text-sm font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),x?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å"," –ø—Ä–µ–≤—å—é"]}),e.jsxs("button",{type:"button",onClick:y,className:`inline-flex items-center px-4 py-2 border rounded-lg shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 transition ${c?"border-red-600 text-white bg-red-600 hover:bg-red-700 focus:ring-red-500 animate-pulse":"border-red-300 text-red-700 bg-white hover:bg-red-50 focus:ring-red-500"}`,children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),c?"–ù–∞–∂–º–∏—Ç–µ –µ—â–µ —Ä–∞–∑ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è":"–£–¥–∞–ª–∏—Ç—å"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"–ó–∞–≥–æ–ª–æ–≤–æ–∫"}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"title",value:"–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏ *"}),e.jsx(k,{id:"title",type:"text",value:s.title,onChange:t=>i("title",t.target.value),className:"mt-1 block w-full text-lg",placeholder:"–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏...",required:!0}),e.jsx(n,{message:d.title,className:"mt-2"}),e.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["–°–∏–º–≤–æ–ª–æ–≤: ",s.title.length," / 255"]})]})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"–°–æ–¥–µ—Ä–∂–∏–º–æ–µ"}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"content",value:"–¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏ *"}),e.jsx("div",{className:"mt-2",children:e.jsx(v,{content:s.content,onChange:t=>i("content",t),error:d.content,placeholder:"–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏..."})}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞"})]})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["–ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã",l.length>0&&e.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",l.length," —Ñ–∞–π–ª–æ–≤)"]})]}),e.jsx(w,{existingMedia:l,onMediaUploaded:f,onMediaRemoved:N,maxFiles:20}),e.jsx(n,{message:d.media,className:"mt-2"})]}),e.jsx("div",{className:"bg-white shadow-sm rounded-lg p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{href:route("admin.news"),className:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition",children:"–û—Ç–º–µ–Ω–∞"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{i("status","draft"),setTimeout(()=>h({preventDefault:()=>{}}),100)},disabled:m,className:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition disabled:opacity-50",children:"üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ —á–µ—Ä–Ω–æ–≤–∏–∫"}),e.jsx(C,{disabled:m,className:"px-6 py-3 text-sm font-medium rounded-lg",children:m?"‚è≥ –°–æ—Ö—Ä–∞–Ω—è–µ–º...":"üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"})]})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"–ü—É–±–ª–∏–∫–∞—Ü–∏—è"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{value:"–°—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏"}),e.jsx(F,{value:s.status,onChange:L,className:"mt-2"}),e.jsx(n,{message:d.status,className:"mt-2"})]}),(s.status==="scheduled"||s.status==="published")&&e.jsxs("div",{children:[e.jsx(o,{value:"–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏"}),e.jsx(U,{value:s.publish_date,onChange:t=>i("publish_date",t),className:"mt-2",minDate:s.status==="scheduled"?new Date:null,allowPast:s.status==="published"}),e.jsx(n,{message:d.publish_date,className:"mt-2"}),s.status==="published"&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"üí° –ú–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—É –≤ –ø—Ä–æ—à–ª–æ–º –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∑–∞–¥–Ω–∏–º —á–∏—Å–ª–æ–º"})]})]})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ *"}),e.jsx(I,{selectedCategories:s.category,onCategoriesChange:t=>i("category",t),availableCategories:S,error:d.category})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["–¢–µ–≥–∏",e.jsx("span",{className:"text-gray-500 text-sm font-normal ml-2",children:"(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"})]}),e.jsx(E,{selectedTags:s.tags,onChange:t=>i("tags",t)}),e.jsx(n,{message:d.tags,className:"mt-2"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-3",children:"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:a.views||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"–°–æ–∑–¥–∞–Ω–æ:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:new Date(a.created_at).toLocaleDateString("ru-RU")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"–û–±–Ω–æ–≤–ª–µ–Ω–æ:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:new Date(a.updated_at).toLocaleDateString("ru-RU")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Slug:"}),e.jsx("span",{className:"font-mono text-xs text-gray-700",children:a.slug})]})]})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"‚öôÔ∏è –î–µ–π—Å—Ç–≤–∏—è"}),e.jsxs("div",{className:"space-y-2",children:[a.slug&&e.jsx("a",{href:route("news.show",a.slug),target:"_blank",rel:"noopener noreferrer",className:"block w-full text-center px-4 py-2 border border-blue-300 rounded-lg text-sm font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 transition",children:"üëÅ –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Å–∞–π—Ç–µ"}),e.jsx("button",{type:"button",onClick:y,className:`block w-full px-4 py-2 border rounded-lg text-sm font-medium transition ${c?"border-red-600 text-white bg-red-600 hover:bg-red-700 animate-pulse":"border-red-300 text-red-700 bg-white hover:bg-red-50"}`,children:c?"‚ö†Ô∏è –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ":"üóë –£–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"–ó–∞–≥–æ–ª–æ–≤–æ–∫"}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"title",value:"–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏ *"}),e.jsx(k,{id:"title",type:"text",value:s.title,onChange:t=>i("title",t.target.value),className:"mt-1 block w-full text-lg",placeholder:"–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏...",required:!0}),e.jsx(n,{message:d.title,className:"mt-2"}),e.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["–°–∏–º–≤–æ–ª–æ–≤: ",s.title.length," / 255"]})]})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"–°–æ–¥–µ—Ä–∂–∏–º–æ–µ"}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"content",value:"–¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏ *"}),e.jsx("div",{className:"mt-2",children:e.jsx(v,{content:s.content,onChange:t=>i("content",t),error:d.content,placeholder:"–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏..."})}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞"})]})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["–ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã",l.length>0&&e.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",l.length," —Ñ–∞–π–ª–æ–≤)"]})]}),e.jsx(w,{existingMedia:l,onMediaUploaded:f,onMediaRemoved:N,maxFiles:20}),e.jsx(n,{message:d.media,className:"mt-2"})]}),e.jsx("div",{className:"bg-white shadow-sm rounded-lg p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(b,{href:route("admin.news"),className:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition",children:"–û—Ç–º–µ–Ω–∞"}),e.jsx("div",{className:"flex gap-3",children:e.jsx(C,{disabled:m,className:"px-6 py-3 text-sm font-medium rounded-lg",children:m?"‚è≥ –°–æ—Ö—Ä–∞–Ω—è–µ–º...":"üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"})})]})})]})})}),x&&e.jsxs("div",{className:"mt-8 bg-white shadow-lg rounded-lg p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 border-b pb-4",children:"–ü—Ä–µ–≤—å—é –Ω–æ–≤–æ—Å—Ç–∏"}),s.title&&e.jsx("h3",{className:"text-4xl font-bold text-gray-900 mb-4",children:s.title}),s.category.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:s.category.map((t,r)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:t},r))}),l.length>0&&l[0]&&e.jsx("div",{className:"mb-8",children:l[0].type==="image"?e.jsx("img",{src:l[0].preview||l[0].path,alt:"–û–±–ª–æ–∂–∫–∞",className:"w-full h-auto rounded-xl shadow-lg"}):e.jsx("video",{src:l[0].preview||l[0].path,controls:!0,className:"w-full h-auto rounded-xl shadow-lg"})}),s.content&&e.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:s.content}}),s.tags.length>0&&e.jsxs("div",{className:"mt-8 pt-6 border-t flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-gray-600 font-medium mr-2",children:"–¢–µ–≥–∏:"}),s.tags.map((t,r)=>e.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-sm",children:["#",t]},r))]}),s.publish_date&&e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["üìÖ ",e.jsx("strong",{children:"–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:"})," ",new Date(s.publish_date).toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})})]})]})})})}export{G as default};
