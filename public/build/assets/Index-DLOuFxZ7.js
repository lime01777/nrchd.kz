import{j as e,a as I,q as H,W as F,r as q,Y as P,y as D}from"./app-0CC-SSEM.js";import{L as R}from"./LayoutNews-DESdG7vm.js";import{N as U}from"./NewsImageSlider-CfBdJpcC.js";import{S as K}from"./SafeImage-CEOpzNTj.js";import{i as Y}from"./mediaUtils-oRnee45q.js";import{t as G}from"./TranslationService-a8IgmIQt.js";import"./Footer-BFDmoBba.js";function J({item:x,className:l=""}){const{id:w,title:S,slug:L,excerpt:h,preparedExcerpt:o,cover_url:a,cover_thumb_url:m,cover_image_alt:f,galleryImages:g=[],published_at_formatted:j,external_url:i}=x,y=x.images||g||[],c=Array.isArray(y)&&y.length>0?y[0]:null,_=(c==null?void 0:c.url)||(c==null?void 0:c.path)||c,C=m||a||_||(g.length>0?g[0]:null),A=f||S||"Изображение",$=o||h||"",E=t=>{i&&(t.preventDefault(),window.open(i,"_blank","noopener,noreferrer"))},r=e.jsxs("article",{className:`flex h-full flex-col overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm transition hover:-translate-y-1 hover:shadow-lg ${l}`,children:[C&&e.jsxs("div",{className:"relative h-48 w-full overflow-hidden bg-gray-100",children:[e.jsx(K,{src:C,alt:A,className:"h-full w-full object-cover transition-transform duration-300 hover:scale-105",fallbackSrc:"/img/placeholder.jpg"}),i&&e.jsxs("div",{className:"absolute top-2 right-2 bg-blue-600 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"СМИ"]})]}),e.jsxs("div",{className:"flex flex-1 flex-col p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 line-clamp-2 mb-2",children:S}),$&&e.jsx("p",{className:"text-gray-600 text-sm line-clamp-4 mb-4 flex-1",children:$}),e.jsxs("div",{className:"mt-auto flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsx("span",{className:"text-xs text-gray-500",children:j||""}),i&&e.jsxs("span",{className:"text-xs text-blue-600 flex items-center gap-1",children:["Читать на сайте СМИ",e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})]})]});return i?e.jsx("a",{href:i,onClick:E,className:"block",target:"_blank",rel:"noopener noreferrer",children:r}):e.jsx(I,{href:route("news.show",L),children:r})}const n=(x,l="")=>{try{return G.t(x,l||x)}catch(w){return console.warn("[News/Index] Ошибка получения перевода:",w),l||x}};function se({section:x}){var E;const{news:l,filters:w={},section:S,availableTags:L=[]}=H().props,h=x||S||{type:"news",title:"Новости",subtitle:"",description:""},o=h.type||"news",a=o==="media",{data:m,setData:f,processing:g}=F({search:w.search??"",tag:w.tag??""}),j=q.useMemo(()=>{if(!(l!=null&&l.data))return[];const r=t=>!t||typeof t!="string"?"":t.replace(/<[^>]+>/g,"").replace(/\s+/g," ").trim();return l.data.map(t=>{const u=Array.isArray(t.media)?t.media:[],b=new Set((Array.isArray(t.images)?t.images:[]).filter(Boolean));u.filter(s=>(s==null?void 0:s.type)==="image").forEach(s=>{const N=s.url||s.path;N&&b.add(N)});const M=Array.from(b),d=[],p=new Set,v=s=>{if(!s)return;if(typeof s=="string"){const k=s,W=`${k}-${d.length}`;if(p.has(W))return;p.add(W),d.push({id:W,type:"video",src:k,url:k,path:k,is_external:k.startsWith("http"),is_embed:!1});return}const N=s.id||`${s.url||s.path}-${d.length}`;p.has(N)||(p.add(N),d.push({...s,src:s.embed_url||s.url||s.path||null}))};Array.isArray(t.videos)&&t.videos.forEach(v),u.filter(s=>(s==null?void 0:s.type)==="video").forEach(v);const z=d.map(s=>s.src).filter(Boolean),V=M.filter(s=>!Y(s)),B=t.excerpt&&t.excerpt.trim().length>0?t.excerpt:r(t.body||"").slice(0,220),T=B?`${B}${B.length>=220?"…":""}`:"";return{...t,galleryImages:V,galleryVideos:z,videoItems:d,preparedExcerpt:T,images:t.images||V}})},[l]),i=(r={})=>{const t={...m,type:o,...r};D.get(route("news.index"),t,{preserveScroll:!0,preserveState:!0})},y=r=>{r.preventDefault(),i()},c=()=>{f("search",""),f("tag",""),D.get(route("news.index"),{search:"",tag:"",type:o},{preserveScroll:!0,preserveState:!0,onFinish:()=>{var r;return(r=window==null?void 0:window.scrollTo)==null?void 0:r.call(window,{top:0,behavior:"smooth"})}})};((E=l==null?void 0:l.meta)==null?void 0:E.total)??(l==null?void 0:l.total)??j.length;const _=m.tag||"",C=r=>{const t=_===r?"":r;f("tag",t),i({tag:t})},A=r=>{r!==o&&D.get(route("news.index"),{...m,type:r},{preserveScroll:!0,preserveState:!0})},$=()=>e.jsxs("div",{className:"bg-gradient-to-b from-white via-blue-50/30 to-blue-100/20 py-16 sm:py-20 lg:py-24",children:[e.jsx(P,{title:h.title||n("news.meta.title","Новости"),meta:[{name:"description",content:h.description||n("news.meta.description","Последние новости Национального научного центра развития здравоохранения.")}]}),e.jsx("div",{className:"container mx-auto max-w-6xl px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden rounded-3xl border border-blue-100 bg-gradient-to-br from-blue-50 via-white to-blue-100 p-10 shadow-lg",children:e.jsxs("div",{className:"flex flex-col gap-10 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"max-w-3xl",children:[e.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-blue-600",children:a?"СМИ О НАС":"НОВОСТИ"}),e.jsx("h1",{className:"mt-4 text-4xl font-extrabold leading-tight text-gray-900 lg:text-5xl",children:h.subtitle||(a?"Публикации в ведущих СМИ":"Актуальные события ННЦРЗ")}),e.jsx("p",{className:"mt-5 text-lg leading-relaxed text-gray-600",children:h.description||(a?"Читайте статьи и интервью о деятельности центра из авторитетных источников.":"Следите за обновлениями и важными новостями Национального научного центра развития здравоохранения.")}),e.jsx("form",{className:"mt-8 w-full rounded-2xl border border-white/80 bg-white/70 p-6 shadow-inner backdrop-blur",onSubmit:y,children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:gap-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.2em] text-gray-500",children:a?"Поиск по источнику или заголовку":n("news.filters.search.label","Поиск по ключевому слову")}),e.jsx("input",{type:"text",value:m.search,onChange:r=>f("search",r.target.value),placeholder:a?"Например: Forbes, Kazinform, интервью":n("news.filters.search.placeholder","Например: медицина будущего"),className:"mt-2 w-full rounded-xl border border-blue-100 px-4 py-3 text-base shadow-sm transition focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[e.jsx("button",{type:"submit",disabled:g,className:"inline-flex items-center justify-center rounded-xl bg-blue-600 px-6 py-3 text-sm font-semibold text-white shadow transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-60",children:g?n("news.filters.search.processing","Поиск..."):n("news.filters.search.cta","Найти")}),e.jsx("button",{type:"button",onClick:c,className:"inline-flex items-center justify-center rounded-xl border border-blue-100 bg-white px-5 py-3 text-sm font-semibold text-blue-600 transition hover:border-blue-200 hover:bg-blue-50",children:n("news.filters.search.reset","Сбросить")})]})]})}),L.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-gray-500",children:a?"Упоминания":"Теги новостей"}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:L.map(r=>{const t=_===r;return e.jsxs("button",{type:"button",onClick:()=>C(r),className:`inline-flex items-center rounded-full border px-4 py-2 text-sm font-medium transition ${t?"border-blue-600 bg-blue-600 text-white shadow":"border-transparent bg-white/70 text-gray-700 hover:border-blue-200 hover:text-blue-600"}`,children:["#",r]},r)})})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 md:items-end",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Разделы"}),e.jsxs("div",{className:"relative flex w-full max-w-xs items-center rounded-full border border-blue-100 bg-white/90 p-1 shadow-inner backdrop-blur",children:[e.jsx("span",{className:`pointer-events-none absolute inset-y-0 left-0 w-1/2 rounded-full bg-blue-600 shadow transition-transform duration-300 ease-out ${o==="media"?"translate-x-full":""}`}),e.jsx("button",{type:"button",onClick:()=>A("news"),className:`relative z-10 flex-1 rounded-full px-4 py-2 text-sm font-semibold transition ${o==="news"?"text-white":"text-gray-600 hover:text-blue-600"}`,children:"Новости"}),e.jsx("button",{type:"button",onClick:()=>A("media"),className:`relative z-10 flex-1 rounded-full px-4 py-2 text-sm font-semibold transition ${o==="media"?"text-white":"text-gray-600 hover:text-blue-600"}`,children:"СМИ о нас"})]})]})]})})})]});return e.jsxs(R,{renderCustomHero:$,children:[j.length===0?e.jsxs("div",{className:"rounded-2xl border border-dashed border-gray-200 bg-white py-16 text-center shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:n("news.empty.title","Новости не найдены")}),e.jsx("p",{className:"mt-2 text-gray-600",children:a?"Мы пока не добавили материалы СМИ. Проверьте позже или предложите публикацию.":n("news.empty.description","Попробуйте изменить поисковый запрос или зайдите позже — мы уже готовим новые публикации.")})]}):e.jsx("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 xl:grid-cols-3",children:j.map(r=>a&&r.external_url?e.jsx(J,{item:r},r.id):e.jsx("article",{className:"group flex h-full flex-col overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm transition hover:-translate-y-1 hover:shadow-lg",children:e.jsxs(I,{href:route("news.show",r.slug),className:"block",children:[e.jsxs("div",{className:"relative h-56 overflow-hidden bg-gray-100",children:[r.videoItems&&r.videoItems.length>0?(()=>{const t=r.videoItems[0],u=t.embed_url||t.src||t.url||t.path;return t.is_external&&t.is_embed&&u?e.jsx("iframe",{src:u,title:r.title,className:"h-full w-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):e.jsx("video",{src:u,poster:t.thumbnail||void 0,controls:!0,className:"h-full w-full object-cover",children:"Ваш браузер не поддерживает воспроизведение видео."})})():r.galleryImages.length>1?e.jsx(U,{images:r.galleryImages,className:"h-56",height:"224px",showDots:!0,showCounter:!1,autoPlay:!0,interval:4e3}):r.galleryImages.length===1?e.jsx("img",{src:r.galleryImages[0],alt:r.title,className:"h-full w-full object-cover"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center text-gray-300",children:e.jsx("svg",{className:"h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("div",{className:"absolute left-4 top-4 rounded-full bg-white/95 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-gray-700 shadow-sm",children:r.published_at_formatted||"—"})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 transition group-hover:text-blue-600",children:r.title}),r.preparedExcerpt&&e.jsx("p",{className:"flex-1 text-sm leading-relaxed text-gray-600 line-clamp-4",children:r.preparedExcerpt}),e.jsxs("span",{className:"inline-flex items-center text-sm font-semibold text-blue-600",children:[n("news.card.read_more","Читать далее"),e.jsx("svg",{className:"ml-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})},r.id))}),Array.isArray(l==null?void 0:l.links)&&l.links.length>1&&e.jsx("div",{className:"mt-12 flex justify-center",children:e.jsx("nav",{className:"flex flex-wrap items-center gap-2",children:l.links.map((r,t)=>{const u=r.url===null,b=String(r.label||"").replace(/<[^>]+>/g,"").replace(/&laquo;|&raquo;/g,"").trim(),M=b.toLowerCase(),d=["previous","предыдущая","pagination.previous"].includes(M),p=["next","следующая","pagination.next"].includes(M),v=["...","…"].includes(b);return e.jsxs(I,{href:r.url||"#",className:`rounded-full px-4 py-2 text-sm font-medium transition ${r.active?"bg-blue-600 text-white shadow":u?"bg-gray-100 text-gray-400":"bg-white text-gray-700 hover:bg-blue-50"}`,preserveScroll:!0,preserveState:!0,children:[d&&e.jsx("span",{className:"flex items-center justify-center",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),p&&e.jsx("span",{className:"flex items-center justify-center",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),!d&&!p&&!v&&e.jsx("span",{className:"flex items-center justify-center",children:b}),v&&e.jsx("span",{className:"flex items-center justify-center",children:"…"})]},`${r.label}-${t}`)})})})]})}export{se as default};
