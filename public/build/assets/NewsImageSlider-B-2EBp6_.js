import{r as l,R as A,j as r}from"./app-DwHi6qij.js";function E({images:i=[],className:c="",height:d="160px",showDots:f=!0,showCounter:D=!1,autoPlay:I=!0,interval:M=3e3}){const[a,g]=l.useState(0),[N,u]=l.useState(new Set),[p,w]=l.useState(new Set),[y,x]=l.useState(!0),t=A.useMemo(()=>!Array.isArray(i)||i.length===0?[]:i.filter(e=>{if(!e||typeof e!="string")return!1;const s=e.trim();if(s==="")return!1;const n=[".jpg",".jpeg",".png",".gif",".webp",".svg"].some(b=>s.toLowerCase().includes(b));return!n&&(s.startsWith("http")||s.startsWith("/"))?!0:n}),[i]),h=l.useCallback(e=>{u(s=>{const o=new Set(s);return o.add(e),o.size>=t.length&&x(!1),o})},[t.length]),m=l.useCallback((e,s)=>{console.error("Ошибка загрузки изображения:",s),w(o=>{const n=new Set(o);return n.add(e),n}),u(o=>{const n=new Set(o);return n.add(e),n.size>=t.length&&x(!1),n})},[t.length]),j=l.useCallback(()=>["/img/placeholder.jpg","/storage/news/placeholder.jpg","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik04MCAxMDBDODAgODkuNTQ0IDg4LjU0NCA4MSA5OSA4MUgxMDFDMTExLjQ1NiA4MSAxMjAgODkuNTQ0IDEyMCAxMDBWMTEwQzEyMCAxMjAuNDU2IDExMS40NTYgMTI5IDEwMSAxMjlIOTlDODguNTQ0IDEyOSA4MCAxMjAuNDU2IDgwIDExMFYxMDBaIiBmaWxsPSIjOUI5QkEwIi8+CjxwYXRoIGQ9Ik0xMDAgMTQwQzExMC40NTYgMTQwIDEyMCAxMzAuNDU2IDEyMCAxMjBIMTgwQzE4MCAxMzAuNDU2IDE3MC40NTYgMTQwIDE2MCAxNDBIMTAwWiIgZmlsbD0iIzlCOUJBMCIvPgo8L3N2Zz4K"][0],[]);l.useEffect(()=>{u(new Set),w(new Set),x(t.length>0),g(0)},[t]),l.useEffect(()=>{if(!I||t.length<=1)return;const e=setInterval(()=>{g(s=>(s+1)%t.length)},M);return()=>clearInterval(e)},[t.length,I,M]);const v=l.useCallback(e=>{g(e)},[]);return!t||t.length===0?r.jsx("div",{className:`relative overflow-hidden rounded-lg bg-gray-200 flex items-center justify-center ${c}`,style:{height:d},children:r.jsxs("div",{className:"text-gray-400 text-center",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("p",{className:"text-sm",children:"Нет изображений"})]})}):t.length===1?r.jsx("div",{className:`relative overflow-hidden rounded-lg ${c}`,style:{height:d},children:r.jsx("img",{src:t[0],alt:"Изображение новости",className:"w-full h-full object-cover",onLoad:()=>h(0),onError:e=>{m(0,t[0]),e.target.onerror=null,e.target.src=j()}})}):r.jsxs("div",{className:`relative overflow-hidden rounded-lg ${c}`,style:{height:d},children:[r.jsxs("div",{className:"relative w-full h-full",children:[r.jsx("img",{src:t[a],alt:`Изображение новости ${a+1}`,className:`w-full h-full object-cover transition-opacity duration-500 ${N.has(a)?"opacity-100":"opacity-0"}`,onLoad:()=>h(a),onError:e=>{m(a,t[a]),e.target.onerror=null,e.target.src=j()}}),t.map((e,s)=>s!==a&&r.jsx("img",{src:e,alt:"",className:"hidden",onLoad:()=>h(s),onError:()=>m(s,e)},s)),p.has(a)&&r.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx("svg",{className:"w-6 h-6 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.314 16.5c-.77.833.192 2.5 1.732 2.5z"})}),r.jsx("p",{className:"text-xs",children:"Ошибка загрузки"})]})}),f&&t.length>1&&r.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1 z-10",children:t.map((e,s)=>r.jsx("button",{onClick:()=>v(s),className:`w-2 h-2 rounded-full transition-all duration-300 ${s===a?"bg-white shadow-sm":"bg-white bg-opacity-50 hover:bg-opacity-75"}`,"aria-label":`Перейти к изображению ${s+1}`},s))})]}),D&&t.length>1&&r.jsxs("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs z-10",children:[a+1," / ",t.length]})]})}export{E as N};
