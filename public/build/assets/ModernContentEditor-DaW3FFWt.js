import{r as o,j as e}from"./app-CCdE7iSg.js";function k({value:u="",onChange:c,placeholder:x="Начните писать...",className:f="",minHeight:p="300px"}){const r=o.useRef(null),[b,v]=o.useState(!1),[g,j]=o.useState(new Set);o.useEffect(()=>{r.current&&r.current.innerHTML!==u&&(r.current.innerHTML=u)},[u]);const a=o.useCallback(()=>{const t=new Set;document.queryCommandState("bold")&&t.add("bold"),document.queryCommandState("italic")&&t.add("italic"),document.queryCommandState("underline")&&t.add("underline"),document.queryCommandState("insertOrderedList")&&t.add("ol"),document.queryCommandState("insertUnorderedList")&&t.add("ul");const i=window.getSelection();if(i.rangeCount>0){let n=i.getRangeAt(0).commonAncestorContainer;for(n.nodeType===Node.TEXT_NODE&&(n=n.parentNode);n&&n!==r.current;){const m=n.tagName;m==="H1"?t.add("h1"):m==="H2"?t.add("h2"):m==="H3"&&t.add("h3"),n=n.parentNode}}j(t)},[]),l=o.useCallback((t,i=null)=>{var d;document.execCommand(t,!1,i),c&&r.current&&c(r.current.innerHTML),setTimeout(a,10),(d=r.current)==null||d.focus()},[c,a]),y=o.useCallback(()=>{c&&r.current&&c(r.current.innerHTML),a()},[c,a]),h=o.useCallback(()=>{document.activeElement===r.current&&a()},[a]),H=o.useCallback(t=>{if(t.ctrlKey||t.metaKey)switch(t.key){case"b":t.preventDefault(),l("bold");break;case"i":t.preventDefault(),l("italic");break;case"u":t.preventDefault(),l("underline");break}},[l]);o.useEffect(()=>(document.addEventListener("selectionchange",h),()=>{document.removeEventListener("selectionchange",h)}),[h]);const s=({command:t,icon:i,title:d,format:n,value:m=null})=>{const N=g.has(n);return e.jsx("button",{type:"button",onClick:()=>l(t,m),className:`p-2 rounded-md transition-colors text-sm font-medium ${N?"bg-blue-100 text-blue-700 border border-blue-300":"text-gray-600 hover:text-gray-900 hover:bg-gray-100 border border-transparent"}`,title:d,children:i})};return e.jsxs("div",{className:`border border-gray-300 rounded-lg overflow-hidden ${f} ${b?"ring-2 ring-blue-500 border-blue-500":""}`,children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 p-2",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1 mr-2 pr-2 border-r border-gray-300",children:[e.jsx(s,{command:"formatBlock",value:"h1",format:"h1",title:"Заголовок 1",icon:e.jsx("span",{className:"font-bold",children:"H1"})}),e.jsx(s,{command:"formatBlock",value:"h2",format:"h2",title:"Заголовок 2",icon:e.jsx("span",{className:"font-bold",children:"H2"})}),e.jsx(s,{command:"formatBlock",value:"h3",format:"h3",title:"Заголовок 3",icon:e.jsx("span",{className:"font-bold",children:"H3"})})]}),e.jsxs("div",{className:"flex items-center gap-1 mr-2 pr-2 border-r border-gray-300",children:[e.jsx(s,{command:"bold",format:"bold",title:"Жирный (Ctrl+B)",icon:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"})})}),e.jsx(s,{command:"italic",format:"italic",title:"Курсив (Ctrl+I)",icon:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"})})}),e.jsx(s,{command:"underline",format:"underline",title:"Подчеркивание (Ctrl+U)",icon:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"})})})]}),e.jsxs("div",{className:"flex items-center gap-1 mr-2 pr-2 border-r border-gray-300",children:[e.jsx(s,{command:"insertUnorderedList",format:"ul",title:"Маркированный список",icon:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"})})}),e.jsx(s,{command:"insertOrderedList",format:"ol",title:"Нумерованный список",icon:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"})})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>l("createLink",prompt("Введите URL:")),className:"p-2 rounded-md transition-colors text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100",title:"Добавить ссылку",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),e.jsx("button",{type:"button",onClick:()=>l("removeFormat"),className:"p-2 rounded-md transition-colors text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100",title:"Убрать форматирование",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]})}),e.jsx("div",{ref:r,contentEditable:!0,onInput:y,onFocus:()=>v(!0),onBlur:()=>v(!1),onKeyDown:H,onMouseUp:a,className:"p-4 modern-editor-content max-w-none focus:outline-none",style:{minHeight:p},"data-placeholder":x,suppressContentEditableWarning:!0})]})}export{k as M};
