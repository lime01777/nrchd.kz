import{q as p,r as v,j as e,Y as N,y as c,a as h}from"./app-JquF6hsM.js";import{A as f}from"./AdminLayout-BIIL5Q9y.js";import"./transition-CH02pxkD.js";import"./use-is-mounted-BwH46NDD.js";function w({applications:r,users:b,stats:d,categoryStats:n,categories:i,statuses:g,filters:u}){const{flash:o={}}=p().props,[t,a]=v.useState(u),m=()=>{c.get(route("admin.contact-applications.index"),t,{preserveState:!0,preserveScroll:!0})},j=()=>{const s={status:"all",category:"all",assigned_to:"",search:""};a(s),c.get(route("admin.contact-applications.index"),s)},y=s=>{const l={blue:"bg-blue-100 text-blue-800",yellow:"bg-yellow-100 text-yellow-800",green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",gray:"bg-gray-100 text-gray-800"};return l[s]||l.gray},x=s=>{const l={general:"#6366f1",tech_competence:"#8b5cf6",medical_tourism:"#10b981",medical_accreditation:"#f59e0b",health_rate:"#3b82f6",clinics:"#ec4899",other:"#6b7280"};return l[s]||l.other};return e.jsxs(e.Fragment,{children:[e.jsx(N,{title:"Заявки обратной связи"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Всего"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:d.total})]}),e.jsxs("div",{className:"bg-blue-50 overflow-hidden shadow-sm sm:rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-blue-600",children:"Новые"}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:d.new})]}),e.jsxs("div",{className:"bg-yellow-50 overflow-hidden shadow-sm sm:rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-yellow-600",children:"В работе"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:d.in_progress})]}),e.jsxs("div",{className:"bg-green-50 overflow-hidden shadow-sm sm:rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-green-600",children:"Решены"}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:d.resolved})]})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Статистика по направлениям и формам"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:Object.entries(i).map(([s,l])=>e.jsxs("button",{onClick:()=>{a({...t,category:s}),c.get(route("admin.contact-applications.index"),{...t,category:s},{preserveState:!0,preserveScroll:!0})},className:`border-2 rounded-lg p-3 text-left transition-all hover:shadow-md ${t.category===s?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1 line-clamp-2",children:l}),e.jsx("div",{className:`text-2xl font-bold ${t.category===s?"text-blue-600":"text-gray-900"}`,children:n[s]||0})]},s))}),t.category!=="all"&&e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>{a({...t,category:"all"}),c.get(route("admin.contact-applications.index"),{...t,category:"all"},{preserveState:!0,preserveScroll:!0})},className:"text-sm text-blue-600 hover:text-blue-800",children:"✕ Сбросить фильтр по категории"})})]}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 bg-white border-b border-gray-200",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Заявки обратной связи"})}),o&&o.success&&e.jsx("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4",children:o.success}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Поиск"}),e.jsx("input",{type:"text",placeholder:"Имя, email, телефон...",className:"w-full px-4 py-2 border rounded-md",value:t.search,onChange:s=>a({...t,search:s.target.value}),onKeyPress:s=>s.key==="Enter"&&m()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Направление/Форма"}),e.jsxs("select",{className:"w-full px-4 py-2 border rounded-md",value:t.category,onChange:s=>a({...t,category:s.target.value}),children:[e.jsx("option",{value:"all",children:"Все направления"}),Object.entries(i).map(([s,l])=>e.jsxs("option",{value:s,children:[l," (",n[s]||0,")"]},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Статус"}),e.jsxs("select",{className:"w-full px-4 py-2 border rounded-md",value:t.status,onChange:s=>a({...t,status:s.target.value}),children:[e.jsx("option",{value:"all",children:"Все статусы"}),Object.entries(g).map(([s,l])=>e.jsx("option",{value:s,children:l},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Назначена"}),e.jsxs("select",{className:"w-full px-4 py-2 border rounded-md",value:t.assigned_to,onChange:s=>a({...t,assigned_to:s.target.value}),children:[e.jsx("option",{value:"",children:"Все пользователи"}),b.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Применить"}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Сбросить"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"py-3 px-4 border-b text-left font-semibold text-gray-700",children:"ID"}),e.jsx("th",{className:"py-3 px-4 border-b text-left font-semibold text-gray-700",children:"Направление"}),e.jsx("th",{className:"py-3 px-4 border-b text-left font-semibold text-gray-700",children:"Заявитель"}),e.jsx("th",{className:"py-3 px-4 border-b text-left font-semibold text-gray-700",children:"Контакты"}),e.jsx("th",{className:"py-3 px-4 border-b text-left font-semibold text-gray-700",children:"Сообщение"}),e.jsx("th",{className:"py-3 px-4 border-b text-left font-semibold text-gray-700",children:"Статус"}),e.jsx("th",{className:"py-3 px-4 border-b text-left font-semibold text-gray-700",children:"Дата"}),e.jsx("th",{className:"py-3 px-4 border-b text-left font-semibold text-gray-700",children:"Действия"})]})}),e.jsx("tbody",{children:r.data.length>0?r.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 border-l-4",style:{borderLeftColor:x(s.category)},children:[e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsxs("span",{className:"font-semibold text-gray-700",children:["#",s.id]})}),e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsx("span",{className:"text-xs font-medium px-3 py-1.5 rounded-full",style:{backgroundColor:x(s.category)+"20",color:x(s.category)},children:s.category_label})}),e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsx("div",{className:"font-medium text-gray-900",children:s.name})}),e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("div",{children:s.email}),e.jsx("div",{children:s.phone})]})}),e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsxs("div",{className:"text-sm text-gray-600 max-w-xs truncate",children:[s.subject&&e.jsx("div",{className:"font-medium",children:s.subject}),s.message]})}),e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y(s.status_color)}`,children:s.status_label})}),e.jsx("td",{className:"py-3 px-4 border-b text-sm text-gray-600",children:s.created_at}),e.jsx("td",{className:"py-3 px-4 border-b",children:e.jsx(h,{href:route("admin.contact-applications.show",s.id),className:"text-indigo-600 hover:text-indigo-900",children:"Подробнее"})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"py-8 text-center text-gray-500",children:"Заявок не найдено"})})})]})}),r.links&&r.links.length>3&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("nav",{className:"flex space-x-2",children:r.links.map((s,l)=>e.jsx(h,{href:s.url||"#",className:`px-3 py-2 border rounded-md ${s.active?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"} ${s.url?"":"cursor-not-allowed opacity-50"}`,dangerouslySetInnerHTML:{__html:s.label},disabled:!s.url},l))})})]})})]})})]})}w.layout=r=>e.jsx(f,{children:r});export{w as default};
