import{r as n,W as C,j as e,Y as k,a as S}from"./app-JJnr8YSF.js";import{A as T}from"./AdminLayout-CuZZIOFa.js";import"./transition-CDEwSAK-.js";import"./use-is-mounted-ADJvFua_.js";function R(){const[b,g]=n.useState(!1),[d,N]=n.useState(""),[c,h]=n.useState(""),[u,f]=n.useState(""),[m,y]=n.useState(""),{data:r,setData:a,post:_,processing:j,errors:s}=C({title:"",slug:"",excerpt:"",body:[],functional_responsibilities:[],qualification_requirements:[],application_procedure:[],city:"",department:"",employment_type:"",status:"published",published_at:new Date().toISOString().substr(0,10)}),v=t=>{const x=t.split(`
`).filter(o=>o.trim()!=="").map(o=>({type:"paragraph",data:{text:o.trim()}}));a("body",x),N(t)},l=(t,i,x)=>{const F=t.split(`
`).filter(p=>p.trim()!=="").map(p=>({type:"paragraph",data:{text:p.trim()}}));a(i,F),x(t)},w=["Полная занятость","Частичная занятость","Проектная работа","Стажировка","Удаленная работа"],q=t=>{t.preventDefault(),g(!0);try{r.body.length===0&&d.trim()!==""&&v(d),r.functional_responsibilities.length===0&&c.trim()!==""&&l(c,"functional_responsibilities",h),r.qualification_requirements.length===0&&u.trim()!==""&&l(u,"qualification_requirements",f),r.application_procedure.length===0&&m.trim()!==""&&l(m,"application_procedure",y);const i=r.status==="published"&&!r.published_at?new Date().toISOString().substr(0,10):r.published_at;_(route("vacancies.store"),{...r,published_at:i})}catch(i){console.error("Ошибка при отправке формы:",i),g(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"Создание вакансии"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 bg-white border-b border-gray-200",children:[e.jsxs("div",{className:"mb-6 flex justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Создание вакансии"}),e.jsx(S,{href:route("vacancies.index"),className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400",children:"Назад к списку"})]}),e.jsxs("form",{onSubmit:q,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Название *"}),e.jsx("input",{type:"text",id:"title",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:r.title,onChange:t=>a("title",t.target.value),required:!0}),s.title&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.title})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 mb-1",children:"URL slug (опционально)"}),e.jsx("input",{type:"text",id:"slug",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:r.slug,onChange:t=>a("slug",t.target.value),placeholder:"Оставьте пустым для автоматической генерации"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Если оставить пустым, slug будет сгенерирован автоматически из названия"}),s.slug&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.slug})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"excerpt",className:"block text-sm font-medium text-gray-700 mb-1",children:"Краткое описание"}),e.jsx("textarea",{id:"excerpt",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",rows:"3",value:r.excerpt||"",onChange:t=>a("excerpt",t.target.value)}),s.excerpt&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.excerpt})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"Город *"}),e.jsx("input",{type:"text",id:"city",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:r.city,onChange:t=>a("city",t.target.value),required:!0}),s.city&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.city})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-1",children:"Департамент *"}),e.jsx("input",{type:"text",id:"department",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:r.department,onChange:t=>a("department",t.target.value),required:!0}),s.department&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.department})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"employment_type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Тип занятости *"}),e.jsxs("select",{id:"employment_type",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:r.employment_type,onChange:t=>a("employment_type",t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Выберите тип занятости"}),w.map((t,i)=>e.jsx("option",{value:t,children:t},i))]}),s.employment_type&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.employment_type})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Статус *"}),e.jsxs("select",{id:"status",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:r.status,onChange:t=>a("status",t.target.value),required:!0,children:[e.jsx("option",{value:"draft",children:"Черновик"}),e.jsx("option",{value:"published",children:"Опубликовано"})]}),s.status&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.status})]})]}),r.status==="published"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"published_at",className:"block text-sm font-medium text-gray-700 mb-1",children:"Дата публикации"}),e.jsx("input",{type:"date",id:"published_at",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:r.published_at,onChange:t=>a("published_at",t.target.value)}),s.published_at&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.published_at})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"body",className:"block text-sm font-medium text-gray-700 mb-1",children:"Описание вакансии *"}),e.jsx("textarea",{id:"body",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:d,onChange:t=>v(t.target.value),rows:"10",placeholder:"Введите описание вакансии. Каждый абзац будет отображаться отдельно.",required:!0}),s.body&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.body})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"functional_responsibilities",className:"block text-sm font-medium text-gray-700 mb-1",children:"Функциональные обязанности"}),e.jsx("textarea",{id:"functional_responsibilities",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:c,onChange:t=>l(t.target.value,"functional_responsibilities",h),rows:"8",placeholder:"Введите функциональные обязанности. Каждый пункт с новой строки."}),s.functional_responsibilities&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.functional_responsibilities})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"qualification_requirements",className:"block text-sm font-medium text-gray-700 mb-1",children:"Квалификационные требования"}),e.jsx("textarea",{id:"qualification_requirements",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:u,onChange:t=>l(t.target.value,"qualification_requirements",f),rows:"8",placeholder:"Введите квалификационные требования. Каждый пункт с новой строки."}),s.qualification_requirements&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.qualification_requirements})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"application_procedure",className:"block text-sm font-medium text-gray-700 mb-1",children:"Порядок подачи заявки"}),e.jsx("textarea",{id:"application_procedure",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",value:m,onChange:t=>l(t.target.value,"application_procedure",y),rows:"6",placeholder:"Введите порядок подачи заявки. Каждый шаг с новой строки."}),s.application_procedure&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:s.application_procedure})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end",children:[e.jsx("button",{type:"button",className:"mr-3 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",onClick:()=>window.history.back(),children:"Отмена"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:j,children:j?"Сохранение...":"Сохранить вакансию"})]})]})]})})})})]})}R.layout=b=>e.jsx(T,{title:"Создание вакансии",children:b});export{R as default};
