import{r as n,R as L,j as e,a as S,Y as E}from"./app-C4SdFf0v.js";import{N as W}from"./News_chlank-DkN5w1yS.js";import{i as z}from"./mediaUtils-oRnee45q.js";import"./NewsSliderWithMain-DKMBNS2h.js";import"./SafeImage-MRQmUMVv.js";import"./TranslationService-BIPkk7bE.js";function v({images:r=[],className:o="",height:l="160px",showDots:c=!0,showCounter:g=!1,autoPlay:m=!0,interval:x=3e3}){const[d,j]=n.useState(0),[D,f]=n.useState(new Set),[k,y]=n.useState(new Set),[B,N]=n.useState(!0),b=n.useCallback(t=>{if(!t||typeof t!="string")return t;const s=t.trim();return s.startsWith("http")||s.startsWith("/storage/")||s.startsWith("/img/")||s.startsWith("/")?s:`/storage/${s}`},[]),a=L.useMemo(()=>!Array.isArray(r)||r.length===0?[]:r.filter(s=>{if(!s||typeof s!="string")return!1;const i=s.trim();if(i==="")return!1;const M=[".jpg",".jpeg",".png",".gif",".webp",".svg"].some(A=>i.toLowerCase().includes(A));return!M&&(i.startsWith("http")||i.startsWith("/"))?!0:M}).map(b),[r,b]),p=n.useCallback(t=>{f(s=>{const i=new Set(s);return i.add(t),i.size>=a.length&&N(!1),i})},[a.length]),w=n.useCallback((t,s)=>{console.error("Ошибка загрузки изображения:",s),y(i=>{const h=new Set(i);return h.add(t),h}),f(i=>{const h=new Set(i);return h.add(t),h.size>=a.length&&N(!1),h})},[a.length]),I=n.useCallback(()=>["/img/news/placeholder.jpg","/img/placeholder.jpg","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik04MCAxMDBDODAgODkuNTQ0IDg4LjU0NCA4MSA5OSA4MUgxMDFDMTExLjQ1NiA4MSAxMjAgODkuNTQ0IDEyMCAxMDBWMTEwQzEyMCAxMjAuNDU2IDExMS40NTYgMTI5IDEwMSAxMjlIOTlDODguNTQ0IDEyOSA4MCAxMjAuNDU2IDgwIDExMFYxMDBaIiBmaWxsPSIjOUI5QkEwIi8+CjxwYXRoIGQ9Ik0xMDAgMTQwQzExMC40NTYgMTQwIDEyMCAxMzAuNDU2IDEyMCAxMjBIMTgwQzE4MCAxMzAuNDU2IDE3MC40NTYgMTQwIDE2MCAxNDBIMTAwWiIgZmlsbD0iIzlCOUJBMCIvPgo8L3N2Zz4K"][0],[]);n.useEffect(()=>{f(new Set),y(new Set),N(a.length>0),j(0)},[a]),n.useEffect(()=>{if(!m||a.length<=1)return;const t=setInterval(()=>{j(s=>(s+1)%a.length)},x);return()=>clearInterval(t)},[a.length,m,x]);const C=n.useCallback(t=>{j(t)},[]);return!a||a.length===0?e.jsx("div",{className:`relative overflow-hidden rounded-lg bg-gray-200 flex items-center justify-center ${o}`,style:{height:l},children:e.jsxs("div",{className:"text-gray-400 text-center",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"text-sm",children:"Нет изображений"})]})}):a.length===1?e.jsx("div",{className:`relative overflow-hidden rounded-lg ${o}`,style:{height:l},children:e.jsx("img",{src:a[0],alt:"Изображение новости",className:"w-full h-full object-cover",onLoad:()=>p(0),onError:t=>{w(0,a[0]),t.target.onerror=null,t.target.src=I()}})}):e.jsxs("div",{className:`relative overflow-hidden rounded-lg ${o}`,style:{height:l},children:[e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:a[d],alt:`Изображение новости ${d+1}`,className:`w-full h-full object-cover transition-opacity duration-500 ${D.has(d)?"opacity-100":"opacity-0"}`,onLoad:()=>p(d),onError:t=>{w(d,a[d]),t.target.onerror=null,t.target.src=I()}}),a.map((t,s)=>s!==d&&e.jsx("img",{src:t,alt:"",className:"hidden",onLoad:()=>p(s),onError:()=>w(s,t)},s)),k.has(d)&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("svg",{className:"w-6 h-6 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.314 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("p",{className:"text-xs",children:"Ошибка загрузки"})]})}),c&&a.length>1&&e.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1 z-10",children:a.map((t,s)=>e.jsx("button",{onClick:()=>C(s),className:`w-2 h-2 rounded-full transition-all duration-300 ${s===d?"bg-white shadow-sm":"bg-white bg-opacity-50 hover:bg-opacity-75"}`,"aria-label":`Перейти к изображению ${s+1}`},s))})]}),g&&a.length>1&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs z-10",children:[d+1," / ",a.length]})]})}function u({images:r=[],image:o=null,className:l="",height:c="160px",alt:g="Изображение новости"}){const m=r&&r.length>0?r[0]:o||null;return m?e.jsxs("div",{className:`relative overflow-hidden rounded-lg ${l}`,style:{height:c},children:[e.jsx("img",{src:m,alt:g,className:"w-full h-full object-cover",onError:x=>{console.error("Ошибка загрузки изображения:",m),x.target.onerror=null,x.target.src="/img/placeholder.jpg"}}),r&&r.length>1&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs",children:["+",r.length-1]})]}):e.jsx("div",{className:`relative overflow-hidden rounded-lg bg-gray-200 flex items-center justify-center ${l}`,style:{height:c},children:e.jsxs("div",{className:"text-gray-400 text-center",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"text-sm",children:"Нет изображения"})]})})}function T({date:r,description:o,slug:l,image:c,images:g=[]}){const m=g.filter(x=>typeof x=="string"?!z(x):!0);return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-all duration-300 h-full",children:[e.jsx("div",{className:"h-40 overflow-hidden rounded-t-lg",children:e.jsx(u,{images:m,image:c,className:"h-40",height:"160px",alt:"Изображение новости"})}),e.jsx("div",{className:"flex flex-col p-6 h-full",children:e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-2",children:r}),e.jsx("h2",{className:"text-gray-900 text-lg font-medium mb-4 line-clamp-3 h-[4.5rem]",title:o,children:o}),l?e.jsxs(S,{href:route("news.show",l),className:"mt-auto text-black inline-flex items-center border-gray-300 border rounded-lg px-4 py-2 text-sm hover:bg-gray-50 transition-colors duration-200",children:["Читать новость",e.jsx("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",className:"w-4 h-4 ml-2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]}):e.jsxs("a",{className:"mt-auto text-black inline-flex items-center border-gray-300 border rounded-lg px-4 py-2 text-sm hover:bg-gray-50 transition-colors duration-200",children:["Читать новость",e.jsx("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",className:"w-4 h-4 ml-2",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]})]})})]})}function H(){const r=["/img/news/news1.jpg","/img/news/news2.jpg","/img/news/news3.jpg","/img/news/news4.jpg"],o=[{id:1,title:"Важные изменения в системе здравоохранения",description:"Новые методики и практики в системе здравоохранения Казахстана",image:"/img/news/news1.jpg",images:r,date:"2025-01-15",slug:"test-news-1"},{id:2,title:"Конференция по развитию медицинского образования",description:"Состоялась ежегодная конференция по вопросам медицинского образования",image:"/img/news/news2.jpg",images:r.slice(0,2),date:"2025-01-14",slug:"test-news-2"},{id:3,title:"Новые технологии в диагностике",description:"Внедрение современных технологий в диагностические процедуры",image:"/img/news/news3.jpg",images:[],date:"2025-01-13",slug:"test-news-3"}];return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Демонстрация слайдера новостей"}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Демонстрация слайдера новостей"}),e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Слайдер с множественными изображениями"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Слайдер (3 сек)"}),e.jsx("div",{className:"h-64",children:e.jsx(v,{images:r,className:"h-64",height:"256px",showDots:!0,showCounter:!0,autoPlay:!0,interval:3e3})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Слайдер (5 сек)"}),e.jsx("div",{className:"h-64",children:e.jsx(v,{images:r,className:"h-64",height:"256px",showDots:!0,showCounter:!0,autoPlay:!0,interval:5e3})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Без автопрокрутки"}),e.jsx("div",{className:"h-64",children:e.jsx(v,{images:r,className:"h-64",height:"256px",showDots:!0,showCounter:!0,autoPlay:!1})})]})]})]}),e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Отображение первого изображения"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Множественные изображения"}),e.jsx("div",{className:"h-64",children:e.jsx(u,{images:r,className:"h-64",height:"256px",alt:"Тестовое изображение"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Одно изображение"}),e.jsx("div",{className:"h-64",children:e.jsx(u,{images:r.slice(0,1),className:"h-64",height:"256px",alt:"Тестовое изображение"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Без изображений"}),e.jsx("div",{className:"h-64",children:e.jsx(u,{images:[],className:"h-64",height:"256px",alt:"Тестовое изображение"})})]})]})]}),e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Карточки новостей"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map((l,c)=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:c===0?"Слайдер":c===1?"Первое изображение":"Без изображений"}),c===0?e.jsx(W,{date:new Date(l.date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"}),description:l.title,slug:l.slug,image:l.image,images:l.images}):e.jsx(T,{date:new Date(l.date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"}),description:l.title,slug:l.slug,image:l.image,images:l.images})]},l.id))})]}),e.jsxs("section",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Информация о компонентах"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"NewsImageSlider"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Автоматическая прокрутка каждые 3 секунды"}),e.jsx("li",{children:"• Без стрелок управления"}),e.jsx("li",{children:"• Индикаторы (точки) для навигации"}),e.jsx("li",{children:"• Счетчик изображений (опционально)"}),e.jsx("li",{children:"• Адаптивный дизайн"}),e.jsx("li",{children:"• Обработка ошибок загрузки"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"NewsFirstImage"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Отображение первого изображения"}),e.jsx("li",{children:"• Индикатор множественных изображений"}),e.jsx("li",{children:"• Заглушка при отсутствии изображений"}),e.jsx("li",{children:"• Обработка ошибок загрузки"}),e.jsx("li",{children:"• Настраиваемая высота"})]})]})]})]})]})]})}export{H as default};
