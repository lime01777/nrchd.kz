import{q as I,W as T,r as M,j as e,a as C,Y as q,y as f}from"./app-Cple6JDE.js";import{L as z}from"./LayoutNews-COEmArXk.js";import{N as W}from"./NewsImageSlider-BDrDmilx.js";import{i as B}from"./mediaUtils-oRnee45q.js";import{t as F}from"./TranslationService-BIPkk7bE.js";import"./Footer-2lljOxbn.js";const a=(c,r="")=>{try{return F.t(c,r||c)}catch(u){return console.warn("[News/Index] Ошибка получения перевода:",u),r||c}};function U({section:c}){var k;const{news:r,filters:u={},section:L,availableTags:w=[]}=I().props,d=c||L||{type:"news",title:"Новости",subtitle:"",description:""},n=d.type||"news",o=n==="media",{data:p,setData:m,processing:y}=T({search:u.search??"",tag:u.tag??""}),b=M.useMemo(()=>{if(!(r!=null&&r.data))return[];const t=s=>!s||typeof s!="string"?"":s.replace(/<[^>]+>/g,"").replace(/\s+/g," ").trim();return r.data.map(s=>{const x=(Array.isArray(s.images)?s.images:[]).map(l=>l?typeof l=="string"?l:typeof l=="object"&&(l.url||l.path)||null:null).filter(l=>!!l&&!B(l)),h=Array.from(new Set(x)),i=s.excerpt&&s.excerpt.trim().length>0?s.excerpt:t(s.body||"").slice(0,220),g=i?`${i}${i.length>=220?"…":""}`:"";return{...s,galleryImages:h,preparedExcerpt:g}})},[r]),j=(t={})=>{const s={...p,type:n,...t};f.get(route("news.index"),s,{preserveScroll:!0,preserveState:!0})},$=t=>{t.preventDefault(),j()},A=()=>{m("search",""),m("tag",""),f.get(route("news.index"),{search:"",tag:"",type:n},{preserveScroll:!0,preserveState:!0,onFinish:()=>{var t;return(t=window==null?void 0:window.scrollTo)==null?void 0:t.call(window,{top:0,behavior:"smooth"})}})};((k=r==null?void 0:r.meta)==null?void 0:k.total)??(r==null?void 0:r.total)??b.length;const v=p.tag||"",D=t=>{const s=v===t?"":t;m("tag",s),j({tag:s})},N=t=>{t!==n&&f.get(route("news.index"),{...p,type:t},{preserveScroll:!0,preserveState:!0})},E=()=>e.jsxs("div",{className:"bg-gradient-to-b from-white via-blue-50/30 to-blue-100/20 py-16 sm:py-20 lg:py-24",children:[e.jsx(q,{title:d.title||a("news.meta.title","Новости"),meta:[{name:"description",content:d.description||a("news.meta.description","Последние новости Национального научного центра развития здравоохранения.")}]}),e.jsx("div",{className:"container mx-auto max-w-6xl px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden rounded-3xl border border-blue-100 bg-gradient-to-br from-blue-50 via-white to-blue-100 p-10 shadow-lg",children:e.jsxs("div",{className:"flex flex-col gap-10 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"max-w-3xl",children:[e.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-blue-600",children:o?"СМИ О НАС":"НОВОСТИ"}),e.jsx("h1",{className:"mt-4 text-4xl font-extrabold leading-tight text-gray-900 lg:text-5xl",children:d.subtitle||(o?"Публикации в ведущих СМИ":"Актуальные события ННЦРЗ")}),e.jsx("p",{className:"mt-5 text-lg leading-relaxed text-gray-600",children:d.description||(o?"Читайте статьи и интервью о деятельности центра из авторитетных источников.":"Следите за обновлениями и важными новостями Национального научного центра развития здравоохранения.")}),e.jsx("form",{className:"mt-8 w-full rounded-2xl border border-white/80 bg-white/70 p-6 shadow-inner backdrop-blur",onSubmit:$,children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:gap-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.2em] text-gray-500",children:o?"Поиск по источнику или заголовку":a("news.filters.search.label","Поиск по ключевому слову")}),e.jsx("input",{type:"text",value:p.search,onChange:t=>m("search",t.target.value),placeholder:o?"Например: Forbes, Kazinform, интервью":a("news.filters.search.placeholder","Например: медицина будущего"),className:"mt-2 w-full rounded-xl border border-blue-100 px-4 py-3 text-base shadow-sm transition focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[e.jsx("button",{type:"submit",disabled:y,className:"inline-flex items-center justify-center rounded-xl bg-blue-600 px-6 py-3 text-sm font-semibold text-white shadow transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-60",children:y?a("news.filters.search.processing","Поиск..."):a("news.filters.search.cta","Найти")}),e.jsx("button",{type:"button",onClick:A,className:"inline-flex items-center justify-center rounded-xl border border-blue-100 bg-white px-5 py-3 text-sm font-semibold text-blue-600 transition hover:border-blue-200 hover:bg-blue-50",children:a("news.filters.search.reset","Сбросить")})]})]})}),w.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-gray-500",children:o?"Упоминания":"Теги новостей"}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:w.map(t=>{const s=v===t;return e.jsxs("button",{type:"button",onClick:()=>D(t),className:`inline-flex items-center rounded-full border px-4 py-2 text-sm font-medium transition ${s?"border-blue-600 bg-blue-600 text-white shadow":"border-transparent bg-white/70 text-gray-700 hover:border-blue-200 hover:text-blue-600"}`,children:["#",t]},t)})})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 md:items-end",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Разделы"}),e.jsxs("div",{className:"relative flex w-full max-w-xs items-center rounded-full border border-blue-100 bg-white/90 p-1 shadow-inner backdrop-blur",children:[e.jsx("span",{className:`pointer-events-none absolute inset-y-0 left-0 w-1/2 rounded-full bg-blue-600 shadow transition-transform duration-300 ease-out ${n==="media"?"translate-x-full":""}`}),e.jsx("button",{type:"button",onClick:()=>N("news"),className:`relative z-10 flex-1 rounded-full px-4 py-2 text-sm font-semibold transition ${n==="news"?"text-white":"text-gray-600 hover:text-blue-600"}`,children:"Новости"}),e.jsx("button",{type:"button",onClick:()=>N("media"),className:`relative z-10 flex-1 rounded-full px-4 py-2 text-sm font-semibold transition ${n==="media"?"text-white":"text-gray-600 hover:text-blue-600"}`,children:"СМИ о нас"})]})]})]})})})]});return e.jsxs(z,{renderCustomHero:E,children:[b.length===0?e.jsxs("div",{className:"rounded-2xl border border-dashed border-gray-200 bg-white py-16 text-center shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:a("news.empty.title","Новости не найдены")}),e.jsx("p",{className:"mt-2 text-gray-600",children:o?"Мы пока не добавили материалы СМИ. Проверьте позже или предложите публикацию.":a("news.empty.description","Попробуйте изменить поисковый запрос или зайдите позже — мы уже готовим новые публикации.")})]}):e.jsx("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2 xl:grid-cols-3",children:b.map(t=>e.jsx("article",{className:"group flex h-full flex-col overflow-hidden rounded-2xl border border-gray-100 bg-white shadow-sm transition hover:-translate-y-1 hover:shadow-lg",children:e.jsxs(C,{href:route("news.show",t.slug),className:"block",children:[e.jsxs("div",{className:"relative h-56 overflow-hidden bg-gray-100",children:[e.jsx(W,{images:t.galleryImages,className:"h-56",height:"224px",showDots:t.galleryImages.length>1,showCounter:!1,autoPlay:t.galleryImages.length>1,interval:4e3}),e.jsx("div",{className:"absolute left-4 top-4 rounded-full bg-white/95 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-gray-700 shadow-sm",children:t.published_at_formatted||"—"})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 transition group-hover:text-blue-600",children:t.title}),t.preparedExcerpt&&e.jsx("p",{className:"flex-1 text-sm leading-relaxed text-gray-600 line-clamp-4",children:t.preparedExcerpt}),e.jsxs("span",{className:"inline-flex items-center text-sm font-semibold text-blue-600",children:[a("news.card.read_more","Читать далее"),e.jsx("svg",{className:"ml-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})},t.id))}),Array.isArray(r==null?void 0:r.links)&&r.links.length>1&&e.jsx("div",{className:"mt-12 flex justify-center",children:e.jsx("nav",{className:"flex flex-wrap items-center gap-2",children:r.links.map((t,s)=>{const S=t.url===null,x=String(t.label||"").replace(/<[^>]+>/g,"").replace(/&laquo;|&raquo;/g,"").trim(),h=x.toLowerCase(),i=["previous","предыдущая","pagination.previous"].includes(h),g=["next","следующая","pagination.next"].includes(h),l=["...","…"].includes(x);return e.jsxs(C,{href:t.url||"#",className:`rounded-full px-4 py-2 text-sm font-medium transition ${t.active?"bg-blue-600 text-white shadow":S?"bg-gray-100 text-gray-400":"bg-white text-gray-700 hover:bg-blue-50"}`,preserveScroll:!0,preserveState:!0,children:[i&&e.jsx("span",{className:"flex items-center justify-center",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),g&&e.jsx("span",{className:"flex items-center justify-center",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),!i&&!g&&!l&&e.jsx("span",{className:"flex items-center justify-center",children:x}),l&&e.jsx("span",{className:"flex items-center justify-center",children:"…"})]},`${t.label}-${s}`)})})})]})}export{U as default};
