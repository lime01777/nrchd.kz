import{r as y,j as e,a as o,y as x}from"./app-CQ3L2mPH.js";import{A as w}from"./AdminLayout-D5Z_4Lfl.js";import{N as k}from"./NewsImageSlider-P7ppFvaS.js";import"./transition-yVwsaqne.js";import"./use-is-mounted-DvvISwzN.js";function z({news:r,filters:t,section:s}){const[u,h]=y.useState((t==null?void 0:t.search)||""),[m,p]=y.useState((t==null?void 0:t.status)||""),n=(s==null?void 0:s.type)||"news",g=()=>{x.get(route("admin.news.index",{type:n}),{search:u,status:m,published_from:t==null?void 0:t.published_from,published_to:t==null?void 0:t.published_to,type:n},{preserveState:!0,replace:!0})},j=()=>{h(""),p(""),x.get(route("admin.news.index",{type:n}),{type:n},{preserveState:!0,replace:!0})},f=l=>{confirm(`Вы уверены, что хотите удалить новость "${l.title}"?`)&&x.delete(route("admin.news.destroy",{news:l.id,type:n}),{preserveScroll:!0})},v=l=>{x.patch(route("admin.news.toggle",{news:l.id,type:n}),{},{preserveScroll:!0})};return e.jsx(w,{title:s==null?void 0:s.title,children:e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:(s==null?void 0:s.title)||"Новости"}),(s==null?void 0:s.subtitle)&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s.subtitle})]}),e.jsx(o,{href:route("admin.news.create",{type:n}),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:(s==null?void 0:s.createLabel)||"Создать новость"})]}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Поиск"}),e.jsx("input",{type:"text",value:u,onChange:l=>h(l.target.value),onKeyPress:l=>l.key==="Enter"&&g(),placeholder:"Поиск по заголовку...",className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Статус"}),e.jsxs("select",{value:m,onChange:l=>p(l.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Все"}),e.jsx("option",{value:"draft",children:"Черновик"}),e.jsx("option",{value:"published",children:"Опубликовано"})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{onClick:g,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Применить"}),e.jsx("button",{onClick:j,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"Сбросить"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3",children:r.data.map(l=>{const i=Array.isArray(l.media)?l.media:[],c=i.filter(d=>(d==null?void 0:d.type)==="image").map(d=>d.url||d.path).filter(Boolean),b=i.filter(d=>(d==null?void 0:d.type)==="video"),a=b.length>0?b[0]:null,N=c.length>0;return e.jsxs("article",{className:"flex h-full flex-col overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm transition hover:-translate-y-1 hover:shadow-lg",children:[e.jsxs("div",{className:"relative h-44 w-full overflow-hidden bg-gray-100",children:[a?a.is_external&&a.is_embed&&(a.embed_url||a.url||a.path)?e.jsx("iframe",{src:a.embed_url||a.url||a.path,title:l.title,className:"h-full w-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}):e.jsx("video",{src:a.url||a.path,poster:a.thumbnail||void 0,controls:!0,muted:!0,className:"h-full w-full object-cover",children:"Ваш браузер не поддерживает воспроизведение видео."}):N?c.length>1?e.jsx(k,{images:c,className:"h-44",height:"176px",showDots:!1,showCounter:!0}):e.jsx("img",{src:c[0],alt:l.title,className:"h-full w-full object-cover"}):l.cover_thumb_url?e.jsx("img",{src:l.cover_thumb_url,alt:l.cover_image_alt||l.title,className:"h-full w-full object-cover"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center text-gray-300",children:e.jsx("svg",{className:"h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("span",{className:`absolute left-4 top-4 rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-wide ${l.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-700"}`,children:l.status==="published"?"Опубликовано":"Черновик"})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-5",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:l.title}),e.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-gray-400",children:l.slug})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"})}),l.published_at_formatted||"—"]}),e.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[e.jsxs("svg",{className:"h-4 w-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsx("span",{className:"font-semibold text-gray-800",children:l.views??0})]})]}),e.jsxs("div",{className:"mt-auto flex flex-wrap gap-2",children:[e.jsx(o,{href:route("admin.news.edit",{news:l.id,type:n}),className:"inline-flex items-center rounded-lg bg-blue-50 px-3 py-2 text-sm font-semibold text-blue-600 transition hover:bg-blue-100",children:"Редактировать"}),e.jsx("button",{type:"button",onClick:()=>v(l),className:"inline-flex items-center rounded-lg bg-yellow-50 px-3 py-2 text-sm font-semibold text-yellow-700 transition hover:bg-yellow-100",children:l.status==="published"?"В черновик":"Опубликовать"}),e.jsx("button",{type:"button",onClick:()=>f(l),className:"inline-flex items-center rounded-lg bg-red-50 px-3 py-2 text-sm font-semibold text-red-600 transition hover:bg-red-100",children:"Удалить"})]})]})]},l.id)})}),r.links&&r.links.length>3&&e.jsx("div",{className:"mt-8 rounded-2xl border border-gray-200 bg-white px-4 py-3 shadow-sm sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[r.links[0].url&&e.jsx(o,{href:r.links[0].url,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Предыдущая"}),r.links[r.links.length-1].url&&e.jsx(o,{href:r.links[r.links.length-1].url,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Следующая"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Показано ",e.jsx("span",{className:"font-medium",children:r.from})," до"," ",e.jsx("span",{className:"font-medium",children:r.to})," из"," ",e.jsx("span",{className:"font-medium",children:r.total})," результатов"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:r.links.map((l,i)=>e.jsx(o,{href:l.url||"#",className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${l.active?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"} ${l.url?"":"cursor-not-allowed opacity-50"}`,dangerouslySetInnerHTML:{__html:l.label}},i))})})]})]})})]})})})}export{z as default};
