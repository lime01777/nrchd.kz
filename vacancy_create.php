<?php

use App\Models\Vacancy;
use Illuminate\Support\Carbon;
use Illuminate\Support\Str;

// Создаем содержимое вакансии в формате Editor.js
$body = [
    'blocks' => [
        [
            'type' => 'paragraph',
            'data' => [
                'text' => 'ГКП на ПХВ «Национальный научный центр развития здравоохранения имени Салидат Каирбековой» МЗ РК (Управление ОТЗ Департамента рациональной клинической практики) объявляет конкурс на привлечение внешних экспертов на возмездной основе для подготовки отчетов по Оценке технологий здравоохранения.'
            ]
        ],
        [
            'type' => 'header',
            'data' => [
                'text' => 'Квалификационные требования к экспертам',
                'level' => 3
            ]
        ],
        [
            'type' => 'list',
            'data' => [
                'style' => 'ordered',
                'items' => [
                    'Высшее медицинское, фармацевтическое или биологическое образование.',
                    'Знание принципов доказательной медицины и навыки работы с международными базами данных (PubMed, Cochrane, Embase и др.).',
                    'Опыт участия в подготовке HTA-/ОТЗ-отчетов или публикаций по оценке эффективности/безопасности медицинских технологий.',
                    'Знание основных НПА по ОТЗ в Республике Казахстан (приказ № 215 МЗ РК и сопутствующие методические рекомендации).',
                    'Владение методами фармакоэкономического анализа (CUA, CEA, BIA), навыки работы в Excel, R, TreeAge или аналогичных пакетах.',
                    'Свободное чтение профессиональной литературы на английском языке.'
                ]
            ]
        ],
        [
            'type' => 'header',
            'data' => [
                'text' => 'Функциональные обязанности',
                'level' => 3
            ]
        ],
        [
            'type' => 'list',
            'data' => [
                'style' => 'unordered',
                'items' => [
                    'Проведение систематического поиска и критической оценки клинических данных.',
                    'Разработка и валидация экономических моделей, расчёт показателей ICER и бюджетного влияния.',
                    'Соблюдение установленных сроков и требований к качеству отчётов.'
                ]
            ]
        ],
        [
            'type' => 'header',
            'data' => [
                'text' => 'Порядок подачи заявок',
                'level' => 3
            ]
        ],
        [
            'type' => 'paragraph',
            'data' => [
                'text' => 'Резюме, сопроводительное письмо и перечень выполненных проектов/публикаций направлять на электронный адрес: a.assemov@nrchd.kz'
            ]
        ],
        [
            'type' => 'paragraph',
            'data' => [
                'text' => 'По вопросам конкурса: тел. +7 (7172) 648-950 (вн. 1118).'
            ]
        ],
        [
            'type' => 'paragraph',
            'data' => [
                'text' => 'Приём заявок ведётся с даты опубликования объявления до 18:00 5 августа 2025 года. Результаты конкурса будут сообщены кандидатам не позднее чем через 10 рабочих дней после даты окончания приёма заявок.'
            ]
        ],
        [
            'type' => 'paragraph',
            'data' => [
                'text' => 'Примечание. Конкурс проводится в соответствии с Порядком проведения ОТЗ, утверждённым приказом № 215 МЗ РК.'
            ]
        ]
    ]
];

// Создаем новую вакансию
$vacancy = new Vacancy();
$vacancy->title = 'Объявление о привлечении внешних экспертов для проведения Оценки технологий здравоохранения (ОТЗ)';
$vacancy->slug = Str::slug($vacancy->title); // Автоматически генерируем slug из заголовка
$vacancy->excerpt = 'ГКП на ПХВ «Национальный научный центр развития здравоохранения имени Салидат Каирбековой» МЗ РК объявляет конкурс на привлечение внешних экспертов на возмездной основе для подготовки отчетов по Оценке технологий здравоохранения.';
$vacancy->body = $body; // Содержимое в формате Editor.js
$vacancy->city = 'Астана';
$vacancy->department = 'Управление ОТЗ Департамента рациональной клинической практики';
$vacancy->employment_type = 'Проектная работа';
$vacancy->status = 'published';
$vacancy->published_at = Carbon::now();

// Сохраняем вакансию в базу данных
$vacancy->save();

echo "Вакансия успешно создана! ID: " . $vacancy->id . "\n";
