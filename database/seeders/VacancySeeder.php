<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Vacancy;
use Illuminate\Support\Str;
use Illuminate\Support\Carbon;

class VacancySeeder extends Seeder
{
    /**
     * Запуск сидера для создания первой вакансии
     *
     * @return void
     */
    public function run()
    {
        // Создаем содержимое вакансии в формате Editor.js
        $body = [
            'blocks' => [
                [
                    'type' => 'paragraph',
                    'data' => [
                        'text' => 'ГКП на ПХВ «Национальный научный центр развития здравоохранения имени Салидат Каирбековой» МЗ РК (Управление ОТЗ Департамента рациональной клинической практики) объявляет конкурс на привлечение внешних экспертов на возмездной основе для подготовки отчетов по Оценке технологий здравоохранения.'
                    ]
                ],
                [
                    'type' => 'header',
                    'data' => [
                        'text' => 'Квалификационные требования к экспертам',
                        'level' => 3
                    ]
                ],
                [
                    'type' => 'list',
                    'data' => [
                        'style' => 'ordered',
                        'items' => [
                            'Высшее медицинское, фармацевтическое или биологическое образование.',
                            'Знание принципов доказательной медицины и навыки работы с международными базами данных (PubMed, Cochrane, Embase и др.).',
                            'Опыт участия в подготовке HTA-/ОТЗ-отчетов или публикаций по оценке эффективности/безопасности медицинских технологий.',
                            'Знание основных НПА по ОТЗ в Республике Казахстан (приказ № 215 МЗ РК и сопутствующие методические рекомендации).',
                            'Владение методами фармакоэкономического анализа (CUA, CEA, BIA), навыки работы в Excel, R, TreeAge или аналогичных пакетах.',
                            'Свободное чтение профессиональной литературы на английском языке.'
                        ]
                    ]
                ],
                [
                    'type' => 'header',
                    'data' => [
                        'text' => 'Функциональные обязанности',
                        'level' => 3
                    ]
                ],
                [
                    'type' => 'list',
                    'data' => [
                        'style' => 'unordered',
                        'items' => [
                            'Проведение систематического поиска и критической оценки клинических данных.',
                            'Разработка и валидация экономических моделей, расчёт показателей ICER и бюджетного влияния.',
                            'Соблюдение установленных сроков и требований к качеству отчётов.'
                        ]
                    ]
                ],
                [
                    'type' => 'header',
                    'data' => [
                        'text' => 'Порядок подачи заявок',
                        'level' => 3
                    ]
                ],
                [
                    'type' => 'paragraph',
                    'data' => [
                        'text' => 'Резюме, сопроводительное письмо и перечень выполненных проектов/публикаций направлять на электронный адрес: a.assemov@nrchd.kz'
                    ]
                ],
                [
                    'type' => 'paragraph',
                    'data' => [
                        'text' => 'По вопросам конкурса: тел. +7 (7172) 648-950 (вн. 1118).'
                    ]
                ],
                [
                    'type' => 'paragraph',
                    'data' => [
                        'text' => 'Приём заявок ведётся с даты опубликования объявления до 18:00 5 августа 2025 года. Результаты конкурса будут сообщены кандидатам не позднее чем через 10 рабочих дней после даты окончания приёма заявок.'
                    ]
                ],
                [
                    'type' => 'paragraph',
                    'data' => [
                        'text' => 'Примечание. Конкурс проводится в соответствии с Порядком проведения ОТЗ, утверждённым приказом № 215 МЗ РК.'
                    ]
                ]
            ]
        ];

        // Создаем первую вакансию
        Vacancy::create([
            'title' => 'Объявление о привлечении внешних экспертов для проведения Оценки технологий здравоохранения (ОТЗ)',
            'slug' => 'obyavlenie-o-privlechenii-vneshnikh-ekspertov-dlya-provedeniya-otsenki-tekhnologiy-zdravookhraneniya-otz',
            'excerpt' => 'ГКП на ПХВ «Национальный научный центр развития здравоохранения имени Салидат Каирбековой» МЗ РК объявляет конкурс на привлечение внешних экспертов на возмездной основе для подготовки отчетов по Оценке технологий здравоохранения.',
            'body' => $body,
            'city' => 'Астана',
            'department' => 'Управление ОТЗ Департамента рациональной клинической практики',
            'employment_type' => 'Проектная работа',
            'status' => 'published',
            'published_at' => Carbon::now(),
        ]);

        // Создаем вторую вакансию
        Vacancy::create([
            'title' => 'Главный специалист отдела фармакоэкономики',
            'slug' => 'glavnyy-spetsialist-otdela-farmakoekonomiki',
            'excerpt' => 'ННЦРЗ имени С. Каирбековой приглашает на работу главного специалиста отдела фармакоэкономики с опытом работы и знанием международных методик оценки медицинских технологий.',
            'body' => [
                'blocks' => [
                    [
                        'type' => 'header',
                        'data' => [
                            'text' => 'Требования к кандидату:',
                            'level' => 3
                        ]
                    ],
                    [
                        'type' => 'list',
                        'data' => [
                            'style' => 'unordered',
                            'items' => [
                                'Высшее образование в области здравоохранения, фармации, экономики здравоохранения',
                                'Опыт работы от 3-х лет в сфере оценки технологий здравоохранения или смежных областях',
                                'Знание методов фармакоэкономического анализа и принципов доказательной медицины',
                                'Уверенное владение MS Excel и статистическими программами',
                                'Свободное владение русским и казахским языками, знание английского языка (не ниже уровня B2)'
                            ]
                        ]
                    ],
                    [
                        'type' => 'header',
                        'data' => [
                            'text' => 'Обязанности:',
                            'level' => 3
                        ]
                    ],
                    [
                        'type' => 'list',
                        'data' => [
                            'style' => 'unordered',
                            'items' => [
                                'Проведение фармакоэкономических исследований',
                                'Подготовка аналитических отчетов по оценке медицинских технологий',
                                'Работа с научными базами данных и медицинской литературой',
                                'Участие в разработке методических рекомендаций',
                                'Анализ международного опыта в области ОТЗ и адаптация лучших практик'
                            ]
                        ]
                    ],
                    [
                        'type' => 'header',
                        'data' => [
                            'text' => 'Мы предлагаем:',
                            'level' => 3
                        ]
                    ],
                    [
                        'type' => 'list',
                        'data' => [
                            'style' => 'unordered',
                            'items' => [
                                'Официальное трудоустройство',
                                'Конкурентную заработную плату',
                                'Профессиональный рост и развитие',
                                'Работу в команде высококвалифицированных специалистов',
                                'Возможность участия в международных проектах'
                            ]
                        ]
                    ],
                ]
            ],
            'city' => 'Астана',
            'department' => 'Отдел фармакоэкономики',
            'employment_type' => 'Полная занятость',
            'status' => 'published',
            'published_at' => Carbon::now()->subDays(5),
        ]);

        $this->command->info('Вакансии успешно созданы!');
    }
}
